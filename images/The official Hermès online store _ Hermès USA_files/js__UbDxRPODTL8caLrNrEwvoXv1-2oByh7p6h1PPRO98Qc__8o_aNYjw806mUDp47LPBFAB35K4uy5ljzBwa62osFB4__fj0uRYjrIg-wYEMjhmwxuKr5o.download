Drupal.locale = { 'pluralFormula': function ($n) { return Number(($n!=1)); }, 'strings': {"":{"Hide":"Hide","hermes_global.select":"- Select -","hermes_global.telephone":"Telephone number","hermes_global.month":"Month","hermes_global.day":"day","hermes_global.year":"year","hermes_commerce.find":"Find","hermes-global-translations.total":"Total","hermes-global-translations.ref":"Ref","hermes-global-translations.welcome.user":"Welcome, {{name}}  !","hermes-global-translations.welcome-back":"Hello {{firstname}} {{lastname}}!","hermes-global-translations.welcome-back.byline":"Great to see you again!","hermes-global-translations.see-you-soon":"See you soon {{name}} !","hermes-global-translations.view-cart":"View cart","hermes_checkout.checkout.cart-items.qty.label":"Qty","hermes_checkout.checkout.summary.number_of_items.label":"Number of items","hermes_checkout.tray.exchange.summary.number_of_items":"Qty of returned items","hermes_checkout.tray.exchange.summary.taxes":"Taxes","hermes_checkout.tray.exchange.summary.shipping":"Shipping","hermes_checkout.tray.cart.items.ref":"Ref.","hermes_checkout.tray.order_list.items.qty":"Qty","hermes_checkout.tray.order_list.items.select.Select":"Select a reason","hermes_checkout.tray.return_details.heading.returnedItems":"Returned items","hermes_checkout.tray.return_details.heading.exchangeNote":"Exchange note","hermes_checkout.tray.return_details.heading.pickupAddress":"Pick up address","hermes_checkout.tray.return_details.heading.pickupTime":"Pick up time","hermes_checkout.modules.filters.clear.label":"Clear","hermes_checkout.tray.order_list.cta.track_this_order":"Track your order","hermes_checkout.tray.order_list.cta.exchange_this_order":"Request an exchange","hermes_checkout.tray.order_list.cta.refund_this_order":"Request refund","hermes_checkout.user.profile.address.edit.label":"Edit","hermes_checkout.user.profile.name.label":"Name","hermes_checkout.user.profile.email.label":"Email","hermes_checkout.user.profile.password.label":"Password","hermes_checkout.user.profile.DOB.label":"Date of birth","hermes_checkout.user.profile.billingaddress.label":"Billing address","hermes_checkout.user.profile.telephone.label":"Telephone","node--hermes-product-display-default.less-details":"See less","hermes-media-gallery-media-asset.view-more":"See more","page--hermes-global--find-store.use-my-current-location":"Use my current location","hermes_product.total-for-selection":"Total for selection","hermes_checkout.checkout.cart.color.label":"Color:","hermes_checkout.checkout.cart.size.label":"Size:","hermes-global-translations.order-number":"Order #","hermes_checkout.tray.order_list.cta.return_details":"Return details","hermes_checkout.tray.order_list.cta.exchange_details":"Exchange details","hermes-account--profile.remove":"Delete","hermes_checkout.tray.return_details.heading.returnNumber":"Return n\u00b0","form-hermes-checkout-payment.order-summary":"Order Summary","hermes-search-result.button-label":"Apply","form--hermes-checkout--payment.3ds-reassurance.indroduction":"Your payment is verified and secured thanks to the 3D Secure system.","form--hermes-checkout--payment.3ds-reassurance.more-link-label":"More information","form--hermes-checkout--payment.3ds-reassurance.details":"Payments are authenticated and secured thanks to the 3D Secure system. This device is also known under the names of \\\u0022Verified by Visa\u00ae\\\u0022, \\\u0022MasterCard\u00ae SecureCode\\\u0022 or \\\u0022American Express SafeKey\u00ae\\\u0022. During payment, the bank asks the Internet user personal information to verify the identity of the card holder and to validate the transaction. Once the 3D Secure code is keyed in and validated by your bank, your order is finalized. You will then receive an order confirmation email. 3D Secure authentication is unique to each bank. For any questions concerning your 3D Secure code, please contact your bank directly.","hermes-checkout-delivery-form.shipping-message":"One of your items may have a shipping delay. Please go through your cart for more information.","hermes-checkout-delivery-form.see-cart":"*","hermes.checkout.cart.bag_tray.item.delete.label":"Delete {{name}} item","hermes_checkout.tray.order_list.items.return.linked_product":"This reference can not be returned separately. The products that compose the set have been automatically selected.","hermes.store_locator.see_more":"See more","hermes.accessibility.close_tray":"Close","hermes_checkout.checkout.summary.additional_tax_message":"New Zealand orders may be subject to additional import duties and or taxes levied by New Zealand customs which are the responsibility of the receiver.","hermes_global.personal_address":"Personal Address","hermes.product.look.checkbox.add.product":"Add Product to selection","hermes.checkout.cart.delete_item":"Decrease quantity","hermes.checkout.quantity":"Quantity","hermes.checkout.cart.add_item":"Increase quantity","page--hermes-global--find-store.reset-search-field":"Reset search field","hermes.commerce.product_locator.title":"Find in store","hermes.commerce.product_locator.color.label":"Color","hermes.commerce.product_locator.size.label":"Size","hermes.commerce.product_locator.product_information.label":"Product information","hermes.commerce.product_locator.search.placeholder":"Address, city, zip code...","page-hermes-product-locator-more-details-open-toggle":"More details","hermes.payment_methods.label":"Payment methods","hermes.checkout.payment.accessibility.secure_system":"3D Secure system","page-hermes-product-locator-modify-button":"Change","hermes.store_locator.map_view_of_stores_title":"Map view of stores","page-hermes-product-locator-details-distance":"Distance","page-hermes-product-locator-details-is-limited-availability":"Limited availability","page-hermes-product-locator-details-is-available":"Available in store","page-hermes-product-locator-is-limited-msg-toggle":"The availability of this product cannot be guaranteed. For more information, please contact us.","page-hermes-product-locator-details-phone":"Telephone","page-hermes-product-locator-details-open-new-window":"new window","page-hermes-product-locator-no-store-close-msg":"There is no nearby store but here are the closest matches","hermes.store_locator.accessibility.see_more":"See more stores","hermes.product_locator.title-accessibility.find-stores":"Find a store","hermes.store_locator.list_view_of_stores_title":"List view of stores","hermes_account_info_wechat-linked":"Wechat account linked","hermes_account_info_wechat-not-linked":"Wechat account not linked","hermes_features_commerce_products.available-top-size":"Top size","hermes_features_commerce_products.available-bottom-size":"Bottom size","hermes_features_commerce_products.current_available-top-size":"Actual top size","hermes_features_commerce_products.current_available-bottom-size":"Actual bottom size","hermes.accessibility.volume":"Volume:","hermes-global-translations.welcome-back.wechat.linked":"Great to see you again! \u003Cbr\u003EYou have successfully linked your WeChat account.","hermes.accessibility.image-zoom":"Image zoom","hermes.accessibility.page-product.color":"color","hermes.accessibility.page-product.size":"Size","hermes.accessibility.page-product.change":"change","page--hermes-global--find-store.value-label":"Find a store, autocomplete Google","hermes_checkout.tray.exchange_return.label_reason":"Please select a reason *","hermes_checkout.user.profile.civility.sama":"\u69d8","hermes_features_commerce_products.change_available-top-size":"change top size","hermes_features_commerce_products.change_available-bottom-size":"change bottom size","hermes-global-translations.your-account-has-been-created-info-banner":"{{name}} welcome to Hermes.com! We can confirm your account has been created successfully!","hermes_global.close-info-banner-accessibility":"Close the notification","hermes-global-translations.color":"Color","hermes-global-translations.your-account-has-been-created-info-banner-wechat":"{{firstname}} {{lastname}} welcome to Hermes.com! Your account has been successfully created and linked to your WeChat account.","page-hermes-product-locator-accessibility-find-in-store-hours":"Opening\/Closing hours","hermes.footer.social.new-tab":"New tab","hermes_notification.cart.add":"This item has been added to the cart","hermes_notification.cart.standard-delivery":"\u2022 Request an exchange or return online","page-hermes-product-locator-e-reservation-booking-button-text":"Reserve in store","hermes-personalization-message":"Your text","hermes-personalization-font":"Font","hermes-personalization-fontSize":"Font size","hermes-personalization-fontColor":"Font color","hermes-global-translations.warning":"warning","hermes.accessibility.page-product.select-size":"select the size","hermes.checkout.summary":"Summary","hermes_checkout.checkout.summary.no-return-possible":"Personalized product cannot be returned or exchanged","hermes.personalization.your-personalization":"Your personalization","hermes.ereservation.tray.request_confirm.product.title":"Product information","hermes.ereservation.tray.request_confirm.customer.title":"Customer information","hermes.ereservation.tray.request_confirm.store.title":"Store information","hermes.ereservation.tray.request_confirm.confirm.text":"You are about to confirm e-reservation request","hermes.ereservation.tray.request_confirm.taxes.text":"Price does not include applicable taxes.","hermes-checkout-payment-global-error":"Oops, something\u2019s gone wrong. Please try again later.","hermes_checkout.tray.exchange.summary.adjustement_negative":"Return","hermes-personalization-position":"Stamp zone","hermes-personalization-exterior-material":"Outer leather","hermes-personalization-exterior-color":"Exterior color","hermes-personalization-lining-color":"Lining color","hermes-personalization-marking":"Marking","hermes-personalization-size":"Size","hermes-personalization-font-style":"Font style","hermes-personalization-color":"Color","hermes-personalization-leather":"Leather","hermes_checkout.exchange_return.tray.download-duty-proforma":"Print proforma","hermes-personalization-typography":"Typography","hermes-personalization-bk-coloris1":"Color 1","hermes-personalization-bk-coloris2":"Color 2","hermes-account--profile-info-page.no-card-information":"You did not store card information.","hermes-account--profile.expired":"Expired","hermes-account--profile-info-page.card-deleted":"Your card has been successfully deleted","hermes.product-page.watch-case-size":"Case size","hermes_checkout.tray.exchange.summary.shipping.excltax":"Excl. Tax","hermes.product-page.color-watch-strap":"Strap","hermes.product-page.dimensions-watch-strap-int":"Wrist circumference","hermes.product-page.dimensions-watch-strap-imp":"Wrist circumference","hermes_checkout.tray.exchange_return.method.pick_up.ineligible_return":"E return is currently not available at this address, please contact Customer Service for assistance."}} };
;/*})'"*/
;/*})'"*/
(function ($) {

Drupal.behaviors.textarea = {
  attach: function (context, settings) {
    $('.form-textarea-wrapper.resizable', context).once('textarea', function () {
      var staticOffset = null;
      var textarea = $(this).addClass('resizable-textarea').find('textarea');
      var grippie = $('<div class="grippie"></div>').mousedown(startDrag);

      grippie.insertAfter(textarea);

      function startDrag(e) {
        staticOffset = textarea.height() - e.pageY;
        textarea.css('opacity', 0.25);
        $(document).mousemove(performDrag).mouseup(endDrag);
        return false;
      }

      function performDrag(e) {
        textarea.height(Math.max(32, staticOffset + e.pageY) + 'px');
        return false;
      }

      function endDrag(e) {
        $(document).unbind('mousemove', performDrag).unbind('mouseup', endDrag);
        textarea.css('opacity', 1);
      }
    });
  }
};

})(jQuery);

;/*})'"*/
;/*})'"*/
this["APP"] = this["APP"] || {};
this["APP"]["templates"] = this["APP"]["templates"] || {};
this["APP"]["templates"]["backToTop"] = '<button class="back-to-top-desktop grid-list-top-button-wrapper"> <span class="sr-only">{{back_to_top}}</span><svg nopin="nopin" class="icon-back-top-desktop" aria-hidden="true" focusable="false"><use xlink:href="#back"/></svg></button> <button class="back-to-top-mobile grid-list-top-button-wrapper"> <span class="sr-only">{{back_to_top}}</span><svg nopin="nopin" class="icon-back-top-mobile" aria-hidden="true" focusable="false"><use xlink:href="#back-mobile"/></svg></button>';
this["APP"]["templates"]["cartItems"] = '<ul class="cart-products"> {{#items}}<li id="{{sku_trim}}"><div class="cart-product-container"> <button type="button" class="delete" aria-label="' + Drupal.t('hermes.checkout.cart.bag_tray.item.delete.label') + '"> <span>{{remove_from_cart}}</span><svg aria-hidden="true" class="icon icon-close" focusable="false"><use xlink:href="#close"></use></svg></button><div class="cart-product-infos"> {{^is_perso_leather}} <a href="/{{locale}}{{url}}" class="cart-product-name">{{/is_perso_leather}} {{#image}} <img src="{{image}}&fmt=jpg&qlt=60&wid=100&hei=100" alt="" class="cart-product-media"> {{/image}} {{#name}}<p class="cart-product-name-label"> {{name}} <span class="sr-only">,</span></p> {{/name}} {{^is_perso_leather}} {{#set_items}} {{#display_single_line}}<div class="cart-product-details cart-set-item"> {{#color}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}} <span class="sr-only">,</span></p> {{/color}} {{#size}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}} <span class="sr-only">,</span></p> {{/size}} {{#metal_titration1}}<p> {{metal_titration1}} <span class="sr-only">,</span></p> {{/metal_titration1}} {{#metal_titration2}}<p> {{metal_titration2}} <span class="sr-only">,</span></p> {{/metal_titration2}} {{#metal_titration3}}<p> {{metal_titration3}} <span class="sr-only">,</span></p> {{/metal_titration3}}</div> {{/display_single_line}} {{^display_single_line}}<div class="cart-product-details cart-set-item"> {{name}} <span class="sr-only">,</span> {{#color}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}} <span class="sr-only">,</span></p> {{/color}} {{#size}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}} <span class="sr-only">,</span></p> {{/size}} {{#metal_titration1}}<p> {{metal_titration1}} <span class="sr-only">,</span></p> {{/metal_titration1}} {{#metal_titration2}}<p> {{metal_titration2}} <span class="sr-only">,</span></p> {{/metal_titration2}} {{#metal_titration3}}<p> {{metal_titration3}} <span class="sr-only">,</span></p> {{/metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></div> {{/display_single_line}} {{/set_items}} {{^set_items}}<div class="cart-product-details"> {{#color}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}} <span class="sr-only">,</span></p> {{/color}} {{#size}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}} <span class="sr-only">,</span></p> {{/size}} {{#metal_titration1}}<p> {{metal_titration1}} <span class="sr-only">,</span></p> {{/metal_titration1}} {{#metal_titration2}}<p> {{metal_titration2}} <span class="sr-only">,</span></p> {{/metal_titration2}} {{#metal_titration3}}<p> {{metal_titration3}} <span class="sr-only">,</span></p> {{/metal_titration3}} {{#model_size}}<p> ' + Drupal.t('hermes.product-page.watch-case-size') + ': {{model_size}} <span class="sr-only">,</span></p> {{/model_size}} {{#color_watch_strap}}<p> ' + Drupal.t('hermes.product-page.color-watch-strap') + ': {{color_watch_strap}} <span class="sr-only">,</span></p> {{/color_watch_strap}} {{#dimensions_watch_strap_int}}<p> ' + Drupal.t('hermes.product-page.dimensions-watch-strap-int') + ': {{dimensions_watch_strap_int}} <span class="sr-only">,</span></p> {{/dimensions_watch_strap_int}} {{#dimensions_watch_strap_imp}}<p> ' + Drupal.t('hermes.product-page.dimensions-watch-strap-imp') + ': {{dimensions_watch_strap_imp}} <span class="sr-only">,</span></p> {{/dimensions_watch_strap_imp}} <span>{{sku_reference}}: {{sku}}</span></div> {{/set_items}} {{#display_single_line}} {{#display_single_line_sku}}<p class="cart-product-details"> <span>{{sku_reference}}: {{display_single_line_sku}}</span></p> {{/display_single_line_sku}} {{/display_single_line}} {{/is_perso_leather}} {{#dku}} {{#is_perso_beltkit}} {{#buckle_title}}<div class="cart-product-details"><p>{{buckle_title}}</p> <span class="sr-only">,</span><p> ' + Drupal.t('hermes-personalization-color') + ': {{buckle_color}} <span class="sr-only">,</span></p> <span>{{sku_reference}}: {{buckle_sku}}</span> <span class="sr-only">,</span></div></br> {{/buckle_title}} {{/is_perso_beltkit}} {{^is_perso_leather}}<p class="cart-product-name-label cart-personalized-product-name-label"> ' + Drupal.t('hermes.personalization.your-personalization') + ' <span class="sr-only">,</span></p> {{/is_perso_leather}}<div class="cart-product-details"> {{#buckle_title}}<p> {{strap_title}} <span class="sr-only">,</span></p> {{/buckle_title}} {{#options}} {{#perso_info}} {{#personalization_info_properties}} {{#exterior_material}} {{#lining_material}} {{#is_perso_smlg}}<p> ' + Drupal.t('hermes-personalization-leather') + ' : {{exterior_material}} / {{lining_material}} <span class="sr-only">,</span></p> {{/is_perso_smlg}} {{/lining_material}} {{/exterior_material}} {{#exterior_color}}<p> {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris1') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-exterior-color') + ' {{/is_perso_smlg}} : {{exterior_color}} <span class="sr-only">,</span></p> {{/exterior_color}} {{#lining_color}}<p> {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris2') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-lining-color') + ' {{/is_perso_smlg}} : {{lining_color}} <span class="sr-only">,</span></p> {{/lining_color}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-marking') + ': <span class="perso-silk-marking {{font_class}}">{{initials}}</span> <span class="sr-only">,</span></p> {{#is_perso_smlg}} {{#position}}<p> ' + Drupal.t('hermes-personalization-position') + ': {{position}} <span class="sr-only">,</span></p> {{/position}} {{/is_perso_smlg}} {{#font}}<p> ' + Drupal.t('hermes-personalization-typography') + ': {{font}} <span class="sr-only">,</span></p> {{/font}} {{#is_perso_smlg}} {{#font_size}}<p> ' + Drupal.t('hermes-personalization-fontSize') + ': {{font_size}} <span class="sr-only">,</span></p> {{/font_size}} {{/is_perso_smlg}} {{#style}}<p> ' + Drupal.t('hermes-personalization-fontColor') + ': {{style}} <span class="sr-only">,</span></p> {{/style}} {{/initials}} {{#strap_size}}<p> ' + Drupal.t('hermes-personalization-size') + ': {{strap_size}} <span class="sr-only">,</span></p> {{/strap_size}} {{/personalization_info_properties}} {{#strap_sku}} <span>{{sku_reference}}: {{strap_sku}}</span> <span class="sr-only">,</span> {{/strap_sku}} {{/perso_info}} {{/options}}</div> {{/dku}} {{^is_perso_leather}}</a> {{/is_perso_leather}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p>{{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p>{{/shipping_information}}</div><div class="cart-product-quantity-price"> <span class="cart-product-quantity {{#dku}}cart-display-none{{/dku}}">{{^dku}} <button type="button" data-modifier="-1" class="product-quantity-minus product-quantity-update" aria-label="' + Drupal.t('hermes.checkout.cart.delete_item') + '" aria-describedby="qty-{{sku_trim}}">-</button> {{/dku}}<p id="qty-{{sku_trim}}" aria-atomic="true"> <span id="product-quantity" data-max="{{max_sale_qty}}" data-step="{{qty_increments}}" data-sku="{{sku}}" data-image="{{image}}&fmt=jpg&qlt=60" aria-atomic="true">{{qty}}</span> <span class="sr-only" aria-atomic="true">items</span></p> {{^dku}} <button type="button" data-modifier="1" class="product-quantity-update {{#max_reached}}disabled{{/max_reached}}" aria-label="' + Drupal.t('hermes.checkout.cart.add_item') + '" aria-describedby="qty-{{sku_trim}}">+</button> {{/dku}}</span><p class="cart-product-price {{#dku}}cart-product-price-personalize-product{{/dku}}">{{final_price}}</p></div></div><p class="sr-only"> ' + Drupal.t('hermes-global-translations.warning') + '</p><p class="cart-product-excluded-material"></p></li> {{/items}}</ul>';
this["APP"]["templates"]["cartSummary"] = '{{#total}}<div class="order-details cart-details"><ul class="order-products"> {{#items}}<li class="order-product-row"><div class="description-col"> <a href="/{{locale}}{{url}}">{{#image}} <img nopin="nopin" src="{{image}}&$product_item_grid_b$&resMode=&wid=100&hei=100&qlt=80" alt="" class="order-product-media miniature"> {{/image}}<div class="order-product-infos"> <span class="order-product-name">{{name}}</span> {{#set_items}} {{#display_single_line}}<p class="order-product-details order-set-item"> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}}</p> {{/display_single_line}} {{^display_single_line}}<p class="order-product-details order-set-item"> {{name}}<br> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p> {{/display_single_line}} {{/set_items}} {{^set_items}}<p class="order-product-details"> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p><p id="product-quantity-summary" class="input-disable" data-max="{{max_sale_qty}}" data-step="{{qty_increments}}" data-sku="{{sku}}" data-image="{{image}}&fmt=jpg&qlt=60"> ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</p><p>{{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}}</p> {{/set_items}} {{#display_single_line}} {{#display_single_line_sku}}<p class="cart-product-details"> <span>{{sku_reference}}: {{display_single_line_sku}}</span></p> {{/display_single_line_sku}} {{/display_single_line}}</div><div class="amount-col"><p class="cart-product-price">{{final_price}}</p></div></a> {{#several_quantities}} {{#image}} <a class="miniature additional" href="/{{locale}}{{url}}" aria-hidden="true" tabindex="-1"><img nopin="nopin" src="{{image}}&$product_item_grid$&resMode=&wid=100&hei=100&qlt=80" alt="" class="order-product-media"></a> {{/image}} {{/several_quantities}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p>{{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p>{{/shipping_information}}</div></li> {{/items}}</ul> {{#more_products_number}}<div class="additional-products-number">{{more_products_number}}</div>{{/more_products_number}}<div class="total-wrapper"><div class="separator-border-facturette"></div><div class="subtotal-wrapper"><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart titre-taxe-cart">{{subtotal_label}}</h3><p class="cart-details-value">{{subtotal}}</p></div> {{#is_personalized}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart"> {{shipping_label}}</h3><p class="cart-details-value">{{shipping_amount_product_page}}</p></div><p id="cart-details-help" class="cart-shipping-method cart-details-help"> {{shipping_method_label}} {{#duration_label}}({{duration_label}}){{/duration_label}}</p><p>' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p></div> {{/is_personalized}} {{^is_personalized}} {{^is_refund_exchange_request}} {{#shipping_method_label}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart"> {{shipping_label}}</h3><p class="cart-details-value">{{shipping_amount_product_page}}</p></div> {{#checkout}}<p id="cart-details-help" class="cart-shipping-method cart-details-help"> {{shipping_method_label}} {{#duration_label}}({{duration_label}}){{/duration_label}}</p><p class="cart-web-to-shop-name"> {{#web_shop_name}}{{web_shop_name}}{{/web_shop_name}}{{^web_shop_name}} {{/web_shop_name}}</p> {{/checkout}} {{^checkout}}<p class="cart-details-help additionnal-text">{{shipping_method_label}}</p><p class="cart-details-help additionnal-text">{{express_options_label}}</p> {{/checkout}}</div> {{/shipping_method_label}} {{^shipping_method_label}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart">{{no_shipping_method}}</h3><p class="cart-details-value">--</p></div><p class="cart-details-help additionnal-text">{{no_shipping_method_explained}}</p></div> {{/shipping_method_label}} {{/is_refund_exchange_request}} {{#is_refund_exchange_request}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart">' + Drupal.t('hermes_checkout.checkout.summary.number_of_items.label') + '</h3><p class="cart-details-value">--</p></div><p class="cart-details-help">' + Drupal.t('hermes_checkout.checkout.summary.number_of_items.help') + '</p></div> {{/is_refund_exchange_request}} {{/is_personalized}} {{#tax_amount}} {{#show_tax}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart titre-taxe-cart">{{taxes_label}}</h3><p class="cart-details-value">{{#hasTax}}{{tax_amount}}{{/hasTax}}{{^hasTax}}--{{/hasTax}}</p></div> {{^hasTax}}<p class="cart-details-help taxe-description-cart">{{calculated_taxes_label}}</p> {{/hasTax}}</div> {{/show_tax}} {{/tax_amount}}</div><div class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label">{{total_label}}{{#taxMessage}}<br/>({{taxMessage}}){{/taxMessage}}</h3><p class="cart-details-value taxe-total cart-a-tray-value">{{total}}</p></div></div></div> {{#show_message}}<p class="additional-message-tax"> ' + Drupal.t('hermes_checkout.checkout.summary.additional_tax_message') + '</p> {{/show_message}} {{/total}} {{^hide_payment_options}}<section><h3 id="payment-methods-info" class="sr-only">' + Drupal.t('hermes.payment_methods.label') + '</h3><ul aria-labelledby="payment-methods-info" class="cart-details-logo clearfix"> {{#cards}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/{{data}}@2x.png" alt="{{data_label.name}}"></li> {{/cards}} {{#france_only}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/cb@2x.png" alt="Cb"></li> {{/france_only}} {{#payment_security}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/3D-secure@2x.png" alt="3D Secure"></li> {{/payment_security}} {{#alipay_payment}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/alipay_payment.jpg" alt=""></li> {{/alipay_payment}} {{#wechatpay}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/wechat-payment.png"></li> {{/wechatpay}} {{#hsbc_cup}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/CUP@2x.png"></li> {{/hsbc_cup}}</ul></section> {{/hide_payment_options}}';
this["APP"]["templates"]["categories"] = '{{#categories}}<li> {{^subcategories.length}} <a class="filter-cat-subcat" data-category="{{value}}" data-categoryurl="{{urlParams}}"><span class="filter-label"><span class="filter-label-name">{{name}} {{#total}}({{total}}){{/total}}</span></span></a> {{/subcategories.length}} {{#subcategories.length}} <span class="subcat-trigger filter-cat-subcat{{#selected}} current-cat{{/selected}}" data-category="{{value}}">{{name}} {{#total}}({{total}}){{/total}}</span><ul class="filter-cat-subcats-n2 subcat-target {{^selected}} collapsed{{/selected}}"> {{#subcategories}}<li> {{^subsubcategories.length}} <a class="filter-cat-subcat" data-category="{{value}}" data-categoryurl="{{urlParams}}"><span class="filter-label"><span class="filter-label-name">{{name}} {{#total}}({{total}}){{/total}}</span></span></a> {{/subsubcategories.length}} {{#subsubcategories.length}} <span class="subcat-trigger filter-cat-subcat{{#selected}} current-cat{{/selected}}" data-category="{{value}}">{{name}} {{#total}}({{total}}){{/total}}</span><ul class="filter-cat-subcats-n2 subcat-target {{^selected}} collapsed{{/selected}}"> {{#subsubcategories}}<li> <a class="filter-cat-subcat" data-category="{{value}}" data-categoryurl="{{urlParams}}"><span class="filter-label"><span class="filter-label-name">{{name}} {{#total}}({{total}}){{/total}}</span></span></a></li> {{/subsubcategories}}</ul> {{/subsubcategories.length}}</li> {{/subcategories}}</ul> {{/subcategories.length}}</li> {{/categories}}';
this["APP"]["templates"]["checkoutSummaryAngular"] = '<header role="banner"><div class="angular-title-block"><h2 class="title-medium title-block title-angular-summary">' + Drupal.t('hermes.checkout.summary') + '</h2></div></header> {{#total}}<div class="checkout-order-separator-title"></div><ul class="checkout-order-summary-products block-content-angular"> {{#items}}<li class="checkout-order-summary-product"> {{^is_perso_leather}} <a href="/{{locale}}{{url}}" class="checkout-order-summary-product-container">{{/is_perso_leather}} {{#is_perso_leather}}<div class="checkout-order-summary-product-container"> {{/is_perso_leather}} {{#image}}<div class="checkout-order-summary-product-picture"> <img nopin="nopin" src="{{image}}{{imgQuerySeparator}}$product_item_grid_b$&resMode=&wid=100&hei=100&qlt=80" alt=""></div> {{/image}}<div class="checkout-order-summary-product-infos"> {{#name}} <span class="checkout-order-summary-label checkout-order-summary-label-angular">{{name}}</span> <span class="sr-only">,</span> {{/name}} {{^set_items}}<p class="infos-item-angular"> {{#color}} ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}</br> <span class="sr-only">,</span> {{/color}} {{#options}} {{#perso_info}} {{^is_perso_leather}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{/is_perso_leather}} {{/perso_info}} {{^perso_info}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{/perso_info}} {{/options}} {{^options}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{/options}} {{#size}} ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}</br> <span class="sr-only">,</span> {{/size}}</p> {{/set_items}} {{#dku}}<p class="infos-item-angular"> {{#options}} {{#perso_info}} {{#is_perso_leather}} {{#is_perso_beltkit}} {{#buckle_title}} {{buckle_title}}</br> <span class="sr-only">,</span> ' + Drupal.t('hermes-personalization-color') + ': {{buckle_color}}</br> <span class="sr-only">,</span> ' + Drupal.t('hermes-global-translations.ref') + ': {{buckle_sku}}</br> <span class="sr-only">,</span></br> {{strap_title}}</br> <span class="sr-only">,</span> {{/buckle_title}} {{^buckle_title}}</br> {{/buckle_title}} {{/is_perso_beltkit}} {{#personalization_info_properties}} {{#is_perso_smlg}} {{#exterior_material}} {{#lining_material}} ' + Drupal.t('hermes-personalization-leather') + ' : {{exterior_material}} / {{lining_material}}</br> <span class="sr-only">,</span> {{/lining_material}} {{/exterior_material}} {{/is_perso_smlg}} {{#exterior_color}} {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris1') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-exterior-color') + ' {{/is_perso_smlg}} : {{exterior_color}}</br> <span class="sr-only">,</span> {{/exterior_color}} {{#lining_color}} {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris2') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-lining-color') + ' {{/is_perso_smlg}} : {{lining_color}}</br> <span class="sr-only">,</span> {{/lining_color}} {{#initials}} ' + Drupal.t('hermes-personalization-marking') + ': <span class="{{font_class}}">{{initials}}</span></br> <span class="sr-only">,</span> {{#position}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-position') + ': {{position}}</br> <span class="sr-only">,</span> {{/is_perso_smlg}} {{/position}} {{#font}} ' + Drupal.t('hermes-personalization-font-style') + ': {{font}}</br> <span class="sr-only">,</span> {{/font}} {{#font_size}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-fontSize') + ': {{font_size}}</br> <span class="sr-only">,</span> {{/is_perso_smlg}} {{/font_size}} {{#style}} ' + Drupal.t('hermes-personalization-fontColor') + ': {{style}}</br> <span class="sr-only">,</span> {{/style}} {{/initials}} {{#strap_size}} ' + Drupal.t('hermes-personalization-size') + ': {{strap_size}}</br> <span class="sr-only">,</span> {{/strap_size}} {{/personalization_info_properties}} {{#is_perso_beltkit}} ' + Drupal.t('hermes-global-translations.ref') + ': {{strap_sku}}</br> <span class="sr-only">,</span> {{/is_perso_beltkit}} {{/is_perso_leather}} {{^is_perso_leather}} {{#personalization_info_properties}}</br> <b>' + Drupal.t('hermes.personalization.your-personalization') + ' <span class="sr-only">,</span></b></br> {{#initials}} ' + Drupal.t('hermes-personalization-marking') + ': <span class="perso-silk-marking">{{initials}}</span><br> <span class="sr-only">,</span> {{#font}} ' + Drupal.t('hermes-personalization-typography') + ': {{font}}</br> <span class="sr-only">,</span> {{/font}} {{#style}} ' + Drupal.t('hermes-personalization-fontColor') + ': {{style}}</br> <span class="sr-only">,</span> {{/style}} {{/initials}} {{/personalization_info_properties}} {{/is_perso_leather}} {{/perso_info}} {{/options}}</p> {{/dku}}</div><div class="checkout-order-summary-product-price"><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{final_price}}</p></div> {{^is_perso_leather}}</a> {{/is_perso_leather}} {{#is_perso_leather}}</div> {{/is_perso_leather}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p> {{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p> {{/shipping_information}} {{#prop65_information}}<p class="cart-product-prop65">{{{prop65_information}}}</p> {{/prop65_information}}</li> {{/items}}</ul><div class="checkout-order-separator-beige"></div><div class="checkout-order-summary-price-details block-content-angular"><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular">{{subtotal_label}}</h3><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{subtotal}}</p></div><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular">{{shipping_label}}</h3><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{shipping_amount}}</p></div><p class="checkout-order-summary-shipping checkout-order-summary-shipping-angular"> {{#checkout}} {{shipping_method_label}} {{#duration_label}} ({{duration_label}}){{/duration_label}}{{/checkout}} {{^checkout}}{{shipping_title}} {{#shipping_duration}} ({{shipping_duration}}){{/shipping_duration}}{{/checkout}}</p> {{#is_personalized}}<p class="checkout-order-summary-shipping checkout-order-summary-shipping-angular"> ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p> {{/is_personalized}} {{#web_shop_name}}<p class="cart-web-to-shop-name"> {{web_shop_name}}</p> {{/web_shop_name}} {{#show_tax}}<div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular">{{taxes_label}}</h3><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{tax_amount}}</p></div> {{/show_tax}}</div><div class="checkout-order-summary-price-total checkout-order-summary-price-detail block-content-angular"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular checkout-order-summary-label-angular-total">{{total_label}}{{#taxMessage}} ({{taxMessage}}){{/taxMessage}}</h3><p class="checkout-order-summary-price checkout-order-summary-total-price-angular">{{total}}</p></div> {{#taxes_covered}}<div class="block-taxes-covered"><p class="checkout-order-sumary-taxes-covered">{{taxes_covered}}</p></div> {{/taxes_covered}} {{#show_message}}<div class="block-additional-message-tax"><p class="additional-message-tax"> ' + Drupal.t('hermes_checkout.checkout.summary.additional_tax_message') + '</p></div> {{/show_message}} {{^checkout}} <img alt="merci" lang="fr" class="merci merci-angular" src="/sites/all/themes/custom/hermes/img/Signature-Merci.png"> {{/checkout}} {{/total}}';
this["APP"]["templates"]["checkoutSummary"] = '<header role="banner"><h2 class="title-medium">' + Drupal.t('form-hermes-checkout-payment.order-summary') + '</h2></header> {{#total}}<div class="checkout-order-summary-separator"></div><ul class="checkout-order-summary-products"> {{#items}}<li id="{{sku_trim}}" class="checkout-order-summary-product"> {{^is_perso_leather}} <a href="/{{locale}}{{url}}" class="checkout-order-summary-product-container">{{/is_perso_leather}} {{#is_perso_leather}}<div class="checkout-order-summary-product-container"> {{/is_perso_leather}} {{#image}}<div class="checkout-order-summary-product-picture"> <img nopin="nopin" src="{{image}}&$product_item_grid_b$&resMode=&wid=100&hei=100&qlt=80" alt=""></div> {{/image}}<div class="checkout-order-summary-product-infos"> <span class="checkout-order-summary-label">{{name}}</span> <span class="sr-only">,</span> {{^set_items}}<p> {{#color}} ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}</br> <span class="sr-only">,</span> {{/color}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{#size}} ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}</br> <span class="sr-only">,</span> {{/size}}</p> {{/set_items}} {{#dku}}<p class="checkout-order-summary-label checkout-order-summary-personalized-label">' + Drupal.t('hermes.personalization.your-personalization') + '</p> {{#options}} {{#perso_info}} {{#is_perso_leather}} {{#personalization_info}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-message') + ': <span class="{{font_class}}">{{initials}}</span></p> {{/initials}} {{/personalization_info}} {{#personalization_info_properties}} {{#exterior_material}}<p> ' + Drupal.t('hermes-personalization-exterior-material') + ' : {{exterior_material}} <span class="sr-only">,</span></p> {{/exterior_material}} {{#exterior_color}}<p> ' + Drupal.t('hermes-personalization-exterior-color') + ' : {{exterior_color}} <span class="sr-only">,</span></p> {{/exterior_color}} {{#lining_color}}<p> ' + Drupal.t('hermes-personalization-lining-color') + ' : {{lining_color}} <span class="sr-only">,</span></p> {{/lining_color}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-marking') + ' : {{initials}} <span class="sr-only">,</span></p> {{/initials}}<p> ' + Drupal.t('hermes-personalization-font') + ' : {{position}} / {{font}} / {{font_size}} / {{style}} <span class="sr-only">,</span></p> {{/personalization_info_properties}} {{/is_perso_leather}} {{^is_perso_leather}} {{#personalization_info}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-message') + ': {{initials}}</p> {{/initials}} {{/personalization_info}} {{#personalization_info_properties}} {{#font}}<p> ' + Drupal.t('hermes-personalization-font') + ': {{font}}</p> {{/font}} {{/personalization_info_properties}} {{/is_perso_leather}} {{/perso_info}} {{/options}} {{/dku}}</div><div class="checkout-order-summary-product-price"><p class="checkout-order-summary-price">{{final_price}}</p></div> {{^is_perso_leather}}</a> {{/is_perso_leather}} {{#is_perso_leather}}</div> {{/is_perso_leather}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p> {{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p> {{/shipping_information}} {{#prop65_information}}<p class="cart-product-prop65">{{{prop65_information}}}</p> {{/prop65_information}}<div aria-live="polite"><p id="cart-product-excluded-material-warning" class="sr-only"></p><p class="cart-product-excluded-material"></p></div></li> {{/items}}</ul><div class="checkout-order-summary-separator"></div><div class="checkout-order-summary-price-details"><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{subtotal_label}}</h3><p class="checkout-order-summary-price">{{subtotal}}</p></div><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{shipping_label}}</h3><p class="checkout-order-summary-price">{{shipping_amount}}</p></div><p class="checkout-order-summary-shipping"> {{#checkout}} {{shipping_method_label}} {{#duration_label}}({{duration_label}}){{/duration_label}}{{/checkout}} {{^checkout}}{{shipping_title}} {{#shipping_duration}}({{shipping_duration}}){{/shipping_duration}}{{/checkout}}</p> {{#is_personalized}}<p class="checkout-order-summary-shipping"> ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p> {{/is_personalized}} {{#web_shop_name}}<p class="cart-web-to-shop-name"> {{web_shop_name}}</p> {{/web_shop_name}} {{#show_tax}}<div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{taxes_label}}</h3><p class="checkout-order-summary-price">{{tax_amount}}</p></div> {{/show_tax}}</div><div class="checkout-order-summary-separator"></div><div class="checkout-order-summary-price-total checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{total_label}}{{#taxMessage}} ({{taxMessage}}){{/taxMessage}}</h3><p class="checkout-order-summary-price">{{total}}</p></div> {{#show_message}}<p class="additional-message-tax"> ' + Drupal.t('hermes_checkout.checkout.summary.additional_tax_message') + '</p> {{/show_message}} {{^checkout}}<div class="checkout-order-summary-separator"></div> <img alt="merci" lang="fr" class="merci" src="/sites/all/themes/custom/hermes/img/Signature-Merci.png"> {{/checkout}} {{/total}}';
this["APP"]["templates"]["countryOptions"] = '<option data-cs-mask disabled selected>{{ui.select}}</option> {{#countryData}}<option data-cs-mask value="{{country_id}}">{{country}}</option> {{/countryData}}';
this["APP"]["templates"]["exchangeRequestAddresses"] = '<ul class="checkout-addresses-list select-list"> {{#addresses}}<li class="address select-list-item"> <label for="request-address-{{address_id}}" class="form-radio"><input id="request-address-{{address_id}}" name="request-address" value="{{value_payload}}" type="radio" {{#is_selected}}checked{{/is_selected}}> <span><span class="request-address-name">{{full_name}}</span> <span class="request-address-address">{{address}}</span> <span class="request-address-zip-city">{{zipcode}} {{state}} {{city}}</span> <span class="request-address-country">{{country}}</span> <span class="request-address-telephone">{{telephone}}</span></span></label> {{#ineligible_return}}<div class="ineligible-return-hint"><div class="ineligible-return-content"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.08 5.043H6.67V3.759H8.08v1.284zm-1.411.635H8.08V11H6.67V5.678z" fill="#9D2A1E"/><circle cx="7.5" cy="7.5" r="7" stroke="#9D2A1E"/></svg>' + Drupal.t('hermes_checkout.tray.exchange_return.method.pick_up.ineligible_return') + '</div></div> {{/ineligible_return}}</li> {{/addresses}}</ul>';
this["APP"]["templates"]["exchangeRequestDetailSummary"] = '<section class="checkout-section checkout-summary"><div class="block-wrapper"><div class="details-exchange-totals cart-details"><div data-cs-mask class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.number_of_items') + '</h3><p class="cart-details-value"> {{#totalItems}}{{totalItems}}{{/totalItems}} {{^totalItems}}--{{/totalItems}}</p></div> {{#show_tax}}<div data-cs-mask class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.taxes') + '</h3><p class="cart-details-value"> {{#totalTax}}{{totalTax}}{{/totalTax}} {{^totalTax}}--{{/totalTax}}</p></div> {{/show_tax}}<div data-cs-mask class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.shipping') + ' {{#show_tax}}' + Drupal.t('hermes_checkout.tray.exchange.summary.shipping.excltax') + '{{/show_tax}}</h3><p class="cart-details-value"> {{#totalShipping}}{{totalShipping}}{{/totalShipping}} {{^totalShipping}}--{{/totalShipping}}</p></div> {{#adjustementNegativeDisplay}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.adjustement_negative') + '</h3><p class="cart-details-value"> {{adjustementNegative}}</p></div> {{/adjustementNegativeDisplay}}<div data-cs-mask class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label"> ' + Drupal.t('hermes-global-translations.total') + ' {{#taxMessage}}<br/>({{taxMessage}}){{/taxMessage}}</h3><p class="cart-details-value taxe-total cart-a-tray-value"> {{#totalPrice}}{{totalPrice}}{{/totalPrice}} {{^totalPrice}}--{{/totalPrice}}</p></div></div></div></section>';
this["APP"]["templates"]["exchangeRequestItems"] = '<ul class="cart-products"> {{#items}}<li><div class="cart-product-container"><div class="cart-product-infos"> <a href="/{{locale}}{{url}}" class="cart-product-name">{{#image}} <img src="{{image}}&fmt=jpg&qlt=60&wid=100&hei=100" alt="" class="cart-product-media"> {{/image}} <span class="cart-product-name-label">{{name}}</span> {{#set_items}}<p class="cart-product-details cart-set-item"> {{name}}<br> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#model_size}}' + Drupal.t('hermes.product-page.watch-case-size') + ': {{model_size}}<br>{{/model_size}} {{#color_watch_strap}}' + Drupal.t('hermes.product-page.color-watch-strap') + ': {{color_watch_strap}}<br>{{/color_watch_strap}} {{#dimensions_watch_strap_int}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-int') + ': {{dimensions_watch_strap_int}}<br>{{/dimensions_watch_strap_int}} {{#dimensions_watch_strap_imp}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-imp') + ': {{dimensions_watch_strap_imp}}<br>{{/dimensions_watch_strap_imp}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>' + Drupal.t('hermes_checkout.tray.cart.items.ref') + ' : {{item_id}}</span></p> {{/set_items}} {{^set_items}}<p class="cart-product-details"> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#model_size}}' + Drupal.t('hermes.product-page.watch-case-size') + ': {{model_size}}<br>{{/model_size}} {{#color_watch_strap}}' + Drupal.t('hermes.product-page.color-watch-strap') + ': {{color_watch_strap}}<br>{{/color_watch_strap}} {{#dimensions_watch_strap_int}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-int') + ': {{dimensions_watch_strap_int}}<br>{{/dimensions_watch_strap_int}} {{#dimensions_watch_strap_imp}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-imp') + ': {{dimensions_watch_strap_imp}}<br>{{/dimensions_watch_strap_imp}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>' + Drupal.t('hermes_checkout.tray.cart.items.ref') + ' : {{sku}}</span></p> {{/set_items}}</a><div class="cart-product-quantity-price"> <span class="cart-product-quantity"><button type="button" data-modifier="-1" data-link-id="{{link_id}}" data-item_id="{{item_id}}" data-step="{{qty_increments}}" data-bind="quantity-modifier" class="product-quantity-update {{#min_reached}}disabled{{/min_reached}} {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}" aria-label="' + Drupal.t('hermes.checkout.cart.delete_item') + '" aria-describedby="qty-{{sku_trim}}">-</button><p id="qty-{{sku_trim}}"> <abbr aria-label="' + Drupal.t('hermes.checkout.quantity') + '">' + Drupal.t('hermes_checkout.checkout.cart-items.qty.label') + '</abbr> <span id="product-quantity-no-refund-exchange" class="input-disable {{#refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}">{{qty}}</span> <span id="product-quantity-refund-exchange" class="input-disable {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}">{{refundable_qty}}</span> <span class="sr-only">items</span></p> <button type="button" data-modifier="1" data-link-id="{{link_id}}" data-item_id="{{item_id}}" data-step="{{qty_increments}}" data-bind="quantity-modifier" class="product-quantity-update {{#max_reached}}disabled{{/max_reached}} {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}" aria-label="' + Drupal.t('hermes.checkout.cart.add_item') + '" aria-describedby="qty-{{sku_trim}}">+</button></span><p class="cart-product-price">{{^refundOrExchangeEnabled}}{{purchase_price}}{{/refundOrExchangeEnabled}}{{#refundOrExchangeEnabled}}{{refundable_price}}{{/refundOrExchangeEnabled}}</p></div><div class="cart-return"> {{#isReturnable}}<div class="return_checkbox" data-mode="{{returnType}}"> <label for="{{returnOrExchange}}-item-{{item_id}}"><input data-link-id="{{link_id}}" type="checkbox" data-bind="enableForRefundOrExchange" {{#refundOrExchangeEnabled}}checked{{/refundOrExchangeEnabled}} name="{{returnOrExchange}}-item" {{#disableCheckbox}}disabled{{/disableCheckbox}} value="{{item_id}}" id="{{returnOrExchange}}-item-{{item_id}}"/> {{returnOrExchangeFrontLabel}}</label></div> {{/isReturnable}} {{^isReturnable}}<p class="impossible-return-message"> {{{customerService}}}</p> {{/isReturnable}}<div class="specificmessage {{^specificMessage}}hidden{{/specificMessage}}">{{specificMessage}}</div><div class="specificmessage">{{#link_id}}{{#refundOrExchangeEnabled}}{{^display_single_line}} {{^disableCheckbox}}' + Drupal.t('hermes_checkout.tray.order_list.items.return.linked_product') + '{{/disableCheckbox}} {{/display_single_line}}{{/refundOrExchangeEnabled}}{{/link_id}}</div><div class="return_container form-row clearfix container-fieldset {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}} {{#disableCheckbox}}hidden{{/disableCheckbox}}"> <label>' + Drupal.t('hermes_checkout.tray.exchange_return.label_reason') + '</label> <span class="form-item-select"><select data-cs-mask data-bind="reasonChange" data-link-id="{{link_id}}" data-item_id="{{item_id}}" name="return-reason-{{item_id}}"><option value="" {{^haveReason}}selected="selected"{{/haveReason}} disabled="disabled">Select</option> {{#returnReasons}}<option data-cs-mask {{#selected}}selected="selected"{{/selected}} value="{{reason.value}}">{{reason.name}}</option> {{/returnReasons}}</select> <span data-cs-mask class="label">{{^haveReason}}' + Drupal.t('hermes_checkout.tray.order_list.items.select.Select') + '{{/haveReason}}{{#returnReasons}}{{#selected}}{{reason.name}}{{/selected}}{{/returnReasons}}</span><svg class="icon icon-select" aria-hidden="true"><use xlink:href="#arrow-down"/></svg></span></div></div></div></div></li> {{/items}}</ul>';
this["APP"]["templates"]["exchangeRequestSummary"] = '<section class="checkout-section checkout-summary"><div class="block-wrapper"><div class="checkout-header return-summary-cols"><h2 class="typo-title-level5 return-summary-col"> <button data-cs-mask data-bind="view-order" data-order="{{orderId}}" type="button" aria-controls="cart" aria-expanded="false" class="button" data-tray-trigger="tray-order"> {{orderDate}}<br><p data-cs-mask class="order-number"> ' + Drupal.t('hermes_checkout.tray.return_details.heading.returnNumber') + ' : {{returnId}}</p><svg aria-hidden="true" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#arrow-right"></use></svg></button></h2></div><div class="details-exchange-totals cart-details"><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.number_of_items') + '</h3><p class="cart-details-value"> {{#totalItems}}{{totalItems}}{{/totalItems}} {{^totalItems}}--{{/totalItems}}</p></div><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.shipping') + ' {{#show_tax}}' + Drupal.t('hermes_checkout.tray.exchange.summary.shipping.excltax') + '{{/show_tax}}</h3><p class="cart-details-value"> {{#totalShipping}}{{totalShipping}}{{/totalShipping}} {{^totalShipping}}--{{/totalShipping}}</p></div> {{#show_tax}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.taxes') + '</h3><p class="cart-details-value"> {{#totalItems}} {{#totalTax}}{{totalTax}}{{/totalTax}} {{/totalItems}} {{^totalItems}}--{{/totalItems}}</p></div> {{/show_tax}} {{#adjustementNegativeDisplay}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.adjustement_negative') + '</h3><p class="cart-details-value"> {{adjustementNegative}}</p></div> {{/adjustementNegativeDisplay}}<div class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label"> ' + Drupal.t('hermes-global-translations.total') + ' {{#taxMessage}}<br/>({{taxMessage}}){{/taxMessage}}</h3><p class="cart-details-value taxe-total cart-a-tray-value"> {{#totalPrice}}{{totalPrice}}{{/totalPrice}} {{^totalPrice}}--{{/totalPrice}}</p></div></div></div></section>';
this["APP"]["templates"]["exchangeRequestTimeslots"] = '<ul class="checkout-addresses-list select-list"> {{#timeslots}}<li class="address select-list-item"> <label for="timeslot-{{day}}-{{time}}" class="form-radio"><input id="timeslot-{{day}}-{{time}}" name="request-timeslot" value="{{value_payload}}" type="radio" {{#is_selected}}checked{{/is_selected}}> <span><span class="timeslot-day">{{dayString}}</span> <span class="timeslot-time">{{timeString}}</span></span></label></li> {{/timeslots}}</ul>';
this["APP"]["templates"]["exchangeReturnDetails"] = '<h4 data-cs-mask class="typo-title-level5">{{exchange_return_date}}</h4><p data-cs-mask class="order-number" data-ordernr="{{increment_id}}">' + Drupal.t('hermes_checkout.tray.return_details.heading.returnNumber') + ' {{return_id}}</p><p data-cs-mask> {{status}}<br/></p> {{#can_download_duty_proforma}} <a href="{{proformaDownloadLink}}" class="print-proforma" target="_parent">' + Drupal.t('hermes_checkout.exchange_return.tray.download-duty-proforma') + '</a> {{/can_download_duty_proforma}}<br/><section class="checkout-section"><h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.returnedItems') + '</h2> {{{cartItems}}}</section> {{#request_notes}}<h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.exchangeNote') + '</h2> <span data-cs-mask>{{request_notes}}</span> {{/request_notes}} {{#pickup_address}}<h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.pickupAddress') + '</h2> <span data-cs-mask>{{#pickup_address_name}} {{pickup_address_name}}<br/>{{pickup_address_label}} {{/pickup_address_name}} {{^pickup_address_name}} {{pickup_address}}</span> {{/pickup_address_name}} {{/pickup_address}} {{#pickup_date}}<h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.pickupTime') + '</h2> <span data-cs-mask>{{pickup_date}}<br/> {{pickup_time_readable}}</span> {{/pickup_date}} {{{summary}}}';
this["APP"]["templates"]["exchangeReturnItems"] = '<ul class="cart-products"> {{#items}}<li><div class="cart-product-container"> {{#image}} <a href="/{{locale}}{{url}}"><img src="{{image}}&fmt=jpg&qlt=60&wid=100&hei=100" alt="" class="cart-product-media"></a> {{/image}}<div class="cart-product-infos"> <a href="/{{locale}}{{url}}" class="cart-product-name">{{name}}</a> {{#set_items}}<p class="cart-product-details cart-set-item"> {{name}}<br> {{#color}}{{color}}<br>{{/color}} {{#size}}{{size}}<br>{{/size}} {{#model_size}}' + Drupal.t('hermes.product-page.watch-case-size') + ': {{model_size}}<br>{{/model_size}} {{#color_watch_strap}}' + Drupal.t('hermes.product-page.color-watch-strap') + ': {{color_watch_strap}}<br>{{/color_watch_strap}} {{#dimensions_watch_strap_int}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-int') + ': {{dimensions_watch_strap_int}}<br>{{/dimensions_watch_strap_int}} {{#dimensions_watch_strap_imp}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-imp') + ': {{dimensions_watch_strap_imp}}<br>{{/dimensions_watch_strap_imp}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p> {{/set_items}} {{^set_items}}<p class="cart-product-details"> {{#color}}{{color}}<br>{{/color}} {{#size}}{{size}}<br>{{/size}} {{#model_size}}' + Drupal.t('hermes.product-page.watch-case-size') + ': {{model_size}}<br>{{/model_size}} {{#color_watch_strap}}' + Drupal.t('hermes.product-page.color-watch-strap') + ': {{color_watch_strap}}<br>{{/color_watch_strap}} {{#dimensions_watch_strap_int}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-int') + ': {{dimensions_watch_strap_int}}<br>{{/dimensions_watch_strap_int}} {{#dimensions_watch_strap_imp}}' + Drupal.t('hermes.product-page.dimensions-watch-strap-imp') + ': {{dimensions_watch_strap_imp}}<br>{{/dimensions_watch_strap_imp}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p> {{/set_items}}<div class="cart-product-quantity-price"> <span>' + Drupal.t('hermes_checkout.tray.order_list.items.qty') + '</span> <span class="cart-product-quantity">{{qty}}</span><p class="cart-product-price">{{final_price}}</p></div> {{#return_reason}}<p data-cs-mask class="cart-product-return-reason">{{return_reason}}</p>{{/return_reason}}</div></div></li> {{/items}}</ul>';
this["APP"]["templates"]["filters"] = '<div class="filters-intro"><p class="filters-title typo-title typo-title-level4"> <button class="button button-link tray-close"><svg nopin="nopin" class="icon icon-arrow-left" aria-hidden="true" focusable="false"><use xlink:href="#cross"></use></svg></button> {{filterBy}}</p> <button type="button" form="filter-subcat" class="button-link filter-button-clear"> ' + Drupal.t('hermes_checkout.modules.filters.clear.label') + '</button></div> {{#filters}} {{^hidden}}<div class="section"> <a id="filter-{{id}}" data-name="{{name}}" role="tab" aria-selected="{{#open}}true{{/open}}{{^open}}false{{/open}}" class="filter-legend accordion-toggle ripple-effect typo-title typo-title-level5 ripple" aria-expanded="{{#open}}true{{/open}}{{^open}}false{{/open}}" tabindex="0"><span id="filter-label-{{fname}}">{{name}}</span> <span class="accordion-icon"><svg nopin="nopin" width="10" height="10" aria-hidden="true" focusable="false"><g><rect width="1" height="9" x="4" class="accordion-icon-line accordion-icon-plus"></rect><rect width="9" height="1" y="4" class="accordion-icon-line accordion-icon-minus"></rect></g></svg></span></a> {{#list.length}}<div role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}" class="accordion-content filter-options"><ul> {{#list}}<li> <label for="list-{{fname}}-{{value}}" class="form-checkbox filter-item"><input {{#singleselect}}data-type="single" {{/singleselect}} type="checkbox" name="type" value="{{urlParams}}"{{#selected}} checked="true"{{/selected}} id="list-{{fname}}-{{value}}" aria-describedby="filter-label-{{fname}}"> <span class="filter-item-wrapper clamped-filter"><span class="filter-name sr-only">{{name}}</span> <span class="filter-count sr-only">({{total}})</span><span class="clamped-description" aria-hidden="true"></span></span> <svg nopin="nopin" aria-hidden="true" class="icon icon-check" focusable="false"><use xlink:href="#check"></use></svg></label></li> {{/list}}</ul></div> {{/list.length}} {{#colors.length}}<div role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}" class="accordion-content filter-options filter-options-color"><ul> {{#colors}}<li> <label for="colors-{{fname}}-{{value}}" class="form-checkbox filter-item filter-reversed"><input {{#singleselect}}data-type="single" {{/singleselect}}type="checkbox" name="color" value="{{urlParams}}" id="colors-{{fname}}-{{value}}"{{#selected}} checked="true"{{/selected}} aria-describedby="filter-label-color"> <span class="filter-item-wrapper"><img class="lazyload" data-src="{{damConfig.dam_url_noproto}}{{damConfig.hermes_product_container}}MAIN_COLOR_{{value}}?wid=50&hei=50" alt=""/> <span class="filter-name">{{name}}</span></span> <svg nopin="nopin" aria-hidden="true" class="icon icon-check icon-color-{{value}}" focusable="false"><use xlink:href="#check"></use></svg></label></li> {{/colors}}</ul></div> {{/colors.length}} {{#grid.length}}<div role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}" class="accordion-content filter-options filter-options-grid"><ul> {{#grid}}<li> <label for="grid-{{fname}}-{{value}}" class="form-checkbox filter-item"><input {{#singleselect}}data-type="single" {{/singleselect}}type="checkbox" name="grid" value="{{urlParams}}"{{#selected}} checked="true"{{/selected}} id="grid-{{fname}}-{{value}}" aria-describedby="filter-label-{{fname}}"> <span class="filter-item-wrapper"><span class="filter-name" title="{{name}}">{{name}}</span></span></label></li> {{/grid}}</ul></div> {{/grid.length}} {{#slider}}<div class="accordion-content filter-options filter-options-price" role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}"><div class="form-range"><p class="form-range-recap"> <span class="form-range-recap-value form-range-recap-min" id="slider-{{min.value}}" data-urlparams="{{min.urlParams}}" data-value={{min.value}}>{{min.name}}</span> <span class="form-range-recap-value form-range-recap-max" id="slider-{{max.value}}" data-urlparams="{{max.urlParams}}" data-value={{max.value}}>{{max.name}}</span></p><div class="form-range-wrapper"></div><p aria-live="polite" aria-atomic="true" class="hidden"></p></div></div> {{/slider}}</div> {{/hidden}} {{/filters}}';
this["APP"]["templates"]["listItemProduct"] = '<li class="product-grid-list-item {{#pre_reveal}}pre-reveal{{/pre_reveal}}"><article class="product-item product-item-loading"><a href="{{url}}" aria-label="{{title}}, {{#avg_color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{avg_color}}, {{/avg_color}}{{#more_colors}}{{more_colors}}, {{/more_colors}}{{#mass}}' + Drupal.t('hermes.accessibility.volume') + ' {{mass}}, {{/mass}}{{price}}{{#stockRetail}}, {{stockRetail}}{{/stockRetail}}" data-product="{{sku}}" onclick="updateSelectedProductPosition(this)"><picture class="product-item-picture media-wrap media-wrap-square"> {{#image}}<source data-srcset="{{image}}&$product_item_grid_b$&resMode=&wid=295&hei=295" media="(min-width: 600px) and (max-width: 767px)"><source data-srcset="{{image}}&$product_item_grid_b$&resMode=&wid=650&hei=650" media="(min-width: 768px)"> <img class="lazyload" data-src="{{image}}&$product_item_grid_b$&resMode=&wid=230&hei=230" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="{{title}}"><noscript> <img src="{{image}}&$product_item_grid_b$&resMode=&extend=65,65,65,65" alt="{{title}}"></noscript> {{/image}}</picture><div class="product-item-meta"> {{#showExtra}} {{#dimensions}}<div class="product-item-variants">{{dimensions}}</div> {{/dimensions}} {{/showExtra}} {{#mass_volume}}<div class="product-item-variants">{{mass_volume}}</div> {{/mass_volume}} {{#more_colors}}<div class="product-item-variants">{{more_colors}}</div> {{/more_colors}}<div class="product-item-name">{{title}}</div><div class="product-item-price">{{price}}</div> {{#stockRetail}}<div class="product-item-retail-only-sticker-wrapper"><div class="product-item-retail-only-sticker"> {{stockRetail}}</div></div> {{/stockRetail}}</div></a></article></li>';
this["APP"]["templates"]["manageSocial"] = '{{#availableNetworks}}<div class="form-item form-type-checkbox" data-network="{{availableSingleNetwork}}"> <input type="checkbox" id="edit-{{availableSingleNetwork}}" name="edit-{{availableSingleNetwork}}" class="form-checkbox"> <label for="edit-{{availableSingleNetwork}}"><span>{{ui_connect_with}}</span> <span class="network-name">{{availableSingleNetwork}}</span><span class="connected-username connected-username-{{availableSingleNetwork}}"></span> <svg aria-hidden="true" class="icon icon-check"><use xlink:href="#check"></use></svg><svg aria-hidden="true" class="icon icon-socialnetwork icon-{{availableSingleNetwork}}"><use xlink:href="#{{availableSingleNetwork}}"></use></svg></label></div> {{/availableNetworks}}';
this["APP"]["templates"]["nav"] = '<div id="tray-nav-{{tid}}" aria-hidden="true" class="tray-content tray-nav tray-nav-deep invisible" data-track-nav><div class="tray-content-wrapper hui"><div class="tray-header"><div class="title-tray-container"><svg nopin="nopin" class="icon icon-arrow-left" aria-hidden="true"><use xlink:href="#cross"></use></svg><button aria-label="' + Drupal.t('hermes.accessibility.close_tray') + '" aria-describedby="title-tray-nav-{{tid}}" class="button-tray tray-close"></button><h2 id="title-tray-nav-{{tid}}" class="title-tray">{{name}}</h2></div></div><ul class="nav-list"> {{#subcategories}}<li> {{#has_subcategories}} <button aria-haspopup="dialog" aria-expanded="false" aria-controls="tray-nav-{{tid}}" data-href="{{& path}}" data-nav-item data-generic-tray-trigger="tray-nav-{{tid}}" class="ripple-effect link-to-button-nav-shop"> {{name}}<svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true"><use xlink:href="#arrow-right"></use></svg></button> {{/has_subcategories}} {{^has_subcategories}} <a href="{{& path}}" target="{{& target}}" class="ripple-effect">{{name}}</a> {{/has_subcategories}}</li> {{/subcategories}}</ul> {{#push}}<div class="media nav-hero{{#title}} nav-hero-push{{/title}}"> {{#image}}<a href="{{url}}" class="nav-hero-cta"><div class="media-body"><div class="title-wrap"> {{#title}}<h3 class="title-medium">{{title}}</h3> {{/title}}<div class="cta-link">{{cta_text}}</div></div><div class="media-left"> <img src="{{image}}" alt=""></div> {{#description}}<div class="media-description">{{description}}</div> {{/description}}</div></a> {{/image}}</div> {{/push}}</div></div>';
this["APP"]["templates"]["notification"] = '{{#image}} <span class="feedback-icon"><img class="notification-thumb" src="{{image}}" alt="{{title}}"> comment du to bug with image</span> {{/image}} {{#title}}<h2 class="title-large">{{title}}</h2> {{/title}} {{#description}}<p class="title-small">{{description}}</p> {{/description}} {{#removedPaymentCardsDescription}}<p class="title-small">{{removedPaymentCardsDescription}}</p> {{/removedPaymentCardsDescription}} {{#actions}}<p class="notification-message-actions">{{{actions}}}</p> {{/actions}}';
this["APP"]["templates"]["orderDetailsSummary"] = '<div class="details-order-totals cart-details"><div class="subtotal-wrapper"><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart">{{subtotal_label}}</h3><p class="cart-details-value">{{subtotal}}</p></div><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart">{{shipping_label}}</h3><p class="cart-details-value">{{shipping_amount}}</p></div> {{#tax_amount}} {{#show_tax}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart">{{taxes_label}}</h3><p class="cart-details-value">{{tax_amount}}</p></div> {{/show_tax}} {{/tax_amount}}</div><div class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label">{{total_label}} {{#display_taxe_included}} {{#taxMessage}}<br/>({{taxMessage}}) {{/taxMessage}} {{/display_taxe_included}}</h3><p class="cart-details-value taxe-total cart-a-tray-value">{{total}}</p></div> {{#taxes_covered_label}}<p>{{taxes_covered_label}}</p> {{/taxes_covered_label}}</div>';
this["APP"]["templates"]["orderDetails"] = '<h4 data-cs-mask class="typo-title-level5">{{created_at}}</h4><p data-cs-mask class="order-number" data-ordernr="{{increment_id}}">{{order.order_number}}{{increment_id}}</p><p> {{status}}<br/> {{#is_invoiced}} <a href="{{invoiceDownloadLink}}" class="print-invoice" target="_parent">{{print}}</a> {{/is_invoiced}}<br/> {{^weChatInApp}} {{#fapiao.pdf_url}} <a href="{{fapiao.pdf_url}}" target="_parent">{{downloadFapiao}}</a> {{/fapiao.pdf_url}} {{/weChatInApp}} {{#weChatInApp}} {{#fapiao.pdf_url}} <a href="{{fapiao.qr_url}}" target="_parent">{{downloadFapiao}}</a> {{/fapiao.pdf_url}} {{/weChatInApp}} {{^fapiao.fapiaoGenerated}} {{#can_generate_fapiao}} <button class="link-to-button-underline" type="button" aria-controls="tray-request-fapiao" aria-expanded="false" aria-haspopup="dialog" data-tray-trigger="tray-request-fapiao" data-bind="fapiao-generation-form" data-order-id={{increment_id}}"> {{generateFapiao}}</button> {{/can_generate_fapiao}} {{#is_fapiao_download_expired}}<p>{{{generateFapiaoExpired}}}</p> {{/is_fapiao_download_expired}} {{/fapiao.fapiaoGenerated}} {{#goodcountry}}<p class="order-details-section"> {{noreturn}} <button class="link-to-button-inside-trays customer-service-no-return" data-tray-trigger="tray-help" aria-expanded="false" aria-haspopup="dialog" aria-controls="tray-help" type="button"> {{customer_service}}</button><br/></p> {{/goodcountry}}</p><section class="order-details-section"><h2 class="typo-title-level5 section-title">{{order.your_items_title}}</h2> {{{cartItems}}}</section> {{#is_gift}}<div class="paragraph-block"><p class="paragraph-title">{{order.is_gift_title}}</p><p data-cs-mask class="gift-message"> {{#gift.message}}{{order.has_message}} :<br/>{{{gift.message}}}<br/>{{/gift.message}} {{#gift.hide_price}}{{order.price_hidden_on_receipt_label}}<br/>{{/gift.hide_price}} {{#gift.handwritten_invoice}}{{order.handwritten_invoice_label}}{{/gift.handwritten_invoice}}</p></div> {{/is_gift}}<section class="order-details-section"><h2 class="typo-title-level5 section-title">{{order.delivery_title}}</h2><div class="paragraph-block"> {{^is_webtoshop}}<p class="paragraph-title">{{order.delivery_address_subtitle}}</p>{{/is_webtoshop}} {{#is_webtoshop}}<p class="paragraph-title">{{order.collect_in_store_subtitle}}{{#is_personalized}} ({{order.shipping_duration}}){{/is_personalized}}</p> {{/is_webtoshop}}<p data-cs-mask> {{^is_webtoshop}} {{#isChinaEN}} {{shipping_address.prefix}} {{/isChinaEN}} {{shipping_address.name}}</br> {{/is_webtoshop}} {{#is_webtoshop}} {{#is_personalized}} ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '<br> {{/is_personalized}} {{/is_webtoshop}} {{{shipping_address.address}}}<br/> {{^shipping_address.isHKorMO}} {{telephone_abbreviation}} {{shipping_address.telephone}} {{/shipping_address.isHKorMO}}</p></div> {{^is_webtoshop}}<div class="paragraph-block"><div class="paragraph-title"> {{order.shipping_method_label}}<br/> {{shipping_title}}{{#japanOrder}}NO.{{shipment.track_number}}{{/japanOrder}} {{#is_personalized}} &nbsp({{order.shipping_duration}})<p> ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p> {{/is_personalized}} {{#japanOrder}}<br/><div class="sagawa"><div class="sagawa-title">{{desired_date_shipment}}</div><div class="sagawa-info"> <time>{{sagawa_date}}</time> <time>{{sagawa_time}}</time></div></div> {{/japanOrder}}</div></div> {{/is_webtoshop}} {{#is_webtoshop}}<div class="paragraph-block"><p class="paragraph-title">{{order.collection_by_label}}</p><p data-cs-mask> {{#isChina}} {{#isChinaEN}} {{webtoshop.collector.prefix}} {{webtoshop.collector.lastname}} {{webtoshop.collector.firstname}} {{/isChinaEN}} {{^isChinaEN}} {{webtoshop.collector.lastname}}{{webtoshop.collector.firstname}}{{webtoshop.collector.prefix}} {{/isChinaEN}} {{/isChina}} {{^isChina}} {{^isKorea}} {{#displayPrefix}} {{^isTaiwan}} {{webtoshop.collector.prefix}} {{/isTaiwan}} {{#isTaiwan}} {{webtoshop.collector.lastname}}{{webtoshop.collector.firstname}} {{webtoshop.collector.prefix}} {{/isTaiwan}} {{/displayPrefix}} {{/isKorea}} {{^displaySama}} {{#isKorea}} {{webtoshop.collector.lastname}}{{webtoshop.collector.firstname}} {{/isKorea}} {{^isKorea}} {{^isTaiwan}} {{webtoshop.collector.firstname}} {{webtoshop.collector.lastname}} {{/isTaiwan}} {{/isKorea}} {{/displaySama}} {{#displaySama}} {{webtoshop.collector.lastname}} {{webtoshop.collector.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ' {{/displaySama}}<br/> {{/isChina}} {{telephone_abbreviation}} {{webtoshop.collector.telephone}}</p></div> {{/is_webtoshop}} {{#shipping_address.shipping_information}}<div class="paragraph-block "><p class="paragraph-title">{{order.delivery_instructions_title}}</p><p>{{shipping_address.shipping_instructions}}</p></div> {{/shipping_address.shipping_information}}</section><section class="order-details-section"><h2 class="typo-title-level5 section-title">{{order.payment_title}}</h2><div class="paragraph-block"><p class="paragraph-title">{{order.billing_address_subtitle}}</p><p data-cs-mask> {{#isChinaEN}} {{billing_address.prefix}} {{/isChinaEN}} {{billing_address.name}}</br> {{{billing_address.address}}}<br/> {{^billing_address.isHKorMO}} {{telephone_abbreviation}} {{billing_address.telephone}} {{/billing_address.isHKorMO}}</p></div><div class="paragraph-block"><p class="paragraph-title">{{order.payment_title_subtitle}}</p> {{#customer_phonelogin}}<p data-cs-mask>{{customer_phonelogin}}</p> {{/customer_phonelogin}} {{^customer_phonelogin}}<p data-cs-mask>{{customer_email}}</p> {{/customer_phonelogin}}</div></section><section class="checkout-section"> {{{orderSummary}}}</section>';
this["APP"]["templates"]["orderList"] = '{{#orders}}<li class="order-item"> <button class="js-to-order-details cta-order-details-wrapper simple-link link-to-button-underline" type="button" aria-controls="tray-order" aria-expanded="false" aria-haspopup="dialog" data-order-id="{{increment_id}}"><h4 data-cs-mask class="typo-title-level5">{{created_at}}</h4><p data-cs-mask>' + Drupal.t('hermes-global-translations.order-number') + '{{increment_id}}</p><svg nopin="nopin" aria-hidden="true" class="icon icon-arrow-right"><use xlink:href="#arrow-right"></use></svg></button> {{#status}}<p class="order-status"> {{status}}</p> {{/status}} {{#trackOrder}} {{#track_url}}<p class="order-track-cta "> <a href="{{track_url}}" target="_blank">' + Drupal.t('hermes_checkout.tray.order_list.cta.track_this_order') + ' <span class="sr-only">' + Drupal.t('hermes.footer.social.new-tab') + '</span></a></p> {{/track_url}} {{/trackOrder}} {{#return_label}}<p class="order-return-status"> <span>{{return_label}}</span></p> {{/return_label}} {{#is_refundable}}<p class="order-refund-cta"> <button class="link-to-button-underline" data-bind="refund-order" data-order-id="{{increment_id}}" type="button" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.refund_this_order') + '</button></p> {{/is_refundable}} {{#refund}}<p> <button class="link-to-button-underline" type="button" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog" data-bind="exchange-return-details" data-order-id={{increment_id}} data-return-exchange-id="{{id}}" data-return-type="refund"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.return_details') + '</button></p> {{/refund}} {{#is_exchangeable}}<p class="order-exchange-cta"> <button class="link-to-button-underline" type="button" data-bind="exchange-order" data-order-id="{{increment_id}}" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.exchange_this_order') + '</button></p> {{/is_exchangeable}} {{#exchange}}<p> <button class="link-to-button-underline" type="button" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog" data-bind="exchange-return-details" data-order-id={{increment_id}} data-return-exchange-id="{{id}}" data-return-type="exchange"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.exchange_details') + '</button></p> {{/exchange}}</li> {{/orders}}';
this["APP"]["templates"]["paymentIcons"] = '{{#cards}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/{{data}}@2x.png" alt="{{data_label}}"></li> {{/cards}} {{#france_only}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/cb@2x.png" alt="Cb"></li> {{/france_only}}';
this["APP"]["templates"]["preOrderMessage"] = '<div class="form-item form-type-checkbox form-item-pre-order"> <input required="required" type="checkbox" id="edit-pre-order-checkbox" data-validation-label="Pre order" name="pre_order_checkbox" value="1" class="form-checkbox"> <label for="edit-pre-order-checkbox">{{preOrderMessage}}<svg class="icon icon-select" aria-hidden="true"><use xlink:href="#check"></use></svg></label></div>';
this["APP"]["templates"]["productBanner"] = '<div aria-hidden="true" class="block-wrapper"><div class="header-content clearfix"><div class="region region-product-banner"><div class="product-banner-actions"> <span class="field-type-commerce-price">{{price}}</span> <button tabindex="-1" type="button" class="button add-to-cart ripple-effect" data-bind="banner-add-to-cart" data-track-banner-buy>{{add_to_cart}}</button></div><div class="product-banner-image"> <img src="{{#thumb}}{{thumb}}-70-70_n.jpg{{/thumb}}" alt="{{title}}"></div><div class="title-medium product-banner-title">{{title}}</div></div></div></div>';
this["APP"]["templates"]["productCardMetalTitration"] = ' <span class=\'field-name-field-metal-titrations-configurator\'>{{.}}</span>';
this["APP"]["templates"]["productConfiguratorParfume"] = '<ul class="product-configurator-form-options"> {{#products}}<li class="product-configurator-parfume ripple-effect"> <input type="radio" name="configurator-parfume" id="parfumer{{ sku }}" value="{{ sku }}" class="product-configurator-parfume-input"/> <label for="parfumer{{ sku }}" class="">{{#thumbs.0 }} <span class="product-configurator-icon"><svg aria-hidden="true" class="icon icon-check"><use xlink:href="#check"></use></svg>{{#uri}} <img src="{{uri}}&wid=30&hei=30" alt="{{ title }}"/> {{/uri}}</span> {{/thumbs.0 }} <span class="name">{{title}}</span></label></li> {{/products}}</ul>';
this["APP"]["templates"]["productDescriptionSplitter"] = '{{#remaining_copy}}<div id="intro-description"> {{{intro}}}</div><div id="read-more-description-set"> … <button class="read-more-toggle-description"> ' + Drupal.t('hermes-media-gallery-media-asset.view-more') + '</button></div><div id="remaining-description-set"> {{{remaining_copy}}} <button class="read-more-toggle-description"> ' + Drupal.t('node--hermes-product-display-default.less-details') + '</button></div> {{/remaining_copy}} {{^remaining_copy}}<div id="intro-description"> {{{intro}}}</div> {{/remaining_copy}}';
this["APP"]["templates"]["productHistory"] = '{{#products}}<li><div class="product-history-item"> <a href="{{url}}" data-product="{{sku}}">{{#image}}<picture class="product-item-picture media-wrap media-wrap-square"><source media="all" data-srcset="{{image}}&$product_page_b$&wid=400&hei=400&align=0,1&"> <img data-src="{{image}}&$product_page_b$&wid=400&hei=400&align=0,1&" src="{{image}}&$product_page_b$&wid=400&hei=400&align=0,1&" alt="{{title}}"></picture> {{/#image}}</a></div></li> {{/products}}';
this["APP"]["templates"]["productImagesNav"] = '{{#images}}<li> <button class="product-images-navigation-button {{#active}}active{{/active}}" data-index="{{index}}" type="button"> <span class="product-images-navigation-image"><img class="lazyload" data-src="{{uri}}-88-88_b.jpg"/></span></button></li> {{/images}}';
this["APP"]["templates"]["productImagesPerfume"] = '<div class="{{{cssParameter}}}"> {{#images}}<div class="product-image-wrap"> <button type="button" class="product-image-button"> <span class="sr-only">' + Drupal.t('hermes.accessibility.image-zoom') + '</span><picture class="product-item-picture" data-src="{{{uri}}}-0-0-0-1680{{#portrait}}&-300-0-0-1680{{/portrait}}.jpg"><source data-srcset="{{{uri}}}-0-0-0-759.jpg" media="(min-height: 506px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-555.jpg" media="(min-height: 491px) and (max-height: 505px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-539.jpg" media="(min-height: 436px) and (max-height: 490px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-479.jpg" media="(min-height: 351px) and (max-height: 435px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-385.jpg" media="(max-height: 350px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-759.jpg" media="(min-height: 506px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-555.jpg" media="(min-height: 491px) and (max-height: 505px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-539.jpg" media="(min-height: 436px) and (max-height: 490px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-479.jpg" media="(min-height: 351px) and (max-height: 435px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-385.jpg" media="(max-height: 350px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-704.jpg" media="(max-width: 320px)"> <img class="lazyload" data-src="{{{uri}}}-300-0-0-352.jpg" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="{{title}}"/></picture></button></div> {{/images}}</div>';
this["APP"]["templates"]["productImages"] = '{{#images}}<div class="product-image-wrap ratio-container"> {{#isImage}} <button type="button" class="product-image-button"> {{#zoom_image}} <span class="sr-only">{{zoom_image}}</span> {{/zoom_image}} {{^zoom_image}} <span class="sr-only">' + Drupal.t('hermes.accessibility.image-zoom') + '</span> {{/zoom_image}}<picture class="product-item-picture" data-src="{{{uri}}}-SIZE{{#portrait}}-SIZE{{/portrait}}{{^portrait}}{{#single}}-SIZE{{/single}}{{/portrait}}{{^portrait}}{{^single}}-SIZE{{/single}}{{/portrait}}_b.jpg"><source media="(min-width: 1024px)" data-srcset="{{{uri}}}-580{{#portrait}}-580{{/portrait}}{{^portrait}}{{#single}}-580{{/single}}{{/portrait}}{{^portrait}}{{^single}}-580{{/single}}{{/portrait}}_b.jpg"><source media="(min-width: 768px) and (max-width: 1023px)" data-srcset="{{{uri}}}-400{{#portrait}}-400{{/portrait}}{{^portrait}}{{#single}}-400{{/single}}{{/portrait}}{{^portrait}}{{^single}}-400{{/single}}{{/portrait}}_b.jpg"><source media="(min-width: 376px) and (max-width: 767px)" data-srcset="{{{uri}}}-330{{#portrait}}-330{{/portrait}}{{^portrait}}{{#single}}-330{{/single}}{{/portrait}}{{^portrait}}{{^single}}-330{{/single}}{{/portrait}}_b.jpg"><source media="(min-width: 321px) and (max-width: 375px)" data-srcset="{{{uri}}}-300{{#portrait}}-300{{/portrait}}{{^portrait}}{{#single}}-300{{/single}}{{/portrait}}{{^portrait}}{{^single}}-300{{/single}}{{/portrait}}_b.jpg"><source media="(max-width: 320px)" data-srcset="{{{uri}}}-300{{#portrait}}-300{{/portrait}}{{^portrait}}{{#single}}-300{{/single}}{{/portrait}}{{^portrait}}{{^single}}-300{{/single}}{{/portrait}}_b.jpg"> <img class="lazyload" data-src="{{{uri}}}-320{{#portrait}}-320{{/portrait}}{{^portrait}}{{#single}}-320{{/single}}{{/portrait}}{{^portrait}}{{^single}}-320{{/single}}{{/portrait}}_b.jpg" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="{{title}}"></picture></button> {{/isImage}} {{#isVideo}}<div data-video="{{{name}}}" data-mute="1" data-autoplay="0" data-controls="1" data-product="1" class="media-wrap media-wrap-portrait-tall"><div class="media-video" id="vjs-container-{{{name}}}"></div></div> {{/isVideo}}</div> {{/images}}';
this["APP"]["templates"]["productInfoBikini"] = '<h1>{{title}}</h1> {{!---- Price of the bikini set ----}}<div class="field-type-commerce-price"> {{price}}</div> {{!---- Truncated description ----}}<div class="field-name-field-description"><div class="field-item even"> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span><div class="trancated"> {{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></div> {{/remaining_copy}}</div></div><ul class="product-attributes"><li class="product-attributes-field_color_hermes product-attribute-has-options"> <span data-href="#configurator-field_color_hermes" data-field="field_color_hermes" class="product-attribute-item clearfix link-to-button-simply"><span class="product-attribute-title"><span>{{color.label}}</span> <span class="sr-only">:</span></span> <span class="product-attribute-value {{#thumb}}has-thumb{{/thumb}}">{{#color.attr_display}} <span>{{color.attr_display}}</span> {{/color.attr_display}} {{^color.attr_display}} <span>{{color.name}}</span> {{/color.attr_display}}<picture class="product-attribute-thumbnail"> <img nopin="nopin" class="product-attribute-thumbnail" src="{{thumb}}-60-60.jpg" alt=""></picture></span></span></li><li class="product-attributes-field_ref_size_top product-attribute-has-options"> <button data-href="#configurator-field_ref_size_top" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" data-field="field_ref_size_top" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply"> <span class="product-attribute-title"><span>' + Drupal.t('hermes_features_commerce_products.available-top-size') + '</span></span> <span class="product-attribute-value"><span>{{#top_bikini_selected}}{{top_bikini_selected.attributes.field_ref_size.name}}{{/top_bikini_selected}}{{^top_bikini_selected}}{{select}}{{/top_bikini_selected}}</span></span><div class="product-attribute-icon"> {{#bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.current_available-top-size') + ' {{bottom_bikini_selected.attributes.field_ref_size.name}} ' + Drupal.t('hermes_features_commerce_products.change_available-top-size') + '</span> {{/bottom_bikini_selected}} {{^bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.available-top-size') + '</span> {{/bottom_bikini_selected}}<svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li><li class="product-attributes-field_ref_size_bot product-attribute-has-options"> <button data-href="#configurator-field_ref_size_bot" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" data-field="field_ref_size_bot" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply"> <span class="product-attribute-title"><span>' + Drupal.t('hermes_features_commerce_products.available-bottom-size') + '</span></span> <span class="product-attribute-value"><span>{{#bottom_bikini_selected}}{{bottom_bikini_selected.attributes.field_ref_size.name}}{{/bottom_bikini_selected}}{{^bottom_bikini_selected}}{{select}}{{/bottom_bikini_selected}}</span></span><div class="product-attribute-icon"> {{#bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.current_available-bottom-size') + ' {{bottom_bikini_selected.attributes.field_ref_size.name}} ' + Drupal.t('hermes_features_commerce_products.change_available-bottom-size') + '</span> {{/bottom_bikini_selected}} {{^bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.available-bottom-size') + '</span> {{/bottom_bikini_selected}}<svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li></ul>';
this["APP"]["templates"]["productInfoLook"] = '<h1>{{title}}</h1><div class="field-name-field-description"><div class="field-item even"> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span><div class="trancated"> {{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></div> {{/remaining_copy}}</div></div><ul class="product-attributes"> {{#looks}}<li class="product-attributes-{{field}} product-attribute-has-options product-attribute-look"> <button data-href="#configurator-{{skulink}}" sku="{{sku}}" data-slot="{{idx}}" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply" id="details-slot-{{idx}}"><div class="product-info"> <span class="product-attribute-title">{{title}}</span> <span class="sr-only">, ' + Drupal.t('hermes.accessibility.page-product.color') + ':</span> <span class="product-attribute-color">{{#attributes.field_color_hermes.attr_display}} {{attributes.field_color_hermes.attr_display}} {{/attributes.field_color_hermes.attr_display}} {{^attributes.field_color_hermes.attr_display}} {{attributes.field_color_hermes.name}} {{/attributes.field_color_hermes.attr_display}}</span> <span class="sr-only">,</span> <span class="product-attribute-price">{{price}}</span></div> <span class="product-attribute-size" aria-hidden="true">{{#size_attribute_text}} {{size_attribute_text}} {{/size_attribute_text}} {{^size_attribute_text}} {{attributes.field_ref_size.name}} {{/size_attribute_text}}</span> <span class="sr-only size-accessibility">, ' + Drupal.t('hermes.accessibility.page-product.select-size') + '</span><div class="product-attribute-image"> {{#thumbs.0 }} <img nopin="nopin" class="product-attribute-thumbnail" src="{{uri}}-60-60.jpg" alt=""> {{/thumbs.0 }}</div><div class="product-attribute-icon"><svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button><div class="form-item form-type-checkbox"> <input type="checkbox" id="product-look-{{idx}}" name="" value="{{idx}}" class="form-checkbox" disabled> <label for="product-look-{{idx}}"><span class="sr-only">' + Drupal.t('hermes.product.look.checkbox.add.product') + '</span><svg aria-hidden="true" class="icon icon-select" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#check"></use></svg></label></div></li> {{/looks}}</ul><div class="products-total-price"><div class="title">' + Drupal.t('hermes_product.total-for-selection') + '</div><div class="price">0</div></div>';
this["APP"]["templates"]["productInfoPerfume"] = '<h1>{{title}}</h1><div class="field-type-commerce-price"> {{price}} {{#unit_price}}<span class="fragrance-price-per-unit">{{unit_price}}</span>{{/unit_price}}</div><div class="field-name-field-description"><div class="field-item even"> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span><div class="trancated"> {{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></div> {{/remaining_copy}}</div></div><div class="field-name-measurements"> {{#measurements}} {{measurements}} {{/measurements}}</div><ul class="product-attributes"> {{#products}}<li class="product-attributes-{{field}} product-attribute-has-options"> <button data-href=\'#configurator-{{sku}}-{{idx}}\' sku="{{sku}}" title="" aria-label="{{title}}, ' + Drupal.t('hermes.accessibility.page-product.change') + '" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply"> <span class="product-attribute-title">{{title}}</span> <span class="product-attribute-value">{{#images}}<picture class="product-attribute-thumbnail"><source srcset="{{images}}-60-60-q80.jpg" media="(min-width: 768px)"><source srcset="{{images}}-60-60-q80.jpg" media="(max-width: 767px)"> <img nopin="nopin" class="product-attribute-thumbnail" src="{{images}}-60-60-q80.jpg" alt="{{title}}{{#name}} - {{name}}{{/name}}"></picture> {{/images}}</span><div class="product-attribute-icon"><svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li> {{/products}}</ul>';
this["APP"]["templates"]["productInfo"] = '<h1>{{title}}</h1><p class="field-type-commerce-price"> {{price}} {{#unit_price}}<span class="fragrance-price-per-unit">{{unit_price}}</span>{{/unit_price}}</p> {{#eco_tax}}<p class="field-type-commerce-eco-tax"> <span>{{eco_tax}}</span></p> {{/eco_tax}}<div class="field-name-field-description"><div class="field-item even"><p> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span> <span class="trancated">{{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></span> {{/remaining_copy}}</p></div></div> {{#metals_titrations}}<p class="field-name-field-metals-titrations"> {{.}}</p> {{/metals_titrations}} {{#designer}}<p class="field-name-field-designer"> {{{designer}}}</p> {{/designer}} {{#measurements}}<p class="field-name-field-measurements"> {{.}}</p> {{/measurements}}<ul class="product-attributes"> {{#attributes}}<li class="product-attributes-{{field}} product-attribute-has-options"> <button data-href="#configurator-{{field}}" data-field="{{field}}" aria-label="{{accessibility_select_button}}" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" class="{{#is_disabled}}disabled {{/is_disabled}}product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply" {{#is_disabled}}disabled{{/is_disabled}}> <span class="product-attribute-title">{{label}}<span>{{#count}}({{count}}){{/count}}</span></span> <span class="product-attribute-value{{#thumb}} has-thumb{{/thumb}}{{#hex}} has-thumb{{/hex}}"><span>{{name}}</span> {{#thumb}}<picture class="product-attribute-thumbnail"><source srcset="{{thumb}}&$product_page_b$&qlt=80&wid=60&hei=60" media="(min-width: 768px)"><source srcset="{{thumb}}&$product_page_b$&qlt=80&wid=60&hei=60" media="(max-width: 767px)"> <img nopin="nopin" class="product-attribute-thumbnail" src="{{thumb}}&qlt=80&wid=60&hei=60" alt="{{title}} - {{name}}"></picture> {{/thumb}} {{#hex}}<span class="hex" style="background: #{{hex}};"></span>{{/hex}}</span><div class="product-attribute-icon"><svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li> {{/attributes}}</ul>';
this["APP"]["templates"]["productLocatorSearch"] = '<div class="store-search-product-locator"><div class="container-items"><div id="container-search-items" class="container-search-items"><svg nopin="nopin" class="btn magnifier icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use></svg><input id="searchfield" type="search" class="block-container" autocomplete="off" class="field-search" name="q" placeholder="' + Drupal.t('hermes.commerce.product_locator.search.placeholder') + '" title="' + Drupal.t('hermes.commerce.product_locator.search.placeholder') + '"/> <button id="btclose" class="close" title="' + Drupal.t('page--hermes-global--find-store.reset-search-field') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></button> <button id="btlocate" class="location" title="' + Drupal.t('page--hermes-global--find-store.use-my-current-location') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#location"></use></svg></button><div id="suggest" class="suggest"><ul></ul></div></div></div><div class="container-find-button"> <input id="btfind" class="find-btn" type="submit" name="submit" value="' + Drupal.t('hermes_commerce.find') + '"/></div></div>';
this["APP"]["templates"]["regionOptions"] = '<option data-cs-mask value="" selected="selected" disabled="disabled">' + Drupal.t('hermes_global.select') + '</option> {{#options}}<option data-cs-mask value="{{region_id}}">{{name}}</option> {{/options}}';
this["APP"]["templates"]["scene7productzoomvideo"] = '<div id="s7_videoview" class="zoom-player"></div> <a href="#" class="close-zoom-player"><svg aria-hidden="true" class="icon close"><use xlink:href="#close"></use></svg></a>';
this["APP"]["templates"]["securityIcons"] = '<p class="checkout-reassurance-introduction">' + Drupal.t('form--hermes-checkout--payment.3ds-reassurance.indroduction') + '</p><section><h4 id="payment-secure-system" class="sr-only"> ' + Drupal.t('hermes.checkout.payment.accessibility.secure_system') + '</h4><ul aria-labelledby="payment-secure-system"> {{#list}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/3ds/logo_{{img}}.png" alt="{{alt}}"></li> {{/list}}</ul></section> <a class="checkout-reassurance-more" href="#">' + Drupal.t('form--hermes-checkout--payment.3ds-reassurance.more-link-label') + '</a><p class="checkout-reassurance-details">' + Drupal.t('form--hermes-checkout--payment.3ds-reassurance.details') + '</p>';
this["APP"]["templates"]["shippingInfo"] = '<div class="block-checkout-shipping-message"><div class="text-checkout-shipping-message">' + Drupal.t('hermes-checkout-delivery-form.shipping-message') + '</div> <a href="#" data-tray-trigger="tray-cart" class="link-shipping-message mobile-only">' + Drupal.t('hermes-checkout-delivery-form.see-cart') + '</a></div>';
this["APP"]["templates"]["shippingOptions"] = '<ul class="checkout-shipping-methods"> {{^no_address}} {{#shipping_methods}}<li class="address select-list-item" id="{{method}}"><div class="separator-border-shipping-method nth-{{index}}"></div> <label for="shipping-{{method}}" class="form-radio {{#is_checked}}active-method-address{{/is_checked}}"><input data-cs-mask id="shipping-{{method}}" name="shipping" value="{{method}}" type="radio" {{#is_alone}}disabled{{/is_alone}} {{#is_checked}}checked{{/is_checked}} tabindex="0"><span class="container-radio-shipping"><div class="radio-shipping-method"> <span class="delivery-name">{{title}}</span> {{#duration}} <span>({{duration}})</span> {{/duration}}</div> <span class="price-shipping-method">{{price}}</span></span></label></li> {{/shipping_methods}} {{/no_address}}</ul>';
this["APP"]["templates"]["sociallogin"] = '{{#networks}}<li> <button type="button" class="button button-icon button-social-network" data-provider="{{socialnetwork}}"><svg class="icon icon-{{socialnetwork}}" aria-hidden="true"><use xlink:href="#{{socialnetwork}}"></use></svg><span>{{socialnetwork}}</span></button></li> {{/networks}}';
this["APP"]["templates"]["socialloginmore"] = '<li class="more-item"> <button type="button" class="button button-icon"><svg class="icon icon-moredots" aria-hidden="true"><use xlink:href="#moredots"></use></svg><span>' + Drupal.t('hermes.modules.social_connect.sociallogin.more') + '</p></span></button></li>';
this["APP"]["templates"]["storeLocatorBubble"] = '<div class="bubble"><div class="close-button"><svg class="btn close icon icon-close search-shrink" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></div><h4><a href="{{path}}">{{short_title}}</a></h4><p class="h-adr{{#distanceSearch}} ds{{/distanceSearch}}"> <a href="{{path}}">{{formatted_address}}</a></p> {{#distanceSearch}}<div class="distance"> {{distanceFrom}}km</div> {{/distanceSearch}}<div class="tel"><svg class="btn phone icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg>{{tel}} <a href="tel://{{store_phone_number}}">{{store_phone_number}}</a></div> {{#human_opening_time}}<p> {{#human_opening_time.closed}} {{#human_opening_time.to_opened}} {{opens_in}} {{human_opening_time.to_opened}} {{/human_opening_time.to_opened}} {{^human_opening_time.to_opened}} {{#human_opening_time.today}} {{open_today_from}} {{#human_opening_time.calculate}}{{human_opening_time.current_date.0}}{{/human_opening_time.calculate}} {{/human_opening_time.today}} {{#human_opening_time.tomorrow}} {{opens_tomorrow}} {{at}} {{#human_opening_time.calculate}}{{human_opening_time.current_date.0}}{{/human_opening_time.calculate}} {{/human_opening_time.tomorrow}} {{#human_opening_time.week_day}} {{opens}} {{human_opening_time.week_day}} {{at}} {{#human_opening_time.calculate}}{{human_opening_time.current_date.0}}{{/human_opening_time.calculate}} {{/human_opening_time.week_day}} {{/human_opening_time.to_opened}} {{^human_opening_time.calculate}} {{#human_opening_time.date}} {{0}} {{to}} {{1}}<br/> {{/human_opening_time.date}} {{/human_opening_time.calculate}} {{/human_opening_time.closed}} {{#human_opening_time.opened}} {{#human_opening_time.to_closed}} {{closes_in}} {{human_opening_time.to_closed}} {{/human_opening_time.to_closed}} {{^human_opening_time.to_closed}} {{open_today_until}} {{human_opening_time.current_date.1}} {{/human_opening_time.to_closed}} {{/human_opening_time.opened}}</p> {{/human_opening_time}} <a href="{{path}}">{{more_info}}</a><br/> <a href="https://www.google.com/maps/dir/{{currentPos}}/{{geo_coordinates.latitude}},{{geo_coordinates.longitude}}" target="_blank">{{get_directions}}</a><br/></div>';
this["APP"]["templates"]["suggestions"] = '<dd{{#keywords}} class="line"{{/keywords}}><ul id="search-listbox" role="listbox" aria-labelledby="search-suggest-label"> {{#suggestionGroups}} {{#suggestions}} {{#categories}}<li role="option" id="{{suggestId}}" data-href="{{url}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{items}} {{link}}</span></li> {{/categories}} {{#products}}<li role="option" id="{{suggestId}}" data-action="{{action}}" data-link="{{product_link}}" data-href="{{product}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/products}} {{#content}}<li role="option" id="{{suggestId}}" data-href="{{url}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/content}} {{#stores}}<li role="option" id="{{suggestId}}" data-href="{{url}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/stores}} {{#keywords}}<li role="option" id="{{suggestId}}" data-href="/{{urllocale}}/{{searchurlkey}}?s={{searchterm}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/keywords}} {{/suggestions}} {{/suggestionGroups}}</ul></dd>';
this["APP"]["templates"]["trayFilterButton"] = '<div id=\'button-filter-section\'> <button type=\'button\' class=\'button\'>' + Drupal.t('hermes-search-result.button-label') + '</button></div>';
this["APP"]["templates"]["trayProductLocator"] = '<h3 class="sr-only">' + Drupal.t('hermes.commerce.product_locator.product_information.label') + '</h3><div class="current-product-tray-product-locator"><div class="infos-tray-product-locator"> <img src="{{media}}" alt="" class="tray-product-locator-media"><p class="tray-product-locator-label">{{title}}</p><p class="tray-product-locator-price">{{price}}</p><div class="tray-product-locator-details"> {{#color}}<p><span class="tray-product-locator-details-characteristic">' + Drupal.t('hermes.commerce.product_locator.color.label') + ':</span> {{color}}</p> {{/color}} {{#size}}<p> <span id="tray-product-locator-details-characteristic-size" class="tray-product-locator-details-characteristic">' + Drupal.t('hermes.commerce.product_locator.size.label') + ':</span> <span class="size-value">{{size}}</span> <button id="display-product-locator-configurator" class="display-product-locator-configurator" aria-expanded="false" aria-controls="product-locator-configurator" aria-describedby="tray-product-locator-details-characteristic-size">' + Drupal.t('page-hermes-product-locator-modify-button') + '</button></p> {{/size}}</div></div></div>';
this["APP"]["templates"]["userAddress"] = '{{#addresses}}<li class="address select-list-item"><div class="separator-border-shipping-method nth-{{index}}"></div> <label for="{{context}}-{{address_id}}" class="form-radio {{#is_default_shipping}}active-method-address{{/is_default_shipping}}"><input id="{{context}}-{{address_id}}" name="delivery" value="{{address_id}}" type="radio" {{#ariaDescribBy}}aria-describedby="{{ariaDescribBy}}"{{/ariaDescribBy}} {{#isAlone}}disabled{{/isAlone}} {{#is_default_shipping}}checked{{/is_default_shipping}}/> <span><span data-cs-mask class="delivery-name">{{name}}</span> {{#isJapan}} <span data-cs-mask class="delivery-name">{{nameKatakana}}</span> {{/isJapan}} <span data-cs-mask class="delivery-address">{{{address}}}</span> <span data-cs-mask class="delivery-telephone">{{telephone}}</span></span></label> <button class="edit-address-checkout tray-trigger link-to-button-edit-address" type="button" data-address="{{address_id}}" aria-controls="tray-edit-address" aria-expanded="false" aria-haspopup="dialog"> ' + Drupal.t('hermes_checkout.user.profile.address.edit.label') + '</button></li> {{/addresses}} {{^addresses}} {{#message}}<li> {{message}}</li> {{/message}} {{/addresses}}';
this["APP"]["templates"]["userPaymentMethods"] = '{{#convertedPayments}}<li id="{{id}}" class="payment select-list-item" data-cs-mask><div class="profile-info-list-item clearfix"> <label class="pull-left">{{type}} <span class="card-number">***-{{endNumbers}}</span> <span class="expire-date">{{expiryMonth}}/{{expiryYear}}</span> {{#expired}} <span class="card-expired">' + Drupal.t('hermes-account--profile.expired') + '</span> {{/expired}} {{#idToDelete}}<div class="delete-card-error">' + Drupal.t('hermes-checkout-payment-global-error') + '</div> {{/idToDelete}}</label> <a href="#" class="edit-payment-address-{{id}} pull-right"><span class="sr-only">Delete this card information</span> ' + Drupal.t('hermes-account--profile.remove') + '</a></div></li> {{/convertedPayments}} {{^convertedPayments}}<li class="payment select-list-item"><div class="profile-info-list-item clearfix"> ' + Drupal.t('hermes-account--profile-info-page.no-card-information') + '</div></li> {{/convertedPayments}}';
this["APP"]["templates"]["userProfileAsia"] = '<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.name.label') + '</p><p data-cs-mask class="user-full-name"> {{templateName}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_global.telephone') + '</p><p data-cs-mask class="user-email">{{phone_login}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.password.label') + '</p><p class="user-password">*******</p></div> {{#isChina}}<div class="single-detail-row"> {{#is_binded_wechat}}<p class="label">' + Drupal.t('hermes_account_info_wechat-linked') + '</p> {{/is_binded_wechat}} {{^is_binded_wechat}}<p class="label">' + Drupal.t('hermes_account_info_wechat-not-linked') + '</p> {{/is_binded_wechat}}</div> {{/isChina}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_global.personal_address') + '</p><p data-cs-mask class="user-billing-address">{{{billingAddress}}}{{^billingAddress}}--{{/billingAddress}}</p></div> {{^hasFakeMail}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.email.label') + '</p><p data-cs-mask class="user-email">{{email}}</p></div> {{/hasFakeMail}}';
this["APP"]["templates"]["userProfile"] = '<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.name.label') + '</p><p data-cs-mask class="user-full-name"> {{templateName}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.email.label') + '</p><p data-cs-mask class="user-email">{{email}}</p></div> {{#hasCpf}}<div class="single-detail-row"><p class="label">{{labelCpf}}</p><p data-cs-mask class="user-cpf">{{formatedCpf}}</p></div> {{/hasCpf}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.password.label') + '</p><p class="user-password">*******</p></div> {{#hasDob}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.DOB.label') + '</p><p data-cs-mask class="user-birthday">{{^dob}}--{{/dob}}{{dob}}</p></div> {{/hasDob}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.billingaddress.label') + '</p><p data-cs-mask class="user-billing-address">{{{billingAddress}}}{{^billingAddress}}--{{/billingAddress}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.telephone.label') + '</p><p data-cs-mask class="user-telephone">{{telephone}}{{^telephone}}--{{/telephone}}</p></div>';
this["APP"]["templates"]["web2shopCheckoutShop"] = '{{#shops}}<li class="select-list-item"> <button class="another-store-link tray-trigger link-to-button-edit-address editAddressWeb2Shop" data-bind="find-store-tray-secondary" type="button" aria-controls="tray-find-store" aria-expanded="false" aria-haspopup="dialog">{{openTray}}</button> <label data-cs-mask for="shop-pickup-{{shop_id}}" class="form-radio"><input id="shop-pickup-{{shop_id}}" name="webtoshop_id" value="{{shop_id}}" type="radio" {{#selected}}checked{{/selected}} aria-describedby="w2s-list"> <span><span class="shop-smallname">{{company}}</span> <span class="shop-address2 has-side-icon-left">{{{constructedAddress}}}</span> {{#shipping_duration}} <span class="shop-shipping-duration has-side-icon-left"><svg class="icon icon-box" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#box"></use></svg>{{shippingDurationPreLabel}} {{shipping_duration}} {{shippingDurationPostLabel}}</span> {{/shipping_duration}} <span class="shop-phone icon-left-has-side"><a class="phone-checkout" href="tel:{{telephone}}"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg> {{telephone}}</a></span> {{#hasOpeningHours}} <span class="shop-opening-container has-side-icon-left"><svg nopin="nopin" class="icon icon-clock" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#clock"></use></svg>{{#openingHours}} <span class="shop-opening">{{dayNames}}{{#hours}}: {{hours}}{{/hours}}</span> {{/openingHours}}</span> {{/hasOpeningHours}} {{#hasCollectorVerificationBlock}} <span class="collector-verification-information-block">{{collectorVerification}}</span> {{/hasCollectorVerificationBlock}}</span></label></li> {{/shops}} {{^shops}}<li role="alert" class="find-store-placeholder"> <input class="hidden-form-element" aria-hidden="true" id="empty-input-select-store-wts" name="webtoshop-id" type="radio"></li> {{/shops}}';
this["APP"]["templates"]["web2shopFindStoreTrayShopEntry"] = '<ul class="stores-list"> {{#shops}}<li data-cs-mask class="checkout-web2shop-tray ripple-effect" data-bind="shop-item" data-id="{{shop_id}}" tabindex="0"><h3 class="shop-name">{{company}}</h3><p class="shop-distance">{{calculatedDistanceHumanReadable}}</p><div class="container-elements"><p class="shop-address">{{{constructedAddress}}}</p> <button class="container-icon-map"> <span class="shop-arrow"><svg nopin="nopin" class="icon icon-pin-map-wts" aria-hidden="true"><use xlink:href="#map-pin"></use></svg> <span class="plan-link-url">{{showPlan}}</span></span></button></div> {{#shipping_duration}}<div class="web2shop-shipping-duration"><svg class="icon icon-box" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#box"></use></svg><span class="sr-only">{{deliveryDelay}}</span><div class="container-shipping-duration"><p> {{shippingDurationPreLabel}} {{shipping_duration}} {{shippingDurationPostLabel}}</p></div></div> {{/shipping_duration}}<div class="web2shop-phone"><svg class="icon icon-phone" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg><div class="container-phone"><p> {{telLabel}} {{telephone}}</p></div></div> {{#hasOpeningHours}}<div class="web2shop-opening-hours"><svg class="icon icon-clock" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#clock"></use></svg><span class="sr-only">{{openingClosingHours}}</span><div class="container-opening-hours"> {{#openingHours}}<p>{{dayNames}}{{#hours}}: {{hours}}{{/hours}}</p> {{/openingHours}}</div></div> {{/hasOpeningHours}}</li> <button class="button button-accent ripple-effect" type="submit" data-shop-id="{{shop_id}}" data-bind="select-shop"> {{selectWebToShopStoreButtonLabel}}</button><div class="item-favorite"></div> {{/shops}}</ul>';
this["APP"]["templates"]["web2shopShopTrayContainer"] = '<div class="checkout-web2shop shop-details"><div class="shop-details-map-wrapper" data-bind="shop-details-map-wrapper"></div><div class="shop-details-data-wrapper" data-bind="shop-details-data-wrapper"></div></div>';
this["APP"]["templates"]["web2shopShopTrayData"] = '{{#shop}}<p class="shop-distance">{{calculatedDistanceHumanReadable}}</p><p class="shop-address">{{{constructedAddress}}}</p> {{#shipping_duration}}<div class="web2shop-shipping-duration"><svg class="icon icon-box" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#box"></use></svg><span class="sr-only">{{deliveryDelay}}</span><div class="container-shipping-duration"><p> {{shippingDurationPreLabel}} {{shipping_duration}} {{shippingDurationPostLabel}}</p></div></div> {{/shipping_duration}}<div class="web2shop-phone"><svg class="icon icon-phone" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg><div class="container-phone"><p> {{telLabel}} {{telephone}}</p></div></div> {{#hasOpeningHours}}<div class="web2shop-opening-hours"><svg class="icon icon-clock" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#clock"></use></svg><span class="sr-only">{{openingClosingHours}}</span><div class="container-opening-hours"> {{#openingHours}}<p>{{dayNames}}{{#hours}}: {{hours}}{{/hours}}</p> {{/openingHours}}</div></div> {{/hasOpeningHours}} <button class="button button-accent ripple-effect" type="submit" data-shop-id="{{shop_id}}" data-bind="select-shop"> {{selectWebToShopStoreButtonLabel}}</button> {{/shop}}';
this["APP"]["templates"]["zoomImage"] = '<div class="product-image-wrap"><picture class="product-item-picture"> {{#uri}}<source srcset="{{{uri}}}&wid=850&hei=850" media="(min-width: 1024px)"><source srcset="{{{uri}}}&wid=800&hei=800" media="(min-width: 951px) and (max-width: 1023px)"><source srcset="{{{uri}}}&wid=700&hei=700" media="(min-width: 768px) and (max-width: 950px)"><source srcset="{{{uri}}}&wid=900&hei=900" media="(min-width: 574px) and (max-width: 767px)"><source srcset="{{{uri}}}&wid=700&hei=700" media="(min-width: 321px) and (max-width: 573px)"><source srcset="{{{uri}}}&wid=400&hei=400" media="(max-width: 320px)"> <img src="{{{uri}}}&wid=400&hei=400" alt="{{ title }}"> {{/uri}}</picture></div>';
this["APP"]["templates"]["trayEreservationRequestConfirmCustomerInfos"] = '<div class="infos-tray-ereservation-customer"><h3 class="sr-only">' + Drupal.t('hermes.ereservation.tray.request_confirm.customer.title') + '</h3><div class="customer-infos"><p><strong>{{civility}} {{firstname}} {{lastname}}</strong></p><p>{{email}}</p></div><p>' + Drupal.t('hermes.ereservation.tray.request_confirm.confirm.text') + '</p></div>';
this["APP"]["templates"]["trayEreservationRequestConfirmProductInfos"] = '<div class="infos-tray-ereservation-product"><h3 class="sr-only">' + Drupal.t('hermes.ereservation.tray.request_confirm.product.title') + '</h3><div class="product-block"><div class="product-image"> <img src="{{media}}" alt="" class="product-media"></div><div class="product-infos"><p class="product-label">{{title}}</p><p class="product-price">{{price}}</p> {{#color}}<p><span>' + Drupal.t('hermes-global-translations.color') + ':</span> {{color}}</p> {{/color}} {{#size}}<p> <span>' + Drupal.t('hermes.accessibility.page-product.size') + ':</span> <span>{{size}}</span></p> {{/size}}</div> {{#showTaxesDiv}}<div class="product-taxes"><p><span>' + Drupal.t('hermes.ereservation.tray.request_confirm.taxes.text') + '</span></p></div> {{/showTaxesDiv}}</div></div>';
this["APP"]["templates"]["trayEreservationRequestConfirmStoreInfos"] = '<div class="infos-tray-ereservation-store store-product-detail"><div class="colresponsive"><h3 class="sr-only">' + Drupal.t('hermes.ereservation.tray.request_confirm.store.title') + '</h3><h4 class="shop-title title-small">{{name}}</h4><p class="address"> {{street_address1}}{{#street_address2}}, {{street_address2}}{{/street_address2}}{{#street_address3}}, {{street_address3}}{{/street_address3}}, {{#postal_code}}{{postal_code}} {{/postal_code}}{{city}}, {{country}}</p><div class="inline-icon"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#phone"></use></svg><p class="phone"> <a href="tel:{{phone_number_link_format}}"><span class="sr-only">' + Drupal.t('page-hermes-product-locator-details-phone') + '</span> {{phone_number}}</a></p></div><div class="inline-icon store-limit-info-km"><svg nopin="nopin" class="icon icon-pin-map-wts" aria-hidden="true"><use xlink:href="#find-a-store"></use></svg><p class="store-limit-info-km-num"> <span aria-hidden="true">{{distance}} km</span></p></div></div></div>';
this["APP"]["templates"]["accountCreated"] = '<div class="info-banner-container"> {{^createbywechat}}<p data-cs-mask>' + Drupal.t('hermes-global-translations.your-account-has-been-created-info-banner') + '</p> {{/createbywechat}} {{#createbywechat}}<p data-cs-mask>' + Drupal.t('hermes-global-translations.your-account-has-been-created-info-banner-wechat') + '</p> {{/createbywechat}} <button class="close-info-banner" aria-label="' + Drupal.t('hermes_global.close-info-banner-accessibility') + '" id="close-info-banner"><svg class="icon icon-close-info-banner" nopin="nopin" viewBox="0 0 382 380"><use xlink:href="#close"></use></svg></button></div>';
this["APP"]["templates"]["cardDeleted"] = '<div class="info-banner-container"><p data-cs-mask>' + Drupal.t('hermes-account--profile-info-page.card-deleted') + '</p> <button class="close-info-banner" aria-label="' + Drupal.t('hermes_global.close-info-banner-accessibility') + '" id="close-info-banner"><svg class="icon icon-close-info-banner" nopin="nopin" viewBox="0 0 382 380"><use xlink:href="#close"></use></svg></button></div>';
this["APP"]["templates"]["forgotPassword"] = '<section class="row-page-layout hidden"><div class="content-block colored-background container-mginza"><div class="forgot-password-container"><div class="forgot-password-information"><h2 class="title-login">' + Drupal.t('hermes.ginza.account.reset-password') + '</h2><p>' + Drupal.t('hermes.ginza.account.reset-password-message') + '</p></div><div class="forgot-password-block"><form id="form-ginza-house-forgot" method="post"><div class="form-item container-fieldset"> <label for="forgot-password-ginza" class="title-small">' + Drupal.t('hermes.ginza.account.email-address') + '</label> <input class="forgot-password form-text form-email required" data-validation-label="Email" required="required" type="email" id="forgot-password-ginza" name="email" size="60" maxlength="128"></div> <button type="submit" class="button form-submit ripple-effect reset-password-ginza"> <span class="loader-reset-password">' + Drupal.t('hermes.ginza.account.submit') + '</span></button></form></div></div><div class="message-forgot-message hidden"><h2 class="title-login"> ' + Drupal.t('hermes.ginza.forgot-password-error-message') + '</h2> <span class="description-forgot">' + Drupal.t('hermes.ginza.forgot-password-error-description') + '</span></div></div></section>';
this["APP"]["templates"]["loginGinza"] = '<section class="row-page-layout"><div class="content-block colored-background container-mginza"><div class="login-wrapper ginza-login-wrapper"> {{#login}}<div class="reservation-redirect-ginza"> <a href="<?= _hermes_ginza_url_mypage() ?>">' + Drupal.t('hermes.ginza.login-reservation-message') + '</a></div> {{/login}} {{^login}}<h2 class="title-login">' + Drupal.t('hermes.ginza.account.title') + '</h2><p class="description-login">' + Drupal.t('hermes.ginza.account.new-member-description') + '</p><div><h3>' + Drupal.t('hermes.ginza.account.login') + '</h3></div><form id="form-ginza-house-login" method="post"><div class="login-container"><div class="email-login"> <label class="title-small" for="login-email-ginza">' + Drupal.t('hermes.ginza.account.email-address') + '</label><div class="form-item container-fieldset"> <input class="login-tray-email form-text form-email email-ginza-login required" data-validation-label="Email" required="required" type="email" id="login-email-ginza" name="email" value="" size="60" maxlength="128" pattern=".+@.+\\..+"></div><p class="create-account-ginza-desktop">' + Drupal.t('hermes.ginza.account.new-member') + '</p></div><div class="password-login"> <label for="login-password-ginza" class="password-label title-small">' + Drupal.t('hermes.ginza.account.password') + '</label><div class="form-item container-fieldset"> <input class="form-text password-ginza-login required" data-validation-label="Password" autocomplete="on" required="required" type="password" id="login-password-ginza" name="password" size="60" maxlength="128"></div> <button type="button" class="forgot-password-ginza">' + Drupal.t('hermes.ginza.account.forgot-password') + '</button> <button type="submit" class="button form-submit ripple-effect login-ginza-house"> <span class="loader-login-ginza" data-track="data-track-account-signin-button">' + Drupal.t('hermes.ginza.account.login') + '</span></button><p class="create-account-ginza-mobile">' + Drupal.t('hermes.ginza.account.new-member') + '</p> <button type="button" class="button form-submit ripple-effect create-account"> <span class="submit-text loader-sign-in-tray" data-track="data-track-account-signin-button">' + Drupal.t('hermes.ginza.account.register-member') + '</span></button></div></div></form></div><div class="reservation-redirect-ginza"> <a href="<?= _hermes_ginza_url_mypage() ?>">' + Drupal.t('hermes.ginza.login-reservation-message') + '</a></div> {{/login}}</div></section>';
this["APP"]["templates"]["scheduleGinza"] = '<section class="row-page-layout"><div class="content-block colored-background container-mginza"><h2 class="schedule-title"> ' + Drupal.t('hermes.ginza.calendar.title') + '</h2><div class="row-ginza"> {{#schedules}}<div class="column-container"> <time class="date-ginza">{{year}}' + Drupal.t('hermes_global.year') + '{{month}}' + Drupal.t('hermes_global.month') + '{{seanceDay}}' + Drupal.t('hermes_global.day') + ' {{#day}} ({{day}}){{/day}}</time><ul class="column-ginza"> {{#programs}} {{#reserved}}<li class="hour-ginza"> <time>{{start_time}}</time> - <time>{{end_time}}</time> <a class="reservation-link reserved" href="<?= _hermes_ginza_url() ?>/reserve/#/{{pid}}">' + Drupal.t('hermes.ginza.calendar.status-reserved') + '</a></li> {{/reserved}} {{^reserved}} {{#isReservable}}<li class="hour-ginza"> <time>{{start_time}}</time> - <time>{{end_time}}</time> <a class="reservation-link {{classStatus}}" href="<?= _hermes_ginza_url() ?>/reserve/#/{{pid}}">{{status}}</a></li> {{/isReservable}} {{^isReservable}}<li class="hour-ginza"> <time>{{start_time}}</time> - <time>{{end_time}}</time> <a class="reservation-link next-seance">' + Drupal.t('hermes.ginza.calendar.status-next-reserved') + '</a></li> {{/isReservable}} {{/reserved}} {{/programs}}</ul></div> <button id="ginzaHouse" class="button button-box ripple-effect ginza-house hidden"> ' + Drupal.t('hermes.ginza.calendar.see-more') + '</button> {{/schedules}} {{^schedules}}<p class="past-date">' + Drupal.t('hermes.ginza.calendar.past-date') + '</p> {{/schedules}}</div> {{#schedules.length}}<div class="container-legend-ginza"><ul class="legend-column"><li class="legend-row"><p class="legend-button available">' + Drupal.t('hermes.ginza.calendar.status-available') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-available-description') + '</p></li><li class="legend-row"><p class="legend-button few-seats-left">' + Drupal.t('hermes.ginza.calendar.status-few-seats-left') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-few-seats-left-description') + '</p></li><li class="legend-row"><p class="legend-button spare-seat">' + Drupal.t('hermes.ginza.calendar.status-spare-seat') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-spare-seat-description') + '</p></li><li class="legend-row"><p class="legend-button reserved">' + Drupal.t('hermes.ginza.calendar.status-reserved') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-reserved-description') + '</p></li><li class="legend-row"><p class="legend-button full">' + Drupal.t('hermes.ginza.calendar.status-full') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-full-description') + '</p></li><li class="legend-row"><p class="legend-button next-seance">' + Drupal.t('hermes.ginza.calendar.status-next-reserved') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-next-reserved-description') + '</p></li></ul></div> {{/schedules.length}}</div></section>';
this["APP"]["templates"]["addToCart"] = '<div class="notification-add-to-cart"> <button type="button" class="notification-close" aria-label="' + Drupal.t('hermes.accessibility.close_tray') + '"> <span class="sr-only">' + Drupal.t('hermes.accessibility.close_tray') + '</span><svg aria-hidden="true" class="icon icon-close" focusable="false"><use xlink:href="#cross"></use></svg></button><svg class="icon icon-cart" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#cart-add"></use></svg><h2 class="message" id="notification-message">' + Drupal.t('hermes_notification.cart.add') + '</h2><p class="sub-message"><strong>' + Drupal.t('hermes_notification.cart.standard-delivery') + '</strong></p> <button class="button button-accent notification-cta" type="button" aria-controls="tray-cart" aria-expanded="false" aria-haspopup="dialog"> <span>' + Drupal.t('hermes-global-translations.view-cart') + '</span></button></div>';
this["APP"]["templates"]["podcastControls"] = '<div class="player-podcast"> <input type="range" data-action="progress_bar" class="slider" value="0" max="100" aria-label="{{progressBar}}" aria-valuetext="{{loading}}"/></div><p class="editorial-block-paragraph" aria-hidden="true"> <span data-action="current_time">00:00</span><span data-action="total_time">{{duration}}</span></p><p data-action="accessibility_time" class="sr-only">{{accessibilityTime}}</p> <button class="volume-button" data-action="mute_button"> <span class="sr-only">{{mute}}</span><svg class="icon icon-volume" aria-hidden="true"><use xlink:href="#volume-on"></use></svg></button> <button data-action="rewind_button"> <span class="sr-only">{{rewind}}</span><svg class="icon icon-backward" aria-hidden="true"><use xlink:href="#rw-btn"></use></svg></button> <button class="play-button" data-action="play_button"> <span class="sr-only">{{play}}</span><svg class="icon icon-play-pause" aria-hidden="true"><use xlink:href="#play-btn"></use></svg></button> <button data-action="forward_button"> <span class="sr-only">{{forward}}</span><svg class="icon icon-forward" aria-hidden="true"><use xlink:href="#fw-btn"></use></svg></button> {{#subscriptionList.length}} <button class="subscribe-button" data-action="subscribe_button"> <span class="sr-only">{{subscribe}}</span><svg class="icon icon-subscribe" aria-hidden="true"><use xlink:href="#subscribe-btn"></use></svg></button><ul class="subscribe-dropdown hide-dropdown hide"> {{#subscriptionList}}<li class="subscribe-list"> <img class="subscribe-img" src="{{icon_url}}" alt="{{icon_alt}}"/> <a class="subscribe-link" href="{{link_url}}" target="_blank" data-track-subscription>{{link_title}} <span class="sr-only">{{newTab}}</span></a></li> {{/subscriptionList}}</ul> {{/subscriptionList.length}}';
this["APP"]["templates"]["podcastDescription"] = '<h3 class="editorial-block-title-2"> {{title}}</h2><p class="editorial-block-text"> {{description}}</p>';
this["APP"]["templates"]["podcastImage"] = '<img src="{{srcImage}}" alt=""/>';
this["APP"]["templates"]["podcastWrapper"] = '<div class="container-player"><podcast-description></podcast-description><podcast-controls></podcast-controls></div><div class="container-image"><podcast-image class="grey-background"></podcast-image></div>';
this["APP"]["templates"]["storeDetailsList"] = '<ul id="list-store"></ul>';
this["APP"]["templates"]["storeDetails"] = '<div class="store-detail"><div class="colresponsive"><h4 class="shop-title title-medium"> {{#storePageAngular}} <a href="{{base_url_to_store_page}}/{{hermes_url_locale_to_store_page}}/find-store/{{country_store_to_store_page}}/{{city_store_to_store_page}}/{{name_store_to_store_page}}-{{store_id}}/">{{/storePageAngular}} {{short_title}} {{#storePageAngular}}</a> {{/storePageAngular}}</h4><p class="address"> {{#address_store_detail_US}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{city}}, {{area}} {{postal_code}}{{#areaOrPostal}},{{/areaOrPostal}}<br/>{{country}} {{/address_store_detail_US}} {{#address_store_detail_JP}} {{postal_code}} {{country}} {{city}} {{street_address1}} {{#street_address2}}{{street_address2}}{{/street_address2}} {{#street_address3}}{{street_address3}}{{/street_address3}} {{/address_store_detail_JP}} {{#address_store_detail_SG_MY}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{city}}, {{#postal_code}}{{postal_code}},{{/postal_code}} {{country}} {{/address_store_detail_SG_MY}} {{#address_store_detail_GENERIC}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{postal_code}} {{city}}{{#cityOrPostal}},{{/cityOrPostal}}<br/>{{country}} {{/address_store_detail_GENERIC}}</p><div class="display-store-loc"><div class="storeloc-inline-block"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#phone"></use></svg></div><div class="storeloc-inline-block"><p class="phone"><a href="tel:{{phone_number_link_format}}">{{store_phone_number}}</a><br/> <a href="tel:{{phone_number_link_format}}">{{store_fax_number}}</a></p></div></div> {{#hasOpeningHours}}<div class="display-store-loc"><div class="storeloc-inline-block"><svg nopin="nopin" class="icon icon-time" aria-hidden="true" focusable="false"><use xlink:href="#time"></use></svg></div><div class="storeloc-inline-block"><p>{{& opening}}</p></div></div> {{/hasOpeningHours}} {{#additional_information}}<section aria-labelledby="{{additional_informations_id}}" class="additional-information"><h5 id="{{additional_informations_id}}" class="title-information-add">{{titleAdditionalInformation}}</h5> {{& additional_information}}</section> {{/additional_information}} <span class=\'linkGetDirection\'>{{getDirections}}</span></div></div>';
this["APP"]["templates"]["storeLocatorDisplayError"] = '<div class="error-container" role="alert" aria-live="assertive"> {{oops}} {{noResults}}</div>';
this["APP"]["templates"]["storeLocatorDisplayList"] = '<h3 class="sr-only" aria-hidden="true" id="titleListViewAccessibility">' + Drupal.t('hermes.store_locator.list_view_of_stores_title') + '</h3><div class="list-container"><div id="list" class="list"></div><p><a id="btShowMore" href="#more-results">' + Drupal.t('hermes.store_locator.see_more') + '</a></p></div>';
this["APP"]["templates"]["storeLocatorDisplayMap"] = '<h3 class="sr-only" aria-hidden="false" id="titleMapViewAccessibility">' + Drupal.t('hermes.store_locator.map_view_of_stores_title') + '</h3><div id="map" class="map" aria-hidden="false"></div>';
this["APP"]["templates"]["storeLocatorDisplay"] = '<div class="resultsnav"><h2 class="store-title">{{storesResults}}</h2><store-locator-display-error></store-locator-display-error><ul id="stores-result-tab" class="stores-result-tab"><li id="buttonShowMap" data-action="open-map"> <a href="#mapblock"><svg nopin="nopin" class="btn map-pin icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#map-pin"></use></svg>{{mapView}} <span class="sr-only">, {{mapViewButtonAccessibility}}</span> <span class="sr-only" id="mapViewButtonSelected" aria-hidden="false">, {{selectedButtonAccessibility}}</span></a></li><li id="buttonShowList" data-action="open-list"> <a id="linkShowList" href="#list"><svg nopin="nopin" class="btn list icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#list"></use></svg>{{listView}} <span class="sr-only">, {{listViewButtonAccessibility}}</span> <span class="sr-only" id="listViewButtonSelected" aria-hidden="true">, {{selectedButtonAccessibility}}</span></a></li></ul></div><div class="storeLocatorContainers"><store-locator-display-map></store-locator-display-map><store-locator-display-list></store-locator-display-list></div>';
this["APP"]["templates"]["storeLocatorError"] = '<div class="error-container"><h1>{{oops}}</h1><p>{{locatorError}}</p></div>';
this["APP"]["templates"]["storeLocator"] = '<div class="title-container-search"><h1 class="big">{{findAStore}}</h1></div><div class="container-search"><div class="hero"><div class="imgcrop"> <img sizes="100vw" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" srcset="{{imageMobile}} 480w, {{imageDesktop}} 1440w" alt=""></div><div class="inner"><store-search></store-search></div></div><store-locator-error></store-locator-error><store-locator-display></store-locator-display></div>';
this["APP"]["templates"]["storeSearch"] = '<div class="container-items"><h2 class="sr-only">{{searchAccessibility}}</h2><div id="container-search-items" class="container-search-items"><svg nopin="nopin" class="btn magnifier icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use></svg><div aria-expanded="false" role="combobox" id="custom-autocomplete" class="custom-autocomplete-store-loc" aria-haspopup="listbox" aria-owns="searchfield-autocomplete-list"> <label class="sr-only" for="searchfield">{{searchFieldLabel}}</label> <input aria-activedescendant aria-autocomplete="list" id="searchfield" aria-controls="searchfield-autocomplete-list" type="search" class="block-container" autocomplete="off" class="field-search" name="q" placeholder="{{placeHolderAddress}}"/></div> <button id="btclose" class="close" title="{{resetSearchFieldStoreLocator}}"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></button> <button id="btlocate" class="location" title="{{useMyCurrentLocation}}"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#location"></use></svg></button><div id="suggest" class="suggest"><ul id="suggest-list"></ul></div></div><div class="container-find-button"> <input id="btfind" class="find-btn" type="submit" name="submit" value="{{buttonFind}}"/></div></div>';
this["APP"]["templates"]["trayNotificationChangePassword"] = '<p class="notification-message-title">{{#title}}{{title}}{{/title}}</p><p class="notification-message-description">{{#message}}{{message}}{{/message}}</p> {{#removedPaymentCardsMessage}}<p class="notification-message-description">{{removedPaymentCardsMessage}}</p> {{/removedPaymentCardsMessage}}';
this["APP"]["templates"]["trayNotificationContactUs"] = '<p class="notification-message-title">{{#titleContactUs}}{{titleContactUs}}{{/titleContactUs}}</p><p class="notification-message-description">{{#messageContactUs}}{{messageContactUs}}{{/messageContactUs}}</p>';
this["APP"]["templates"]["trayNotificationLogin"] = '<p data-cs-mask class="notification-message-title">' + Drupal.t('hermes-global-translations.welcome.user') + '</p><p class="notification-message-description">' + Drupal.t('hermes-global-translations.welcome-back.byline') + '</p>';
this["APP"]["templates"]["trayNotificationLogout"] = '<p data-cs-mask class="notification-message-title">' + Drupal.t('hermes-global-translations.see-you-soon') + '</p>';
this["APP"]["templates"]["trayNotificationNewsletter"] = '<p class="notification-message-title">{{#title}}{{title}}{{/title}}</p><p class="notification-message-description">{{#description}}{{description}}{{/description}}</p>';
this["APP"]["templates"]["trayNotificationWechatBinding"] = '<p class="notification-message-title">' + Drupal.t('hermes-global-translations.welcome-back') + '</p><p class="notification-message-description">' + Drupal.t('hermes-global-translations.welcome-back.wechat.linked') + '</p>';
this["APP"]["templates"]["storeProductDetailsList"] = '<ul aria-labelledby="stores-found-msg" id="list-store" class="list-store"></ul>';
this["APP"]["templates"]["storeProductDetails"] = '<div class="store-product-detail"><div class="colresponsive"><div class="store-limit-info"> {{#isLimitedAvailability}} <button aria-expanded="false" aria-controls="store-limit-info-msg-toggle" onclick="showHideAvailabilityMsg(this)" class="product-locator-button-limited-availability inline-icon store-limit-info-limit"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#check"></use></svg><p> ' + Drupal.t('page-hermes-product-locator-details-is-limited-availability') + '</p><svg nopin="nopin" class="icon icon-phone-cr icon-info-product-availability" aria-hidden="true" focusable="false"><use xlink:href="#info"></use></svg></button> {{/isLimitedAvailability}} {{^isLimitedAvailability}}<div class="product-locator-button-limited-availability inline-icon store-limit-info-limit is-not-limited-availability"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#check"></use></svg><p> ' + Drupal.t('page-hermes-product-locator-details-is-available') + '</p></div> {{/isLimitedAvailability}}</div><div id="store-limit-info-msg-toggle" class="store-limit-info-msg-toggle"> ' + Drupal.t('page-hermes-product-locator-is-limited-msg-toggle') + '</div><h4 class="shop-title title-medium">{{short_title}}</h4><p class="address" data-street1="{{street_address1}}" data-street2="{{street_address2}}" data-street3="{{street_address3}}" data-postal-code="{{postal_code}}" data-city="{{city}}" data-country="{{country}}"> {{#address_store_detail_US}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{city}}, {{area}} {{postal_code}},<br/>{{country}} {{/address_store_detail_US}} {{#address_store_detail_JP}} {{postal_code}} {{country}} {{city}} {{street_address1}} {{#street_address2}}{{street_address2}}{{/street_address2}} {{#street_address3}}{{street_address3}}{{/street_address3}} {{/address_store_detail_JP}} {{#address_store_detail_GENERIC}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{postal_code}} {{city}},<br/>{{country}} {{/address_store_detail_GENERIC}}</p><div class="inline-icon"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#phone"></use></svg><p class="phone" data-phone="{{store_phone_number}}"> <a href="tel:{{phone_number_link_format}}"><span class="sr-only">' + Drupal.t('page-hermes-product-locator-details-phone') + '</span> {{store_phone_number}}</a></p></div><div class="inline-icon store-limit-info-km"><svg enable-background="new 0 0 100 100" id="Layer_1" version="1.1" viewBox="0 0 100 100"><g><path d="M50.2 21.1c-12.7 0-22.9 10.3-22.9 22.9s22.9 37.1 22.9 37.1S73.1 56.7 73.1 44 62.9 21.1 50.2 21.1zM50.2 78.1c-2.1-2.3-6-6.8-9.9-12.1-7.2-9.7-11-17.3-11-22.1 0-11.5 9.4-20.9 20.9-20.9S71.1 32.5 71.1 44c0 4.7-3.8 12.4-11 22.1C56.2 71.3 52.3 75.8 50.2 78.1z" fill="#221F1F"></path><path d="M50.2 32.1c-6 0-10.8 4.8-10.8 10.8 0 6 4.8 10.8 10.8 10.8 6 0 10.8-4.8 10.8-10.8C61 37 56.2 32.1 50.2 32.1zM56.4 49.2c-1.6 1.6-3.8 2.6-6.2 2.6-2.4 0-4.6-1-6.2-2.6-1.6-1.6-2.6-3.8-2.6-6.2 0-2.4 1-4.6 2.6-6.2 1.6-1.6 3.8-2.6 6.2-2.6 2.4 0 4.6 1 6.2 2.6 1.6 1.6 2.6 3.8 2.6 6.2C59 45.4 58 47.6 56.4 49.2z" fill="#221F1F"></path></g></svg><p class="store-limit-info-km-num" data-distance="{{distanceFromCurrentInKm}}"> <span class="sr-only">' + Drupal.t('page-hermes-product-locator-details-distance') + ' {{distanceFromCurrentInKm}} km</span> <span aria-hidden="true">{{distanceFromCurrentInKm}} km</span></p></div><div class="more-details-content"> {{#hasOpeningHours}}<div class="display-time-icon"><svg nopin="nopin" class="icon icon-time" aria-label="' + Drupal.t('page-hermes-product-locator-accessibility-find-in-store-hours') + '" focusable="false"><use xlink:href="#time"></use></svg><p>{{& opening}}</p></div> {{/hasOpeningHours}} {{#additional_information}}<div class="additional-information"><h5 class="title-information-add">{{titleAdditionalInformation}}</h5> {{& additional_information}}</div> {{/additional_information}}</div><div class="more-info-links"> <button onclick="showHideMoreInformationsMsg(this, \'{{short_title}}\')" class="more-details-link link-to-button-underline" aria-expanded="false">' + Drupal.t('page-hermes-product-locator-more-details-open-toggle') + '</button> <span class=\'linkGetDirection get-direction-link-product-locator\'><span class="sr-only">{{getDirections}} ' + Drupal.t('page-hermes-product-locator-details-open-new-window') + '</span> <span aria-hidden="true">{{getDirections}}</span></span></div> {{#isEreservationActive}}<div class="e-reservation-booking-button-area"> <button type="button" class="button form-submit ripple-effect e-reservation-booking-button" onclick="bookingAction(this)" store="{{cegid_id}}"><div class="submit-text loader-button-ereservation-booking">' + Drupal.t('page-hermes-product-locator-e-reservation-booking-button-text') + '</div></button></div> {{/isEreservationActive}}</div></div>';
this["APP"]["templates"]["storeProductLocatorDisplayError"] = '<div id="product-locator-map-error-msg" class="error-container"> {{ErrorMsg}}</div>';
this["APP"]["templates"]["storeProductLocatorDisplayList"] = '<div class="list-container"><div id="no-store-close-msg" class="no-store-close-msg">' + Drupal.t('page-hermes-product-locator-no-store-close-msg') + '</div><h3 id="stores-found-msg" class="stores-found-msg"></h3><div id="dynamic-stores-lists" class="dynamic-stores-lists"><div id="list" class="list"></div><p><button id="btShowMore" class="show-more-stores" href="#more-results" aria-label="' + Drupal.t('hermes.store_locator.accessibility.see_more') + '">' + Drupal.t('hermes.store_locator.see_more') + '</button></p></div><p id="pl-concessionary-disclaimer-msg" class="pl-concessionary-disclaimer-msg"></p></div>';
this["APP"]["templates"]["storeProductLocatorDisplayMap"] = '<h3 class="sr-only" aria-hidden="true" id="map-view-title-product-locator">' + Drupal.t('hermes.store_locator.map_view_of_stores_title') + '</h3><div id="map" class="map"></div>';
this["APP"]["templates"]["storeProductLocatorDisplay"] = '<store-product-locator-display-error></store-product-locator-display-error><div class="storeLocatorContainers"><store-product-locator-display-list></store-product-locator-display-list></div>';
this["APP"]["templates"]["storeProductLocator"] = '<h3 class="sr-only">' + Drupal.t('hermes.product_locator.title-accessibility.find-stores') + '</h3><store-product-search></store-product-search><store-product-locator-display></store-product-locator-display>';
this["APP"]["templates"]["storeProductSearch"] = '<div id="store-search-product-locator" class="store-search-product-locator"><div class="container-items"><div id="container-search-items" class="container-search-items"><svg nopin="nopin" class="btn magnifier icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use></svg><div aria-expanded="false" role="combobox" id="custom-autocomplete" class="custom-autocomplete" aria-haspopup="listbox" aria-owns="searchfield-autocomplete-list"> <label class="sr-only" for="searchfield">' + Drupal.t('page--hermes-global--find-store.value-label') + '</label> <input aria-activedescendant aria-autocomplete="list" id="searchfield" aria-controls="searchfield-autocomplete-list" type="search" class="block-container" autocomplete="off" class="field-search" name="q" placeholder="' + Drupal.t('hermes.commerce.product_locator.search.placeholder') + '"/></div> <button id="btclose" class="close" title="' + Drupal.t('page--hermes-global--find-store.reset-search-field') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></button> <button id="btlocate" class="location" title="' + Drupal.t('page--hermes-global--find-store.use-my-current-location') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#location"></use></svg></button><div id="suggest" class="suggest"><ul></ul></div></div></div><div class="container-find-button"> <input aria-label="' + Drupal.t('hermes.commerce.product_locator.title') + '" id="btfind" class="find-btn" type="submit" name="submit" value="' + Drupal.t('hermes_commerce.find') + '"/></div></div>';
;/*})'"*/
;/*})'"*/
/*! For license information please see page-editorial.js.LICENSE.txt */
!function(){var e={3558:function(){void 0===String.prototype.capitalizeFirstLetter&&(String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),void 0===String.prototype.minimizeFirstLetter&&(String.prototype.minimizeFirstLetter=function(){return this.charAt(0).toLowerCase()+this.slice(1)}),void 0===String.prototype.camelCaseToDash&&(String.prototype.camelCaseToDash=function(){var e=this.charAt(0).toLowerCase()+this.slice(1);return e?e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})):null}),void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),JSON&&JSON.prototype&&void 0===JSON.prototype.merge&&(JSON.prototype.merge=function(e,t){var n=Object.create(t);for(var i in e)n.hasOwnProperty(i)?null!=e[i]&&e[i].constructor===Object&&(n[i]=JSON.merge(e[i],n[i])):n[i]=e[i];return n}),void 0===Number.prototype.format&&(Number.prototype.format=function(e,t,n,i){var r="\\d(?=(\\d{"+(t||3)+"})+"+(e>0?"\\D":"$")+")",a=this.toFixed(Math.max(0,~~e));return(i?a.replace(".",i):a).replace(new RegExp(r,"g"),"$&"+(n||""))}),"undefined"!=typeof HTMLElement&&(void 0===HTMLElement.prototype.removeAllChildren&&(HTMLElement.prototype.removeAllChildren=function(){for(;this.firstChild;)this.removeChild(this.firstChild)}),void 0===HTMLElement.prototype.isShown&&(HTMLElement.prototype.isShown=function(){return"none"!==this.style.display}),void 0===HTMLElement.prototype.isShown&&(HTMLElement.prototype.isShown=function(){return"none"!==this.style.display}),void 0===HTMLElement.loadScript&&(HTMLElement.loadScript=function(e,t,n){for(var i=e.head||e.getElementsByTagName("head")[0],r=e.getElementsByTagName("script"),a=!1,s=r.length;s--;)r[s].src===t&&(a=!0);if(a)n();else{var o=document.createElement("script");o.addEventListener("load",n),o.src=t,o.async=!1,i.insertBefore(o,i.firstChild)}}))},817:function(e,t,n){"use strict";var i=n(8096),r=n.n(i),a=function(){var e={arrows:!1,dots:!0,infinite:!0,slidesToShow:1,centerMode:!0,variableWidth:!0,focusOnSelect:!0};this.init=function(){this.$galleryCarousel=jQuery(".block-edito-block-gallery-carousel [data-track-gallery-carousel]"),this.createGalleryCarousel(this.$galleryCarousel)},this.createGalleryCarousel=function(t){t.length&&(function(e){(e.find(".media-wrap-portrait").length||e.find(".media-wrap-portrait-tall").length)&&e.addClass("carousel-portrait"),(e.find(".media-wrap-landscape").length||e.find(".media-wrap-landscape-wide").length)&&e.addClass("carousel-landscape"),e.find(".media-wrap-square").length&&e.addClass("carousel-square")}(t),t.slick(e).slick("getSlick"),jQuery(window).on("resize",(function(){t.slick("setPosition")})))},this.init()},s={COLOR_LESS:"SANSCOLORIS",SIZE_LESS:"SANS_TAILLE",CANADA:"ca",FRANCE:"fr",JAPAN:"jp",HK:"hk",MACAO:"mo",TAIWAN:"tw",KOREA:"kr",US:"us",CHINA:"cn",EMIRATES:"dh",SAUDI:"ri",NEED_YUNPIAN:["cn","hk","mo","tw","kr","th"],REGION_DISTRICT_FIELDS:["hk","mo","th"],CONDITIONAL_CITY_DISTRICT_FIELD:["tw"],PHONE_LOGIN:["cn"],DELIVER:"deliver",PICKUP:"pickup",COLOR_LESS_WITH_SPACE:"SANS_COLORIS",NB_ITEMS_GRID_FH:36,MIN_DAY:0,MAX_DAY:31,LENGTH_YEAR:4,LIMIT_AGE_USER:110,YEAR_LABEL:"year",SPECIAL_KEY:["Backspace","Del","Home","Tab","Left","Right","Up","Down","End","Spacebar","Shift"],TABLET_LANDSCAPE_WIDTH:1024,TABLET_PORTRAIT_WIDTH:768,REGION_DISABLED:-1,LOGIN_DELAY:4e3,HOSTNAME:["www.hermes.com","www.hermes.cn"],ERRORCODE:{inactivity:"401",emptyCart:"4100004",wrongEmailPassword:"2300001",oldPasswordIncorrect:"2310001",emailExist:"2400001",accountExist:"2400011",emailNewsletterInvalid:"2200000",emailInvalid:"2200001",outOfStock:"3300007",notInStock:"3400007",expiredHash:"2900005",hashNotFound:"2300005",smsBanned:"3100002",wechatbindingUserNotFound:"6000011",wechatbindingUserAlreadyBind:"6100011",wechatbindingUnionIdAlreadyUsed:"6200011",wechatbindingNeededParams:"6300011"},BRAND:"hermes",PRODUCTSIMPLEPAGELABEL:"SingleProductPage",PRODUCTDOUBLEPAGELABEL:"DoubleProductPage",LOOKPAGELABEL:"LooksProductPage",NONAPP:"N/A",MOTHERCAT:"1481",NONCONNECTED:"non-connected",FRONT_PAGE:"front page",FAQ_PAGE:"faq page",LEGAL_PAGE:"legal page",PAGE_404:"404 error page",LISTING_PAGE:"listing page",STORY_PAGE:"edito page",ACCOUNT_PROFIL_PAGE:"account",PRODUCT_PAGE:"product page",PRODUCT_PAGE_SINGLE:"single product page",PRODUCT_PAGE_DOUBLE:"double product page",PRODUCT_PAGE_LOOK:"look product page",PRODUCT_PAGE_SET:"set product page",FIND_STORE_PAGE:"store locator",VALIDATE_3DS_PAGE:"validate_3ds page",CHECKOUT_CONFIRMATION:"Checkout confirmation",PRODUCT_GRID:"product grid",MASTER_PAGE:"master page",SCROLL_PARAM:"positionsku",START_INDEX_PARAM:"fh_start_index",LIMIT_PRODUCTS_PARAM:108,SEARCH_RESULTS:"search results",MODULE_VIDEO:"Module_Video",VPURI_FINDYOURORDER:"/findyourorder/",VPURI_ORDERSTRAY:"/orderstray/",COUNTRY_USING_MILES:["US"],GENDERS:["Ms.","Mrs.","Mr.","Miss","Dr","Prof","Honorable"],EXTRA_URL_PARAM:["positionsku"],SECURITY_3DS_LOGOS:[{img:"visa",alt:"Verified by Visa"},{img:"mastercard",alt:"MasterCard SecureCode"},{img:"amex",alt:"American Express SafeKey"}],PAYMENT_OK:"payment_OK",PAYMENT_NOK:"payment_NOK",NOT_USED:"not_used",DURATION_SLIDE_TOGGLE:500,EXCHANGE:"exchange",REFUND:"refund",RETURN:"return",ENTER_KEY:"Enter",SPACE_KEY:"Space",BACKSPACE_KEY:"Backspace",ESCAPE_KEY:"Escape",ESCAPE_KEYCODE:27,DOWN_KEY:"ArrowDown",UP_KEY:"ArrowUp",TAB_KEY:"Tab",TAB_KEYCODE:9,SPACE_KEYCODE:32,END_KEYCODE:35,HOME_KEYCODE:36,LEFT_KEYCODE:37,UP_KEYCODE:38,RIGHT_KEYCODE:39,DOWN_KEYCODE:40,CHECKOUT:"Checkout",DATAGROUP:"data-group",INVALIDTYPES:[null,"file","image","submit","fieldset","reset","button","hidden"],FIELD_REF_SIZE:"field_ref_size",FIELD_COLOR_HERMES:"field_color_hermes",FIELD_MASS_VOLUME_INT:"field_mass_volume_int",FIELD_MASS_VOLUME_IMP:"field_mass_volume_imp",REQUIRED:"required",ERROR:"error",NO_SHIPPING_ADDRESS_MSG_COUNTRY_PREFIX:{US:"the"},SOAP_SET_COUNT:[3],PIPE_ENCODED:"%7C",REDIRECT_DELAY:3e3,NOTAX:"--",IS_IOS:/i(Phone|Pod|Pad)/.test(navigator.appVersion),KIT_APPLEWATCH:"KIT_APPLEWATCH",ACTIVATE_CAPTCHA_URL:"/is-captcha-activated",GET_LIST_CHINA_ADDRESS:"/address/china/infos",ADDRESS_DISTRICTS_URL:"/address/districts",PAYMENT_METHOD:{creditCard:"adyen_cc",adyenOneclick:"adyen_oneclick",paypal:"adyen_hpp_paypal",alipay:"alipay_payment",kcp:"adyen_hpp_kcp",kcp_payco:"adyen_hpp_kcp_payco",wechat:"wechatpay",hsbcCup:"hsbc_cup"},EZ_PUBLISH_COUNTRY_MAPPING:{ca:"Canada",fr:"France",us:"United States",gb:"Great Britain",cn:"China",de:"Germany",es:"Spain"},BIKINI:"BIKINI",PLAYER:{autoplay:"Autoplay",firstPlay:"FirstPlay",fullscreen:"Fullscreen",fw:"fw15",mute:"Mute",newPlay:"NewPlay",orgId:"88c3d9f3-ba13-4700-9f9f-a9030187bd5b",pause:"Pause",play:"Play",position:"Position",subscribe:"Subscribe to podcast",subscribe_close:"Close subscribe to podcast",rw:"rw15",start:"Start",stop:"Stop",unmute:"Unmute"},SAGAWA_CARRIER:"sagawa_standard",JAPAN_LASTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_LASTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_NO_NUMBERS_PATTERN:"\\d",FORGOT_PASSWORD_URL:"/forgot-password",CREATE_LIGHT_ACCOUNT_URL:"/customer/light",PRODUCT_LOCATOR_MSG_CONCESSIONARY_DISCLAIMER_COUNTRIES:["fr","us","it"],FORM_COUNTRY_DEFAULT_FIELDS_VALUES:{city:1,cityselect:-1,social_security_number:-1,day:-1,district:-1,district_bis_id:-1,email:1,firstname:1,firstname2:-1,gender:-1,lastname:1,lastname2:-1,month:-1,postcode:1,postcode_bis:-1,postcode_select:-1,prefix:1,region:-1,regiontext:-1,street1:1,street2:0,street3:-1,street_number:-1,subject_list:1,telephone2:-1,year:-1},CHECKOUT_CARD_TYPE:{visa:"Visa",amex:"American Express",mc:"Mastercard",jcb:"JCB",dinersclub:"Diners Club",discover:"Discover",maestro:"Maestro",cartebancaire:"Carte bancaire"}};function o(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e){if(Array.isArray(e))return e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseurl="",this.path="",this.queryParams="",this.fragment={params:[],pipedValues:[],keyword:""},h(t)){case"string":this._parse(t);break;case"undefined":break;default:throw"Invalid 'url' parameter, string expected, got: "+JSON.stringify(t)}}var t,n;return t=e,n=[{key:"build",value:function(){var e=this.baseurl;this.path&&(this.path.startsWith("/")||(e+="/"),e+=this.path),this.queryParams&&(e+=this.queryParams);var t=this._buildFragment(this.fragment);return t&&(e+="#"+t),e}},{key:"getFragmentParam",value:function(e){if("string"!=typeof e)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(e);return this.fragment.params.find((function(t){return t.key===e}))}},{key:"addFragmentParam",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("string"!=typeof e)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(e);if("string"!=typeof t)throw"Invalid 'value' parameter, string expected, got: "+JSON.stringify(t);if("boolean"!=typeof n)throw"Invalid 'updateIfExists' parameter, boolean expected, got: "+JSON.stringify(n);if(n){var i=this.getFragmentParam(e);if(i)return i.value=t,!0}return this.fragment.params.push({key:e,value:t}),!1}},{key:"removeFragmentParam",value:function(e){if("string"!=typeof e)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(e);for(var t=!1,n=this.fragment.params,i=n.length-1;i>=0;i--)n[i].key===e&&(n.splice(i,1),t=!0);return t}},{key:"_parse",value:function(e){var t=document.createElement("a");t.href=e;var n=t.protocol,i=t.hostname;this.path=t.pathname,this.path.startsWith("/")||(this.path="/"+this.path),"string"==typeof t.origin?this.baseurl=t.origin:this.baseurl=n+"//"+i,this.queryParams=t.search;var r=t.hash;r.startsWith("#")&&(r=r.substring(1)),this.fragment=this._parseFragment(r)}},{key:"_parseFragment",value:function(e){var t,n=function(e,t){return d(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}(e,t)||l(e,t)||u()}(e.split("||"),2),i=n[0],r=n[1],a=d(t=i.split("|"))||o(t)||l(t)||u(),s=a[0],c=a.slice(1),h=[];s.split("&").forEach((function(e){if(""!==e){var t=e.split("=").map(decodeURIComponent);h.push({key:t[0],value:t[1]})}}));var p=c.map(decodeURIComponent);return{params:h,pipedValues:p,keyword:r}}},{key:"_buildFragment",value:function(e){var t,n=e.params.map((function(e){if(!e.key||!e.value)throw"Invalid fragment parameter, expected a object with key and value property, got: "+JSON.stringify(e);if("string"!=typeof e.key)throw"Invalid 'key' property of fragment parameter, expected a string, got: "+JSON.stringify(e.key);if("string"!=typeof e.value)throw"Invalid 'value' property of fragment parameter, expected a string, got: "+JSON.stringify(e.value);var t=encodeURIComponent(e.key),n=encodeURIComponent(e.value);return"".concat(t,"=").concat(n)})).join("&"),i=e.pipedValues.map(encodeURIComponent),r=[n].concat((t=i,function(e){if(Array.isArray(e))return c(e)}(t)||o(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).join("|");if(e.keyword){if("string"!=typeof e.keyword)throw"Invalid 'keyword' of fragment, expected a string, got: "+JSON.stringify(e.keyword);r+="||"+e.keyword}return r}}],n&&p(t.prototype,n),e}(),m=n(7813),g=n.n(m),y=n(3998),v=n.n(y),_=JSON.parse('{"Play":"Reproducir","Play Video":"Reproducir Vídeo","Pause":"Pausa","Current Time":"Tiempo reproducido","Duration":"Duración total","Remaining Time":"Tiempo restante","Stream Type":"Tipo de secuencia","LIVE":"DIRECTO","Loaded":"Cargado","Progress":"Progreso","Fullscreen":"Pantalla completa","Non-Fullscreen":"Pantalla no completa","Mute":"Silenciar","Unmute":"No silenciado","Playback Rate":"Velocidad de reproducción","Subtitles":"Subtítulos","subtitles off":"Subtítulos desactivados","Captions":"Subtítulos especiales","captions off":"Subtítulos especiales desactivados","Chapters":"Capítulos","You aborted the media playback":"Ha interrumpido la reproducción del vídeo.","A network error caused the media download to fail part-way.":"Un error de red ha interrumpido la descarga del vídeo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"No se ha podido cargar el vídeo debido a un fallo de red o del servidor o porque el formato es incompatible.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La reproducción de vídeo se ha interrumpido por un problema de corrupción de datos o porque el vídeo precisa funciones que su navegador no ofrece.","No compatible source was found for this media.":"No se ha encontrado ninguna fuente compatible con este vídeo.","Audio Player":"Reproductor de audio","Video Player":"Reproductor de video","Replay":"Volver a reproducir","Seek to live, currently behind live":"Buscar en vivo, actualmente demorado con respecto a la transmisión en vivo","Seek to live, currently playing live":"Buscar en vivo, actualmente reproduciendo en vivo","Progress Bar":"Barra de progreso","progress bar timing: currentTime={1} duration={2}":"{1} de {2}","Descriptions":"Descripciones","descriptions off":"descripciones desactivadas","Audio Track":"Pista de audio","Volume Level":"Nivel de volumen","The media is encrypted and we do not have the keys to decrypt it.":"El material audiovisual está cifrado y no tenemos las claves para descifrarlo.","Close":"Cerrar","Modal Window":"Ventana modal","This is a modal window":"Esta es una ventana modal","This modal can be closed by pressing the Escape key or activating the close button.":"Esta ventana modal puede cerrarse presionando la tecla Escape o activando el botón de cierre.",", opens captions settings dialog":", abre el diálogo de configuración de leyendas",", opens subtitles settings dialog":", abre el diálogo de configuración de subtítulos",", selected":", seleccionado","Close Modal Dialog":"Cierra cuadro de diálogo modal",", opens descriptions settings dialog":", abre el diálogo de configuración de las descripciones","captions settings":"configuración de leyendas","subtitles settings":"configuración de subtítulos","descriptions settings":"configuración de descripciones","Text":"Texto","White":"Blanco","Black":"Negro","Red":"Rojo","Green":"Verde","Blue":"Azul","Yellow":"Amarillo","Magenta":"Magenta","Cyan":"Cian","Background":"Fondo","Window":"Ventana","Transparent":"Transparente","Semi-Transparent":"Semitransparente","Opaque":"Opaca","Font Size":"Tamaño de fuente","Text Edge Style":"Estilo de borde del texto","None":"Ninguno","Raised":"En relieve","Depressed":"Hundido","Uniform":"Uniforme","Dropshadow":"Sombra paralela","Font Family":"Familia de fuente","Proportional Sans-Serif":"Sans-Serif proporcional","Monospace Sans-Serif":"Sans-Serif monoespacio","Proportional Serif":"Serif proporcional","Monospace Serif":"Serif monoespacio","Casual":"Informal","Script":"Cursiva","Small Caps":"Minúsculas","Reset":"Restablecer","restore all settings to the default values":"restablece todas las configuraciones a los valores predeterminados","Done":"Listo","Caption Settings Dialog":"Diálogo de configuración de leyendas","Beginning of dialog window. Escape will cancel and close the window.":"Comienzo de la ventana de diálogo. La tecla Escape cancelará la operación y cerrará la ventana.","End of dialog window.":"Final de la ventana de diálogo.","{1} is loading.":"{1} se está cargando.","Exit Picture-in-Picture":"Salir de imagen sobre imagen","Picture-in-Picture":"Imagen sobre imagen"}'),b=JSON.parse('{"Audio Player":"Lecteur audio","Video Player":"Lecteur vidéo","Play":"Lecture","Pause":"Pause","Replay":"Revoir","Current Time":"Temps actuel","Duration":"Durée","Remaining Time":"Temps restant","Stream Type":"Type de flux","LIVE":"EN DIRECT","Loaded":"Chargé","Progress":"Progression","Progress Bar":"Barre de progression","progress bar timing: currentTime={1} duration={2}":"{1} de {2}","Fullscreen":"Plein écran","Non-Fullscreen":"Fenêtré","Mute":"Sourdine","Unmute":"Son activé","Playback Rate":"Vitesse de lecture","Subtitles":"Sous-titres","subtitles off":"Sous-titres désactivés","Captions":"Sous-titres transcrits","captions off":"Sous-titres transcrits désactivés","Chapters":"Chapitres","Descriptions":"Descriptions","descriptions off":"descriptions désactivées","Audio Track":"Piste audio","Volume Level":"Niveau de volume","You aborted the media playback":"Vous avez interrompu la lecture de la vidéo.","A network error caused the media download to fail part-way.":"Une erreur de réseau a interrompu le téléchargement de la vidéo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Cette vidéo n\'a pas pu être chargée, soit parce que le serveur ou le réseau a échoué ou parce que le format n\'est pas reconnu.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La lecture de la vidéo a été interrompue à cause d\'un problème de corruption ou parce que la vidéo utilise des fonctionnalités non prises en charge par votre navigateur.","No compatible source was found for this media.":"Aucune source compatible n\'a été trouvée pour cette vidéo.","The media is encrypted and we do not have the keys to decrypt it.":"Le média est chiffré et nous n\'avons pas les clés pour le déchiffrer.","Play Video":"Lire la vidéo","Close":"Fermer","Close Modal Dialog":"Fermer la boîte de dialogue modale","Modal Window":"Fenêtre modale","This is a modal window":"Ceci est une fenêtre modale","This modal can be closed by pressing the Escape key or activating the close button.":"Ce modal peut être fermé en appuyant sur la touche Échap ou activer le bouton de fermeture.",", opens captions settings dialog":", ouvrir les paramètres des sous-titres transcrits",", opens subtitles settings dialog":", ouvrir les paramètres des sous-titres",", opens descriptions settings dialog":", ouvrir les paramètres des descriptions",", selected":", sélectionné","captions settings":"Paramètres des sous-titres transcrits","subtitles settings":"Paramètres des sous-titres","descriptions settings":"Paramètres des descriptions","Text":"Texte","White":"Blanc","Black":"Noir","Red":"Rouge","Green":"Vert","Blue":"Bleu","Yellow":"Jaune","Magenta":"Magenta","Cyan":"Cyan","Background":"Arrière-plan","Window":"Fenêtre","Transparent":"Transparent","Semi-Transparent":"Semi-transparent","Opaque":"Opaque","Font Size":"Taille des caractères","Text Edge Style":"Style des contours du texte","None":"Aucun","Raised":"Élevé","Depressed":"Enfoncé","Uniform":"Uniforme","Dropshadow":"Ombre portée","Font Family":"Famille de polices","Proportional Sans-Serif":"Polices à chasse variable sans empattement (Proportional Sans-Serif)","Monospace Sans-Serif":"Polices à chasse fixe sans empattement (Monospace Sans-Serif)","Proportional Serif":"Polices à chasse variable avec empattement (Proportional Serif)","Monospace Serif":"Polices à chasse fixe avec empattement (Monospace Serif)","Casual":"Manuscrite","Script":"Scripte","Small Caps":"Petites capitales","Reset":"Réinitialiser","restore all settings to the default values":"Restaurer tous les paramètres aux valeurs par défaut","Done":"Terminé","Caption Settings Dialog":"Boîte de dialogue des paramètres des sous-titres transcrits","Beginning of dialog window. Escape will cancel and close the window.":"Début de la fenêtre de dialogue. La touche d\'échappement annulera et fermera la fenêtre.","End of dialog window.":"Fin de la fenêtre de dialogue.","Exit Picture-in-Picture":"Quitter le mode image dans l\'image","Picture-in-Picture":"Image dans l\'image","{1} is loading.":"{1} en cours de chargement."}'),T=JSON.parse('{"Audio Player":"Audio Player","Video Player":"Video Player","Play":"Play","Pause":"Pause","Replay":"Replay","Current Time":"Current Time","Duration":"Duration","Remaining Time":"Remaining Time","Stream Type":"Stream Type","LIVE":"LIVE","Seek to live, currently behind live":"Seek to live, currently behind live","Seek to live, currently playing live":"Seek to live, currently playing live","Loaded":"Loaded","Progress":"Progress","Progress Bar":"Progress Bar","progress bar timing: currentTime={1} duration={2}":"{1} of {2}","Fullscreen":"Fullscreen","Non-Fullscreen":"Exit Fullscreen","Mute":"Mute","Unmute":"Unmute","Playback Rate":"Playback Rate","Subtitles":"Subtitles","subtitles off":"subtitles off","Captions":"Captions","captions off":"captions off","Chapters":"Chapters","Descriptions":"Descriptions","descriptions off":"descriptions off","Audio Track":"Audio Track","Volume Level":"Volume Level","You aborted the media playback":"You aborted the media playback","A network error caused the media download to fail part-way.":"A network error caused the media download to fail part-way.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"The media could not be loaded, either because the server or network failed or because the format is not supported.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.","No compatible source was found for this media.":"No compatible source was found for this media.","The media is encrypted and we do not have the keys to decrypt it.":"The media is encrypted and we do not have the keys to decrypt it.","Play Video":"Play Video","Close":"Close","Close Modal Dialog":"Close Modal Dialog","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected","captions settings":"captions settings","subtitles settings":"subtitles settings","descriptions settings":"descriptions settings","Text":"Text","White":"White","Black":"Black","Red":"Red","Green":"Green","Blue":"Blue","Yellow":"Yellow","Magenta":"Magenta","Cyan":"Cyan","Background":"Background","Window":"Window","Transparent":"Transparent","Semi-Transparent":"Semi-Transparent","Opaque":"Opaque","Font Size":"Font Size","Text Edge Style":"Text Edge Style","None":"None","Raised":"Raised","Depressed":"Depressed","Uniform":"Uniform","Dropshadow":"Dropshadow","Font Family":"Font Family","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif","Casual":"Casual","Script":"Script","Small Caps":"Small Caps","Reset":"Reset","restore all settings to the default values":"restore all settings to the default values","Done":"Done","Caption Settings Dialog":"Caption Settings Dialog","Beginning of dialog window. Escape will cancel and close the window.":"Beginning of dialog window. Escape will cancel and close the window.","End of dialog window.":"End of dialog window.","{1} is loading.":"{1} is loading.","Exit Picture-in-Picture":"Exit Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture","No content":"No content"}'),S=JSON.parse('{"Play":"Wiedergabe","Pause":"Pause","Replay":"Erneut abspielen","Current Time":"Aktueller Zeitpunkt","Duration":"Dauer","Remaining Time":"Verbleibende Zeit","Stream Type":"Streamtyp","LIVE":"LIVE","Loaded":"Geladen","Progress":"Status","Fullscreen":"Vollbild","Non-Fullscreen":"Vollbildmodus beenden","Mute":"Ton aus","Unmute":"Ton ein","Playback Rate":"Wiedergabegeschwindigkeit","Subtitles":"Untertitel","subtitles off":"Untertitel aus","Captions":"Untertitel","captions off":"Untertitel aus","Chapters":"Kapitel","You aborted the media playback":"Sie haben die Videowiedergabe abgebrochen.","A network error caused the media download to fail part-way.":"Der Videodownload ist aufgrund eines Netzwerkfehlers fehlgeschlagen.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Das Video konnte nicht geladen werden, da entweder ein Server- oder Netzwerkfehler auftrat oder das Format nicht unterstützt wird.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Die Videowiedergabe wurde entweder wegen eines Problems mit einem beschädigten Video oder wegen verwendeten Funktionen, die vom Browser nicht unterstützt werden, abgebrochen.","No compatible source was found for this media.":"Für dieses Video wurde keine kompatible Quelle gefunden.","Play Video":"Video abspielen","Close":"Schließen","Modal Window":"Modales Fenster","This is a modal window":"Dies ist ein modales Fenster","This modal can be closed by pressing the Escape key or activating the close button.":"Durch Drücken der Esc-Taste bzw. Betätigung der Schaltfläche \\"Schließen\\" wird dieses modale Fenster geschlossen.",", opens captions settings dialog":", öffnet Einstellungen für Untertitel",", opens subtitles settings dialog":", öffnet Einstellungen für Untertitel",", selected":", ausgewählt","captions settings":"Untertiteleinstellungen","subtitles settings":"Untertiteleinstellungen","descriptions settings":"Einstellungen für Beschreibungen","Close Modal Dialog":"Modales Fenster schließen","Descriptions":"Beschreibungen","descriptions off":"Beschreibungen aus","The media is encrypted and we do not have the keys to decrypt it.":"Die Entschlüsselungsschlüssel für den verschlüsselten Medieninhalt sind nicht verfügbar.",", opens descriptions settings dialog":", öffnet Einstellungen für Beschreibungen","Audio Track":"Tonspur","Text":"Schrift","White":"Weiß","Black":"Schwarz","Red":"Rot","Green":"Grün","Blue":"Blau","Yellow":"Gelb","Magenta":"Magenta","Cyan":"Türkis","Background":"Hintergrund","Window":"Fenster","Transparent":"Durchsichtig","Semi-Transparent":"Halbdurchsichtig","Opaque":"Undurchsichtig","Font Size":"Schriftgröße","Text Edge Style":"Textkantenstil","None":"Kein","Raised":"Erhoben","Depressed":"Gedrückt","Uniform":"Uniform","Dropshadow":"Schlagschatten","Font Family":"Schriftfamilie","Proportional Sans-Serif":"Proportionale Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportionale Serif","Monospace Serif":"Monospace Serif","Casual":"Zwanglos","Script":"Schreibschrift","Small Caps":"Small-Caps","Reset":"Zurücksetzen","restore all settings to the default values":"Alle Einstellungen auf die Standardwerte zurücksetzen","Done":"Fertig","Caption Settings Dialog":"Einstellungsdialog für Untertitel","Beginning of dialog window. Escape will cancel and close the window.":"Anfang des Dialogfensters. Esc bricht ab und schließt das Fenster.","End of dialog window.":"Ende des Dialogfensters.","Audio Player":"Audio-Player","Video Player":"Video-Player","Progress Bar":"Fortschrittsbalken","progress bar timing: currentTime={1} duration={2}":"{1} von {2}","Volume Level":"Lautstärke","{1} is loading.":"{1} wird geladen.","Seek to live, currently behind live":"Zur Live-Übertragung wechseln. Aktuell wird es nicht live abgespielt.","Seek to live, currently playing live":"Zur Live-Übertragung wechseln. Es wird aktuell live abgespielt.","Exit Picture-in-Picture":"Bild-im-Bild-Modus beenden","Picture-in-Picture":"Bild-im-Bild-Modus"}'),w=JSON.parse('{"Audio Player":"Lettore audio","Video Player":"Lettore video","Play":"Play","Pause":"Pausa","Replay":"Replay","Current Time":"Orario attuale","Duration":"Durata","Remaining Time":"Tempo rimanente","Stream Type":"Tipo del Streaming","LIVE":"LIVE","Loaded":"Caricato","Progress":"Stato","Progress Bar":"Barra di avanzamento","progress bar timing: currentTime={1} duration={2}":"{1} di {2}","Fullscreen":"Schermo intero","Non-Fullscreen":"Chiudi Schermo intero","Mute":"Muto","Unmute":"Audio","Playback Rate":"Tasso di riproduzione","Subtitles":"Sottotitoli","subtitles off":"Senza sottotitoli","Captions":"Sottotitoli non udenti","captions off":"Senza sottotitoli non udenti","Chapters":"Capitolo","Descriptions":"Descrizioni","descriptions off":"Descrizioni disattivate","Audio Track":"Traccia audio","Volume Level":"Livello del volume","You aborted the media playback":"La riproduzione del filmato è stata interrotta.","A network error caused the media download to fail part-way.":"Il download del filmato è stato interrotto a causa di un problema rete.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Il filmato non può essere caricato a causa di un errore nel server o nella rete o perché il formato non viene supportato.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La riproduzione del filmato è stata interrotta a causa di un file danneggiato o per l’utilizzo di impostazioni non supportate dal browser.","No compatible source was found for this media.":"Non ci sono fonti compatibili per questo filmato.","The media is encrypted and we do not have the keys to decrypt it.":"Il contenuto multimediale è criptato e non disponiamo delle chiavi per decifrarlo.","Play Video":"Riprodurre il video","Close":"Chiudere","Close Modal Dialog":"Chiudere la finestra di dialogo","Modal Window":"Finestra di dialogo","This is a modal window":"Questa è una finestra di dialogo","This modal can be closed by pressing the Escape key or activating the close button.":"Questa finestra di dialogo può essere chiusa premendo sul tasto Esc o attivando il pulsante di chiusura.",", opens captions settings dialog":", aprire i parametri della trascrizione dei sottotitoli",", opens subtitles settings dialog":", aprire i parametri dei sottotitoli",", opens descriptions settings dialog":", aprire i parametri delle descrizioni",", selected":", selezionato","captions settings":"Parametri della trascrizione dei sottotitoli","subtitles settings":"Parametri dei sottotitoli","descriptions settings":"Parametri delle descrizioni","Text":"Testo","White":"Bianco","Black":"Nero","Red":"Rosso","Green":"Verde","Blue":"Blu","Yellow":"Giallo","Magenta":"Magenta","Cyan":"Ciano","Background":"Sfondo","Window":"Finestra","Transparent":"Trasparente","Semi-Transparent":"Semi-Trasparente","Opaque":"Opaco","Font Size":"Dimensione dei caratteri","Text Edge Style":"Stile dei bordi del testo","None":"Nessuno","Uniform":"Uniforme","Dropshadow":"Ombreggiatura","Font Family":"Famiglia di caratteri","Proportional Sans-Serif":"Carattere a spaziatura variabile senza grazie (Proportional Sans-Serif)","Monospace Sans-Serif":"Carattere a spaziatura fissa senza grazie (Monospace Sans-Serif)","Proportional Serif":"Carattere a spaziatura variabile con grazie (Proportional Serif)","Monospace Serif":"Carattere a spaziatura fissa con grazie (Monospace Serif)","Small Caps":"Maiuscoletto","Reset":"Reinizializzare","restore all settings to the default values":"Ripristinare i valori predefiniti per tutti i parametri","Done":"Operazione completata","Caption Settings Dialog":"Finestra di dialogo dei parametri della trascrizione dei sottotitoli","Beginning of dialog window. Escape will cancel and close the window.":"Inizio della finestra di dialogo. Il tasto Esc annullerà l’operazione e chiuderà la finestra.","End of dialog window.":"Fine della finestra di dialogo.","{1} is loading.":"{1} in fase di caricamento.","Exit Picture-in-Picture":"Uscire dalla modalità Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture"}'),E=JSON.parse('{"Audio Player":"オーディオプレイヤー","Video Player":"ビデオプレイヤー","Play":"再生","Pause":"一時停止","Replay":"もう一度見る","Current Time":"現在の時間","Duration":"長さ","Remaining Time":"残りの時間","Stream Type":"ストリームの種類","LIVE":"ライブ","Loaded":"ロード済み","Progress":"進行状況","Progress Bar":"シークバー","progress bar timing: currentTime={1} duration={2}":"{2}の{1}","Fullscreen":"フルスクリーン","Non-Fullscreen":"フルスクリーン以外","Mute":"ミュート","Unmute":"ミュート解除","Playback Rate":"再生レート","Subtitles":"サブタイトル","subtitles off":"サブタイトル オフ","Captions":"キャプション","captions off":"キャプション オフ","Chapters":"チャプター","Descriptions":"ディスクリプション","descriptions off":"ディスクリプションオフ","Audio Track":"音声トラック","Volume Level":"ボリュームレベル","You aborted the media playback":"動画再生を中止しました","A network error caused the media download to fail part-way.":"ネットワーク エラーにより動画のダウンロードが途中で失敗しました","The media could not be loaded, either because the server or network failed or because the format is not supported.":"サーバーまたはネットワークのエラー、またはフォーマットがサポートされていないため、動画をロードできませんでした","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"破損の問題、またはお使いのブラウザがサポートしていない機能が動画に使用されていたため、動画の再生が中止されました","No compatible source was found for this media.":"この動画に対して互換性のあるソースが見つかりませんでした","The media is encrypted and we do not have the keys to decrypt it.":"メディアは暗号化されており、解読するためのキーがありません。","Play Video":"ビデオを再生する","Close":"閉じる","Close Modal Dialog":"ダイアログボックスを閉じる","Modal Window":"ダイアログボックス","This is a modal window":"これはダイアログボックスです","This modal can be closed by pressing the Escape key or activating the close button.":"このダイアログボックスは、Escキーを押すか、閉じるボタンを押して閉じることができま",", opens captions settings dialog":", 書き起こし字幕の設定を開く",", opens subtitles settings dialog":", 字幕の設定を開く",", opens descriptions settings dialog":", ディスクリプションの設定を開く",", selected":", 選択済み","captions settings":"書き起こし字幕の設定","subtitles settings":"字幕の設定","descriptions settings":"ディスクリプションの設定","Text":"テキスト","White":"白","Black":"黒","Red":"赤","Green":"緑","Blue":"青","Yellow":"黄","Magenta":"赤紫","Cyan":"シアン","Background":"背景","Window":"ウィンドウ","Transparent":"透明","Semi-Transparent":"半透明","Opaque":"不透明","Font Size":"文字サイズ","Text Edge Style":"テキストのアウトラインのスタイル","None":"なし","Uniform":"均一","Dropshadow":"影付き","Font Family":"フォントの種類","Proportional Sans-Serif":"セリフなし可変幅フォント","Monospace Sans-Serif":"セリフなし等幅フォント","Proportional Serif":"セリフあり可変幅フォント","Monospace Serif":"セリフあり等幅フォント","Small Caps":"スモールキャピタル","Reset":"リセット","restore all settings to the default values":"すべての設定をデフォルト値に戻す","Done":"終了","Caption Settings Dialog":"書き起こし字幕設定ダイアログ","Beginning of dialog window. Escape will cancel and close the window.":"ダイアログボックスの開始。Escキーでキャンセルしてウィンドウを閉じます。","End of dialog window.":"ダイアログボックスの終了","{1} is loading.":"{1}は読み込み中です。","Exit Picture-in-Picture":"ピクチャーインピクチャー機能の終了","Picture-in-Picture":"ピクチャーインピクチャー"}'),k=JSON.parse('{"Audio Player":"오디오 플레이어","Video Player":"비디오 플레이어","Play":"재생","Pause":"일시중지","Replay":"다시 재생","Current Time":"현재 시간","Duration":"지정 기간","Remaining Time":"남은 시간","Stream Type":"스트리밍 유형","LIVE":"라이브","Loaded":"로드됨","Progress":"진행","Progress Bar":"진행 표시줄","progress bar timing: currentTime={1} duration={2}":"{2} 중 {1}","Fullscreen":"전체 화면","Non-Fullscreen":"전체 화면 해제","Mute":"음소거","Unmute":"음소거 해제","Playback Rate":"재생 비율","Subtitles":"서브타이틀","subtitles off":"서브타이틀 끄기","Captions":"자막","captions off":"자막 끄기","Chapters":"챕터","Descriptions":"제품 설명","descriptions off":"제품 설명 끄기","Audio Track":"오디오 트랙","Volume Level":"볼륨 레벨","You aborted the media playback":"비디오 재생을 취소했습니다.","A network error caused the media download to fail part-way.":"네트워크 오류로 인하여 비디오 일부를 다운로드하지 못 했습니다.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"비디오를 로드할 수 없습니다. 서버 혹은 네트워크 오류 때문이거나 지원되지 않는 형식 때문일 수 있습니다.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"비디오 재생이 취소됐습니다. 비디오가 손상되었거나 비디오가 사용하는 기능을 브라우저에서 지원하지 않는 것 같습니다.","No compatible source was found for this media.":"비디오에 호환되지 않는 소스가 있습니다.","The media is encrypted and we do not have the keys to decrypt it.":"미디어는 암호화되어 있으며 이를 해독할 키를 갖고 있지 않습니다.","Play Video":"영상 재생","Close":"닫기","Close Modal Dialog":"대화 상자 닫기","Modal Window":"모달 창","This is a modal window":"모달 창입니다","This modal can be closed by pressing the Escape key or activating the close button.":"이 모달은 Esc 키를 누르거나 닫기 버튼을 활성화하여 닫을 수 있습니다.",", opens captions settings dialog":", 캡션 설정 대화 상자가 열립니다",", opens subtitles settings dialog":", 자막 설정 대화 상자가 열립니다",", opens descriptions settings dialog":", 설명 설정 대화 상자가 열립니다",", selected":", 선택됨","captions settings":"캡션 설정","subtitles settings":"자막 설정","descriptions settings":"설명 설정","Text":"텍스트","White":"화이트","Black":"블랙","Red":"레드","Green":"그린","Blue":"블루","Yellow":"옐로우","Magenta":"마젠타","Cyan":"씨엉","Background":"배경","Window":"창","Transparent":"투명","Semi-Transparent":"반투명","Opaque":"불투명","Font Size":"폰트 크기","Text Edge Style":"텍스트 가장자리 스타일","None":"없음","Uniform":"균일","Font Family":"폰트 모음","Proportional Sans-Serif":"비례 산세리프체","Monospace Sans-Serif":"고정폭 산세리프체","Proportional Serif":"비례 세리프체","Monospace Serif":"고정폭 세리프체","Small Caps":"소문자","Reset":"리셋","restore all settings to the default values":"모든 설정을 기본값으로 복원","Done":"완료","Caption Settings Dialog":"캡션 설정 대화 상자","Beginning of dialog window. Escape will cancel and close the window.":"대화창 시작. Esc 키를 누르면 취소되고 창이 닫힙니다.","End of dialog window.":"대화창 종료","{1} is loading.":"{1}이(가) 로딩 중입니다.","Exit Picture-in-Picture":"Picture-in-Picture 종료","Picture-in-Picture":"Picture-in-Picture"}'),C=JSON.parse('{"Play":"播放","Pause":"暂停","Current Time":"当前时间","Duration":"时长","Remaining Time":"剩余时间","Stream Type":"媒体流类型","LIVE":"直播","Loaded":"加载完成","Progress":"进度","Fullscreen":"全屏","Non-Fullscreen":"退出全屏","Picture-in-Picture":"画中画","Exit Picture-in-Picture":"退出画中画","Mute":"静音","Unmute":"取消静音","Playback Rate":"播放速度","Subtitles":"字幕","subtitles off":"关闭字幕","Captions":"内嵌字幕","captions off":"关闭内嵌字幕","Chapters":"节目段落","Close Modal Dialog":"关闭弹窗","Descriptions":"描述","descriptions off":"关闭描述","Audio Track":"音轨","You aborted the media playback":"视频播放被终止","A network error caused the media download to fail part-way.":"网络错误导致视频下载中途失败。","The media could not be loaded, either because the server or network failed or because the format is not supported.":"视频因格式不支持或者服务器或网络的问题无法加载。","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"由于视频文件损坏或是该视频使用了你的浏览器不支持的功能，播放终止。","No compatible source was found for this media.":"无法找到此视频兼容的源。","The media is encrypted and we do not have the keys to decrypt it.":"视频已加密，无法解密。","Play Video":"播放视频","Close":"关闭","Modal Window":"弹窗","This is a modal window":"这是一个弹窗","This modal can be closed by pressing the Escape key or activating the close button.":"可以按ESC按键或启用关闭按钮来关闭此弹窗。",", opens captions settings dialog":", 开启标题设置弹窗",", opens subtitles settings dialog":", 开启字幕设置弹窗",", opens descriptions settings dialog":", 开启描述设置弹窗",", selected":", 选择","captions settings":"字幕设定","Audio Player":"音频播放器","Video Player":"视频播放器","Replay":"重新播放","Progress Bar":"进度条","Volume Level":"音量","subtitles settings":"字幕设定","descriptions settings":"描述设定","Text":"文字","White":"白","Black":"黑","Red":"红","Green":"绿","Blue":"蓝","Yellow":"黄","Magenta":"紫红","Cyan":"青","Background":"背景","Window":"窗口","Transparent":"透明","Semi-Transparent":"半透明","Opaque":"不透明","Font Size":"字体尺寸","Text Edge Style":"字体边缘样式","None":"无","Raised":"浮雕","Depressed":"压低","Uniform":"均匀","Dropshadow":"下阴影","Font Family":"字体库","Proportional Sans-Serif":"比例无细体","Monospace Sans-Serif":"单间隔无细体","Proportional Serif":"比例细体","Monospace Serif":"单间隔细体","Casual":"舒适","Script":"手写体","Small Caps":"小型大写字体","Reset":"重置","restore all settings to the default values":"恢复全部设定至预设值","Done":"完成","Caption Settings Dialog":"字幕设定窗口","Beginning of dialog window. Escape will cancel and close the window.":"打开对话窗口。Escape键将取消并关闭对话窗口","End of dialog window.":"结束对话窗口","Seek to live, currently behind live":"尝试直播，当前为延时播放","Seek to live, currently playing live":"尝试直播，当前为实时播放","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":"正在加载 {1}。"}'),A=JSON.parse('{"Play":"播放","Pause":"暫停","Current Time":"目前時間","Duration":"總共時間","Remaining Time":"剩餘時間","Stream Type":"串流類型","LIVE":"直播","Loaded":"載入完畢","Progress":"進度","Fullscreen":"全螢幕","Non-Fullscreen":"退出全螢幕","Mute":"靜音","Unmute":"取消靜音","Playback Rate":" 播放速率","Subtitles":"字幕","subtitles off":"關閉字幕","Captions":"內嵌字幕","captions off":"關閉內嵌字幕","Chapters":"章節","Close Modal Dialog":"關閉對話框","Descriptions":"描述","descriptions off":"關閉描述","Audio Track":"音軌","You aborted the media playback":"影片播放已終止","A network error caused the media download to fail part-way.":"網路錯誤導致影片下載失敗。","The media could not be loaded, either because the server or network failed or because the format is not supported.":"因格式不支援、伺服器或網路的問題無法載入媒體。","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"由於影片檔案損毀或是該影片使用了您的瀏覽器不支援的功能，已終止播放媒體。","No compatible source was found for this media.":"無法找到相容此媒體的來源。","The media is encrypted and we do not have the keys to decrypt it.":"媒體已加密，無法解密。","Play Video":"播放影片","Close":"關閉","Modal Window":"強制回應視窗","This is a modal window":"此為強制回應視窗","This modal can be closed by pressing the Escape key or activating the close button.":"可以按ESC按鍵或關閉按鈕來關閉此視窗。",", opens captions settings dialog":", 開啟標題設定對話框",", opens subtitles settings dialog":", 開啟字幕設定對話框",", opens descriptions settings dialog":", 開啟描述設定對話框",", selected":", 選擇","captions settings":"字幕設定","Audio Player":"音訊播放器","Video Player":"視訊播放器","Replay":"重播","Progress Bar":"進度列","Volume Level":"音量","subtitles settings":"字幕設定","descriptions settings":"描述設定","Text":"文字","White":"白","Black":"黑","Red":"紅","Green":"綠","Blue":"藍","Yellow":"黃","Magenta":"紫紅","Cyan":"青","Background":"背景","Window":"視窗","Transparent":"透明","Semi-Transparent":"半透明","Opaque":"不透明","Font Size":"字型尺寸","Text Edge Style":"字型邊緣樣式","None":"無","Raised":"浮雕","Depressed":"壓低","Uniform":"均勻","Dropshadow":"下陰影","Font Family":"字型系列","Proportional Sans-Serif":"調和間距無襯線字型","Monospace Sans-Serif":"等寬無襯線字型","Proportional Serif":"調和間距襯線字型","Monospace Serif":"等寬襯線字型","Casual":"輕便的","Script":"手寫體","Small Caps":"小型大寫字體","Reset":"重置","restore all settings to the default values":"恢復全部設定至預設值","Done":"完成","Caption Settings Dialog":"字幕設定對話框","Beginning of dialog window. Escape will cancel and close the window.":"開始對話視窗。離開會取消並關閉視窗","End of dialog window.":"結束對話視窗","Seek to live, currently behind live":"快轉至直播，目前為稍早畫面","Seek to live, currently playing live":"快轉至直播，目前為現場畫面","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":"{1} 正在載入。"}'),P="(max-width: 767px)",I="(min-width: 768px) and (max-width: 1023px)",D="(min-width: 1024px) and (max-width: 1279px)";function L(){return window.matchMedia(P).matches}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}var x={set:function(e,t){"object"===O(t)&&(t=JSON.stringify(t)),this.hasSessionStorage()?sessionStorage.setItem(e,t):this.setCookie(e,t)},get:function(e){var t=this.hasSessionStorage()?sessionStorage.getItem(e):this.getCookie(e);if(t)try{return JSON.parse(t)}catch(e){return t}},deleteItem:function(e){this.hasSessionStorage()?sessionStorage.removeItem(e):this.deleteCookie(e)},clear:function(){sessionStorage.clear()},hasSessionStorage:function(){var e="test";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}},getCookie:function(e){if(document.cookie){var t=document.cookie.split(";"),n=e.length+1,i=t.map((function(e){return jQuery.trim(e)})).find((function(t){return t.substring(0,n)==="".concat(e,"=")}));return i?decodeURIComponent(i.substring(n)):void 0}},setCookie:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.expires;if("number"==typeof i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),i=n.expires=r}i&&i.toUTCString&&(n.expires=i.toUTCString()),t=encodeURIComponent(t);var a="".concat(e,"=").concat(t);for(var s in n)if(n.hasOwnProperty(s)){a+="; ".concat(s);var o=n[s];!0!==o&&(a+="=".concat(o))}document.cookie=a},deleteCookie:function(e){this.setCookie(e,null,{expires:-1})}},M=x;function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"getCreditCardsData",value:function(e,t){var n={},i=!1;return Array.prototype.concat.apply([],Object.keys(e).filter((function(e){return t||!/adyen_hpp_|mercury_hpp_/.test(e)})).map((function(t){return Object.keys(e[t]).map((function(n){return e[t][n]}))}))).filter((function(e){return n[e.data]||-1!==e.data.indexOf("alipay")?e.data.indexOf("alipay")>-1?!i&&(i=!0,!0):void 0:(n[e.data]=e.data,!0)}))}},{key:"allowedAutocompleteCountries",value:function(){var e=[];for(var t in Drupal.settings.hermes_account.options_countries)Drupal.settings.hermes_account.options_countries[t]["autocomplete-address"]&&e.push(t);return e}},{key:"isAutocompleteAddressActive",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-address"]}},{key:"isPreventEditingReturnRegionInCountriesActive",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["prevent-editing-return-region"]}},{key:"getAutocompleteField",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-field"]}},{key:"getAutocompleteType",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-type-regions"]?"(regions)":"address"}},{key:"getGoogleRegionMapping",value:function(e){return Drupal.settings.hermes_account.options_countries[e.toUpperCase()]["region-mapping"]}},{key:"isChina",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(s.CHINA,"i"))}},{key:"isHK",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(s.HK,"i"))}},{key:"isMacao",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(s.MACAO,"i"))}},{key:"isTaiwan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(s.TAIWAN,"i"))}},{key:"isKorea",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(s.KOREA,"i"))}},{key:"needSmsProvider",value:function(){return s.NEED_YUNPIAN.includes(Drupal.settings.hermes_current_country)}},{key:"needPhoneLogin",value:function(){return s.PHONE_LOGIN.includes(Drupal.settings.hermes_current_country)}},{key:"needStateDistrictFields",value:function(e){return s.REGION_DISTRICT_FIELDS.includes(e.toLowerCase())}},{key:"hasConditionalCityDistrictFields",value:function(e){return s.CONDITIONAL_CITY_DISTRICT_FIELD.includes(e.toLowerCase())}},{key:"isJapan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(s.JAPAN,"i"))}},{key:"hasLoginPhoneNumber",value:function(e){return e.phoneCode&&e.loginphone}},{key:"urlTransform",value:function(e){var t=e;return e?(this.isChina()&&(t=e.replace(/hermes\.com/g,"hermes.cn")),t):t}},{key:"isWechatInApp",value:function(){return-1!==navigator.userAgent.indexOf("MicroMessenger")}},{key:"findGetParameter",value:function(e,t){t?t.split("?")&&(t="?"+t.split("?")[1]):t=window.location.search;var n=null,i=[];return t.substr(1).split("&").forEach((function(t){(i=t.split("="))[0]===e&&(n=decodeURIComponent(i[1]))})),n}},{key:"resizeCarousel",value:function(e){["afterChange","beforeChange"].forEach((function(t){jQuery(e).on(t,(function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];t.$slides.each((function(e,t){jQuery(t).height(i.includes(e)?"100%":"1px")}))}))}))}},{key:"generateReCaptcha",value:function(t,n){if(!e.isChina()){var i=t.success;parseInt(i,10)&&jQuery.when(jQuery.getScript("https://www.google.com/recaptcha/api.js?render=explicit")).then((function(){APP=APP||{},APP.recaptcha=APP.recaptcha||{};var t=n.replace("#","");APP.recaptcha[t]||0===APP.recaptcha[t]||(e.initReCaptcha(APP,t),jQuery('<p class="captcha-label" aria-hidden="true">'.concat(Drupal.settings.hermes_translations.validation.securityCheck,"</p>")).insertBefore("".concat(n,"-captcha")))}))}}},{key:"initReCaptcha",value:function(t,n){setTimeout(function(){"undefined"==typeof grecaptcha||void 0===grecaptcha.render?e.initReCaptcha(t,n):t.recaptcha[n]=grecaptcha.render("".concat(n,"-captcha"),{sitekey:Drupal.settings.hermes_global.google.apis.recaptcha.site_key,hl:"tw"===M.get("currentCountry")?M.get("currentLanguage").concat("-"+M.get("currentCountry")):M.get("currentLanguage")})}.bind(this),100)}},{key:"validateRecaptcha",value:function(t){var n=jQuery("#".concat(t,"-captcha"));return!(APP.recaptcha&&void 0!==APP.recaptcha[t]&&(APP.recaptcha[t]||0===APP.recaptcha[t]?window.grecaptcha.getResponse(APP.recaptcha[t])?(n.removeClass("validation-error"),0):(e.throwErrorReCaptcha(n),window.grecaptcha.reset(),1):(e.throwErrorReCaptcha(n),1)))}},{key:"throwErrorReCaptcha",value:function(e){e.hasClass("validation-error")||(e.addClass("validation-error"),jQuery('<p class="captcha-error-message error-message" aria-hidden="true">'.concat(Drupal.settings.hermes_translations.validation.required,"</p>")).insertAfter(e))}},{key:"ieAccordPlusToMinForIe",value:function(e,t){if(document.documentMode)return e.find(".accordion-icon-plus").attr("transform","rotate(".concat(t,")"))}},{key:"trapFocusInTray",value:function(e){setTimeout((function(){var t=e.find("a:visible, object:visible, :input:visible, iframe:visible, [tabindex]:visible").filter(":not(.invisible a)"),n=t.first()[0],i=t.last()[0];e.off("keydown").on("keydown",(function(e){(e.key===s.TAB_KEY||e.keyCode===s.TAB_KEYCODE)&&(e.shiftKey?document.activeElement===n&&(i.focus(),e.preventDefault()):document.activeElement===i&&(n.focus(),e.preventDefault()))}))}),10)}},{key:"isAngularMode",value:function(){return Drupal.settings.hermes_angular||!1}},{key:"is_touch_device",value:function(){var e,t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||(e=["(",t.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(e).matches)}},{key:"pwdStrengthScreenReader",value:function(e,t,n){var i=jQuery(t),r=jQuery(n),a=r.parents(".container-fieldset").find(".password-strength-label").attr("id");return new MutationObserver((function(t){t.map((function(e){return i.parent().attr("aria-hidden",!n.value.length),r.attr("aria-describedby",a),e})).filter((function(e){return"attributes"===e.type&&"class"===e.attributeName})).forEach((function(){i.text(""),e.classList.contains("weak")?i.text(": ".concat(Drupal.settings.hermes_translations.account.weak)):e.classList.contains("medium")?i.text(": ".concat(Drupal.settings.hermes_translations.account.medium)):e.classList.contains("strong")&&i.text(": ".concat(Drupal.settings.hermes_translations.account.strong))})),""===r.val()&&r.removeAttr("aria-describedby")}))}},{key:"secondsToHms",value:function(e){var t=Number(e),n=Math.floor(t/3600),i=Math.floor(t%3600/60),r=Math.floor(t%3600%60);return(n=n>0&&1===n.toString().length?"0".concat(n,":"):n.toString().length>1?"".concat(n,":"):"")+(i=i>0&&1===i.toString().length?"0".concat(i,":"):i.toString().length>1?"".concat(i,":"):"00:")+(r>0&&1===r.toString().length?"0".concat(r):r.toString().length>1?"".concat(r):"00")}},{key:"isInViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e?e.getBoundingClientRect():null,i=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth,a=i*(100-t)/100;if(n){if(100===t)return n.top>=0&&n.bottom<=i&&n.left>=0&&n.right<=r;var s=n.bottom>=0&&n.bottom<=a,o=n.top>=0&&n.top<=a,u=n.left>=0&&n.left<=r,l=n.right>=0&&n.right<=r;return(s||o)&&(u||l)}return!1}},{key:"isFirefox",value:function(){return-1!==navigator.userAgent.indexOf("Firefox")}},{key:"setFocusOnElement",value:function(e){var t=jQuery(e);t.length>0&&(t.attr("tabindex","0"),t.focus())}},{key:"getLineSeparator",value:function(e){return e&&!this.isTaiwan()?null:this.isJapan()||this.isMacao()||this.isHK()||this.isKorea()?"<br/>":this.isTaiwan()?" ":null}},{key:"setLatinCharOnly",value:function(e){jQuery(e).find('input[name="firstname"]').addClass("only-latin-char"),jQuery(e).find('input[name="lastname"]').addClass("only-latin-char"),jQuery(e).find('input[name="email"]').addClass("only-latin-char"),jQuery(e).find('input[name="company"]').addClass("only-latin-char"),jQuery(e).find('input[name="street1"]').addClass("only-latin-char"),jQuery(e).find('input[name="street2"]').addClass("only-latin-char"),jQuery(e).find('input[name="street3"]').addClass("only-latin-char"),jQuery(e).find('input[name="city"]').addClass("only-latin-char")}},{key:"setLatinCharOnlyForUaeSa",value:function(e){jQuery(e).find('input[name="firstname"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="lastname"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="email"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="street1"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="street2"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="city"]').addClass("only-latin-char-for-uae-sa")}},{key:"assignValues",value:function(t,n,i){switch(t.country_id){case"CN":e.isChina()&&(t.city=t.cityselect);break;case"MO":e.isMacao()&&(t.district=n);break;case"TH":t.district=n,t.city=t.district,t.postcode=t.postcode_select,delete t.postcode_select;break;case"TW":t.district=n,t.city=i,t.city_bis_id=t.cityselect,t.cityselect=""}}}],null&&R(t.prototype,null),n&&R(t,n),e}();function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j,F,H,V,Q=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),APP.viewers={},this.S7_CONFIG=Drupal.settings.hermes_global.dam_config,this.posterBreakpoints=[414,768,1024,1280,1560,1900],this.containersToInit=function(e){if(Array.isArray(e))return U(e)}(n=document.querySelectorAll(t.elements))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this.viewersPositions=[],this.IPOD_IPHONE=/i(Phone|Pod)/.test(navigator.appVersion),this.IPAD=/iPad/.test(navigator.appVersion),this.ISMOBILE=L(),this.ISTAB=window.matchMedia(I).matches,this.ISDESKTOP=window.matchMedia(D).matches,this.locale=Drupal.settings.hermes_locale,this.isMovingCursor=!1,this.isProcessingFullScreen=!1,this.allVideo=[]}var t,n;return t=e,n=[{key:"init",value:function(){var e=this;if(document.getElementsByClassName("has-animation").length)this.containersToInit.forEach((function(t){return e.buildVideo(t)}));else{var t=v()((function(){var n=e.tryLaunchRemainingInitContainers();e.catchMenuContentVideoJS(),n&&window.removeEventListener("scroll",t)}),50);this.tryLaunchRemainingInitContainers(),window.addEventListener("scroll",t)}this.IPOD_IPHONE||APP.pubsub.subscribe("scroll",v()(this.scrollListener.bind(this),100)),jQuery(window).on("load",this.scrollListener.bind(this)),this.bindPosterClick(),this.catchMenuContentVideoJS()}},{key:"bindPosterClick",value:function(){var e=Array.prototype.slice.apply(document.querySelectorAll(".media-wrap.poster")),t=function(e){for(var t=e.target;!t.classList.contains("media-wrap");){if(!t.parentElement)return;t=t.parentElement}var n=t.children[0];"PICTURE"===n.tagName.toUpperCase()&&(n.style.display="none");var i=t.querySelector("button.vjs-big-play-button");i&&i.click()};e.forEach((function(e){e.addEventListener("click",t,{once:!0,passive:!0}),e.addEventListener("touchend",t,{once:!0,passive:!0})}))}},{key:"tryLaunchRemainingInitContainers",value:function(){var e=this,t=this.ISMOBILE?150:100,n=this.containersToInit.filter((function(n){return e.checkVisible(n,t)}));return n.forEach((function(t){return e.buildVideo(t)})),n.length&&(this.containersToInit=this.containersToInit.filter((function(e){return!n.includes(e)}))),!this.containersToInit.length}},{key:"checkVisible",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&e.getBoundingClientRect){var n=e.getBoundingClientRect(),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(n.top-t-i<=0)return!0}return!1}},{key:"togglePlayOnce",value:function(e){e.init&&(e.oncanplay=function(){e.pause(),e.oncanplay=!1},e.onplay=function(){e.pause(),e.onplay=!1,e.muted=!1},e.muted=!0,e.play(),delete e.init)}},{key:"togglePlay",value:function(e,t){var n=!!jQuery(e).parents(".hidden").length;if(n)this.togglePlayOnce(e);else{parseInt(t.controls||0,10),parseInt(t.mute||0,10);var i=parseInt(t.autoplay||0,10);if(e.init&&(e.muted=!0,this.IPAD&&(e.playsinline=!0)),this.IPOD_IPHONE||this.checkVisible(e)&&1===i&&!n)return this.IPAD&&(e.playsinline=!0),e.play(),e.autopaused=!1,APP.pubsub.publish("Autoplay",e),void delete e.init;e.playing&&i&&(e.autopaused=!0,e.pause()),delete e.init}}},{key:"scrollListener",value:function(){var e=this;this.viewersPositions.forEach((function(t){var n=t.key,i=t.options,r=APP.viewers[n];if(r){i.trigger="scroll";var a=e.getVideo(n,r.domElement);e.togglePlay(a,i),e.catchMenuContentVideoJS()}}))}},{key:"getVideo",value:function(e,t){try{var n='[id="'.concat(APP.viewers[e].getComponent("videoPlayer").compId,'"] video');return this.IPOD_IPHONE?APP.viewers[e].getComponent("videoPlayer"):(t||document).querySelector(n)}catch(e){return null}}},{key:"bindMuteControl",value:function(e){jQuery(e.domElement).on("touchstart",(function(){var t=e.getComponent("videoPlayer");t&&t.unmute()}))}},{key:"getVideoIDString",value:function(e){return e.dataset.videoid?"".concat(e.dataset.video,"_").concat(e.dataset.videoid).replace(/\s/g,"_"):e.dataset.video}},{key:"parseOptions",value:function(e){return{controls:this.IPAD||this.IPOD_IPHONE?1:parseInt(e.dataset.controls||0,10),mute:this.IPAD||this.IPOD_IPHONE?0:parseInt(e.dataset.mute||0,10),autoplay:this.IPAD||this.IPOD_IPHONE?0:parseInt(e.dataset.autoplay||0,10),poster:e.dataset.poster||"",product:parseInt(e.dataset.product||0,10),loop:this.IPAD||this.IPOD_IPHONE?0:parseInt(e.dataset.loop||0,10),preload:e.dataset.preload||"none"}}},{key:"buildVideo",value:function(e){var t=this,n=this.getVideoIDString(e),i=jQuery(e).find('[id="vjs-container-'.concat(n,'"]'));APP.viewers[n]&&(n="".concat(n,"-0"),i.attr("id","vjs-container-".concat(n)));var r=e.dataset.video,a=i.get(0),s=this.parseOptions(e),o=s&&s.product?this.S7_CONFIG.hermes_product_container:this.S7_CONFIG.hermes_editorial_container,u=this.S7_CONFIG.scene7_url;e.dataset.loop&&jQuery(e).on("click.loop",(function(n){n.preventDefault(),n.stopPropagation();var i=jQuery(t).parent(),r=i.find('[data-videoid="'.concat(e.dataset.videoid,'"]'));r.length>1&&(t.IPOD_IPHONE||(r.eq(1).removeClass("hidden"),r.eq(0).addClass("hidden")),t.switchVideosAndPlay(r,i,a,e))}));var l={videoName:r,uri:u,hasLoopMuteAutoplay:"1"===e.dataset.loopMuteAutoplay,hasControls:"1"===e.dataset.controls,source:o,wrapper:a,videoIdString:n,posterUrl:s.poster,preload:s.preload};if(jQuery(e).find('[id="vjs-container-'.concat(l.videoIdString,'"]')).length){var c="vjs_".concat(l.videoIdString),d="".concat(l.uri,"is/content").concat(this.S7_CONFIG.hermes_editorial_container).concat(l.videoName,".m3u8");l.wrapper.innerHTML='<video id="'.concat(c,'" ').concat('role="presentation" playsinline',' class="').concat("video-js vjs-default-skin vjs-big-play-centered",'"><source src="').concat(d,'" type="').concat("application/x-mpegURL",'"></video>');var h=this.locale.split("_")[1];if(N.isChina()&&"zh"===h&&(h="zh-CN"),N.isTaiwan()&&"zh"===h&&(h="zh-TW"),this.player=g()(c,{fluid:!0,controls:l.hasControls,loop:l.hasLoopMuteAutoplay,muted:l.hasLoopMuteAutoplay,autoplay:l.hasLoopMuteAutoplay,poster:this.choosePosterUrl(l.posterUrl,l.wrapper),preload:l.preload,language:h,languages:{es:_,fr:b,en:T,de:S,it:w,ja:E,ko:k,"zh-CN":C,"zh-TW":A}}),this.allVideo.push(this.player),this.ISMOBILE&&l.hasLoopMuteAutoplay&&!l.hasControls){var p=jQuery(e).find("video");p.on("click",(function(){p.get(0).play()}))}this.catchMenuContentVideoJS(),this.analyticsVideoJS(this.player)}}},{key:"choosePosterUrl",value:function(e,t){if(""===e)return"";var n=e.split("?")[0],i=0;return this.posterBreakpoints.forEach((function(e){t.clientWidth<=e&&0===i&&(i=e)})),0===i&&(i=this.posterBreakpoints[this.posterBreakpoints.length-1]),i=Math.floor(i*window.devicePixelRatio),n?"".concat(n,"?wid=").concat(i,"&fit=wrap%2C0"):""}},{key:"switchVideosAndPlay",value:function(e,t,n,i){var r=this,a=this.parseOptions(i),s=this.getVideoIDString(e.get(0)),o=this.getVideo(s,t.get(0));o&&(o.pause(),s=this.getVideoIDString(e.get(1))),(o=this.getVideo(s,t.get(0)))&&o.readyState&&4===o.readyState?(this.togglePlay(o,a),o.unmute&&!a.mute&&o.unmute(),o.muted=!1):this.IPOD_IPHONE?(o.oncanplay=!1,this.togglePlay(o,a),o.unmute&&!a.mute&&o.unmute(),o.muted=!1,o.oncanplay=!1):o.oncanplay=function(){r.togglePlay(o,a),o.unmute&&!a.mute&&o.unmute(),o.muted=!1,o.oncanplay=!1,o.onpause=!1},this.IPOD_IPHONE||e.off("click.loop")}},{key:"destroyVideo",value:function(e){var t=APP.viewers[e].domElement,n=this.getVideo(e,t);n&&n.pause(),t.innerHTML="",delete APP.viewers[e]}},{key:"analyticsVideoJS",value:function(e){var t=this;e.firstPlay=!0,e.lastPercent=0,e.on("play",t.onPlay.bind(e)),e.on("timeupdate",t.onTimeUpdate.bind(e)),e.on("pause",t.onPause.bind(e)),e.on("ended",(function(){APP.pubsub.publish(s.PLAYER.stop,e)})),e.on("fullscreenchange",t.onFullScreenChange.bind(e)),e.on("volumechange",t.onVolumeChange.bind(e))}},{key:"onFullScreenChange",value:function(e){var t=e.target.player;t&&(this.isProcessingFullScreen=!0,APP.pubsub.publish(s.PLAYER.fullscreen,t))}},{key:"onVolumeChange",value:function(e){var t=e.target.player;t&&t.muted()&&APP.pubsub.publish(s.PLAYER.mute,t)}},{key:"onPlay",value:function(e){var t=e.target.player;if(t){if(t.isMovingCursor)return void(t.isMovingCursor=!1);if(t.isProcessingFullScreen)return void(t.isProcessingFullScreen=!1);t.autoplay()&&t.firstPlay?APP.pubsub.publish(s.PLAYER.autoplay,t):t.autoplay()||APP.pubsub.publish(t.firstPlay?s.PLAYER.firstPlay:s.PLAYER.newPlay,t),t.firstPlay=!1}}},{key:"onTimeUpdate",value:function(e){var t=e.target.player;if(t){var n=parseInt((this.currentTime()/this.duration()*100).toFixed(0),10),i=[25,50,75,95];i.forEach((function(e){Math.abs(n-e)<3&&(n=e)})),i.includes(n)&&t.lastPercent!==n&&(t.currentPercent="".concat(n,"%"),this.autoplay()||APP.pubsub.publish("Progress",t),t.lastPercent=n)}}},{key:"onPause",value:function(e){var t=e.target.player;if(t){if(t.seeking()||t.scrubbing())return void(t.isMovingCursor=!0);if(t.isProcessingFullScreen)return void(t.isProcessingFullScreen=!1);if(100===parseInt((this.currentTime()/this.duration()*100).toFixed(0),10))return;this.autoplay()||APP.pubsub.publish(s.PLAYER.pause,t)}}},{key:"catchMenuContentVideoJS",value:function(){var e=[].slice.call(document.querySelectorAll("div.media-video"));if("IntersectionObserver"in window){var t=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var n=e.target;n.querySelectorAll(".vjs-menu-content").forEach((function(e){0===e.childNodes.length?e.removeAttribute("role"):e.querySelectorAll("li").forEach((function(e){e.hasAttribute("role")||e.setAttribute("role","menuitem")}))})),t.unobserve(n)}}))}));e.forEach((function(e){t.observe(e)}))}}}],n&&B(t.prototype,n),e}(),q=n(4277),G=n.n(q),W=n(6831),z=n.n(W);function K(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(V),ie(!0),j&&(ne(),J(),$(e))}function Y(e){jQuery(".".concat(e)).addClass("loader-animation"),jQuery(".".concat(e)).addClass("visible-loader-button")}function X(e){jQuery(".".concat(e)).removeClass("loader-animation"),jQuery(".".concat(e)).removeClass("visible-loader-button")}function J(){TweenLite.to(j,.2,{autoAlpha:1,ease:window.Power2.easeInOut})}function $(e){var t;jQuery(j).addClass("loader"),t=Drupal.settings.pathTheme?Drupal.settings.pathTheme+"/img/loader":document.querySelector(".login-block-wrapper").getAttribute("data-loaderpath");var n=Math.floor(6*Math.random());F.style.backgroundImage="url("+t+"-"+n+".gif)",TweenLite.set(F,{opacity:1}),e&&document.body.classList.add("body-noscroll")}function Z(e){e.preventDefault(),te()}function ee(e){e&&"super-critical"!==j.getAttribute("data-type")&&jQuery(".message-wrapper").html().length&&("click"===e.type||27===e.keyCode)&&te()}function te(){clearTimeout(V),j&&(TweenLite.to(j,.2,{autoAlpha:0,ease:window.Power2.easeInOut,onComplete:ne}),document.body.classList.remove("body-noscroll"),setTimeout((function(){ie(!1)}),200))}function ne(){H&&(H.innerHTML="",F.style.backgroundImage="")}function ie(e){}function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}jQuery("#cart-notification"),window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||r(),APP.pubsub.subscribe("app.start",(function(){j||(APP.templates.notification,j=document.querySelector(".notification"),F=j.querySelector(".loading-animation"),H=j.querySelector(".message-wrapper"),jQuery(document).off("click keydown",".notification-overlay",ee).on("click keydown",".notification-overlay",ee),jQuery(document).off("click",".js-try-again",Z).on("click",".js-try-again",Z))}));var ae=window&&void 0===window.document?0:window.document,se={map:{API_KEY:"gme-hermesinternational",URL:"https://maps.googleapis.com/maps/api/js?client=gme-hermesinternational&libraries=places",pins:{store:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6IzQ0NDQ0NDt9LnN0MXtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuMiwwQzUsMCwwLDUsMCwxMS4yYzAsMi42LDAuOCw1LDIuNCw3bDcuMiw5bDEuNiwybDEuNi0ybDUuOC03LjRsMS4yLTEuNmMxLjYtMiwyLjQtNC40LDIuNC03QzIyLjIsNSwxNy4yLDAsMTEuMiwweiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4NCjwvc3ZnPg0KDQo=",size:{x:22,y:29},anchor:{x:11,y:29}},clickedStore:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojOWE5YTlhO30uc3Qxe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExLjIsMEM1LDAsMCw1LDAsMTEuMmMwLDIuNiwwLjgsNSwyLjQsN2w3LjIsOWwxLjYsMmwxLjYtMmw1LjgtNy40bDEuMi0xLjZjMS42LTIsMi40LTQuNCwyLjQtN0MyMi4yLDUsMTcuMiwwLDExLjIsMHoiLz4KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4KPC9zdmc+",size:{x:22,y:29},anchor:{x:11,y:29}},user:{data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAABQCAMAAABVumeJAAAAYFBMVEVMaXHpj4fibWTojYXaTEHeWU7rnpfso53vsa3eX1TURDjicmjkeG/kfnXmhHvXPzHYQjbdTUHSOCvZRTjfUEXdSD7hVEjbRzrhV0xuNC/FRjyCODK2QjhyNjFqMi6UPDSgygjXAAAAD3RSTlMAXLV37+JEKhHN+p6MhaGQa3UDAAACi0lEQVR4AY3Th46sMAyFYVPS6IQ6/f3f8lqxljmKGG7+LWqfjswUijNZkzulXN5khi4zrdvnMbQs46ga85vW+zyv6xwauW1bcn1KbbOvkmCZH5bansy6dd2Fz6CZKx1brZie4mUqs8iWu3SCt2lATUbtF3ibRrjEuvWwZ3gbSnPgbt6vlrk+/7PZChZeOsBTX8ARl1cw/jukmL92/4Wnvg7DKh4+xTKdzUBhOMJydT6v0jHM/0bmYANWlgybPfyEmI7Pz+PxeY4zDHPDZEjPog57f9xCjydiuaMdkbJ93V6h2+0p9sA55SMLkdxaiRV9h2HGjhxjKQx/xIbeHxyeBkVqxsYXdHvdF7BDGeH7C3s/r/B6v8HuTfAEeIQjYJk1YraM3TJ+myvY5e443CvKtxH18WowfX/AMnbUAubkdWYbhhc4Yuhr0ngG92Qtu+HiCXBGtgS9cPfHO/SI7WCI8okFtsmnrlqEBisnE2WAD78t8AoL9gVjq1AHJEXD8o0thsOJRCqW8zVxMo0stjDM0/12QSXfkGTVEFO0MmxJogwwSLC+oKO8R4lW8o6+mXIAE8/yjyao6E+p4D48HeT6iKJVFikeElNOo5RDUKL1HbDjEHCHHOAIyGwRDa8DD+MRcEg0G/I1nWUda6BycGnpNN33IGXbZ/Sj3AMU6+hXugJ5MSx1ngHanH5nKqScpotymb68GF+QpIslB9PyGl+UIW7pOouPaK6tPCI+XuIdvvgvtuUfrviKlDsSrpAKH6j3bQI2lZc0JeTEKkqpEVwnYS04S8K29Jy8cIlHK0qrlZPT0uknyyvdG0pMefncJ5V7n1NqhXwwkp8wS8bGe5OMbVXZdFyW6Zico7P+AbjAlYsTQvYhAAAAAElFTkSuQmCC",size:{x:44,y:80},scaled:{x:22,y:40},anchor:{x:11,y:40}},HERMES_PIN:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgLTEgMjcgMzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI2LjkyMiAxMy42MThDMjYuOTIyIDYuMDk4IDIwLjg5NSAwIDEzLjQ2MiAwIDYuMDI3IDAgMCA2LjEgMCAxMy42MThjMCAzLjIxOCAxLjEwMyA2LjE3NCAyLjk1IDguNTA1aC0uMDA0YzMuNDc3IDQuMzkyIDguMzg4IDEwLjYwMiA5Ljk4NSAxMi42MjMuMTM1LjE2LjMyNi4yNTQuNTMyLjI1NC4yMDQgMCAuMzk1LS4wOTMuNTMtLjI1NGw5Ljk4LTEyLjYxN2MuMDAzIDAgLjAwMy0uMDA0LjAwMy0uMDA0bC0uMDAzLS4wMDNjMS44NDUtMi4zMyAyLjk1LTUuMjg3IDIuOTUtOC41MDUiIGZpbGw9IiM0NDQiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkgMTBoNC4wMDZ2MS40MjJoLTEuMjZ2Mi40MzJoNC41MDZ2LTIuNDMyaC0xLjI2OFYxMEgxOXYxLjQyMmgtMS4yOHY3LjE2SDE5VjIwaC00LjAxNnYtMS40MTdoMS4yNjh2LTMuMzJsLTQuNTA2LS4wMDJ2My4zMjNoMS4yNlYyMEg5di0xLjQxN2gxLjI3N3YtNy4xNkg5Ii8+PC9zdmc+",cluster:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyOSI+PHN0eWxlPi5zdDB7ZmlsbDojNDQ0NDQ0O308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMS4yIDBDNSAwIDAgNSAwIDExLjJjMCAyLjYuOCA1IDIuNCA3bDcuMiA5IDEuNiAyIDEuNi0yIDUuOC03LjQgMS4yLTEuNmMxLjYtMiAyLjQtNC40IDIuNC03IDAtNi4yLTUtMTEuMi0xMS0xMS4yeiIvPjwvc3ZnPg=="}}}},oe={baidu:{map:{pins:se.map.pins,API_KEY:"",URL:""}},google:se,hermes:{store:{languages:{fr:"fre-FR",en:"eng-GB",de:"ger-DE",es:"esl-ES",zh:function(){if(Drupal.settings.hermes_locale){var e=Drupal.settings.hermes_locale,t="";return"tw_zh"===e?t="chi-TW":"cn_zh"===e&&(t="chi-CN"),t}}(),it:"ita-IT",ja:"jpn-JP",ko:"kor-KR",pt:"por-BR",ru:"rus-RU"},language:function(){if(!ae)return"en";var e=ae.location.pathname.match("/[a-z]{2}/([a-z]{2})/");if(e&&e[1])return e[1];if(ae.location.search&&window.URLSearchParams){var t=new window.URLSearchParams(ae.location.search).get("locale");if(!t)return"en";if((t=t.split("_"))[1])return t[1]}return"en"}(),URL:"/sites/all/modules/custom/hermes_store_locator/includes/stores.json",ACCESS_TOKEN:"$/+8KDDU334$4a<C2M(6/<bhGyneX.e8i:6?&[57#n3h8=}z?*5Kc4W62;$BMLS#?P2Q7_PD~zxLK4x4_nPa8^HQ5H@4yMBLWev7y9iw754/k,biG6VxT33;tvg=}bcV"},paging:{pagesize:8,productLocatorPageSize:5}},iplocator:{url:"https://freegeoip.net/json/1.1.16.23"},locations:{initial:{location:{lat:0,lng:0},zoom:1}},hermesPath:{customThemeJs:ae.location.origin+"/sites/all/themes/custom/hermes/js"}},ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"currentMapEngine",value:function(){return ae&&new RegExp(/(hermes)*cn\//).test(ae.location.href)?e.mapenginetype.BAIDU:e.mapenginetype.GOOGLE}},{key:"mapenginetype",get:function(){return{GOOGLE:"mapengine-google",BAIDU:"mapengine-baidu"}}},{key:"google",get:function(){return oe.google}},{key:"baidu",get:function(){return oe.baidu.map.API_KEY=Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,oe.baidu.map.URL="https://api.map.baidu.com/api?v=2.0&ak="+Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,oe.baidu}},{key:"mapengine",get:function(){return e.currentMapEngine()===e.mapenginetype.GOOGLE?e.google:e.currentMapEngine()===e.mapenginetype.BAIDU?e.baidu:void 0}},{key:"hermes",get:function(){return oe.hermes}},{key:"locations",get:function(){return oe.locations}},{key:"hermesPath",get:function(){return oe.hermesPath}}],null&&re(t.prototype,null),n&&re(t,n),e}();function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var de=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"forceClearList",value:function(){var e=document.getElementById("no-store-close-msg"),t=document.getElementById("stores-found-msg"),n=document.getElementById("product-locator-map-error-msg"),i=document.getElementById("list-store"),r=document.getElementById("pl-concessionary-disclaimer-msg");e&&(e.style.display="none"),t&&(t.innerHTML=""),n&&(n.innerHTML=""),i&&i.hasChildNodes()&&i.removeAllChildren(),r&&(r.innerHTML="")}},{key:"enableDisablePLButton",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=jQuery("#tray-product-locator input#btfind");t&&t.length>0&&(e?(t.attr("disabled","disabled"),t.addClass("disabled")):(t.removeAttr("disabled"),t.removeClass("disabled")))}},{key:"productLocatorScript",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.enableDisableFindInStoreLoader(),!0===APP.productLocatorMapLoaded?n(t,i):jQuery.getScript(ue.hermesPath.customThemeJs+"/page-product-store-locator.js").done((function(){var e=0,r=setInterval((function(){e++,!0===APP.productLocatorMapLoaded?(n(t,i),clearInterval(r)):15===e&&clearInterval(r)}),200)}))}},{key:"initTrayConfigurator",value:function(){var e=Drupal.settings.hermes_products.data;return APP.trayController.triggerTray({name:"tray-configurator",dontAdd:!0,products:e?e.products:void 0,sku:e&&e.default_variant?e.default_variant.sku:void 0,attributes:e&&e.attributes?e.attributes:void 0,isAppleWatchKit:e&&e.products&&e.products.length&&e.products[0].set_type===s.KIT_APPLEWATCH})}},{key:"refreshStockHComAvailability",value:function(e){if(e)for(var t in null===Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts=e),Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts)e.hasOwnProperty(t)&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[t]=e[t]),Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[t].hasOwnProperty("in_stock")&&Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[t].in_stock&&(Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock=!0)}},{key:"setProductAttributes",value:function(){if((!Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes")||null===Drupal.settings.hermes_products.data.products_attributes||!Drupal.settings.hermes_products.data.products_attributes)&&Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")){Drupal.settings.hermes_products.data.products_attributes={};for(var e=0;e<Drupal.settings.hermes_products.data.products.length;e++)Drupal.settings.hermes_products.data.products[e]&&Drupal.settings.hermes_products.data.products[e].hasOwnProperty("sku")&&Drupal.settings.hermes_products.data.products[e].hasOwnProperty("attributes")&&(Drupal.settings.hermes_products.data.products_attributes[Drupal.settings.hermes_products.data.products[e].sku]=Drupal.settings.hermes_products.data.products[e].attributes)}}},{key:"getCurrentProductVariation",value:function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}(this.getAllProducts());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.sku&&n.sku===this.getSelectedSku())return n}}catch(e){t.e(e)}finally{t.f()}return{}}},{key:"setAllProducts",value:function(){Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")&&!Drupal.settings.hermes_products.data.hasOwnProperty("all_products")&&(Drupal.settings.hermes_products.data.all_products=Drupal.settings.hermes_products.data.products)}},{key:"getAllProducts",value:function(){return Drupal.settings.hermes_products.data.hasOwnProperty("all_products")?Drupal.settings.hermes_products.data.all_products:Drupal.settings.hermes_products.data.products}},{key:"refreshStockRetailPresentability",value:function(e,t){if(e&&e.hasOwnProperty("data")&&e.data.hasOwnProperty("presentabilities")){var n=e.data.presentabilities;Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts={};for(var i=0;i<t.length;i++){for(var r=!1,a=0;a<n.length;a++)if(n[a].hasOwnProperty("sku")&&n[a].hasOwnProperty("presentability")&&n[a].sku===t[i]){r=n[a].presentability;break}r&&(Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock=!0),Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts[t[i]]={has_stock_retail:r}}}}},{key:"getSelectedSku",value:function(){return Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null}},{key:"checkIfAllSizeAreDisabled",value:function(){var e=null,t=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(t&&t.length>0){e=!0;for(var n=0;n<t.length;n++)if(t[n]&&!t[n].disabled){e=!1;break}}return e}},{key:"typeOfListedSize",value:function(){var e=null,t=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(t&&t.length>0){e=[];for(var n=0;n<t.length;n++)if(t[n]){if(t[n].checked)return null;var i=t[n].getAttribute("stock-type");switch(!0){case i===this.noStockKey&&!e.includes(this.noStockKey):e.push(this.noStockKey);break;case i===this.retailOnlyKey&&!e.includes(this.retailOnlyKey):e.push(this.retailOnlyKey);break;case i===this.hComOnlyKey&&!e.includes(this.hComOnlyKey):e.push(this.hComOnlyKey);break;case i===this.hComAndRetailKey&&!e.includes(this.hComAndRetailKey):e.push(this.hComAndRetailKey)}}}return this.sizeTypes(e)}},{key:"sizeTypes",value:function(e){return e&&0!==e.length?e.includes(this.hComAndRetailKey)||e.includes(this.hComOnlyKey)&&e.includes(this.retailOnlyKey)?this.hComAndRetailKey:e.includes(this.retailOnlyKey)?this.retailOnlyKey:e.includes(this.hComOnlyKey)?this.hComOnlyKey:1===e.length&&e.includes(this.noStockKey)?this.noStockKey:null:null}},{key:"enableDisableFindInStoreLoader",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e)return te(),void X("loader-button-find-in-store");var t=document.querySelectorAll(".product-locator-container-button.fis-as-a-button .loader-button-find-in-store");if(t.length)Y("loader-button-find-in-store");else{var n=document.querySelectorAll(".product-locator-container-button.fis-as-a-link .loader-button-find-in-store");n.length&&K()}}},{key:"refreshAllButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getSelectedSku();if(t&&!e){var n=this.isAvailableStockHCom(t),i=this.isAvailableStockRetail(t),r=document.getElementsByClassName("product-locator-container-button"),a=document.querySelectorAll(".product-locator-container-button button"),s=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.enableAllAttributesButtons();var o=this,u=null;setTimeout((function(){switch(u=o.typeOfListedSize(),!0){case!n&&!i&&null===u||u===o.noStockKey:o.hasNotHcomNotStockRetail(r,a,s);break;case n&&i||u===o.hComAndRetailKey:o.hasHcomStockRetail(r,a,s);break;case!n&&i||u===o.retailOnlyKey:o.hasNotHcomStockRetail(r,a,s);break;case n&&!i||u===o.hComOnlyKey:o.hasHcomNotStockRetail(r,a,s)}}),50)}}},{key:"disableAllButtons",value:function(){var e=document.getElementsByClassName("product-locator-container-button"),t=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.addClassToMultiElements(e,"add",["hidden"]),this.addClassToMultiElements(e,"remove",["fis-as-a-link","fis-as-a-button"]),this.addClassToMultiElements(t,"add",["show","button-full-opacity"]),this.addClassToMultiElements(t,"remove",["hidden"]),Y("loader-button-add-to-cart")}},{key:"enableDisableCartButtons",value:function(e,t){if(e){switch(t){case!0:document.body.classList.add("in-stock");break;case!1:document.body.classList.remove("in-stock")}for(var n=0;n<e.length;n++)e[n].setAttribute("aria-disabled",(!!t).toString())}}},{key:"hasNotHcomNotStockRetail",value:function(e,t,n){this.setAccessibilityMessageToSelectedAttribute(this.noStockKey),this.showHideStockOnlyMessage(),this.enableDisableCartButtons(n,!1),X("loader-button-add-to-cart"),this.addClassToMultiElements(n,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(e,"add",["hidden"])}},{key:"hasNotHcomStockRetail",value:function(e,t,n){this.setAccessibilityMessageToSelectedAttribute(this.retailOnlyKey),this.showHideStockOnlyMessage("show"),this.addClassToMultiElements(e,"add",["fis-as-a-button","show"]),this.addClassToMultiElements(e,"remove",["fis-as-a-link","hidden"]),this.addClassToMultiElements(t,"add",["button"]),this.addClassToMultiElements(t,"remove",["product-attribute-item"]),this.addClassToMultiElements(n,"add",["hidden"]),this.addClassToMultiElements(n,"remove",["button-full-opacity"]),Y("loader-button-add-to-cart"),this.enableDisableCartButtons(n,!1)}},{key:"hasHcomNotStockRetail",value:function(e,t,n){this.setAccessibilityMessageToSelectedAttribute(this.hComOnlyKey),this.showHideStockOnlyMessage(),X("loader-button-add-to-cart"),this.addClassToMultiElements(n,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(e,"add",["hidden"]),this.enableDisableCartButtons(n,!0)}},{key:"hasHcomStockRetail",value:function(e,t,n){this.setAccessibilityMessageToSelectedAttribute(this.hComAndRetailKey),this.showHideStockOnlyMessage(),this.addClassToMultiElements(t,"remove",["button"]),this.addClassToMultiElements(t,"add",["product-attribute-item"]),this.addClassToMultiElements(e,"remove",["fis-as-a-button","hidden"]),this.addClassToMultiElements(n,"remove",["hidden","button-full-opacity"]),X("loader-button-add-to-cart"),this.addClassToMultiElements(e,"add",["fis-as-a-link","show"]),this.enableDisableCartButtons(n,!0)}},{key:"isSizeVariationIsSelected",value:function(){var e=null,t=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(t&&t.length>0){e=!1;for(var n=0;n<t.length;n++)if(t[n].checked){e=!0;break}}return e}},{key:"setAccessibilityMessageToSelectedAttribute",value:function(e){if(!1!==this.isSizeVariationIsSelected()){var t=document.querySelectorAll('.product-attributes button.tray-trigger[aria-controls="panel-configurator"]'),n="aria-label",i=",";if(t&&t.length>0)for(var r=0;r<t.length;r++){var a=this.removePresentabilityAccessibilityMessage(t[r].getAttribute(n),i);switch(e){case this.hComOnlyKey:t[r].setAttribute(n,a+i+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case this.retailOnlyKey:t[r].setAttribute(n,a+i+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case this.hComAndRetailKey:t[r].setAttribute(n,a+i+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}}},{key:"removePresentabilityAccessibilityMessage",value:function(e,t){return"string"!=typeof e||","!==t?e:e=(e=(e=e.replace(this.stringRegularExpression(t+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly),"")).replace(this.stringRegularExpression(t+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly),"")).replace(this.stringRegularExpression(t+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail),"")}},{key:"stringRegularExpression",value:function(e){return"string"!=typeof e?null:new RegExp(e,"g")}},{key:"setAccessibilityMessageToVariation",value:function(e,t,n){if(e&&e.length>0&&2===this.productLocatorVersion())for(var i=0;i<e.length;i++)if(e[i]){var r=e[i].parent("li").find("span.accessibility-availability-type-message");switch(!0){case!t&&!n:r.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.noStock);break;case!t&&n:r.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case t&&!n:r.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case t&&n:r.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}},{key:"showHideStockOnlyMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hide",t=document.querySelectorAll(".product-locator-container-button .only-retail-stock-message");0!==t.length&&t.forEach((function(t){t&&(t.innerHTML="show"===e?Drupal.settings.hermes_translations.storeLocator.productLocator.stockRetailOnlyMessage:"")}))}},{key:"addClassToMultiElements",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e&&("add"===t||"remove"===t))for(var i=0;i<e.length;i++)for(var r=0;r<n.length;r++)e[i].classList[t](n[r])}},{key:"enableAllAttributesButtons",value:function(){for(var e=document.querySelectorAll(".product-attributes button"),t=0;t<e.length;t++)e[t].removeAttribute("disabled"),e[t].classList.remove("disabled")}},{key:"isProductLocatorActive",value:function(){return!!Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("active")&&!!Drupal.settings.product_locator_configuration.active}},{key:"productLocatorVersion",value:function(){return this.isProductLocatorActive()&&Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("version")?Drupal.settings.product_locator_configuration.version:null}},{key:"productLocatorStockRetailWS",value:function(){return Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("stockRetailWebservice")?Drupal.settings.product_locator_configuration.stockRetailWebservice:null}},{key:"forceActivatingPL",value:function(){Drupal.settings.product_locator_configuration.active=!0}},{key:"isProductExcluded",value:function(){if(Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("excludedDeptCodes")){var e="";return Drupal.settings.hermes_products.data.products&&Drupal.settings.hermes_products.data.products.hasOwnProperty(0)&&Drupal.settings.hermes_products.data.products[0].department_code&&(e=Drupal.settings.hermes_products.data.products[0].department_code),!(-1===Drupal.settings.product_locator_configuration.excludedDeptCodes.split(/[ ,]+/).filter(Boolean).indexOf(e))}return!1}},{key:"isAvailableStockRetail",value:function(e){if(Drupal.settings.hermes_products&&Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.retailPresentability&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock){var t=Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts;for(var n in t)if(n.replace(/\s/g,"")===e.replace(/\s/g,"")&&t[n].has_stock_retail)return!0}return!1}},{key:"isAvailableStockHCom",value:function(e){if(Drupal.settings.hermes_products.stock_status.hComAvailability&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock){var t=Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts;for(var n in t)if(n.replace(/\s/g,"")===e.replace(/\s/g,"")&&t[n].in_stock)return!0}return!1}},{key:"hasRetailStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("retailPresentability")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock}},{key:"hasHcomStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("hComAvailability")&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock}},{key:"hasStockRetailOnly",value:function(t){var n=this,i=0;return t.forEach((function(t){t&&n.isAvailableStockRetail(t)&&!e.isAvailableStockHCom(t)&&i++})),i===t.length&&t.length>0}},{key:"enableSlashedSize",value:function(e){e&&(e.attr("disabled",!1),e.parent("li").find("span.name").addClass("slashed-size"))}},{key:"disableSlashedSize",value:function(e){e&&e.parent("li").find("span.name").removeClass("slashed-size")}},{key:"setStockTypeAttr",value:function(e,t,n,i){if(n&&i&&1!==this.productLocatorVersion())switch(!0){case!e&&!t:n.attr(this.stockTypeKey,this.noStockKey),i.attr(this.stockTypeKey,this.noStockKey);break;case!!e&&!t:n.attr(this.stockTypeKey,this.hComOnlyKey),i.attr(this.stockTypeKey,this.hComOnlyKey);break;case!e&&!!t:n.attr(this.stockTypeKey,this.retailOnlyKey),i.attr(this.stockTypeKey,this.retailOnlyKey);break;case!!e&&!!t:n.attr(this.stockTypeKey,this.hComAndRetailKey),i.attr(this.stockTypeKey,this.hComAndRetailKey)}}},{key:"removeSlashInAllSize",value:function(e){if(e)for(var t=0;t<e.length;t++)this.disableSlashedSize(jQuery(e[t]))}},{key:"hasAnyStock",value:function(e){return this.isAvailableStockHCom(e)||this.isAvailableStockRetail(e)}},{key:"setSelectedSku",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null;t=e||t?e:Drupal.settings.hermes_products.data.default_variant.sku?Drupal.settings.hermes_products.data.default_variant.sku:null,Drupal.settings.hermes_products.data.selected_sku=t}},{key:"productColorId",value:function(e){if(Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes"))for(var t in Drupal.settings.hermes_products.data.products_attributes){var n=Drupal.settings.hermes_products.data.products_attributes;if(e===t&&n[t].hasOwnProperty("field_color_hermes")&&n[t].field_color_hermes.hasOwnProperty("id"))return n[t].field_color_hermes.id}return null}},{key:"isProductLocatorConfigurationInitialized",value:function(){return!!Drupal.settings.product_locator_configuration}},{key:"isConfiguratorIsLoaded",value:function(){return!!Drupal.settings.product_locator_configuration&&!!Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded}},{key:"setConfiguratorIsLoaded",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded=e}},{key:"stringBase64Encode",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"stringBase64Decode",value:function(e){return decodeURIComponent(escape(window.atob(e)))}},{key:"checkIfRetailPresentabilityIsNull",value:function(){return!!Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("stock_status")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasOwnProperty("stockProducts")&&null===Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts}},{key:"formatProductPrice",value:function(t){if(!t||!t.price)return null;var n=t.price;if(t.hasOwnProperty("price_without_currency")&&Drupal.settings.hasOwnProperty("hermes_locale")&&Drupal.settings.hasOwnProperty("currency_parameters")&&e.countryListForcedToInverseCurrency.includes(Drupal.settings.hermes_locale)){var i=Drupal.settings.currency_parameters;n=i.hasOwnProperty("symbol_after")?i.symbol_after:"",n+=i.hasOwnProperty("code_spacer")?i.code_spacer:"",n+=i.hasOwnProperty("code_after")?i.code_after:"",n+=i.hasOwnProperty("symbol_spacer")?i.symbol_spacer:"",n+=t.price_without_currency,n+=i.hasOwnProperty("symbol_spacer")?i.symbol_spacer:"",n+=i.hasOwnProperty("code_before")?i.code_before:"",n+=i.hasOwnProperty("code_spacer")?i.code_spacer:"",n+=i.hasOwnProperty("negative")?i.negative:"",n=(n+=i.hasOwnProperty("symbol_before")?i.symbol_before:"").replace(/  +/g," ")}return n}},{key:"countryListForcedToInverseCurrency",get:function(){return["it_it","fi_en","ie_en","lu_fr","at_de","nl_en"]}},{key:"hComOnlyKey",get:function(){return"hComOnly"}},{key:"retailOnlyKey",get:function(){return"retailOnly"}},{key:"hComAndRetailKey",get:function(){return"hComAndRetail"}},{key:"noStockKey",get:function(){return"noStock"}},{key:"stockTypeKey",get:function(){return"stock-type"}}],null&&ce(t.prototype,null),n&&ce(t,n),e}();function he(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"pushEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s={event:"uaevent"};e&&(s.eventcategory=e),t&&(s.eventaction=t),n&&(s.eventlabel=n),i&&(s.eventvalue=i),r&&(s.virtualpageuri=r),a&&(s.pagetype=a),dataLayer.push(s)}},{key:"trackReserveInStoreClick",value:function(t,n,i){t&&n&&i&&e.pushEvent("Product_locator","Reserve in store","".concat(i,"_").concat(t),n)}},{key:"trackContinueExperienceClick",value:function(t){t&&e.pushEvent("Eresa","Eresa_confirmation_experience_button",t)}},{key:"getAvailabilityHitLabel",value:function(e){return de.isAvailableStockHCom(e)&&de.isAvailableStockRetail(e)?"ecom_store":de.isAvailableStockHCom(e)?"ecom":de.isAvailableStockRetail(e)?"store":"unavailable"}},{key:"trackConfirmEreservationClick",value:function(t){t&&e.pushEvent("Eresa","Eresa_confirm_button",t)}},{key:"trackEreservationCreated",value:function(t){if(t){var n="/".concat(Drupal.settings.pathPrefix,"eresa_confirmation");e.pushEvent("Eresa","Eresa_confirmation",t,null,n,"eresa")}}}],null&&he(t.prototype,null),n&&he(t,n),e}();function fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"getProductType",value:function(e){return e.hasOwnProperty("set_items")?"complex":"simple"}},{key:"mapProducts",value:function(e){var t=[],n=this;return e.map((function(e,i){switch(n.getProductType(e)){case"simple":t[i]=n.mapProductSimpleOrComplex(e,!1);break;case"complex":t[i]=n.mapProductSimpleOrComplex(e,!0)}})),t}},{key:"mapProductSimpleOrComplex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,i={};return i=n.getCommonAttributes(0,i,e,t),i=t?n.getComplexProduct(i,e):n.getSimpleProduct(i,e),n.getCommonAttributes(1,i,e,t)}},{key:"getCommonAttributes",value:function(e,t,n){switch(e){case 0:n.name&&(t.name=n.name),n.unit_price&&(t.price=parseFloat(n.unit_price).toFixed(2)),t.brand=s.BRAND,n.qty&&(t.quantity=n.qty);break;case 1:t.dimension37=n.stock,t.dimension52=n.dku?"yes":"no",t.in_store_only=String(de.hasStockRetailOnly([n.sku]))}return t}},{key:"getComplexProduct",value:function(e,t){var n=!(!t.options||!t.options.perso_info);return n?e.id=t.options.container_sku:t.sku&&(e.id=t.sku.replace(/-/g,"|")),t&&t.set_items&&(t.display_single_line?(e.category="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code,"/").concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.variant=t.set_items[0].color||t.set_items[1].color?"".concat(t.set_items[0].color,"|").concat(t.set_items[1].color):"N/V",e.dimension5=""!==t.size?t.size:"N/A",e.dimension6="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code),e.dimension7="".concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.dimension8="".concat(t.set_items[0].product_code,"|").concat(t.set_items[1].product_code),e.dimension9="".concat(t.set_items[0].division_code,"|").concat(t.set_items[1].division_code)):t.options&&t.options.container_type&&t.options.container_type.includes("BELTKIT")?(e.category="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code,"/").concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.variant=t.set_items[0].color||t.set_items[1].color?"".concat(t.set_items[1].color,"|").concat(t.set_items[0].color):"N/A",e.dimension5="".concat(t.set_items[1].size),e.dimension6="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code),e.dimension7="".concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.dimension8="".concat(t.set_items[1].product_code,"|").concat(t.set_items[0].product_code),e.dimension9="".concat(t.set_items[0].division_code,"|").concat(t.set_items[1].division_code)):n?(e.category="".concat(t.departmentCode,"/").concat(t.familyCode),e.variant=t.sku||"N/A",e.dimension5=""!==t.size?t.size:"N/A",e.dimension6=t.departmentCode,e.dimension7=t.familyCode,e.dimension8=t.productCode,e.dimension9=t.divisionCode):(e.category="".concat(t.set_items[0].department_code,"/").concat(t.set_items[0].family_code),e.variant=t.set_items.map((function(e){return e.sku})).join("|"),e.dimension5=t.set_items.length.toString(),e.dimension6=t.set_items[0].department_code,e.dimension7=t.set_items[0].family_code,e.dimension8=t.set_items.map((function(e){return e.product_code})).join("|"),e.dimension9=t.set_items.map((function(e){return e.division_code})).join("|"),e.dimension10=t.set_items.map((function(e){return e.sku})).join("|"))),e}},{key:"getSimpleProduct",value:function(e,t){return t.sku&&(e.id=t.sku),t.department_code&&t.family_code&&(e.category="".concat(t.department_code,"/").concat(t.family_code)),t.color_code?e.variant=t.color_code:t.color?e.variant=t.color:e.variant=s.NONAPP,e.dimension5=t.size?t.size:s.NONAPP,t.department_code&&(e.dimension6=t.department_code),t.family_code&&(e.dimension7=t.family_code),t.product_code&&(e.dimension8=t.product_code),t.division_code&&(e.dimension9=t.division_code),e}}],null&&fe(t.prototype,null),n&&fe(t,n),e}();function ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"helpLink",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=r||jQuery(t.currentTarget).text().trim();e.pushEvent(n,i,a)}},{key:"pushEvent",value:function(e,t,n){dataLayer.push({event:"uaevent",eventcategory:e,eventaction:t,eventlabel:n})}}],null&&ge(t.prototype,null),n&&ge(t,n),e}();function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function _e(){var e,t,n,i,r,a,o,u,l,c,d,h,p,f,m,g=0,y=0,v=0,_=M.get("user"),b=[],T="/"+Drupal.settings.hermes_url_locale,S=["color","size"];function w(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=[],p=Drupal.settings.products_grid_analytics,f=Drupal.settings.hermes_products,m="object"===ve(f)?f.data:void 0,y=_e.getEnglishOrFrenchUrl(),v=n?"404 error cat | Hermès":document.title;i=_e.getPageType(),u=_e.getDeviceType(),d=_e.getBuildVersion();var b={event:0===g?"pageview":"impressions",pagename:v,pagetype:i,languagecode:M.get("currentLanguage"),countrycode:M.get("currentCountry"),mainstepindicator:l,mainstepname:c,buildVersion:d,devicetype:u,userId:o,clienttype:r,clientgender:a,pageTranslate:y};if(_e.getUser(_,b),_e.getUserAgent(b),_e.getCategories(b,i),t=_e.isSearchResult(b,i),f&&m)h=_e.ProductPage(m,b),b.ecommerce={detail:{products:h}};else if(Drupal.settings.hermes_products){var T=_e.ProductsGrid(t,b,p);if(b.category="ecommerce",b.action="impressions",b.ecommerce={impressions:T},_e.getProductsAttribute(p,"department_code"))for(var S=0;S<dataLayer.length;S++)if("pageview"===dataLayer[S].event){dataLayer[S].departmentcode=_e.getProductsAttribute(p,"department_code");break}}else b.pagetype=i;var w=M.get("analytics_payment_dsecure"),E=b.pagetype.includes(s.VALIDATE_3DS_PAGE);w&&E&&(b.d_secure=w),g++,dataLayer.push(b)}function E(){dataLayer.push({event:"uaevent",eventcategory:"Header",eventaction:"TopNavigationHead",eventlabel:"Account",virtualpageuri:T+"/account",pagetype:"account"})}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";dataLayer.push({event:"uaevent",eventcategory:e,eventaction:t||"",eventlabel:n,eventvalue:i})}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";dataLayer.push({event:"uaevent",eventcategory:e,eventaction:t||"",eventlabel:n})}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";dataLayer.push({event:e,eventcategory:t,eventaction:n,eventlabel:i})}function P(e,t,n){var i={step:t.step||0,list:t.list||e.list};n&&delete i.step,e.department_code&&e.family_code?e.category="".concat(e.department_code,"/").concat(e.family_code):e.dimension6&&e.dimension7?e.category="".concat(e.dimension6,"/").concat(e.dimension7):e.category="unknown",dataLayer.push({event:"productClick",ecommerce:{currencyCode:APP.CURRENCY_MAP[M.get("currentStore")].code,click:{products:[e],actionField:i}}})}function I(e){var t=me.mapProducts(e);_e.getUser(_,dataLayer),u=_e.getDeviceType(),d=_e.getBuildVersion(),l="1",c="cart","mobile"===u||"tablet"===u?h=T+"/mobilecheckout/cart/":"desktop"===u&&(h=T+"/checkout/cart/"),dataLayer.push({event:s.CHECKOUT.toLowerCase(),pagename:"".concat(s.CHECKOUT," | Hermès"),pagetype:"".concat(s.CHECKOUT," cart"),mainstepindicator:l,mainstepname:c,virtualpageuri:h,userId:o,clienttype:r,clientgender:a,devicetype:u,buildVersion:d,languagecode:M.get("currentLanguage"),countrycode:M.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[M.get("currentStore")].code,checkout:{actionField:{step:1,option:"Cart",action:"checkout"},products:t}}})}function D(e){if(e)return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}function L(){k("Account","my_account","my_orders")}function O(e,t){k("Account","my_orders",e,t)}function x(e,t,n){k("Account",e,t,n)}function R(){var e=jQuery(this).parent().siblings().attr("data-order-id");e&&O("status_".concat(e))}function N(e){O("detail_".concat(e.return_type,"_").concat(e.order_id))}function U(e,t,n){switch(Drupal.settings.hermes_products.data.configurator_type){case"LOOK_SET":k(s.LOOKPAGELABEL,e,t);break;case"BIKINI_SET":"configurator-field_ref_size_top"===n.delegateTarget.id&&k(s.PRODUCTDOUBLEPAGELABEL,"".concat(e,"_Top"),t),"configurator-field_ref_size_bot1"===n.delegateTarget.id&&k(s.PRODUCTDOUBLEPAGELABEL,"".concat(e,"_Bottom"),t);break;case"DOUBLE_PRODUCT":k(s.PRODUCTDOUBLEPAGELABEL,e,t);break;default:k(s.PRODUCTSIMPLEPAGELABEL,e,t)}}function B(e){k("Cart","ComplimentaryServices",e.currentTarget.getAttribute("href"))}function j(e,t){var n=t.id_;switch(e){case"Autoplay":A("nonintuaevent",s.MODULE_VIDEO,e,n);break;case"Progress":A("uaevent",s.MODULE_VIDEO,t.currentPercent,n);break;default:A("uaevent",s.MODULE_VIDEO,e,n)}}function F(e,t){var n,i,r;switch(e){case"geoFilteringBanner.view":n="nonintuaevent",i="View",r=t;break;case"geoFilteringBanner.stayCountry":n="uaevent",i="Click",r="Stay".concat(t);break;case"geoFilteringBanner.switchCountry":n="uaevent",i="Click",r="SwitchCountry";break;case"geoFilteringBanner.close":n="uaevent",i="Click",r="Close";break;default:return}dataLayer.push({event:n,eventcategory:"Geobanner",eventaction:i,eventlabel:r})}function H(e){dataLayer.push({event:"uaevent",eventcategory:"Footer",eventaction:"Prefooter",eventlabel:e})}jQuery("body"),jQuery(document).ready((function(){var e=_e.getPageType();if(e&&e.includes(s.PRODUCT_PAGE)){var t={stock:!1},n=!1,i=!1;jQuery(document).ajaxComplete((function(e,r,a){var s=-1!==a.url.search("stock");s&&Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&(Drupal.settings.hermes_products.data.belts=r.responseJSON),t.stock=s&&("PERFUME_SET"!==Drupal.settings.hermes_products.data.configurator_type||n)||t.stock,n=s&&"PERFUME_SET"===Drupal.settings.hermes_products.data.configurator_type,jQuery("button").click((function(){jQuery(this).is("[data-bind]")&&(i=!0)})),t.stock&&!i&&0===v&&(v++,jQuery(document).ready(w))}))}!e||e.includes(s.VALIDATE_3DS_PAGE)||e.includes(s.PRODUCT_PAGE)||jQuery(document).ready(w)})),APP.pubsub.subscribe("configurator.change",(function(e,t){t&&w()})),APP.pubsub.subscribe("geoFilteringBanner.view",F),APP.pubsub.subscribe("geoFilteringBanner.stayCountry",F),APP.pubsub.subscribe("geoFilteringBanner.switchCountry",F),APP.pubsub.subscribe("geoFilteringBanner.close",F),APP.pubsub.subscribe("analytics.payment.dsecure",(function(){jQuery(document).ready(w)})),APP.pubsub.subscribe("gtm.basket",(function(e,n){n.basket&&(t=n.basket.items)})),APP.pubsub.subscribe("gtm.openCart",(function(e){e.basket&&e.basket.items&&I(e.basket.items)})),APP.pubsub.subscribe("analytics.grid",(function(e,t){w(e,t)})),APP.pubsub.subscribe("analytics.delivery",(function(e,n){var s=me.mapProducts(n.items),p=_e.getEnglishOrFrenchUrl();(t=s)&&(_e.getUser(_,dataLayer),r=r?"":dataLayer.clienttype,a=a?"":dataLayer.clientgender,i="Checkout delivery",u=_e.getDeviceType(),d=_e.getBuildVersion(),c="delivery",l="2","mobile"===u||"tablet"===u?h=T+"/mobilecheckout/multipage/shipping/":"desktop"===u&&(h=T+"/checkout/multipage/shipping/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:i,mainstepindicator:l,mainstepname:c,virtualpageuri:h,userId:o,clienttype:r,clientgender:a,pageTranslate:p,devicetype:u,buildVersion:d,languagecode:M.get("currentLanguage"),countrycode:M.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[M.get("currentStore")].code,checkout:{actionField:{step:2,option:"Delivery",action:"checkout"},products:s}}}))})),APP.pubsub.subscribe("cart.update",(function(e,t){t.basket&&t.basket.shipping_method&&M.set("shipping_method",t.basket.shipping_method)})),APP.pubsub.subscribe("analytics.payment",(function(){if(t){var e=_e.getEnglishOrFrenchUrl();_e.getUser(_,dataLayer),u=_e.getDeviceType(),d=_e.getBuildVersion(),l="3",c="payment",i="Checkout payment",M.get("shipping_method")&&(f=M.get("shipping_method"));var n=function(){var e=document.getElementById("hermes-checkout-delivery-form");return{date:e.querySelector("select#edit-sagawa-select-a-date"),time:e.querySelector("select#edit-sagawa-select-a-time")}}();m=n.date&&n.time?"none"===n.date.value&&"none"===n.time.value?"no":"yes":"no",M.set("shipping_preference",m),M.get("shipping_choice")?p=M.get("shipping_choice"):(p="Deliver",M.set("shipping_choice",p)),"mobile"===u||"tablet"===u?h=T+"/mobilecheckout/multipage/payment/":"desktop"===u&&(h=T+"/checkout/multipage/payment/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:i,mainstepindicator:l,mainstepname:c,virtualpageuri:h,userId:o,clienttype:r,clientgender:a,pageTranslate:e,shipping_choice:p,shipping_method:f,shipping_preference:m,devicetype:u,buildVersion:d,languagecode:M.get("currentLanguage"),countrycode:M.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[M.get("currentStore")].code,checkout:{actionField:{step:3,option:"Payment",action:"checkout"},products:t}}})}})),APP.pubsub.subscribe("analytics.confirmation",(function(e,t){var n=me.mapProducts(t.items),g=_e.getEnglishOrFrenchUrl();n.forEach((function(e){return e.dimension58=t.apple_pay_widget?"yes":"no"})),i=s.CHECKOUT_CONFIRMATION,u=_e.getDeviceType(),d=_e.getBuildVersion(),l=4,c="confirmation";var y="NO";t.subscribed&&(y="YES"),"mobile"===u||"tablet"===u?h=T+"/mobilecheckout/multipage/review/":"desktop"===u&&(h=T+"/checkout/multipage/review/"),p=M.get("shipping_choice"),f=M.get("shipping_method"),m=M.get("shipping_preference");var v=_e.getPaymentMethod(),b={event:"transaction",newsletter_optin:y,pagename:document.title,pagetype:i,mainstepindicator:l,mainstepname:c,virtualpageuri:h,userId:o,clienttype:r,clientgender:a,pageTranslate:g,shipping_choice:p,shipping_method:f,shipping_preference:m,devicetype:u,paymentMethod:v,d_secure:M.get("analytics_payment_dsecure"),buildVersion:d,languagecode:M.get("currentLanguage"),countrycode:M.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[M.get("currentStore")].code,purchase:{actionField:{id:t.increment_id,revenue:t.subtotal,tax:t.tax_amount,shipping:t.shipping_amount},products:n}}};_e.getUser(_,b),(""===b.clienttype||void 0===b.clientgender&&void 0===b.userId)&&(b.userId=t.customer_id,b.clientgender=t.prefix,b.clienttype=_e.getUserType(t.user_type)),t.fapiao_invoice&&(b.fapiao_invoice=t.fapiao_invoice),dataLayer.push(b)})),APP.pubsub.subscribe("tray.checkout",(function(){dataLayer.push({event:"virtualpage",virtualpageuri:T+"/checkoutlogin/",pagetype:"Log in"})})),APP.pubsub.subscribe("timeslot.selected",(function(e,t){var n;"object"===ve(t)&&(n=t.day+" "+t.time),O("PickUp_"+n,"ExchangeReturn")})),APP.pubsub.subscribe("analytics.exchange.submit",(function(){O("SubmitExchangeButton","ExchangeReturn")})),APP.pubsub.subscribe("analytics.exchange.success",(function(){dataLayer.push({event:"virtualpage",virtualpageuri:T+"/exchangereturn/submissionsuccess/",pagetype:"Manage Order"})})),APP.pubsub.subscribe("Pause",j),APP.pubsub.subscribe("FirstPlay",j),APP.pubsub.subscribe("NewPlay",j),APP.pubsub.subscribe("Stop",j),APP.pubsub.subscribe("Mute",j),APP.pubsub.subscribe("Fullscreen",j),APP.pubsub.subscribe("Autoplay",j),APP.pubsub.subscribe("Progress",j),APP.pubsub.subscribe("analytics.payment.fapiao",(function(e,t){C("Checkout_Payment","Fapiao_invoice",t)})),APP.pubsub.subscribe("analytics.generate.fapiao",(function(){dataLayer.push({event:"uaevent",eventcategory:"Order_Account",eventaction:"Efapiao"})})),APP.pubsub.subscribe("analytics.accordion.openOrCloseFilter",(function(e,t){var n,i,r=jQuery(t),a=r.attr("data-event-id")?r.attr("data-event-id"):r.text().trim(),o="true"===r.attr("aria-expanded"),u=_e.getPageType();u&&(u.includes(s.FAQ_PAGE)?(i="Faq_content",n=o?"Open_content":"Close_content"):(n=o?"openFilter":"closeFilter",u.includes(s.PRODUCT_PAGE)?i="SingleProductPage":u.includes(s.PRODUCT_GRID)&&(i="Product_Grid"))),k(i,n,a)})),APP.pubsub.subscribe("analytics.filter.checked",(function(e,t){var n,i=jQuery(t),r=i.parents(".section").find("span:first").text(),a=n=(n=i.attr("id").split("-"))[n.length-1];b.includes(a)?b.includes(a)&&!0===i.prop("checked")&&k("Product_Grid","Filters",r+"_"+a):(k("Product_Grid","Filters",r+"_"+a),b.push(a))})),APP.pubsub.subscribe("analytics.product.locator.button.click",(function(e,t){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Product Locator",eventlabel:t.sku})})),APP.pubsub.subscribe("analytics.oops.error",(function(e,t){dataLayer.push({event:"uaevent",eventcategory:"error message",eventaction:t.path,eventlabel:t.message})})),APP.pubsub.subscribe("analytics.store-locator.pin.click",(function(e,t){dataLayer.push({event:"uaevent",eventcategory:"Store Locator",eventaction:"Map view click marker",eventlabel:t})})),APP.pubsub.subscribe("analytics.size_guide.open",(function(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Size_Guide"})})),APP.pubsub.subscribe("analytics.pushCounter.incremented",(function(e,t){y=t})),APP.pubsub.subscribe("analytics.viewCartFromNotification",(function(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"ViewCartButton"})})),APP.pubsub.subscribe("analytics.closeAddtoCartNotification",(function(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"Close"})})),APP.pubsub.subscribe("analytics.cart-event",(function(e,i){i.basket&&i.basket.items&&function(e){var i,r="empty";void 0!==e?e.length>=1&&(i=n,r="full"):void 0!==t&&t.length>=1&&(i=t,r="full"),i&&i.length&&(dataLayer.push({event:"virtualpage",virtualpageuri:T+"/cart/",pagetype:"cart",cartstatus:r}),I(i))}(n=i.basket.items)})),jQuery("[data-track-logo]").on("click",(function(){k("Header","Logo")})),jQuery("[data-track-menu]").on("click",(function(){k("Header","TopNavigationHead","MenuBurger")})),jQuery("[data-track-account]").on("click",E),jQuery("[data-track-cart]").on("click",(function(){k("Header","TopNavigationHead","ShoppingCart")})),APP.pubsub.subscribe("analytics-open-tray-account",(function(){E()})),APP.pubsub.subscribe("analytics-open-tray-order-list",(function(){L(),R()})),APP.pubsub.subscribe("analytics-open-exchange-return-details",(function(e,t){N(t)})),APP.pubsub.subscribe("analytics-open-exchange-return-request",(function(e,t){!function(e){O("".concat(e.mode,"_").concat(e.order_id),"".concat(T,"/account/").concat(e.mode))}(t)})),APP.pubsub.subscribe("analytics-enable-exchange-return",(function(e,t){!function(e){x(e.mode,"checkbox")}(t)})),APP.pubsub.subscribe("analytics-continue-exchange-return",(function(e,t){!function(e){x(e.mode,"continue")}(t)})),APP.pubsub.subscribe("analytics-order-details-exchange-return",(function(e,t){!function(e){x(e.mode,"order_details","".concat(T,"/account/").concat(e.mode,"/order_details"))}(t)})),APP.pubsub.subscribe("analytics-choice-delivery-exchange-return",(function(e,t){!function(e){x(e.mode,"choice_delivery_".concat(e.delivery_type))}(t)})),APP.pubsub.subscribe("analytics-proceed-exchange-return",(function(e,t){!function(e){x(e.mode,"proceed_".concat(e.id),"".concat(T,"/account/return_order_instuctions"))}(t)})),APP.pubsub.subscribe("analytics-return-print-exchange-return",(function(e,t){!function(e){x(e.mode,"return_print")}(t)})),APP.pubsub.subscribe("analytics-refund-details-exchange-return",(function(e,t){!function(e){x(e.mode,"order_details","".concat(T,"/account/").concat(e.mode,"/").concat(e.mode,"_details"))}(t)})),APP.pubsub.subscribe("analytics-print-invoice",(function(e,t){!function(e){x(e.mode,"invoice_print")}(t)})),jQuery("body").on("click",'[data-track-prefooter="help-faq"] a',(function(){H("FAQs")})),jQuery("body").on("click",'[data-track-prefooter="call-us"] a',(function(){H("Call-us")})),jQuery("body").on("click",'[data-track-prefooter="find-store"] a',(function(){H("Find-store")})),jQuery("body").on("click",'[data-tray-trigger="tray-order-list"]',L),jQuery("body").on("click","button.js-to-order-details",R),jQuery("body").on("click",".js-show-all-orders",(function(){O("more")})),jQuery("body").on("click",".order-track-cta a",R),jQuery("body").on("click",'[data-bind="exchange-return-details"]',N),jQuery("[data-order-id]").on("click",N),jQuery("body").on("click",".search-suggestion > dd ul li",(function(e){var t=jQuery(e.currentTarget).parents(".search-suggestion").find("span").not(".sr-only").toArray().map((function(e,t){return{el:e,id:t}})),n=t.find((function(t){return t.el===e.currentTarget.children[0]}));if(M.set("nav","search"),n){var i=n.id,r=jQuery(".field-search").val(),a=e.currentTarget.innerText.split("\n")[0];k("Search","Search suggest list","".concat(r,":").concat(a),i)}else console.warn("Suggestion link clicked not found!")})),jQuery("[data-track-store]").on("click",(function(){k("Header","FindAStore")})),jQuery('[data-tray-trigger="tray-help"]').on("click",(function(){var e=jQuery(this).parent().parent().parent().parent()[0].className.split("-")[0];"header"===e&&ye.pushEvent("Header","Help"),"footer"===e&&ye.pushEvent("Services","Contact Us","Footer")})),jQuery(".js-locale-tray").on("click",(function(t){e=jQuery(t.currentTarget).closest("ul.header-links").length>0?"header":"footer"})),jQuery("[data-track-language]").on("click","ul li a",(function(t){var n=jQuery(t.currentTarget).attr("href").split("/"),i=t.currentTarget.dataset,r=n.length<2?"".concat(i.trackCountry,"/").concat(i.trackLanguage):"".concat(n[n.length-3],"/").concat(n[n.length-2]);switch(e){case"header":k("Navigation","Country selector",r);break;case"footer":k("Footer",r)}})),jQuery("[data-track-social]").on("click","a, button",(function(e){k("Footer","SocialNetworksIcons",e.currentTarget.querySelector("span").innerHTML)})),jQuery("[data-track-footer]").on("click","ul li a",(function(e){k("Footer",jQuery(e.currentTarget).closest("ul").prev().html(),e.currentTarget.innerHTML.trim())})),jQuery("[data-track-zoom]").on("click","img",(function(){k(s.PRODUCTSIMPLEPAGELABEL,"Zoom")})),jQuery("[data-track-info]").on("click","a",(function(){U("ContactUs",null)})),jQuery("[data-track-banner-buy]").on("click",(function(){k(s.PRODUCTSIMPLEPAGELABEL,"Sticky_Header","Buy")})),jQuery("[data-track-thumbs]").on("click","li button",(function(e){U("Alternative_View",parseInt(e.currentTarget.dataset.index,10)+1)})),jQuery("[data-track-back]").on("click",(function(){Drupal.settings.hermes_products&&Drupal.settings.hermes_products.data&&"LOOK_SET"===Drupal.settings.hermes_products.data.configurator_type?k(s.LOOKPAGELABEL,"Menu_Burger"):k(s.PRODUCTSIMPLEPAGELABEL,"Menu_Burger")})),jQuery("[data-track-configurator]").on("click","label",(function(e){var t=e.currentTarget.querySelector(".name span")||e.currentTarget.querySelector(".name"),n=t.getAttribute("data-event-id")?D(t.getAttribute("data-event-id")):D(t.innerHTML);g=0,function(e){switch(Drupal.settings.hermes_products.data.configurator_type){case"VARIANT_PRODUCT":Drupal.settings.hermes_products.data.default_variant.sku=e.currentTarget.dataset.sku;break;default:break;case"BIKINI_SET":"configurator-field_ref_size_top"===e.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[0]=e.currentTarget.dataset.sku),"configurator-field_ref_size_bot1"===e.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[1]=e.currentTarget.dataset.sku);break;case"LOOK_SET":var t=e.delegateTarget.id.replace(/^\D+/g,"")?e.delegateTarget.id.replace(/^\D+/g,""):"0";Drupal.settings.hermes_products.data.default_variant.sku[t]=e.currentTarget.dataset.sku}}(e);for(var i=0;i<S.length;i++){var r=jQuery(e.currentTarget).closest("fieldset").attr("id");r&&r.indexOf(S[i])>-1&&U(D(S[i])+"_Selector",n,e)}})),jQuery("[data-track-cross-sales]").on("click",".product-grid-list li a",(function(e){var t,n,i,r=jQuery(e.currentTarget).closest("[data-track-cross-sales]").data("track-cross-sales"),a=e.currentTarget.dataset.product,o=Drupal.settings.hermes_cross_sales_products[r].filter((function(e){return e.sku===a}))[0];if(o){var u=o.attributes&&o.attributes.field_color_hermes&&o.attributes.field_color_hermes.name?o.attributes.field_color_hermes.name:s.NONAPP,l=o.real_price?z().unformat(o.real_price).toFixed(2):s.NONAPP,c={};c.name=o.name||o.title,c.id=a,c.price=l,c.category=o.department_code+"/"+o.family_code,c.variant=u,c.dimension5=o.ref_size?o.ref_size:s.SIZE_LESS,c.dimension6=o.department_code,c.dimension7=o.family_code,c.dimension8=o.product_code,c.dimension9=o.division_code,c.url=o.url,n=r,i=(t=c).url,delete t.url,dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:n},products:[t]}},eventCallback:function(){document.location=i}})}})),jQuery("[data-track-continue-checkout]").on("click",(function(){k("Cart","ContinueToCheckout")})),jQuery("[data-track-complimentary]").on("click","a",B),jQuery("[data-track-cart-shopping]").on("click","a",(function(){k("Cart","ContinueShopping")})),jQuery("[data-track-cart-services]").on("click",B),jQuery("[data-track-products]").on("click",".product-item > a, .product-history-item > a",(function(e){var t=jQuery(e.currentTarget).closest("[data-track-list]"),n=t.find("[data-product]"),i=e.currentTarget.dataset.product,r=M.get("nav");if(Drupal.settings.hermes_products){"undefined"===r&&(r="direct");var a=jQuery.grep(Drupal.settings.hermes_products,(function(e){return e.sku===i}))[0];a&&(jQuery.extend(a,{list:t.data("track-list"),position:n.index(jQuery('[data-product="'.concat(i,'"]')))+1,name:a.name||a.title,id:i,price:"",category:r}),delete a.title,delete a.sku,delete a.avg_color,delete a.raw_price,delete a.image,delete a.url,P(a,{step:1},!1))}})),jQuery("[data-track-categories]").on("click",".filter-cat-subcat",(function(e){var t=jQuery(e.currentTarget);k("Product_Grid","Collections",t.find("span span").length?t.find("span span").text().trim():t.text().trim())})),jQuery("[data-track-sort]").on("change",(function(e){k("Product_Grid","SortBy",jQuery(e.currentTarget).find("option:selected").text())})),jQuery("body").on("click",".filter-button-clear",(function(){k("Product_Grid","Filters","Clear",null)})),jQuery(".form-item-gift input").on("change",(function(){k("Checkout_Delivery","Gifting","GiftBoxTicked")})),jQuery(".form-item-hide-price input").on("change",(function(){k("Checkout_Delivery","Gifting","PriceLess")})),jQuery('[data-bind="add-message-link"]').on("click",(function(){k("Checkout_Delivery","Gifting","MessageAdded")})),jQuery(".checkout-addresses-choices").on("change",'input[type="radio"]',(function(e){"deliver"===e.currentTarget.value?M.set("shipping_choice","Deliver"):"pickup"===e.currentTarget.value&&M.set("shipping_choice","Collect in store")})),jQuery(".shipping-method-list").on("change",'input[type="radio"]',(function(e){k("Checkout_Delivery","shipping_method",e.currentTarget.value)})),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-date",(function(e){C("Checkout_Delivery","DeliveryPreference",function(e){if("none"===e)return"AnyDate";var t=new Date;return"Day"+(new Date(e).getDate()-t.getDate())}(e.currentTarget.value))})),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-time",(function(e){C("Checkout_Delivery","DeliverySchedule",{none:"All_Day","01":"morning",12:"12pm_2pm",14:"2pm_4pm",16:"4pm_6pm",18:"6pm_8pm",19:"7pm_9pm"}[e.currentTarget.value])})),jQuery("[data-track-editorial-cta]").on("click",(function(){dataLayer.push({event:"uaevent",eventcategory:"EditoPage",eventaction:"edito push link",eventlabel:this.innerText})})),jQuery("[data-track-products-push-merch]").on("click",".product-item > a, .product-history-item > a",(function(e){var t=jQuery(e.currentTarget).closest("[data-track-list]"),n=e.currentTarget.dataset.product,i=Drupal.settings.hermes_merchandising_pushes_products.data;if(i){var r=i.filter((function(e){return e})).find((function(e){return e.sku===n}));if(r){var a={list:"".concat(t.data("track-list"),"_").concat(y)};P({name:r.name||r.title,id:n,price:r.price,brand:s.BRAND,category:"".concat(r.department_code,"/").concat(r.family_code),variant:s.NONAPP,dimension5:s.NONAPP,dimension6:r.department_code,dimension7:r.family_code,dimension8:r.product_code,dimension9:r.division_code},a,!0)}}})),jQuery("[data-track-previous-step]").on("click",(function(){k("Checkout_Payment","Breadcrumb","PreviousStep")})),jQuery("[data-track-payment-method]").on("click",(function(){!function(e){k("Checkout_Payment","PaymentMethod",jQuery(e).hasClass("paypal")?"payWithPayPal":"payWithCard")}(this)})),jQuery("[data-track-category-highlight-position]").on("click",".category-highlight-link",(function(e){var t,n,i,r,a,s;t=jQuery(e.currentTarget),n=jQuery(e.delegateTarget),i=n.attr("data-track-category-highlight-position"),r=t.find(".category-highlight-title").text(),a=jQuery.trim(r),s="Module_CategoryHighlight",Drupal.settings.hermes_master_page&&(s="Module_Masterpage"),dataLayer.push({event:"uaevent",eventcategory:s,eventaction:"".concat(i," | ").concat(a),eventlabel:t.attr("href")})}))}function be(e,t){t&&t.sku&&(APP.selectedSku=t.sku)}_e.getGender=function(e){var t;switch(e){case"Ms.":case"Mrs.":case"Mme":case"Mlle":case"Miss":case"女士":case"Sig.na":case"Sig.ra":case"Frau":case"Srta.":case"Sra.":case"F":t="W";break;case"Mr.":case"M.":case"先生":case"Sig.":case"Herr":case"Sr.":case"M":t="M";break;case"Dr":case"Prof":case"Honorable":case"Dr.":t="U";break;default:t=e}return t},_e.getUserType=function(e){var t;switch(e){case"0":t="newclient";break;case"1":t="buyer";break;default:t=""}return t},_e.getDeviceType=function(){return window.screen.width<991?"mobile":window.screen.width<1199?"tablet":"desktop"},_e.getBuildVersion=function(){return s.HOSTNAME.indexOf(window.location.hostname)>-1?"Production version":"Development version"},_e.getProductsAttribute=function(e,t){var n=null;for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];n=r[t]&&!n?r[t]:n}return n},_e.getPageType=function(){var e={".front":s.FRONT_PAGE,".faq-dispatch":s.FAQ_PAGE,".node-type-faq-theme":s.FAQ_PAGE,".node-type-terms-and-conditions":s.LEGAL_PAGE,".node-type-text-only-page":s.PAGE_404,".section-product-category":s.LISTING_PAGE,".node-type-story":s.STORY_PAGE,".node-type-hermes-product-display":s.PRODUCT_PAGE,".pane-hermes-grid":s.PRODUCT_GRID,".grid-wrapper":s.PRODUCT_GRID,"#store-locator":s.FIND_STORE_PAGE,".successful-order":s.CHECKOUT_CONFIRMATION,".page-validate3ds":s.VALIDATE_3DS_PAGE,".page-account-create":s.ACCOUNT_PROFIL_PAGE,".page-profil":s.ACCOUNT_PROFIL_PAGE},t=Object.keys(e).map((function(t){if(jQuery(t).length>0)return e[t]})).find((function(e){return e}));if(t===s.PRODUCT_PAGE)switch(Drupal.settings.hermes_products.data.configurator_type){case"VARIANT_PRODUCT":t=s.PRODUCT_PAGE_SINGLE;break;case"DOUBLE_PRODUCT":case"BIKINI_SET":t=s.PRODUCT_PAGE_DOUBLE;break;case"LOOK_SET":t=s.PRODUCT_PAGE_LOOK;break;case"PERFUME_SET":t=s.PRODUCT_PAGE_SET}return Drupal.settings.hermes_master_page&&(t=s.MASTER_PAGE),t},_e.getEnglishOrFrenchUrl=function(){var e,t,n=document.getElementsByTagName("link"),i=M.get("currentLanguage"),r=M.get("currentCountry");if("en"!==i)e=_e.getUrlEquivalent(e,n,"en-".concat(r));else for(var a=0;a<n.length;a++)"canonical"===n[a].rel&&(e=n[a].href);return e=_e.getUrlEquivalent(e,n,"en-us"),e=_e.getUrlEquivalent(e,n,"en-gb"),e=_e.getUrlEquivalent(e,n,"fr-".concat(r)),void 0===(e=_e.getUrlEquivalent(e,n,"fr-fr"))&&(e="no english nor french equivalent found"),t=-1!==e.indexOf("hermes.cn")&&-1!==Drupal.settings.baseUrl.indexOf("hermes.com")?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+1:-1!==e.indexOf("hermes.com")&&-1!==Drupal.settings.baseUrl.indexOf("hermes.cn")?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+3:Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+2,e.substr(t)},_e.getUrlEquivalent=function(e,t,n){if(void 0===e)for(var i=0;i<t.length;i++)t[i].hreflang===n&&(e=t[i].href);return e},_e.getUserAgent=function(e){var t=window.navigator.userAgent.toLowerCase();/micromessenger/.test(t)&&(e.user_agent=window.navigator.userAgent)},_e.ProductPage=function(e,t){var n=[],i=_e.setProductArray(e),r=_e.setSkuArray(e);if(t.productname=_e.getProductName(e),t.productsku=_e.getProductSku(e),t.departmentcode=_e.getProductDepartmentCode(e),t.productlocator=de.isProductLocatorActive()&&!de.isProductExcluded()?"yes":"no",t.in_store_only=String(de.hasStockRetailOnly(r)),APP.pubsub.subscribe("configurator.change",be),APP.selectedSku&&e&&e.productsWithStock){var a=e.productsWithStock.find((function(e){return e.sku===APP.selectedSku}));a&&(t.productsku=a.sku)}if(de.isProductLocatorActive()&&(t.availability_hit=pe.getAvailabilityHitLabel(t.productsku)),Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&r.length>0){var o={name:"buckle",sku:r[0],brand:s.BRAND,stock:Drupal.settings.hermes_products.data.belts[r[0]].in_stock?"in stock":"out of stock"};i.push(o)}if(i.length>0)for(var u in i)for(var l in r)if(r[l].replace(/\s/g,"")===i[u].sku.replace(/\s/g,"")){var c=i[u],d=z().unformat(c.price).toFixed(2),h=_e.getColor(c),p=c.department_code?c.department_code:f.departmentcode,f={name:c.title,id:c.sku,price:d,brand:s.BRAND,category:"".concat(p,"/").concat(c.family_code),variant:h,dimension5:c.ref_size,dimension6:c.department_code,dimension7:c.family_code,dimension8:c.product_code,dimension9:c.division_code,dimension37:c.stock,in_store_only:String(de.hasStockRetailOnly([c.sku]))};de.isProductLocatorActive()&&(f.dimension53=pe.getAvailabilityHitLabel(c.sku)),n.push(f)}return n},_e.getProductDepartmentCode=function(e){var t;switch(e.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":case"PERFUME_SET":e&&e.productsWithStock&&e.productsWithStock.length&&(t=e.productsWithStock[0].department_code?e.productsWithStock[0].department_code:"unavailable");break;case"LOOK_SET":case"BIKINI_SET":e&&e.productsWithStock&&e.productsWithStock.length&&e.productsWithStock[0]&&e.productsWithStock[0].length&&(t=e.productsWithStock[0][0].department_code?e.productsWithStock[0][0].department_code:"unavailable");break;default:t="error"}return t},_e.getProductSku=function(e){var t;switch(e.configurator_type){case"VARIANT_PRODUCT":t=e.targeted_variant.sku;break;case"DOUBLE_PRODUCT":t=e.default_variant.set_sku;break;case"LOOK_SET":case"PERFUME_SET":case"BIKINI_SET":t=e.set.sku;break;default:t=null}return t},_e.getProductName=function(e){var t;switch(e.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":t=e.targeted_variant.title;break;case"BIKINI_SET":case"PERFUME_SET":case"LOOK_SET":t=e.set.title;break;default:t=null}return t},_e.setProductArray=function(e){var t=[];if(e.productsWithStock)switch(e.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":t=e.productsWithStock.slice(0);break;case"PERFUME_SET":for(var n=e.set.selection,i=0;i<n.length;i++)for(var r=0;r<e.productsWithStock.length;r++)n[i].sku===e.productsWithStock[r].sku&&t.push(e.productsWithStock[r]);break;case"LOOK_SET":case"BIKINI_SET":for(var a=0;a<e.productsWithStock.length;a++)for(var s=0;s<e.productsWithStock[a].length;s++)t.push(e.productsWithStock[a][s])}return t},_e.setSkuArray=function(e){var t=_e.setProductArray(e),n=t&&t[0]?t[0].sku_list:null;APP.selectedSku&&(n=APP.selectedSku);var i=[];switch(e.configurator_type){case"VARIANT_PRODUCT":i.push(e.selected_sku);break;case"DOUBLE_PRODUCT":i=n?n.split(", "):[];break;case"BIKINI_SET":case"LOOK_SET":i=e.default_variant.sku;break;case"PERFUME_SET":for(var r=0;r<t.length;r++)i.push(t[r].sku);break;default:i=[]}return i},_e.ProductsGrid=function(e,t,n){var i=[];for(var r in t.departmentcode=_e.getProductsAttribute(n,"department_code"),Drupal.settings.hermes_products)if(Drupal.settings.hermes_products.hasOwnProperty(r)){var a=e?s.SEARCH_RESULTS:s.PRODUCT_GRID,o=Drupal.settings.hermes_products[r],u=z().unformat(o.price).toFixed(2),l=o.department_code&&!t.departmentcode?o.department_code:t.departmentcode;i.push({name:o.title,id:o.sku,price:u,brand:s.BRAND,category:"".concat(l,"/").concat(o.family_code),dimension5:o.ref_size,dimension6:o.department_code,dimension7:o.family_code,dimension8:o.product_code,dimension9:o.division_code,position:parseInt(r,10)+1,list:a})}return i},_e.getUser=function(e,t){if(e){e.customer_id&&(t.userId=e.customer_id);var n=e.gender?e.gender:e.prefix;t.clienttype=_e.getUserType(e.user_type),t.clientgender=_e.getGender(n)}else t.clientgender=null,t.clienttype=s.NONCONNECTED},_e.getMenuLvl=function(e){var t=M.get("nav");if(t){var n=t.split("/");void 0!==n[0]&&(e.menu_lv1=n[0]),void 0!==n[1]?e.menu_lv2=n[1]:e.menu_lv2=null,void 0!==n[2]?e.menu_lv3=n[2]:e.menu_lv3=null}},_e.isSearchResult=function(e,t){var n=!1;return t!==s.FRONT_PAGE&&t!==s.STORY_PAGE?(window.location.pathname.indexOf("search")>-1&&(n=!0,M.set("nav","direct")),_e.getMenuLvl(e)):t===s.MASTER_PAGE?(M.get("nav")||M.set("nav","direct"),_e.getMenuLvl(e)):M.set("nav","direct"),n},_e.getCategories=function(e,t){t!==s.MASTER_PAGE&&t!==s.STORY_PAGE&&t!==s.FRONT_PAGE||(e.editorialcategory=Drupal.settings.theme&&Drupal.settings.theme.editorial_category?Drupal.settings.theme.editorial_category:s.NONAPP,e.editorialtypology=Drupal.settings.theme&&Drupal.settings.theme.editorial_typology?Drupal.settings.theme.editorial_typology:s.NONAPP,e.editorialitem=Drupal.settings.theme&&Drupal.settings.theme.editorial_item?Drupal.settings.theme.editorial_item:s.NONAPP)},_e.getColor=function(e){return e.attributes&&e.attributes.field_color_hermes&&e.attributes.field_color_hermes.name?e.attributes.field_color_hermes.name:s.NONAPP},_e.getPaymentMethod=function(){var e,t=M.get("paymentMethod"),n=M.get("ccType");if(t===s.PAYMENT_METHOD.creditCard||t===s.PAYMENT_METHOD.adyenOneclick)switch(n){case"VI":e="1";break;case"MC":e="2";break;case"AE":e="3";break;case"SM":e="4";break;case"DC":e="5";break;case"DI":e="6";break;case"JCB":e="7";break;case"CUP":e="8";break;case"cartebancaire":case void 0:e="9";break;default:e="unknown"}else e=t===s.PAYMENT_METHOD.paypal?"10":t===s.PAYMENT_METHOD.alipay?"11":t===s.PAYMENT_METHOD.wechat?"12":t===s.PAYMENT_METHOD.hsbcCup?"13":"unknown";return e};var Te=_e;function Se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ke(e,t){return ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ke(e,t)}function Ce(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(u,e);var t,n,i,r,a,o=(r=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(r);if(a){var n=Ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ce(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this)).init(),e}return t=u,i=[{key:"pushEvent",value:function(e){window.dataLayer.push({event:"uaevent",eventcategory:"MerchPush",eventaction:"grid",eventlabel:e.currentTarget.getAttribute("href")})}}],(n=[{key:"setArticles",value:function(e){this.articles=e}},{key:"setProducts",value:function(e){this.products=e}},{key:"reinit",value:function(){this.impressions=[],this.layer.ecommerce={}}},{key:"init",value:function(){jQuery("div[data-merch-campaignid]").find(".push-merch-col-media a").on("click",u.pushEvent)}},{key:"buildImpression",value:function(e){var t=Te.getPageType(),n=z().unformat(e.price).toFixed(2);return e.category=this.defineProductCategory(e),{name:e.title,id:e.sku,price:n,brand:s.BRAND,category:e.category,dimension5:e.ref_size,dimension6:e.department_code,dimension7:e.family_code,dimension8:e.product_code,dimension9:e.division_code,list:t===s.FRONT_PAGE?"merchandising_homepage_".concat(this.pushCounter):"merchandising_edito_page_".concat(this.pushCounter),position:e.position}}}])&&Ee(t.prototype,n),i&&Ee(t,i),u}(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layer={event:"impressions",category:"ecommerce",action:"impressions",ecommerce:{}},this.impressions=[],this.queueSize=2,this.pushCounter=0,this.reinit()}var t,n;return t=e,(n=[{key:"reinit",value:function(){throw new TypeError("You must override this method")}},{key:"buildImpression",value:function(e){throw new TypeError("You must override this method"+JSON.stringify(e))}},{key:"bind",value:function(){var e=this;this.articles&&this.articles.length>0&&Array.prototype.forEach.call(this.articles,(function(t){e.articleIsInViewPort(t)||document.addEventListener("scroll",(function(){e.articleIsInViewPort(t)}))}))}},{key:"articleIsInViewPort",value:function(e){return!(void 0===this.products||!this.products.length)&&(e.inViewport||(e.inViewport=N.isInViewport(e),e.inViewport&&this.pushMerchImpression(this.getProductFromArticleNode(e))),e.inViewport)}},{key:"getProductFromArticleNode",value:function(e){var t=this.products.find((function(t){var n=jQuery(e).find("[data-product]");if(void 0!==n)return t.position=e.position,n.data("product")===t.sku}));return this.pushCounter=e.indexPush,APP.pubsub.publish("analytics.pushCounter.incremented",this.pushCounter),t}},{key:"pushMerchImpression",value:function(e){void 0!==e&&(this.impressions.push(this.buildImpression(e)),this.impressions.length===this.queueSize&&(this.layer.ecommerce={impressions:this.impressions},dataLayer.push(this.layer),this.reinit()))}},{key:"defineProductCategory",value:function(e){return e.department_code&&e.family_code?"".concat(e.department_code,"/").concat(e.family_code):e.dimension6&&e.dimension7?"".concat(e.dimension6,"/").concat(e.dimension7):"unknown"}}])&&Se(t.prototype,n),e}());function Ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Le=function e(t,n){De(this,e),this.campaignId=t,this.htmlElement=n},Oe=function(){function e(){De(this,e),this._initPushes(),this._initLocale(),this._callFredhopper(),this.analyticsPushMerch=new Pe}var t,n;return t=e,(n=[{key:"_initPushes",value:function(){this.pushes=[];for(var e=jQuery("div[data-merch-campaignid]"),t=0;t<e.length;t++)this.pushes.push(new Le(e[t].dataset.merchCampaignid,e[t]))}},{key:"_initLocale",value:function(){this.location=location.valueOf();var e=this.location.pathname.match(/(\w+)\/(\w+)\/.*/i);this.country=e[1],this.language=e[2],this.location.prefix="".concat(this.country,"/").concat(this.language)}},{key:"_callFredhopper",value:function(){var e="".concat(this.country,"_").concat(this.language),t=this.location.prefix,n={locale:e,url_locale:t},i=this.pushes.map((function(e){return e.campaignId}));if(i.length&&e&&t){var r="".concat(Drupal.settings.hermes_global.url_cde,"/personalize/campaign?cid=").concat(i.join(","));jQuery.ajax({url:r,method:"POST",contentType:"application/json",data:JSON.stringify(n),xhrFields:{withCredentials:!0}}).done(this._replacePush.bind(this))}}},{key:"_replacePush",value:function(e){var t=this,n=APP.CURRENCY_MAP["".concat(this.country,"_").concat(this.language)];n&&(n.precision=0);var i=APP.templates.listItemProduct,r=[],a=[],s=[],o=[];Object.keys(this.pushes).forEach((function(u){var l=t.pushes[u],c=l.campaignId,d=jQuery(l.htmlElement).find("ul[data-fill-merch]"),h=e.stories.items[c]?e.stories.items[c]:[];if(h&&h.length)for(var p=0;p<h.length;p++)h[p]&&h[p].image&&(h[p].image=N.urlTransform(h[p].image));var f="/".concat(t.location.prefix);G().parse(i);var m=[];d&&d.children()&&(m=d.children().map((function(e){var t=e>=h.length?0:e,r=h[t];if(r&&r.url&&(r.url.includes(f)||(r.url="".concat(f).concat(r.url),r.url.endsWith("/")||(r.url+="/")),r.price=z().formatMoney(r.price,n),r.more_colors=r.more_colors?Drupal.settings.hermes_translations.ui.more_colors:"",r.avg_color="colorless"!==r.avg_color&&r.avg_color),h&&h.length>0)return G().render(i,h[t])})).get().join("")),d.html(m),d.find("li article a img, li article a div.product-item-meta").each((function(){jQuery(this).css("opacity","1")})),s.push(d.find("article")),o.push(h),s[parseInt(u)]&&Array.prototype.forEach.call(Array.from(s[parseInt(u)]),(function(e,t){e.campaignId=c,e.indexPush=parseInt(u)+1,e.position=t+1,r.push(e)})),o[parseInt(u)]&&a.push(o[parseInt(u)])}));var u=r.length>0?[].concat.apply([],r):"",l=a.length>0?[].concat.apply([],a):"";u.length>0&&this.analyticsPushMerch.setArticles(u),l.length>0&&this.analyticsPushMerch.setProducts(l),this.analyticsPushMerch.bind()}}])&&Ie(t.prototype,n),e}();function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(2816);var Re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parseContent",value:function(e,t){return!window.DEBUG_MODE&&G()?G().render(e,t):e.replace(/\{(\w+)\}/gi,(function(e,n){return void 0!==t[n]?t[n]:e}))}},{key:"render",value:function(t,n){if(APP.templates&&t in APP.templates){var i=APP.templates[t];return n=n||{},Drupal&&Drupal.settings&&(Drupal.settings.hermes_translations&&Drupal.settings.hermes_translations.storeLocator&&(n=e.mergeJson(n,Drupal.settings.hermes_translations.storeLocator)),!window.DEBUG_MODE&&Drupal.settings.hermes_store_locator&&(n=e.mergeJson(n,Drupal.settings.hermes_store_locator))),e.parseContent(i,n)}return"[no-template for "+t+"]"}},{key:"mergeJson",value:function(t,n){for(var i in n)"object"===xe(n[i])?e.mergeJson(t,n[i]):t[i]=n[i];return t}},{key:"podcastrender",value:function(t,n){if(APP.templates&&t in APP.templates){var i=APP.templates[t];return n||(n={}),e.parseContent(i,n)}return"[no-template for id: "+t+"]"}}],null&&Me(t.prototype,null),n&&Me(t,n),e}();function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Be(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),e}function je(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){var t="function"==typeof Map?new Map:void 0;return Fe=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return He(e,arguments,qe(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Qe(i,e)},Fe(e)}function He(e,t,n){return He=Ve()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Qe(r,n.prototype),r},He.apply(null,arguments)}function Ve(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Qe(e,t){return Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qe(e,t)}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}n(3558);var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(r,e);var t,n,i=(t=r,n=Ve(),function(){var e,i=qe(t);if(n){var r=qe(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return je(this,e)});function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=i.call(this)).createdCallback(),e}return Be(r,null,[{key:"create",value:function(){return document.createElement(this.tagname())}},{key:"tagname",value:function(){return this.name.camelCaseToDash()}},{key:"identRender",value:function(){return this.name.charAt(0).toLowerCase()+this.name.slice(1)}},{key:"register",value:function(){document.registerElement?document.registerElement(this.tagname(),{prototype:this.prototype}):window.customElements.define(this.tagname(),this.prototype.constructor)}},{key:"name",get:function(){return"Component"}}]),Be(r,[{key:"getObjectClassName",value:function(){var e=this.constructor.name;if(/\-/.test(e)){var t=e.split("-"),n="";return t.forEach((function(e){n+=e.capitalizeFirstLetter()})),n}return e}},{key:"identTemplate",value:function(){return this.getObjectClassName().minimizeFirstLetter()}},{key:"loadScript",value:function(e,t){HTMLElement.loadScript(this.mainDocument,e,t)}},{key:"find",value:function(e){var t=this.root.querySelector(e);return t||(t=document.querySelector(e)),t}},{key:"clearChildrenOf",value:function(e){for(var t=this.find(e);t.firstChild;)t.removeChild(t.firstChild)}},{key:"catchEvent",value:function(e,t,n){var i=this.find(e);i&&i.addEventListener(t,n)}},{key:"render",value:function(e){var t=Re.render(this.identTemplate(),e||{});return this.root.innerHTML=t,this.onDidRender(),t}},{key:"onAttach",value:function(){this.render()}},{key:"createdCallback",value:function(){this.root=this,this.onDidCreate()}},{key:"attachedCallback",value:function(){this.onAttach()}},{key:"connectedCallback",value:function(){this.attachedCallback()}},{key:"hide",value:function(){this.onWillDisappear();var e=this.root.getElementsByTagName("div")[0];e.classList.remove("component-locator-show"),e.classList.add("component-locator-hide"),this.onDidDisappear()}},{key:"show",value:function(){this.onWillAppear();var e=this.root.getElementsByTagName("div")[0];e.classList.remove("component-locator-hide"),e.classList.add("component-locator-show"),this.onDidAppear()}},{key:"hideMapBeforeList",value:function(){var e=this.root.getElementsByTagName("div")[0];e.classList.remove("component-locator-map-show"),e.setAttribute("style","overflow: hidden;"),e.classList.add("component-locator-map-hide")}},{key:"showMapAfterList",value:function(){var e=this.root.getElementsByTagName("div")[0];e.classList.remove("component-locator-map-hide"),e.classList.add("component-locator-map-show")}},{key:"onDidRender",value:function(){}},{key:"onDidCreate",value:function(){}},{key:"onDidDisappear",value:function(){}},{key:"onDidAppear",value:function(){}},{key:"onWillAppear",value:function(){}},{key:"onWillDisappear",value:function(){}},{key:"mainDocument",get:function(){return document.currentScript?document.currentScript.ownerDocument:document}},{key:"getRoot",get:function(){return this.root}}]),r}(Fe(HTMLElement));function We(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ze=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seqNumber=1,this.podcastControls=t}var t,n;return t=e,n=[{key:"pushOmny",value:function(e){var t=Math.round(Date.now()/1e3),n=this.podcastControls.audio.currentTime,i={async:!0,url:"https://traffic.omny.fm/api/consumption/events?organizationId=".concat(s.PLAYER.orgId),method:"POST",headers:{"content-type":"application/json"},processData:!1,data:JSON.stringify({Source:"Web",Events:[{OrganizationId:s.PLAYER.orgId,ClipId:this.podcastControls.wrapper.episodeId,SessionId:this.podcastControls.guid,Type:e,Position:n,SeqNumber:this.seqNumber,Timestamp:t}]})};this.seqNumber++,jQuery.ajax(i)}},{key:"pushGoogle",value:function(e){dataLayer.push({event:"uaevent",eventcategory:e.category,eventaction:e.action,eventlabel:this.podcastControls.wrapper.episode.Title})}}],n&&We(t.prototype,n),e}();function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function $e(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(u,e);var t,n,i,r,a,o=(r=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ze(r);if(a){var n=Ze(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $e(this,e)});function u(){return Ye(this,u),o.apply(this,arguments)}return t=u,i=[{key:"name",get:function(){return"PodcastControls"}}],(n=[{key:"onDidCreate",value:function(){this.wrapper=this.parentElement.parentElement,this.audio=document.createElement("AUDIO"),this.firstPlay=!0,this.guid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),this.lastPercent=0,this.podcastAnalytics=new ze(this),this.wrapper.addEventListener("podcast.ready",this.render.bind(this))}},{key:"toggleAudio",value:function(){this.playButton=this.find('button[data-action="play_button"]');var e=this.audio.paused?s.PLAYER.start:s.PLAYER.stop,t=this.firstPlay?s.PLAYER.firstPlay:s.PLAYER.newPlay,n={category:"Module_Podcast",action:this.audio.paused?t:s.PLAYER.pause},i=this.audio.paused?"#pause-btn":"#play-btn",r=this.audio.paused?Drupal.settings.hermes_translations.podcast.pause:Drupal.settings.hermes_translations.podcast.play;this.firstPlay=!this.audio.paused&&this.firstPlay,this.podcastAnalytics.pushOmny(e),this.podcastAnalytics.pushGoogle(n),this.playButton.querySelector("use").setAttribute("xlink:href",i),this.playButton.querySelector("span").innerHTML=r,this.audio.paused?this.audio.play():this.audio.pause()}},{key:"rewindAudio",value:function(){var e={category:"Module_Podcast",action:s.PLAYER.rw};this.audio.currentTime>15?this.audio.currentTime-=15:this.audio.currentTime=0,this.podcastAnalytics.pushGoogle(e)}},{key:"forwardAudio",value:function(){var e={category:"Module_Podcast",action:s.PLAYER.fw};this.audio.currentTime+15<this.audio.duration?this.audio.currentTime+=15:(this.audio.currentTime=this.audio.duration,this.updateTime(),this.audio.load()),this.podcastAnalytics.pushGoogle(e)}},{key:"muteAudio",value:function(){var e={category:"Module_Podcast",action:s.PLAYER.mute};this.muteButton=this.find('button[data-action="mute_button"]'),this.audio.muted=!this.audio.muted;var t=this.audio.muted?"#volume-mute":"#volume-on",n=this.audio.muted?Drupal.settings.hermes_translations.podcast.unmute:Drupal.settings.hermes_translations.podcast.mute;this.audio.muted&&this.podcastAnalytics.pushGoogle(e),this.muteButton.querySelector("use").setAttribute("xlink:href",t),this.audio.muted?this.muteButton.classList.add("muted"):this.muteButton.classList.remove("muted"),this.muteButton.querySelector("span").innerHTML=n}},{key:"updateTime",value:function(){if(this.audio.readyState>0){this.find('span[data-action="current_time"]').innerHTML=N.secondsToHms(this.audio.currentTime),this.find('p[data-action="accessibility_time"]').innerHTML=G().render(Drupal.settings.hermes_translations.podcast.time,{current:N.secondsToHms(this.audio.currentTime),duration:N.secondsToHms(this.audio.duration)});var e=this.audio.duration-this.audio.currentTime;this.find('span[data-action="total_time"]').innerHTML=0===e?N.secondsToHms(e):"- ".concat(N.secondsToHms(e));var t=this.audio.currentTime/this.audio.duration,n=parseInt((100*t).toFixed(2),10),i={category:"Module_Podcast",action:"".concat(n,"%")};[25,50,75,95].includes(n)&&this.lastPercent!==n&&(this.podcastAnalytics.pushOmny(s.PLAYER.position),this.podcastAnalytics.pushGoogle(i),this.lastPercent=n);var r=this.find('input[data-action="progress_bar"]');r.value=100*t,r.setAttribute("aria-valuetext",N.secondsToHms(this.audio.currentTime)),r.style.backgroundImage=["-webkit-gradient(","linear, ","left top, ","right top, ","color-stop(".concat(t,", #3c3c3c),"),"color-stop(".concat(t,", #f6f1eb)"),")"].join(""),0===e?(this.playButton.querySelector("use").setAttribute("xlink:href","#play-btn"),i={category:"Module_Podcast",action:s.PLAYER.stop},this.podcastAnalytics.pushOmny(s.PLAYER.stop),this.podcastAnalytics.pushGoogle(i),r.classList.add("finished")):r.classList.remove("finished")}}},{key:"changeTime",value:function(e){var t=e.target.value/100*this.audio.duration,n=this.find('input[data-action="progress_bar"]');this.audio.pause(),this.firstPlay||(this.playButton.querySelector("use").setAttribute("xlink:href","#play-btn"),this.playButton.querySelector("span").innerHTML=Drupal.settings.hermes_translations.podcast.play),this.audio.currentTime>=this.audio.duration?n.classList.add("finished"):n.classList.remove("finished"),this.audio.currentTime=t}},{key:"getSubscriptionList",value:function(){var e,t="".concat(this.wrapper.podcastId,"_").concat(this.wrapper.episodeId);return Drupal.settings.podcast&&Drupal.settings.podcast[t]&&(e=Drupal.settings.podcast[t]),e}},{key:"openSubscribeDropdown",value:function(){this.subscribeButton=this.find('button[data-action="subscribe_button"]');var e=this.subscribeButton.classList.contains("dropdown-open")?"#subscribe-btn":"#close-btn",t=this.subscribeButton.classList.contains("dropdown-open")?Drupal.settings.hermes_translations.podcast.subscribe:Drupal.settings.hermes_translations.podcast.closeSubscribe;this.subscribeButton.querySelector("use").setAttribute("xlink:href",e),this.subscribeButton.querySelector("span").innerHTML=t,this.subscribeButton.classList.contains("dropdown-open")?(this.subscribeButton.classList.remove("dropdown-open"),this.find("ul").classList.remove("show-dropdown"),this.find("ul").classList.add("hide-dropdown")):(this.subscribeButton.classList.add("dropdown-open"),this.find("ul").classList.remove("hide"),this.find("ul").classList.add("show-dropdown"),this.find("ul").classList.remove("hide-dropdown"),this.podcastAnalytics.pushGoogle({category:"Module_Subscribe_Podcast",action:"Subscribe"}))}},{key:"analyticsSubscribe",value:function(e){var t={category:"Module_Subscribe_Podcast",action:e.srcElement.innerHTML};this.podcastAnalytics.pushGoogle(t)}},{key:"render",value:function(){var e={play:Drupal.settings.hermes_translations.podcast.play,pause:Drupal.settings.hermes_translations.podcast.pause,mute:Drupal.settings.hermes_translations.podcast.mute,unmute:Drupal.settings.hermes_translations.podcast.unmute,forward:Drupal.settings.hermes_translations.podcast.forward,rewind:Drupal.settings.hermes_translations.podcast.rewind,subscribe:Drupal.settings.hermes_translations.podcast.subscribe,closeSubscribe:Drupal.settings.hermes_translations.podcast.closeSubscribe,loading:Drupal.settings.hermes_translations.podcast.loading,newTab:Drupal.settings.hermes_translations.podcast.newTab,duration:"00:00",accessibilityTime:Drupal.settings.hermes_translations.podcast.loading,subscriptionList:null,progressBar:Drupal.settings.hermes_translations.podcast.progressBar};"ready"===this.wrapper.state?(this.audio.src=this.wrapper.episode.AudioUrl,this.audio.addEventListener("timeupdate",this.updateTime.bind(this)),e.duration=N.secondsToHms(this.wrapper.episode.DurationSeconds),e.accessibilityTime=G().render(Drupal.settings.hermes_translations.podcast.time,{current:"0",duration:N.secondsToHms(this.wrapper.episode.DurationSeconds)}),e.subscriptionList=this.getSubscriptionList()):this.audio.src="";var t=Re.podcastrender(u.identRender(),e);this.root.innerHTML=t,this.catchEvent('button[data-action="rewind_button"]',"click",this.rewindAudio.bind(this)),this.catchEvent('button[data-action="play_button"]',"click",this.toggleAudio.bind(this)),this.catchEvent('button[data-action="forward_button"]',"click",this.forwardAudio.bind(this)),this.catchEvent('button[data-action="mute_button"]',"click",this.muteAudio.bind(this)),this.catchEvent('button[data-action="subscribe_button"]',"click",this.openSubscribeDropdown.bind(this)),this.catchEvent("a[data-track-subscription]","click",this.analyticsSubscribe.bind(this)),this.catchEvent('input[data-action="progress_bar"]',"change",this.changeTime.bind(this)),this.catchEvent('input[data-action="progress_bar"]',"input",this.changeTime.bind(this))}}])&&Xe(t.prototype,n),i&&Xe(t,i),u}(Ge);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rt(e,t){return rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rt(e,t)}function at(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}et.register("podcast-controls");var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(o,e);var t,n,i,r,a,s=(r=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=st(r);if(a){var n=st(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return at(this,e)});function o(){return nt(this,o),s.apply(this,arguments)}return t=o,i=[{key:"name",get:function(){return"PodcastImage"}}],(n=[{key:"onDidCreate",value:function(){this.wrapper=this.parentElement.parentElement,this.wrapper.addEventListener("podcast.ready",this.render.bind(this))}},{key:"render",value:function(){var e;e="ready"===this.wrapper.state?this.wrapper.episode.ImageUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAIAAAAxBA+LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAiXSURBVHhe7dUxAQAADMOg+ffbf0ICJrgBQJgIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIAwrYHt21mW2pFvocAAAAASUVORK5CYII=";var t=Re.podcastrender(o.identRender(),{srcImage:e});this.root.innerHTML=t}}])&&it(t.prototype,n),i&&it(t,i),o}(Ge);function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dt(e,t){return dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dt(e,t)}function ht(e,t){return!t||"object"!==ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}ot.register("podcast-image");var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(o,e);var t,n,i,r,a,s=(r=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pt(r);if(a){var n=pt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ht(this,e)});function o(){return lt(this,o),s.apply(this,arguments)}return t=o,i=[{key:"name",get:function(){return"PodcastDescription"}}],(n=[{key:"onDidCreate",value:function(){this.wrapper=this.parentElement.parentElement,this.wrapper.addEventListener("podcast.ready",this.render.bind(this))}},{key:"render",value:function(){var e,t;"ready"===this.wrapper.state?(e=this.wrapper.episode.Title,t=this.wrapper.episode.Description):(e=Drupal.settings.hermes_translations.podcast.loading,t=Drupal.settings.hermes_translations.podcast.loading);var n=Re.podcastrender(o.identRender(),{title:e,description:t});this.root.innerHTML=n}}])&&ct(t.prototype,n),i&&ct(t,i),o}(Ge);function mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}ft.register("podcast-description");var gt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"ajaxCall",value:function(e){var t=e.method||"GET",n=e.async||!0,i=new XMLHttpRequest;if(i.onreadystatechange=function(){4===i.readyState&&(200===i.status||201===i.status||205===i.status?e.success(i):e.fail(i))},i.open(t,e.url,n),e.headers&&e.headers.length>0)for(var r=0;r<e.headers.length;r++){var a=e.headers[r].name,s=e.headers[r].value;i.setRequestHeader(a,s)}return i.send(),i.responseText}},{key:"get",value:function(t){var n=t;return n.async=!1,e.ajaxCall(n)}}],null&&mt(t.prototype,null),n&&mt(t,n),e}();function yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var vt=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.JSON=[]}var t,n;return t=e,(n=[{key:"getJSON",value:function(){return this.JSON}},{key:"getEpisode",value:function(e,t,n){var i="https://omny.fm/api/orgs/".concat(s.PLAYER.orgId,"/clips/").concat(t);gt.get({url:i,headers:[{name:"Content-Type",value:"application/json"}],success:function(e){var t=JSON.parse(e.responseText);n&&n(t)},fail:function(e){}})}}])&&yt(t.prototype,n),e}());function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function St(e,t){return St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},St(e,t)}function wt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}var kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(o,e);var t,n,i,r,a,s=(r=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Et(r);if(a){var n=Et(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wt(this,e)});function o(){return bt(this,o),s.apply(this,arguments)}return t=o,i=[{key:"name",get:function(){return"PodcastWrapper"}}],(n=[{key:"onDidCreate",value:function(){this.state="loading",this.podcastId=this.getAttribute("podcast-id"),this.episodeId=this.getAttribute("episode-id"),this.isInViewport()||(this.bindedEvent=this.isInViewport.bind(this),document.addEventListener("scroll",this.bindedEvent))}},{key:"isInViewport",value:function(){var e=document.querySelector("podcast-wrapper"),t=N.isInViewport(e);return t&&(vt.getEpisode(this.podcastId,this.episodeId,this.responseJSON.bind(this)),document.removeEventListener("scroll",this.bindedEvent)),t}},{key:"responseJSON",value:function(e){this.episode=e;var t=new Event("podcast.ready");this.state="ready",this.dispatchEvent(t)}},{key:"render",value:function(){var e=Re.podcastrender(o.identRender(),{});this.root.innerHTML=e}}])&&Tt(t.prototype,n),i&&Tt(t,i),o}(Ge);function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function At(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}kt.register("podcast-wrapper");var Pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.animation="slide-animation",this._scrollListener=this._displayAnimation.bind(this)}var t,n;return t=e,n=[{key:"init",value:function(){var e=this;document.querySelectorAll("[data-merch-campaignid]").length?jQuery(document).ajaxComplete((function(t,n,i){-1!==i.url.search("campaign")&&e._load()})):this._load()}},{key:"_load",value:function(){var e;this._$blocksToAnimate=function(e){if(Array.isArray(e))return Ct(e)}(e=document.getElementsByClassName("has-animation"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._displayAnimation(),document.addEventListener("scroll",this._scrollListener)}},{key:"_displayAnimation",value:function(){for(var e=0;e<this._$blocksToAnimate.length;){var t=this._$blocksToAnimate[e];N.isInViewport(t,20)?(t.classList.add(this.animation),this._$blocksToAnimate.splice(e,1)):e++}0===this._$blocksToAnimate.length&&document.removeEventListener("scroll",this._scrollListener)}}],n&&At(t.prototype,n),e}();function It(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Dt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"pushEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;dataLayer.push({event:"uaevent",eventcategory:"Search",eventaction:"Search edito",eventlabel:e})}},{key:"comingFromSearch",value:function(){var e=window.location.search,t=window.location.origin,n=document.referrer?new URL(document.referrer):null,i=n?n.origin:null,r=null;e&&(r="?s="===e.substring(0,3)),n&&e&&r&&t===i&&this.pushEvent(decodeURI(e.slice(3)))}}],null&&It(t.prototype,null),n&&It(t,n),e}();window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||r(),APP.pubsub.subscribe("app.start",(function(){new Oe,new a;var e=new Q({elements:"[data-video]"}),t=new Pt;e.init(),e.catchMenuContentVideoJS(),t.init(),window.updateSelectedProductPosition=function(e){var t=e.attributes.getNamedItem("data-product").value.replace(" ","v"),n=window.location.href,i=new f(n);i.addFragmentParam(s.SCROLL_PARAM,t,!0),window.history.pushState(null,"",i.build())},requestAnimationFrame((function(){jQuery(".product-item-loading").removeClass("product-item-loading")})),jQuery(".block-edito-block-category-highlight .field-collection-container").removeClass("clearfix"),jt(),function(){jQuery(".js-more-looks").on("click",Bt.bind(this)),setTimeout((function(){jQuery(".jwplayer").addClass("jw-skin-freecaster_v7"),jQuery(".jwplayer").removeClass("jw-skin-hermes")}),1e3),L()||(Ut=75),Mt.on("click",(function(e){!function(e){e.preventDefault(),xt.animate({scrollTop:0},2e3),jQuery("#content a, #content button").first().focus()}(e)})),Rt.on("click",(function(e){!function(e){e.preventDefault(),xt.animate({scrollTop:Math.round(Nt.offset().top-Ut)},2e3,(function(){var e;e=Math.round(Nt.offset().top-Ut),Ot.scrollTop()!==e&&xt.animate({scrollTop:e},500)}))}(e)})),window.addEventListener("scroll",(function(){Mt.removeClass("show"),Rt.removeClass("show"),window.clearTimeout(Lt),Lt=setTimeout((function(){jt()}),100)}))}(),Dt.comingFromSearch()}));var Lt,Ot=jQuery(window),xt=jQuery("html, body"),Mt=jQuery(".scroll-nav-up"),Rt=jQuery(".scroll-nav-down"),Nt=jQuery("#page-footer"),Ut=60;function Bt(e){e.preventDefault(),jQuery(e.currentTarget).parent().find(".editorial-gallery").toggleClass("editorial-gallery-more")}function jt(){var e=Math.round(Nt.offset().top-Ut)-5,t=Math.round(Nt.offset().top+Nt.outerHeight()),n=Ot.scrollTop(),i=Ot.scrollTop()+Ot.outerHeight();n>0&&Mt.addClass("show"),n<e&&i!==t&&Rt.addClass("show")}},6831:function(e,t){!function(n,i){var r={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},a=Array.prototype.map,s=Array.isArray,o=Object.prototype.toString;function u(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function l(e){return s?s(e):"[object Array]"===o.call(e)}function c(e){return e&&"[object Object]"===o.call(e)}function d(e,t){var n;for(n in e=e||{},t=t||{})t.hasOwnProperty(n)&&null==e[n]&&(e[n]=t[n]);return e}function h(e,t,n){var i,r,s=[];if(!e)return s;if(a&&e.map===a)return e.map(t,n);for(i=0,r=e.length;i<r;i++)s[i]=t.call(n,e[i],i,e);return s}function p(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function f(e){var t=r.settings.currency.format;return"function"==typeof e&&(e=e()),u(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:u(t)?r.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}var m=r.unformat=r.parse=function(e,t){if(l(e))return h(e,(function(e){return m(e,t)}));if("number"==typeof(e=e||0))return e;t=t||r.settings.number.decimal;var n=new RegExp("[^0-9-"+t+"]",["g"]),i=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(n,"").replace(t,"."));return isNaN(i)?0:i},g=r.toFixed=function(e,t){t=p(t,r.settings.number.precision);var n=Math.pow(10,t);return(Math.round(r.unformat(e)*n)/n).toFixed(t)},y=r.formatNumber=r.format=function(e,t,n,i){if(l(e))return h(e,(function(e){return y(e,t,n,i)}));e=m(e);var a=d(c(t)?t:{precision:t,thousand:n,decimal:i},r.settings.number),s=p(a.precision),o=e<0?"-":"",u=parseInt(g(Math.abs(e||0),s),10)+"",f=u.length>3?u.length%3:0;return o+(f?u.substr(0,f)+a.thousand:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a.thousand)+(s?a.decimal+g(Math.abs(e),s).split(".")[1]:"")},v=r.formatMoney=function(e,t,n,i,a,s){if(l(e))return h(e,(function(e){return v(e,t,n,i,a,s)}));e=m(e);var o=d(c(t)?t:{symbol:t,precision:n,thousand:i,decimal:a,format:s},r.settings.currency),u=f(o.format);return(e>0?u.pos:e<0?u.neg:u.zero).replace("%s",o.symbol).replace("%v",y(Math.abs(e),p(o.precision),o.thousand,o.decimal))};r.formatColumn=function(e,t,n,i,a,s){if(!e)return[];var o=d(c(t)?t:{symbol:t,precision:n,thousand:i,decimal:a,format:s},r.settings.currency),g=f(o.format),v=g.pos.indexOf("%s")<g.pos.indexOf("%v"),_=0,b=h(e,(function(e,t){if(l(e))return r.formatColumn(e,o);var n=((e=m(e))>0?g.pos:e<0?g.neg:g.zero).replace("%s",o.symbol).replace("%v",y(Math.abs(e),p(o.precision),o.thousand,o.decimal));return n.length>_&&(_=n.length),n}));return h(b,(function(e,t){return u(e)&&e.length<_?v?e.replace(o.symbol,o.symbol+new Array(_-e.length+1).join(" ")):new Array(_-e.length+1).join(" ")+e:e}))},e.exports&&(t=e.exports=r),t.accounting=r}()},2816:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(t,n){"use strict";function i(){var e=C.splice(0,C.length);for($e=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,i=e.length;n<i;n++)m(e[n],t)}function a(e){return function(t){Ue(t)&&(m(t,e),se.length&&r(t.querySelectorAll(se),e))}}function s(e){var t=Qe.call(e,"is"),n=e.nodeName.toUpperCase(),i=ue.call(re,t?te+t.toUpperCase():ee+n);return t&&-1<i&&!o(n,t)?-1:i}function o(e,t){return-1<se.indexOf(e+'[is="'+t+'"]')}function u(e){var t=e.currentTarget,n=e.attrChange,i=e.attrName,r=e.target,a=e[Y]||2,s=e[X]||3;!rt||r&&r!==t||!t[Q]||"style"===i||e.prevValue===e.newValue&&(""!==e.newValue||n!==a&&n!==s)||t[Q](i,n===a?null:e.prevValue,n===s?null:e.newValue)}function l(e){var t=a(e);return function(e){C.push(t,e.target),$e&&clearTimeout($e),$e=setTimeout(i,1)}}function c(e){it&&(it=!1,e.currentTarget.removeEventListener($,c)),se.length&&r((e.target||w).querySelectorAll(se),e.detail===H?H:j),Re&&function(){for(var e,t=0,n=Be.length;t<n;t++)e=Be[t],oe.contains(e)||(n--,Be.splice(t--,1),m(e,H))}()}function d(e,t){var n=this;We.call(n,e,t),A.call(n,{target:n})}function h(e,t,n){var i=t.apply(e,n),r=s(i);return-1<r&&x(i,ae[r]),n.pop()&&se.length&&function(e){for(var t,n=0,i=e.length;n<i;n++)t=e[n],x(t,ae[s(t)])}(i.querySelectorAll(se)),i}function p(e,t){Le(e,t),D?D.observe(e,Xe):(nt&&(e.setAttribute=d,e[U]=I(e),e[B](Z,A)),e[B](J,u)),e[z]&&rt&&(e.created=!0,e[z](),e.created=!1)}function f(e){throw new Error("A "+e+" type is already registered")}function m(e,t){var n,i,r=s(e);-1<r&&!He.call(e,"TEMPLATE")&&(O(e,ae[r]),r=0,t!==j||e[j]?t!==H||e[H]||(e[j]=!1,e[H]=!0,i="disconnected",r=1):(e[H]=!1,e[j]=!0,i="connected",r=1,Re&&ue.call(Be,e)<0&&Be.push(e)),r&&(n=e[t+F]||e[i+F])&&n.call(e))}function g(){}function y(e,t,n){var i=n&&n[V]||"",r=t.prototype,a=De(r),s=t.observedAttributes||pe,o={prototype:a};Ne(a,z,{value:function(){if(ke)ke=!1;else if(!this[_e]){this[_e]=!0,new t(this),r[z]&&r[z].call(this);var e=Ce[Pe.get(t)];(!Te||e.create.length>1)&&b(this)}}}),Ne(a,Q,{value:function(e){-1<ue.call(s,e)&&r[Q]&&r[Q].apply(this,arguments)}}),r[G]&&Ne(a,q,{value:r[G]}),r[W]&&Ne(a,K,{value:r[W]}),i&&(o[V]=i),e=e.toUpperCase(),Ce[e]={constructor:t,create:i?[i,Ie(e)]:[e]},Pe.set(t,e),w[R](e.toLowerCase(),o),T(e),Ae[e].r()}function v(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function _(e){return"string"==typeof e?e:e&&e.is||""}function b(e){for(var t,n=e[Q],i=n?e.attributes:pe,r=i.length;r--;)t=i[r],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function T(e){return(e=e.toUpperCase())in Ae||(Ae[e]={},Ae[e].p=new Ee((function(t){Ae[e].r=t}))),Ae[e].p}function S(){be&&delete t.customElements,he(t,"customElements",{configurable:!0,value:new g}),he(t,"CustomElementRegistry",{configurable:!0,value:g});for(var e=k.get(/^HTML[A-Z]*[a-z]/),n=e.length;n--;function(e){var n=t[e];if(n){t[e]=function(e){var t,i;return e||(e=this),e[_e]||(ke=!0,t=Ce[Pe.get(e.constructor)],(e=(i=Te&&1===t.create.length)?Reflect.construct(n,pe,t.constructor):w.createElement.apply(w,t.create))[_e]=!0,ke=!1,i||b(e)),e},t[e].prototype=n.prototype;try{n.prototype.constructor=t[e]}catch(i){he(n,_e,{value:t[e]})}}}(e[n]));w.createElement=function(e,t){var n=_(t);return n?Ye.call(this,e,Ie(n)):Ye.call(this,e)},Ze||(tt=!0,w[R](""))}var w=t.document,E=t.Object,k=function(e){var t,n,i,r,a=/^[A-Z]+[a-z]/,s=function(e,t){(t=t.toLowerCase())in o||(o[e]=(o[e]||[]).concat(t),o[t]=o[t.toUpperCase()]=e)},o=(E.create||E)(null),u={};for(n in e)for(r in e[n])for(i=e[n][r],o[r]=i,t=0;t<i.length;t++)o[i[t].toLowerCase()]=o[i[t].toUpperCase()]=r;return u.get=function(e){return"string"==typeof e?o[e]||(a.test(e)?[]:""):function(e){var t,n=[];for(t in o)e.test(t)&&n.push(t);return n}(e)},u.set=function(e,t){return a.test(e)?s(e,t):s(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=e(n)&&(n={type:n||"auto"});var C,A,P,I,D,L,O,x,M,R="registerElement",N=1e5*t.Math.random()>>0,U="__"+R+N,B="addEventListener",j="attached",F="Callback",H="detached",V="extends",Q="attributeChanged"+F,q=j+F,G="connected"+F,W="disconnected"+F,z="created"+F,K=H+F,Y="ADDITION",X="REMOVAL",J="DOMAttrModified",$="DOMContentLoaded",Z="DOMSubtreeModified",ee="<",te="=",ne=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ie=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],re=[],ae=[],se="",oe=w.documentElement,ue=re.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},le=E.prototype,ce=le.hasOwnProperty,de=le.isPrototypeOf,he=E.defineProperty,pe=[],fe=E.getOwnPropertyDescriptor,me=E.getOwnPropertyNames,ge=E.getPrototypeOf,ye=E.setPrototypeOf,ve=!!E.__proto__,_e="__dreCEv1",be=t.customElements,Te=!/^force/.test(n.type)&&!!(be&&be.define&&be.get&&be.whenDefined),Se=E.create||E,we=t.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ue.call(t,e)]},set:function(i,r){(e=ue.call(t,i))<0?n[t.push(i)-1]=r:n[e]=r}}},Ee=t.Promise||function(e){function t(e){for(i=!0;n.length;)n.shift()(e)}var n=[],i=!1,r={catch:function(){return r},then:function(e){return n.push(e),i&&setTimeout(t,1),r}};return e(t),r},ke=!1,Ce=Se(null),Ae=Se(null),Pe=new we,Ie=function(e){return e.toLowerCase()},De=E.create||function e(t){return t?(e.prototype=t,new e):this},Le=ye||(ve?function(e,t){return e.__proto__=t,e}:me&&fe?function(){function e(e,t){for(var n,i=me(t),r=0,a=i.length;r<a;r++)n=i[r],ce.call(e,n)||he(e,n,fe(t,n))}return function(t,n){do{e(t,n)}while((n=ge(n))&&!de.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Oe=t.MutationObserver||t.WebKitMutationObserver,xe=t.HTMLAnchorElement,Me=(t.HTMLElement||t.Element||t.Node).prototype,Re=!de.call(Me,oe),Ne=Re?function(e,t,n){return e[t]=n.value,e}:he,Ue=Re?function(e){return 1===e.nodeType}:function(e){return de.call(Me,e)},Be=Re&&[],je=Me.attachShadow,Fe=Me.cloneNode,He=Me.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},Ve=Me.dispatchEvent,Qe=Me.getAttribute,qe=Me.hasAttribute,Ge=Me.removeAttribute,We=Me.setAttribute,ze=w.createElement,Ke=w.importNode,Ye=ze,Xe=Oe&&{attributes:!0,characterData:!0,attributeOldValue:!0},Je=Oe||function(e){nt=!1,oe.removeEventListener(J,Je)},$e=0,Ze=R in w&&!/^force-all/.test(n.type),et=!0,tt=!1,nt=!0,it=!0,rt=!0;if(Oe&&((M=w.createElement("div")).innerHTML="<div><div></div></div>",new Oe((function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(M=fe(Me,"innerHTML"))&&M.set;n&&he(Me,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),M=null})).observe(M,{childList:!0,subtree:!0}),M.innerHTML=""),Ze||(ye||ve?(O=function(e,t){de.call(t,e)||p(e,t)},x=p):(O=function(e,t){e[U]||(e[U]=E(!0),p(e,t))},x=O),Re?(nt=!1,function(){var e=fe(Me,B),t=e.value,n=function(e){var t=new CustomEvent(J,{bubbles:!0});t.attrName=e,t.prevValue=Qe.call(this,e),t.newValue=null,t[X]=t.attrChange=2,Ge.call(this,e),Ve.call(this,t)},i=function(e,t){var n=qe.call(this,e),i=n&&Qe.call(this,e),r=new CustomEvent(J,{bubbles:!0});We.call(this,e,t),r.attrName=e,r.prevValue=n?i:null,r.newValue=t,n?r.MODIFICATION=r.attrChange=1:r[Y]=r.attrChange=0,Ve.call(this,r)},r=function(e){var t,n=e.currentTarget,i=n[U],r=e.propertyName;i.hasOwnProperty(r)&&(i=i[r],(t=new CustomEvent(J,{bubbles:!0})).attrName=i.name,t.prevValue=i.value||null,t.newValue=i.value=n[r]||null,null==t.prevValue?t[Y]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,Ve.call(n,t))};e.value=function(e,a,s){e===J&&this[Q]&&this.setAttribute!==i&&(this[U]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=n,t.call(this,"propertychange",r)),t.call(this,e,a,s)},he(Me,B,e)}()):Oe||(oe[B](J,Je),oe.setAttribute(U,1),oe.removeAttribute(U),nt&&(A=function(e){var t,n,i,r=this;if(r===e.target){for(i in t=r[U],r[U]=n=I(r),n){if(!(i in t))return P(0,r,i,t[i],n[i],Y);if(n[i]!==t[i])return P(1,r,i,t[i],n[i],"MODIFICATION")}for(i in t)if(!(i in n))return P(2,r,i,t[i],n[i],X)}},P=function(e,t,n,i,r,a){var s={attrChange:e,currentTarget:t,attrName:n,prevValue:i,newValue:r};s[a]=e,u(s)},I=function(e){for(var t,n,i={},r=e.attributes,a=0,s=r.length;a<s;a++)"setAttribute"!==(n=(t=r[a]).name)&&(i[n]=t.value);return i})),w[R]=function(e,t){if(n=e.toUpperCase(),et&&(et=!1,Oe?(D=function(e,t){function n(e,t){for(var n=0,i=e.length;n<i;t(e[n++]));}return new Oe((function(i){for(var r,a,s,o=0,u=i.length;o<u;o++)"childList"===(r=i[o]).type?(n(r.addedNodes,e),n(r.removedNodes,t)):(a=r.target,rt&&a[Q]&&"style"!==r.attributeName&&(s=Qe.call(a,r.attributeName))!==r.oldValue&&a[Q](r.attributeName,r.oldValue,s))}))}(a(j),a(H)),L=function(e){return D.observe(e,{childList:!0,subtree:!0}),e},L(w),je&&(Me.attachShadow=function(){return L(je.apply(this,arguments))})):(C=[],w[B]("DOMNodeInserted",l(j)),w[B]("DOMNodeRemoved",l(H))),w[B]($,c),w[B]("readystatechange",c),w.importNode=function(e,t){switch(e.nodeType){case 1:return h(w,Ke,[e,!!t]);case 11:for(var n=w.createDocumentFragment(),i=e.childNodes,r=i.length,a=0;a<r;a++)n.appendChild(w.importNode(i[a],!!t));return n;default:return Fe.call(e,!!t)}},Me.cloneNode=function(e){return h(this,Fe,[!!e])}),tt)return tt=!1;if(-2<ue.call(re,te+n)+ue.call(re,ee+n)&&f(e),!ne.test(n)||-1<ue.call(ie,n))throw new Error("The type "+e+" is invalid");var n,i,s=function(){return u?w.createElement(d,n):w.createElement(d)},o=t||le,u=ce.call(o,V),d=u?t[V].toUpperCase():n;return u&&-1<ue.call(re,ee+d)&&f(d),i=re.push((u?te:ee)+n)-1,se=se.concat(se.length?",":"",u?d+'[is="'+e.toLowerCase()+'"]':d),s.prototype=ae[i]=ce.call(o,"prototype")?o.prototype:De(Me),se.length&&r(w.querySelectorAll(se),j),s},w.createElement=Ye=function(e,t){var n=_(t),i=n?ze.call(w,e,Ie(n)):ze.call(w,e),r=""+e,a=ue.call(re,(n?te:ee)+(n||r).toUpperCase()),s=-1<a;return n&&(i.setAttribute("is",n=n.toLowerCase()),s&&(s=o(r.toUpperCase(),n))),rt=!w.createElement.innerHTMLHelper,s&&x(i,ae[a]),i}),addEventListener("beforeunload",(function(){delete w.createElement,delete w.importNode,delete w[R]}),!1),g.prototype={constructor:g,define:Te?function(e,t,n){if(n)y(e,t,n);else{var i=e.toUpperCase();Ce[i]={constructor:t,create:[i]},Pe.set(t,i),be.define(e,t)}}:y,get:Te?function(e){return be.get(e)||v(e)}:v,whenDefined:Te?function(e){return Ee.race([be.whenDefined(e),T(e)])}:T},!be||/^force/.test(n.type))S();else if(!n.noBuiltIn)try{!function(e,n,i){var r=new RegExp("^<a\\s+is=('|\")"+i+"\\1></a>$");if(n[V]="a",(e.prototype=De(xe.prototype)).constructor=e,t.customElements.define(i,e,n),!r.test(w.createElement("a",{is:i}).outerHTML)||!r.test((new e).outerHTML))throw n}((function e(){return Reflect.construct(xe,[],e)}),{},"document-register-element-a"+N)}catch(e){S()}if(!n.noBuiltIn)try{if(ze.call(w,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){Ie=function(e){return{is:e.toLowerCase()}}}}(window)},3998:function(e){e.exports=function(e,t,n){var i,r;function a(){var a=arguments,s=this;function o(){n||(r=e.apply(s,a)),i=null}return i?clearTimeout(i):n&&(r=e.apply(s,a)),i=setTimeout(o,t),r}return a.cancel=function(){clearTimeout(i)},a}},4277:function(e,t){var n,i,r,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a=function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"===s(e)&&t in e}var o=RegExp.prototype.test,u=/\S/;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},c=/\s*/,d=/\s+/,h=/\s*=/,p=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.cache={}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},m.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var r,s,o=this,u=!1;o;){if(e.indexOf(".")>0)for(t=o.view,r=e.split("."),s=0;null!=t&&s<r.length;)s===r.length-1&&(u=a(t,r[s])),t=t[r[s++]];else t=o.view[e],u=a(o.view,e);if(u)break;o=o.parent}n[e]=t}return i(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){this.cache={}},y.prototype.parse=function(t,i){var a=this.cache,s=a[t];return null==s&&(s=a[t]=function(t,i){if(!t)return[];var a,s,l,g,y=[],v=[],_=[],b=!1,T=!1;function S(){if(b&&!T)for(;_.length;)delete v[_.pop()];else _=[];b=!1,T=!1}function w(e){if("string"==typeof e&&(e=e.split(d,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(r(e[0])+"\\s*"),s=new RegExp("\\s*"+r(e[1])),l=new RegExp("\\s*"+r("}"+e[1]))}w(i||e.tags);for(var E,k,C,A,P,I,D=new m(t);!D.eos();){if(E=D.pos,C=D.scanUntil(a))for(var L=0,O=C.length;L<O;++L)g=A=C.charAt(L),function(e,t){return o.call(e,t)}(u,g)?T=!0:_.push(v.length),v.push(["text",A,E,E+1]),E+=1,"\n"===A&&S();if(!D.scan(a))break;if(b=!0,k=D.scan(f)||"name",D.scan(c),"="===k?(C=D.scanUntil(h),D.scan(h),D.scanUntil(s)):"{"===k?(C=D.scanUntil(l),D.scan(p),D.scanUntil(s),k="&"):C=D.scanUntil(s),!D.scan(s))throw new Error("Unclosed tag at "+D.pos);if(P=[k,C,E,D.pos],v.push(P),"#"===k||"^"===k)y.push(P);else if("/"===k){if(!(I=y.pop()))throw new Error('Unopened section "'+C+'" at '+E);if(I[1]!==C)throw new Error('Unclosed section "'+I[1]+'" at '+E)}else"name"===k||"{"===k||"&"===k?T=!0:"="===k&&w(C)}if(I=y.pop())throw new Error('Unclosed section "'+I[1]+'" at '+D.pos);return function(e){for(var t,n=[],i=n,r=[],a=0,s=e.length;a<s;++a)switch((t=e[a])[0]){case"#":case"^":i.push(t),r.push(t),i=t[4]=[];break;case"/":r.pop()[5]=t[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],r=0,a=e.length;r<a;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(v))}(t,i)),s},y.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof g?t:new g(t);return this.renderTokens(i,r,n,e)},y.prototype.renderTokens=function(e,t,n,i){for(var r,a,s,o="",u=0,l=e.length;u<l;++u)s=void 0,"#"===(a=(r=e[u])[0])?s=this.renderSection(r,t,n,i):"^"===a?s=this.renderInverted(r,t,n,i):">"===a?s=this.renderPartial(r,t,n,i):"&"===a?s=this.unescapedValue(r,t):"name"===a?s=this.escapedValue(r,t):"text"===a&&(s=this.rawValue(r)),void 0!==s&&(o+=s);return o},y.prototype.renderSection=function(e,t,r,a){var o=this,u="",l=t.lookup(e[1]);if(l){if(n(l))for(var c=0,d=l.length;c<d;++c)u+=this.renderTokens(e[4],t.push(l[c]),r,a);else if("object"===s(l)||"string"==typeof l||"number"==typeof l)u+=this.renderTokens(e[4],t.push(l),r,a);else if(i(l)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,a.slice(e[3],e[5]),(function(e){return o.render(e,t,r)})))&&(u+=l)}else u+=this.renderTokens(e[4],t,r,a);return u}},y.prototype.renderInverted=function(e,t,i,r){var a=t.lookup(e[1]);if(!a||n(a)&&0===a.length)return this.renderTokens(e[4],t,i,r)},y.prototype.renderPartial=function(e,t,n){if(n){var r=i(n)?n(e[1]):n[e[1]];return null!=r?this.renderTokens(this.parse(r),t,n,r):void 0}},y.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},y.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},y.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.1.3",e.tags=["{{","}}"];var v=new y;e.clearCache=function(){return v.clearCache()},e.parse=function(e,t){return v.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(r=e)?"array":s(r))+'" was given as the first argument for mustache#render(template, view, partials)');var r;return v.render(e,t,i)},e.to_html=function(t,n,r,a){var s=e.render(t,n,r);if(!i(a))return s;a(s)},e.escape=function(e){return String(e).replace(/[&<>"'\/]/g,(function(e){return l[e]}))},e.Scanner=m,e.Context=g,e.Writer=y},"object"===s(t)&&t&&"string"!=typeof t.nodeName?a(t):(i=[t],void 0===(r="function"==typeof(n=a)?n.apply(t,i):n)||(e.exports=r))},8096:function(e,t,n){var i;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}e=n.nmd(e),function(a,s){"use strict";var o={};a.PubSub=o,function(e){var t={},n=-1;function i(e,t,n){try{e(t,n)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function a(e,t,n){e(t,n)}function s(e,n,r,s){var o,u=t[n],l=s?a:i;if(Object.prototype.hasOwnProperty.call(t,n))for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&l(u[o],e,r)}function o(e){var n=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,n)&&function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}(t[n]))}function u(e,t,n,i){var a=function(e,t,n){return function(){var i=String(e),r=i.lastIndexOf(".");for(s(e,e,t,n);-1!==r;)r=(i=i.substr(0,r)).lastIndexOf("."),s(e,i,t,n);s(e,"*",t,n)}}(e="symbol"===r(e)?e.toString():e,t,i);return!!function(e){for(var t=String(e),n=o(t)||o("*"),i=t.lastIndexOf(".");!n&&-1!==i;)i=(t=t.substr(0,i)).lastIndexOf("."),n=o(t);return n}(e)&&(!0===n?a():setTimeout(a,0),!0)}e.publish=function(t,n){return u(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return u(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,i){if("function"!=typeof i)return!1;e="symbol"===r(e)?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var a="uid_"+String(++n);return t[e][a]=i,a},e.subscribeAll=function(t){return e.subscribe("*",t)},e.subscribeOnce=function(t,n){var i=e.subscribe(t,(function(){e.unsubscribe(i),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&delete t[n]},e.countSubscriptions=function(e){var n,i,r=0;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)){for(i in t[n])r++;break}return r},e.getSubscriptions=function(e){var n,i=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&i.push(n);return i},e.unsubscribe=function(n){var i,r,a,s="string"==typeof n&&(Object.prototype.hasOwnProperty.call(t,n)||function(e){var n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e))return!0;return!1}(n)),o=!s&&"string"==typeof n,u="function"==typeof n,l=!1;if(!s){for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(r=t[i],o&&r[n]){delete r[n],l=n;break}if(u)for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&r[a]===n&&(delete r[a],l=!0)}return l}e.clearSubscriptions(n)}}(o),"object"===r(t)?(void 0!==e&&e.exports&&(t=e.exports=o),t.PubSub=o,e.exports=t=o):void 0===(i=function(){return o}.call(t,n,t,e))||(e.exports=i)}("object"===("undefined"==typeof window?"undefined":r(window))&&window||this)},7813:function(e,t,n){var i,r,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a=function(){"use strict";for(var e,t="7.20.2",i={},r=function(e,t){return i[e]=i[e]||[],t&&(i[e]=i[e].concat(t)),i[e]},a=function(e,t){return!((t=r(e).indexOf(t))<=-1||(i[e]=i[e].slice(),i[e].splice(t,1),0))},o={prefixed:!0},u=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],l=u[0],c=0;c<u.length;c++)if(u[c][1]in document){e=u[c];break}if(e){for(var d=0;d<e.length;d++)o[l[d]]=e[d];o.prefixed=e[0]!==l[0]}var h=[],p=function e(t){function n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r("log",i,t)}var i="info",r=function(e,t){return function(n,i,r){var a,s=t.levels[i];i=new RegExp("^("+s+")$"),"log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),h&&(h.push([].concat(r)),a=h.length-1e3,h.splice(0,0<a?a:0)),!window.console||(a=(a=window.console[n])||"debug"!==n?a:window.console.info||window.console.log)&&s&&i.test(n)&&a[Array.isArray(r)?"apply":"call"](window.console,r)}}(t,n);return n.createLogger=function(n){return e(t+": "+n)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(n.history=function(){return h?[].concat(h):[]}).filter=function(e){return(h||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},n.history.clear=function(){h&&(h.length=0)},n.history.disable=function(){null!==h&&(h.length=0,h=null)},n.history.enable=function(){null===h&&(h=[])},n.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("error",i,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("warn",i,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("debug",i,t)},n}("VIDEOJS"),f=p.createLogger,m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function g(e,t){return e(t={exports:{}},t.exports),t.exports}var y=g((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}e.exports=t})),v=Object.prototype.toString,_=function(e){return S(e)?Object.keys(e):[]};function b(e,t){_(e).forEach((function(n){return t(e[n],n)}))}function T(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign?y.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&b(t,(function(t,n){e[n]=t}))})),e)}function S(e){return!!e&&"object"==s(e)}function w(e){return S(e)&&"[object Object]"===v.call(e)&&e.constructor===Object}function E(e,t){if(!e||!t)return"";if("function"!=typeof window.getComputedStyle)return"";var n;try{n=window.getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}var k=window.navigator&&window.navigator.userAgent||"",C=(Rt=/AppleWebKit\/([\d.]+)/i.exec(k))?parseFloat(Rt.pop()):null,A=/iPod/i.test(k),P=(Nt=k.match(/OS (\d+)_/i))&&Nt[1]?Nt[1]:null,I=/Android/i.test(k),D=function(){var e=k.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),L=I&&D<5&&C<537,O=/Firefox/i.test(k),x=/Edg/i.test(k),M=!x&&(/Chrome/i.test(k)||/CriOS/i.test(k)),R=(Vt=k.match(/(Chrome|CriOS)\/(\d+)/))&&Vt[2]?parseFloat(Vt[2]):null,N=nn=!(nn=(nn=/MSIE\s(\d+)\.\d/.exec(k))&&parseFloat(nn[1]))&&/Trident\/7.0/i.test(k)&&/rv:11.0/.test(k)?11:nn,U=/Safari/i.test(k)&&!M&&!I&&!x,B=/Windows/i.test(k),j=Boolean(z()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),F=/iPad/i.test(k)||U&&j&&!/iPhone/i.test(k),H=/iPhone/i.test(k)&&!F,V=H||F||A,Q=(U||V)&&!M,q=Object.freeze({__proto__:null,IS_IPOD:A,IOS_VERSION:P,IS_ANDROID:I,ANDROID_VERSION:D,IS_NATIVE_ANDROID:L,IS_FIREFOX:O,IS_EDGE:x,IS_CHROME:M,CHROME_VERSION:R,IE_VERSION:N,IS_SAFARI:U,IS_WINDOWS:B,TOUCH_ENABLED:j,IS_IPAD:F,IS_IPHONE:H,IS_IOS:V,IS_ANY_SAFARI:Q});function G(e){return"string"==typeof e&&Boolean(e.trim())}function W(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function z(){return document===window.document}function K(e){return S(e)&&1===e.nodeType}function Y(){try{return window.parent!==window.self}catch(e){return!0}}function X(e){return function(t,n){return G(t)?(n=K(n=G(n)?document.querySelector(n):n)?n:document)[e]&&n[e](t):document[e](null)}}function J(e,t,n,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var r=document.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(p.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),r.setAttribute(e,n)):"textContent"===e?$(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&ye(r,i),r}function $(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Z(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function ee(e,t){return W(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function te(e,t){return e.classList?e.classList.add(t):ee(e,t)||(e.className=(e.className+" "+t).trim()),e}function ne(e,t){return e?(e.classList?e.classList.remove(t):(W(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(p.warn("removeClass was called with an element that doesn't exist"),null)}function ie(e,t,n){var i=ee(e,t);if((n="boolean"!=typeof(n="function"==typeof n?n(e,t):n)?!i:n)!==i)return(n?te:ne)(e,t),e}function re(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var i=t[n];null==i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function ae(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,i=n.length-1;0<=i;i--){var r=n[i].name,a=n[i].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function se(e,t){return e.getAttribute(t)}function oe(e,t,n){e.setAttribute(t,n)}function ue(e,t){e.removeAttribute(t)}function le(){document.body.focus(),document.onselectstart=function(){return!1}}function ce(){document.onselectstart=function(){return!0}}function de(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(E(e,"height"))),n.width||(n.width=parseFloat(E(e,"width"))),n}}function he(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;e.offsetParent&&e!==document[o.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function pe(e,t){var n={x:0,y:0};if(V)for(var i=e;i&&"html"!==i.nodeName.toLowerCase();){var r,a=E(i,"transform");/^matrix/.test(a)?(r=a.slice(7,-1).split(/,\s/).map(Number),n.x+=r[4],n.y+=r[5]):/^matrix3d/.test(a)&&(a=a.slice(9,-1).split(/,\s/).map(Number),n.x+=a[12],n.y+=a[13]),i=i.parentNode}var s={},o=he(t.target),u=he(e),l=u.width,c=u.height;return e=t.offsetY-(u.top-o.top),o=t.offsetX-(u.left-o.left),t.changedTouches&&(o=t.changedTouches[0].pageX-u.left,e=t.changedTouches[0].pageY+u.top,V&&(o-=n.x,e-=n.y)),s.y=1-Math.max(0,Math.min(1,e/c)),s.x=Math.max(0,Math.min(1,o/l)),s}function fe(e){return S(e)&&3===e.nodeType}function me(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function ge(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return K(e="function"==typeof e?e():e)||fe(e)?e:"string"==typeof e&&/\S/.test(e)?document.createTextNode(e):void 0})).filter((function(e){return e}))}function ye(e,t){return ge(t).forEach((function(t){return e.appendChild(t)})),e}function ve(e,t){return ye(me(e),t)}function _e(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var be,Te=X("querySelector"),Se=X("querySelectorAll"),we=Object.freeze({__proto__:null,isReal:z,isEl:K,isInFrame:Y,createEl:J,textContent:$,prependTo:Z,hasClass:ee,addClass:te,removeClass:ne,toggleClass:ie,setAttributes:re,getAttributes:ae,getAttribute:se,setAttribute:oe,removeAttribute:ue,blockTextSelection:le,unblockTextSelection:ce,getBoundingClientRect:de,findPosition:he,getPointerPosition:pe,isTextNode:fe,emptyEl:me,normalizeContent:ge,appendContent:ye,insertContent:ve,isSingleLeftClick:_e,$:Te,$$:Se}),Ee=!1,ke=function(){if(!1!==be.options.autoSetup){var e=Array.prototype.slice.call(document.getElementsByTagName("video")),t=Array.prototype.slice.call(document.getElementsByTagName("audio")),n=Array.prototype.slice.call(document.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&0<i.length)for(var r=0,a=i.length;r<a;r++){var s=i[r];if(!s||!s.getAttribute){Ce(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&be(s)}else Ee||Ce(1)}};function Ce(e,t){z()&&(t&&(be=t),window.setTimeout(ke,e))}function Ae(){Ee=!0,window.removeEventListener("load",Ae)}function Pe(e){var t=document.createElement("style");return t.className=e,t}function Ie(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}z()&&("complete"===document.readyState?Ae():window.addEventListener("load",Ae));var De=3;window.WeakMap||(tn=function(){function e(){this.vdata="vdata"+Math.floor(window.performance&&window.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||De++;return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];p("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var Le,Oe=new(window.WeakMap?WeakMap:tn);function xe(e,t){var n;Oe.has(e)&&(0===(n=Oe.get(e)).handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Oe.delete(e))}function Me(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function Re(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var i,r,a,s=e||window.event;for(i in e={},s)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&s.preventDefault||(e[i]=s[i]));e.target||(e.target=e.srcElement||document),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){s.preventDefault&&s.preventDefault(),e.returnValue=!1,s.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),e.cancelBubble=!0,s.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX&&(r=document.documentElement,a=document.body,e.pageX=e.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var Ne=["touchstart","touchmove"];function Ue(e,t,n){if(Array.isArray(t))return Me(Ue,e,t,n);Oe.has(e)||Oe.set(e,{});var i=Oe.get(e);i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=De++),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(!i.disabled){t=Re(t);var r=i.handlers[t.type];if(r)for(var a=r.slice(0),s=0,o=a.length;s<o&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,n)}catch(t){p.error(t)}}}),1===i.handlers[t].length&&(e.addEventListener?(n=!1,function(){if("boolean"!=typeof Le){Le=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Le=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}return Le}()&&-1<Ne.indexOf(t)&&(n={passive:!0}),e.addEventListener(t,i.dispatcher,n)):e.attachEvent&&e.attachEvent("on"+t,i.dispatcher))}function Be(e,t,n){if(Oe.has(e)){var i=Oe.get(e);if(i.handlers){if(Array.isArray(t))return Me(Be,e,t,n);var r=function(e,t){i.handlers[t]=[],xe(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);xe(e,t)}else r(e,t)}else for(var o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(e,o)}}}function je(e,t,n){var i=Oe.has(e)?Oe.get(e):{},r=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Re(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles?je.call(null,r,t,n):!r&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(Oe.has(t.target)||Oe.set(t.target,{}),r=Oe.get(t.target),t.target[t.type]&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1)),!t.defaultPrevented}function Fe(e,t,n){if(Array.isArray(t))return Me(Fe,e,t,n);function i(){Be(e,t,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||De++,Ue(e,t,i)}function He(e,t,n){function i(){Be(e,t,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||De++,Ue(e,t,i)}function Ve(e,t,n){return t.guid||(t.guid=De++),(e=t.bind(e)).guid=n?n+"_"+t.guid:t.guid,e}function Qe(e,t){var n=window.performance.now();return function(){var i=window.performance.now();t<=i-n&&(e.apply(void 0,arguments),n=i)}}function qe(){}var Ge,We=Object.freeze({__proto__:null,fixEvent:Re,on:Ue,off:Be,trigger:je,one:Fe,any:He});function ze(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_||(e.constructor&&e.constructor.name?e.constructor.name:s(e))}function Ke(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function Ye(e,t,n){if(!e||!e.nodeName&&!et(e))throw new Error("Invalid target for "+ze(t)+"#"+n+"; must be a DOM node or evented object.")}function Xe(e,t,n){if(!Ke(e))throw new Error("Invalid event type for "+ze(t)+"#"+n+"; must be a non-empty string or array.")}function Je(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+ze(t)+"#"+n+"; must be a function.")}function $e(e,t,n){var i,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return t=a?(i=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],t[1]):(i=t[0],r=t[1],t[2]),Ye(i,e,n),Xe(r,e,n),Je(t,e,n),{isTargetingSelf:a,target:i,type:r,listener:t=Ve(e,t)}}function Ze(e,t,n,i){Ye(e,e,t),e.nodeName?We[t](e,n,i):e[t](n,i)}qe.prototype.allowedEvents_={},qe.prototype.addEventListener=qe.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ue(this,e,t),this.addEventListener=n},qe.prototype.removeEventListener=qe.prototype.off=function(e,t){Be(this,e,t)},qe.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Fe(this,e,t),this.addEventListener=n},qe.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},He(this,e,t),this.addEventListener=n},qe.prototype.dispatchEvent=qe.prototype.trigger=function(e){var t=e.type||e;e=Re(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),je(this,e)},qe.prototype.queueTrigger=function(e){var t=this;Ge=Ge||new Map;var n=e.type||e,i=Ge.get(this);i||(i=new Map,Ge.set(this,i));var r=i.get(n);i.delete(n),window.clearTimeout(r),r=window.setTimeout((function(){0===i.size&&(i=null,Ge.delete(t)),t.trigger(e)}),0),i.set(n,r)};var et=function(e){return e instanceof qe||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},tt={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,a=$e(this,n,"on"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;Ze(o,"on",u,l),s||((r=function(){return e.off(o,u,l)}).guid=l.guid,(s=function(){return e.off("dispose",r)}).guid=l.guid,Ze(this,"on","dispose",r),Ze(o,"on","dispose",s))},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=$e(this,n,"one"),a=r.isTargetingSelf,s=r.target,o=r.type,u=r.listener;a?Ze(s,"one",o,u):((a=function t(){e.off(s,o,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];u.apply(null,i)}).guid=u.guid,Ze(s,"one",o,a))},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=$e(this,n,"any"),a=r.isTargetingSelf,s=r.target,o=r.type,u=r.listener;a?Ze(s,"any",o,u):((a=function t(){e.off(s,o,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];u.apply(null,i)}).guid=u.guid,Ze(s,"any",o,a))},off:function(e,t,n){!e||Ke(e)?Be(this.eventBusEl_,e,t):(t=t,Ye(e=e,this,"off"),Xe(t,this,"off"),Je(n,this,"off"),n=Ve(this,n),this.off("dispose",n),e.nodeName?(Be(e,t,n),Be(e,"dispose",n)):et(e)&&(e.off(t,n),e.off("dispose",n)))},trigger:function(e,t){Ye(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!Ke(n)){if(n="Invalid event type for "+ze(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.",!e)throw new Error(n);(this.log||p).error(n)}return je(this.eventBusEl_,e,t)}};function nt(e,t){if(t=(t=void 0===t?{}:t).eventBusKey){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=J("span",{className:"vjs-event-bus"});return T(e,tt),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&Oe.has(e)&&Oe.delete(e)})),window.setTimeout((function(){e.eventBusEl_=null}),0)})),e}var it={state:{},setState:function(e){var t,n=this;return b(e="function"==typeof e?e():e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&et(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function rt(e,t){return T(e,it),e.state=T({},e.state,t),"function"==typeof e.handleStateChanged&&et(e)&&e.on("statechanged",e.handleStateChanged),e}function at(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))}function st(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))}function ot(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){t&&b(t,(function(t,n){w(t)?(w(e[n])||(e[n]={}),e[n]=ot(e[n],t)):e[n]=t}))})),e}var ut=window.Map||function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),lt=window.Set||function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),ct=g((function(e,t){function n(e){if(!e||"object"!=s(e)||(t=e.which||e.keyCode||e.charCode)&&(e=t),"number"==typeof e)return u[e];var t=String(e);return(e=i[t.toLowerCase()])||((e=r[t.toLowerCase()])?e:1===t.length?t.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==s(e)){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){if(e=i[t.toLowerCase()])return e===n;if(e=r[t.toLowerCase()])return e===n}else if("number"==typeof t)return t===n;return!1}};for(var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var o,u=t.names=t.title={};for(a in i)u[i[a]]=a;for(o in r)i[o]=r[o]}));ct.code,ct.codes,ct.aliases,ct.names,ct.title;var dt=function(){function e(e,t,n){var i=this;!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ot({},this.options_),t=this.options_=ot(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+De++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return i.addClass(e)})),!1!==t.evented&&(nt(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),rt(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new lt,this.setIntervalIds_=new lt,this.rafIds_=new lt,this.namedRafs_=new ut,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e&&(this.options_=ot(this.options_,e)),this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return J(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[i];return i=i&&i.split("-")[0],i=r&&r[i],n=n,a&&a[e]?n=a[e]:i&&i[e]&&(n=i[e]),t?n.replace(/\{(\d+)\}/g,(function(e,n){return void 0===(n=t[n-1])?e:n})):n},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i},t.addChild=function(t,n,i){if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"==typeof t){var r=st(t),a=n.componentClass||r;n.name=r;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;s=new s(this.player_||this,n)}else s=t;return s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(i,0,s),s.parentComponent_=this,"function"==typeof s.id&&(this.childIndex_[s.id()]=s),(r=r||s.name&&st(s.name()))&&(this.childNameIndex_[r]=s,this.childNameIndex_[at(r)]=s),"function"==typeof s.el&&s.el()&&(r=null,this.children_[i+1]&&(this.children_[i+1].el_?r=this.children_[i+1].el_:K(this.children_[i+1])&&(r=this.children_[i+1])),this.contentEl().insertBefore(s.el(),r)),s},t.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,n=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===e){n=!0,this.children_.splice(i,1);break}n&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[st(e.name())]=null,this.childNameIndex_[at(e.name())]=null,(t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el()))}},t.initChildren=function(){var t,n,i,r=this,a=this.options_.children;a&&(t=this.options_,n=e.getComponent("Tech"),(i=Array.isArray(a)?a:Object.keys(a)).concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var t;return e="string"==typeof e?a[t=e]||r.options_[t]||{}:(t=e.name,e),{name:t,opts:e}})).filter((function(t){return(t=e.getComponent(t.opts.componentClass||st(t.name)))&&!n.isTech(t)})).forEach((function(e){var n=e.name;e=e.opts,!1!==(e=void 0!==t[n]?t[n]:e)&&((e=!0===e?{}:e).playerOptions=r.options_.playerOptions,(e=r.addChild(n,e))&&(r[n]=e))})))},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return Te(e,t||this.contentEl())},t.$$=function(e,t){return Se(e,t||this.contentEl())},t.hasClass=function(e){return ee(this.el_,e)},t.addClass=function(e){te(this.el_,e)},t.removeClass=function(e){ne(this.el_,e)},t.toggleClass=function(e,t){ie(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return se(this.el_,e)},t.setAttribute=function(e,t){oe(this.el_,e,t)},t.removeAttribute=function(e){ue(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){return void 0!==t?(-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"))):this.el_?-1!==(n=(t=this.el_.style[e]).indexOf("px"))?parseInt(t.slice(0,n),10):parseInt(this.el_["offset"+st(e)],10):0},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return t=E(this.el_,e),0!==(t=parseFloat(t))&&!isNaN(t)||(e="offset"+st(e),t=this.el_[e]),t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(ct.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;function i(){e=!1}this.on("touchstart",(function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=window.performance.now(),e=!0)})),this.on("touchmove",(function(t){var i;1<t.touches.length?e=!1:n&&(i=t.touches[0].pageX-n.pageX,t=t.touches[0].pageY-n.pageY,10<Math.sqrt(i*i+t*t)&&(e=!1))})),this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){!(n=null)===e&&window.performance.now()-t<200&&(i.preventDefault(),this.trigger("tap"))}))},t.enableTouchActivity=function(){var e,t,n;this.player()&&this.player().reportUserActivity&&(e=Ve(this.player(),this.player().reportUserActivity),this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)})),n=function(n){e(),this.clearInterval(t)},this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n))},t.setTimeout=function(e,t){var n,i=this;return e=Ve(this,e),this.clearTimersOnDispose_(),n=window.setTimeout((function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window.clearTimeout(e)),e},t.setInterval=function(e,t){return e=Ve(this,e),this.clearTimersOnDispose_(),t=window.setInterval(e,t),this.setIntervalIds_.add(t),t},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=Ve(this,e),t=window.requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=Ve(this,t);var i=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,i),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),window.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],i=t[1];e[n].forEach((function(t,n){return e[i](n)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var i=(r=e.getComponent("Tech"))&&r.isTech(n),r=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!r){var a=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+t+'"; '+a+".")}if(t=st(t),e.components_||(e.components_={}),a=e.getComponent("Player"),"Player"===t&&a&&a.players){var s=a.players;if(a=Object.keys(s),s&&0<a.length&&a.map((function(e){return s[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[at(t)]=n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();dt.prototype.supportsRaf_="function"==typeof window.requestAnimationFrame&&"function"==typeof window.cancelAnimationFrame,dt.registerComponent("Component",dt);var ht=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},pt=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t};function ft(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function mt(e){var t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ft.bind(null,"start",0,e),end:ft.bind(null,"end",1,e)};return window.Symbol&&window.Symbol.iterator&&(t[window.Symbol.iterator]=function(){return(e||[]).values()}),t}function gt(e,t){return Array.isArray(e)?mt(e):void 0===e||void 0===t?mt():mt([[e,t]])}function yt(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=gt(0,0));for(var a=0;a<e.length;a++)n=e.start(a),r+=(i=t<(i=e.end(a))?t:i)-n;return r/t}function vt(e){if(e instanceof vt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:S(e)&&("number"==typeof e.code&&(this.code=e.code),T(this,e)),this.message||(this.message=vt.defaultMessages[this.code]||"")}vt.prototype.code=0,vt.prototype.message="",vt.prototype.status=null,vt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var _t=0;_t<vt.errorTypes.length;_t++)vt[vt.errorTypes[_t]]=_t,vt.prototype[vt.errorTypes[_t]]=_t;function bt(e){return null!=e&&"function"==typeof e.then}function Tt(e){bt(e)&&e.then(null,(function(e){}))}function St(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,i){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})}var wt="vjs-modal-dialog",Et=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.close_=function(e){return i.close(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=J("div",{className:wt+"-content"},{role:"document"}),i.descEl_=J("p",{className:wt+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),$(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return wt+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},n.closeable=function(e){var t,n;return"boolean"==typeof e&&(t=this.closeable_=!!e,n=this.getChild("closeButton"),t&&!n&&(e=this.contentEl_,this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)),!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())),this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),ve(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t),(t=this.getChild("closeButton"))&&n.appendChild(t.el_)},n.empty=function(){this.trigger("beforemodalempty"),me(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=document.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),ct.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(ct.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}document.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof window.HTMLAnchorElement||e instanceof window.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof window.HTMLInputElement||e instanceof window.HTMLSelectElement||e instanceof window.HTMLTextAreaElement||e instanceof window.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof window.HTMLIFrameElement||e instanceof window.HTMLObjectElement||e instanceof window.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(dt);Et.prototype.options_={pauseOnOpen:!0,temporary:!0},dt.registerComponent("ModalDialog",Et);var kt,Ct=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(ht(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)n.addTrack(t[i]);return n}pt(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},et(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(qe);for(kt in Ct.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Ct.prototype.allowedEvents_)Ct.prototype["on"+kt]=null;function At(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function Pt(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function It(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=document.createElement("a");n.href=e;for(var i={},r=0;r<t.length;r++)i[t[r]]=n[t[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=window.location.protocol),i.host||(i.host=window.location.host),i}function Dt(e){var t;return e.match(/^https?:\/\//)||((t=document.createElement("a")).href=e,e=t.href),e}function Lt(e){return"string"==typeof e&&(e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e))?e.pop().toLowerCase():""}function Ot(e,t){return void 0===t&&(t=window.location),(":"===(e=It(e)).protocol?t:e).protocol+e.host!==t.protocol+t.host}var xt=function(e){function t(t){for(var n,i=(t=void 0===t?[]:t).length-1;0<=i;i--)if(t[i].enabled){At(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,n}pt(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&At(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,At(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Ct),Mt=function(e){function t(t){for(var n,i=(t=void 0===t?[]:t).length-1;0<=i;i--)if(t[i].selected){Pt(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(ht(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}pt(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&Pt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,Pt(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Ct),Rt=function(e){function t(){return e.apply(this,arguments)||this}pt(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Ct),Nt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Ut=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,i=e.length;function r(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(this.cues_=e,this.length_=e.length,t<i)for(n=t;n<i;n++)r.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),Bt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},jt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ft={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ht={disabled:"disabled",hidden:"hidden",showing:"showing"},Vt=(C=function(e){function t(t){void 0===t&&(t={});var n,i=e.call(this)||this,r={id:t.id||"vjs_track_"+De++,kind:t.kind||"",language:t.language||""},a=t.label||"";for(n in r)!function(e){Object.defineProperty(ht(i),e,{get:function(){return r[e]},set:function(){}})}(n);return Object.defineProperty(ht(i),"label",{get:function(){return a},set:function(e){e!==a&&(a=e,this.trigger("labelchange"))}}),i}return pt(t,e),t}(qe),Object.freeze({__proto__:null,parseUrl:It,getAbsoluteURL:Dt,getFileExtension:Lt,isCrossOrigin:Ot})),Qt=nn="undefined"!=typeof window?window:void 0!==m?m:"undefined"!=typeof self?self:{},qt=Object.prototype.toString;zt.httpHandler=function(e,t){return void 0===t&&(t=!1),function(n,i,r){if(n)e(n);else if(400<=i.statusCode&&i.statusCode<=599){if(n=r,t)if(Qt.TextDecoder){i=function(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce((function(e,t){t=(n=t.split("="))[0];var n=n[1];return"charset"===t.trim()?n.trim():e}),"utf-8")}(i.headers&&i.headers["content-type"]);try{n=new TextDecoder(i).decode(r)}catch(n){}}else n=String.fromCharCode.apply(null,new Uint8Array(r));e({cause:n})}else e(null,r)}};var Gt=zt;function Wt(e,t,n){var i=e;return function(e){if(!e)return!1;var t=qt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=y({},t,{uri:e}),i.callback=n,i}function zt(e,t,n){return Kt(t=Wt(e,t,n))}function Kt(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=l.response||l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),m)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(u),(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,n(e,g)}function a(){if(!o){clearTimeout(u);var t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status,r=g,a=null;return 0!==t?(r={body:i(),statusCode:t,method:d,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(r.headers=function(e){var t={};return e&&e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase();n=e.slice(n+1).trim(),void 0===t[i]?t[i]=n:Array.isArray(t[i])?t[i].push(n):t[i]=[t[i],n]})),t}(l.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,r,r.body)}}var s,o,u,l=e.xhr||null,c=(l=l||new(e.cors||e.useXDR?zt.XDomainRequest:zt.XMLHttpRequest)).url=e.uri||e.url,d=l.method=e.method||"GET",h=e.body||e.data,p=l.headers=e.headers||{},f=!!e.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(a,0)},l.onload=a,l.onerror=r,l.onprogress=function(){},l.onabort=function(){o=!0},l.ontimeout=r,l.open(d,c,!f,e.username,e.password),f||(l.withCredentials=!!e.withCredentials),!f&&0<e.timeout&&(u=setTimeout((function(){var e;o||(o=!0,l.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",r(e))}),e.timeout)),l.setRequestHeader)for(s in p)p.hasOwnProperty(s)&&l.setRequestHeader(s,p[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}function Yt(e,t){var n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<i.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach((function(e){return p.error(e)})),window.console&&window.console.groupEnd&&window.console.groupEnd()),n.flush()}function Xt(e,t){var n={uri:e};(e=Ot(e))&&(n.cors=e),(e="use-credentials"===t.tech_.crossOrigin())&&(n.withCredentials=e),Gt(n,Ve(this,(function(e,n,i){return e?p.error(e,n):(t.loaded_=!0,void("function"!=typeof window.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){return"vttjserror"!==e.type?Yt(i,t):void p.error("vttjs failed to load, stopping trying to process "+t.src)})):Yt(i,t)))})))}A=zt,zt.XMLHttpRequest=Qt.XMLHttpRequest||function(){},zt.XDomainRequest="withCredentials"in new zt.XMLHttpRequest?zt.XMLHttpRequest:Qt.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){zt["delete"===e?"del":e]=function(t,n,i){return(n=Wt(t,n,i)).method=e.toUpperCase(),Kt(n)}})),Gt.default=A;var Jt=function(e){function t(t){var n;if(!(t=void 0===t?{}:t).tech)throw new Error("A tech was not provided.");t=ot(t,{kind:Ft[t.kind]||"subtitles",language:t.language||t.srclang||""});var i=Ht[t.mode]||"disabled",r=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(i="hidden"),(n=e.call(this,t)||this).tech_=t.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var a=new Ut(n.cues_),s=new Ut(n.activeCues_),o=!1;return n.timeupdateHandler=Ve(ht(n),(function(){this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1)),this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))})),n.tech_.one("dispose",(function(){n.stopTracking()})),"disabled"!==i&&n.startTracking(),Object.defineProperties(ht(n),{default:{get:function(){return r},set:function(){}},mode:{get:function(){return i},set:function(e){Ht[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||Xt(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),t.src?(n.src=t.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&Xt(n.src,ht(n))):n.loaded_=!0,n}pt(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0)},n.addCue=function(e){var t=e;if(window.vttjs&&!(e instanceof window.vttjs.VTTCue)){for(var n in t=new window.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(C);Jt.prototype.allowedEvents_={cuechange:"cuechange"},P=function(e){function t(t){var n=ot(t=void 0===t?{}:t,{kind:jt[t.kind]||""}),i=(t=e.call(this,n)||this,!1);return Object.defineProperty(ht(t),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),n.enabled&&(t.enabled=n.enabled),t.loaded_=!0,t}return pt(t,e),t}(C),U=function(e){function t(t){var n=ot(t=void 0===t?{}:t,{kind:Bt[t.kind]||""}),i=(t=e.call(this,n)||this,!1);return Object.defineProperty(ht(t),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),n.selected&&(t.selected=n.selected),t}return pt(t,e),t}(C),F=function(e){function t(t){var n;void 0===t&&(t={});var i=e.call(this)||this,r=new Jt(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(ht(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=0,r.addEventListener("loadeddata",(function(){n=2,i.trigger({type:"load",target:ht(i)})})),i}return pt(t,e),t}(qe),F.prototype.allowedEvents_={load:"load"},F.NONE=0,F.LOADING=1,F.LOADED=2,F.ERROR=3;var $t={audio:{ListClass:xt,TrackClass:P,capitalName:"Audio"},video:{ListClass:Mt,TrackClass:U,capitalName:"Video"},text:{ListClass:Rt,TrackClass:Jt,capitalName:"Text"}};Object.keys($t).forEach((function(e){$t[e].getterName=e+"Tracks",$t[e].privateName=e+"Tracks_"}));var Zt={remoteText:{ListClass:Rt,TrackClass:Jt,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Nt,TrackClass:F,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},en=y({},$t,Zt);Zt.names=Object.keys(Zt),$t.names=Object.keys($t),en.names=[].concat(Zt.names).concat($t.names);var tn=void 0!==m?m:"undefined"!=typeof window?window:{},nn=hi="undefined"!=typeof document?document:(hi=tn["__GLOBAL_DOCUMENT_CACHE@4"])||(tn["__GLOBAL_DOCUMENT_CACHE@4"]={}),rn=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return an.prototype=e,new an};function an(){}function sn(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function on(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}return(e=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/))?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function un(){this.values=rn(null)}function ln(e,t,n,i){var r,a,s=i?e.split(i):[e];for(r in s)"string"==typeof s[r]&&2===(a=s[r].split(n)).length&&t(a[0],a[1])}function cn(e,t,n){var i=e;function r(){var t=on(e);if(null===t)throw new sn(sn.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new sn(sn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new un;ln(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;0<=r;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}((sn.prototype=rn(Error.prototype)).constructor=sn).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},un.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var dn=nn.createElement&&nn.createElement("textarea"),hn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},pn={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},fn={v:"title",lang:"lang"},mn={rt:"ruby"};function gn(e,t){for(var n,i,r,a,s,o,u,l,c,d,h=e.document.createElement("div"),p=h,f=[];null!==(n=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/);return e=e[1]||e[2],t=t.substr(e.length),e}());)"<"!==n[0]?p.appendChild(e.document.createTextNode((s=n,dn.innerHTML=s,s=dn.textContent,dn.textContent="",s))):"/"!==n[1]?(a=on(n.substr(1,n.length-2)))?(i=e.document.createProcessingInstruction("timestamp",a),p.appendChild(i)):(r=n.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(l=r[1],c=r[3],d=void 0,(i=(d=hn[l])?(d=e.document.createElement(d),(l=fn[l])&&c&&(d[l]=c.trim()),d):null)&&(o=p,mn[(u=i).localName]&&mn[u.localName]!==o.localName||(r[2]&&((a=r[2].split(".")).forEach((function(e){var t=/^bg_/.test(e);e=t?e.slice(3):e,pn.hasOwnProperty(e)&&(e=pn[e],i.style[t?"background-color":"color"]=e)})),i.className=a.join(" ")),f.push(r[1]),p.appendChild(i),p=i))):f.length&&f[f.length-1]===n.substr(2).replace(">","")&&(f.pop(),p=p.parentNode);return h}var yn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function vn(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}for(i(t,e);n=function e(t){if(!t||!t.length)return null;var n=t.pop(),r=n.textContent||n.innerText;if(r){var a=r.match(/^.*(\n|\r)/);return a?a[t.length=0]:r}return"ruby"===n.tagName?e(t):n.childNodes?(i(t,n),e(t)):void 0}(t);)for(var r=0;r<n.length;r++)if(function(e){for(var t=0;t<yn.length;t++){var n=yn[t];if(e>=n[0]&&e<=n[1])return 1}}(n.charCodeAt(r)))return"rtl";return"ltr"}function _n(){}function bn(e,t,n){_n.call(this),this.cue=t,this.cueDiv=gn(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:vn(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Tn(e){var t,n,i,r;e.div&&(t=e.div.offsetHeight,n=e.div.offsetWidth,i=e.div.offsetTop,r=(r=e.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects(),e=e.div.getBoundingClientRect(),r=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0),this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||t,this.bottom=e.bottom||i+(e.height||t),this.width=e.width||n,this.lineHeight=void 0!==r?r:e.lineHeight}function Sn(e,t,n,i){var r,a=new Tn(t),s=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(s),u=[];if(s.snapToLines){switch(s.vertical){case"":u=["+y","-y"],r="height";break;case"rl":u=["+x","-x"],r="width";break;case"lr":u=["-x","+x"],r="width"}var l=a.lineHeight,c=l*Math.round(o),d=n[r]+l,h=u[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/l)*l),o<0&&(c+=""===s.vertical?n.height:n.width,u=u.reverse()),a.move(h,c)}else{var p=a.lineHeight/n.height*100;switch(s.lineAlign){case"center":o-=p/2;break;case"end":o-=p}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}u=["+y","-x","+x","-y"],a=new Tn(t)}a=function(e,t){for(var r,a=new Tn(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(i);)e.move(t[o]);if(e.within(n))return e;var u=e.intersectPercentage(n);u<s&&(r=new Tn(e),s=u),e=new Tn(a)}return r||a}(a,u),t.move(a.toCSSCompatValues(n))}function wn(){}_n.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},_n.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(bn.prototype=rn(_n.prototype)).constructor=bn,Tn.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Tn.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Tn.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Tn.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Tn.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Tn.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Tn.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Tn.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},wn.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},wn.convertCueToDOMTree=function(e,t){return e&&t?gn(e,t):null},wn.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t)){var r=[],a=Tn.getSimpleBoxPosition(i),s={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,o,u=0;u<t.length;u++)o=t[u],n=new bn(e,o,s),i.appendChild(n.div),Sn(0,n,a,r),o.displayState=n.div,r.push(Tn.getSimpleBoxPosition(n))}()}else for(var o=0;o<t.length;o++)i.appendChild(t[o].displayState)},(wn.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof sn))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?ln(e,(function(e,n){var i;"X-TIMESTAMP-MAP"===e&&(n=n,i=new un,ln(n,(function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",on(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")}))}),/=/):ln(e,(function(e,n){var i;"Region"===e&&(n=n,i=new un,ln(n,(function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var r=new un;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y"));break;case"scroll":i.alt(e,t,["up"])}}),/=/,/\s/),i.has("id")&&((n=new(t.vttjs.VTTRegion||t.window.VTTRegion)).width=i.get("width",100),n.lines=i.get("lines",3),n.regionAnchorX=i.get("regionanchorX",0),n.regionAnchorY=i.get("regionanchorY",100),n.viewportAnchorX=i.get("viewportanchorX",0),n.viewportAnchorY=i.get("viewportanchorY",100),n.scroll=i.get("scroll",""),t.onregion&&t.onregion(n),t.regionList.push({id:i.get("id"),region:n})))}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r,a=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new sn(sn.Errors.BadSignature);t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{cn(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(s=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new sn(sn.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var En=wn,kn={"":1,lr:1,rl:1},Cn={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function An(e){return"string"==typeof e&&!!Cn[e.toLowerCase()]&&e.toLowerCase()}function Pn(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,s=t,o=n,u=null,l="",c=!0,d="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(e){if(!1===(e="string"==typeof(e=e)&&!!kn[e.toLowerCase()]&&e.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){(e=An(e))&&(h=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){(e=An(e))&&(f=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){if(!(e=An(e)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=e,this.hasBeenReset=!0}}}),this.displayState=void 0}Pn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var In=Pn,Dn={"":!0,up:!0};function Ln(e){return"number"==typeof e&&0<=e&&e<=100}function On(){var e=100,t=3,n=0,i=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Ln(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!Ln(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Ln(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!Ln(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Ln(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){!1===(e="string"==typeof(e=e)&&!!Dn[e.toLowerCase()]&&e.toLowerCase())||(s=e)}}})}var xn=g((function(e){e=e.exports={WebVTT:En,VTTCue:In,VTTRegion:On},Qt.vttjs=e,Qt.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,i=Qt.VTTCue,r=Qt.VTTRegion;e.shim=function(){Qt.VTTCue=t,Qt.VTTRegion=n},e.restore=function(){Qt.VTTCue=i,Qt.VTTRegion=r},Qt.VTTCue||e.shim()}));xn.WebVTT,xn.VTTCue,xn.VTTRegion;var Mn=function(e){function t(t,n){var i;return void 0===n&&(n=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(i=e.call(this,null,t,n)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.queuedHanders_=new Set,i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),en.names.forEach((function(e){e=en[e],t&&t[e.getterName]&&(i[e.privateName]=t[e.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new en.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}pt(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ve(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return gt(0,0)},n.bufferedPercent=function(){return yt(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks($t.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new vt(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?gt(0,0):gt()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;$t.names.forEach((function(t){function n(){e.trigger(t+"trackchange")}var i=$t[t],r=e[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",(function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)}))}))},n.addWebVttScript_=function(){var e,t=this;window.WebVTT||(document.body.contains(this.el())?!this.options_["vtt.js"]&&w(xn)&&0<Object.keys(xn).length?this.trigger("vttjsloaded"):((e=document.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",(function(){e.onload=null,e.onerror=null})),window.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},n.emulateTextTracks=function(){function e(e){return i.addTrack(e.track)}function t(e){return i.removeTrack(e.track)}var n=this,i=this.textTracks(),r=this.remoteTextTracks();function a(){return n.trigger("texttrackchange")}function s(){a();for(var e=0;e<i.length;e++){var t=i[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}}r.on("addtrack",e),r.on("removetrack",t),this.addWebVttScript_(),s(),i.addEventListener("change",s),i.addEventListener("addtrack",s),i.addEventListener("removetrack",s),this.on("dispose",(function(){r.off("addtrack",e),r.off("removetrack",t),i.removeEventListener("change",s),i.removeEventListener("addtrack",s),i.removeEventListener("removetrack",s);for(var n=0;n<i.length;n++)i[n].removeEventListener("cuechange",a)}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();return r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e,r=new en.text.TrackClass(r),a.addTrack(r),r}(this,e,t,n)},n.createRemoteTextTrack=function(e){return e=ot(e,{tech:this}),new Zt.remoteTextEl.TrackClass(e)},n.addRemoteTextTrack=function(e,t){var n=this,i=this.createRemoteTextTrack(e=void 0===e?{}:e);return!0!==t&&!1!==t&&(p.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(i.track)})),i},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||window.Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=De++;return this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=st(e),t.techs_[e]=n,t.techs_[at(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=st(e),window&&window.videojs&&window.videojs[e]?(p.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[e]):void 0)},t}(dt);en.names.forEach((function(e){var t=en[e];Mn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Mn.prototype.featuresVolumeControl=!0,Mn.prototype.featuresMuteControl=!0,Mn.prototype.featuresFullscreenResize=!1,Mn.prototype.featuresPlaybackRate=!1,Mn.prototype.featuresProgressEvents=!1,Mn.prototype.featuresSourceset=!1,Mn.prototype.featuresTimeupdateEvents=!1,Mn.prototype.featuresNativeTextTracks=!1,Mn.prototype.featuresVideoFrameCallback=!1,Mn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=(i=e.sourceHandlers)||(e.sourceHandlers=[]);void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:p.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},dt.registerComponent("Tech",Mn),Mn.registerTech("Tech",Mn),Mn.defaultTechOrder_=[];var Rn={},Nn={},Un={};function Bn(e,t,n,i){void 0===i&&(i=null);var r="call"+st(n);return r=e.reduce(Vn(r),i),function(e,t,n,i){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,r=(i=r===Un)?null:t[n](r),i),r}var jn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Fn={setCurrentTime:1,setMuted:1,setVolume:1},Hn={play:1,pause:1};function Vn(e){return function(t,n){return t===Un?Un:n[e]?n[e](t):t}}function Qn(e){return e=Lt(e=void 0===e?"":e),Gn[e.toLowerCase()]||""}function qn(e){var t;return Array.isArray(e)?(t=[],e.forEach((function(e){e=qn(e),Array.isArray(e)?t=t.concat(e):S(e)&&t.push(e)})),t):"string"==typeof e&&e.trim()?[Wn({src:e})]:S(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Wn(e)]:[]}var Gn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function Wn(e){var t;return e.type||(t=Qn(e.src))&&(e.type=t),e}A=function(e){function t(t,n,i){var r=ot({createEl:!1},n);if(i=e.call(this,t,r,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var a=0,s=n.playerOptions.techOrder;a<s.length;a++){var o=st(s[a]),u=Mn.getTech(o);if((u=o?u:dt.getComponent(o))&&u.isSupported()){t.loadTech_(o);break}}return i}return pt(t,e),t}(dt),dt.registerComponent("MediaLoader",A),C=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.options_.controlText&&i.controlText(i.options_.controlText),i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}pt(t,e);var n=t.prototype;return n.createEl=function(e,t,n){return void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=T({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&p.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=T({role:"button"},n),this.tabIndex_=t.tabIndex,(n=J(e,t,n)).appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=J("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,$(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){ct.isEventKey(t,"Space")||ct.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(dt),dt.registerComponent("ClickableComponent",C),dt.registerComponent("PosterImage",function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update(),i.update_=function(e){return i.update(e)},t.on("posterchange",i.update_),i}pt(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return J("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){this.el_.style.backgroundImage=e?'url("'+e+'")':""},n.handleClick=function(e){var t;this.player_.controls()&&(t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(N||x)&&t||this.player_.tech(!0).focus(),this.player_.paused()?Tt(this.player_.play()):this.player_.pause())},t}(C));var zn="#222",Kn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Yn(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Xn(e,t,n){try{e.style[t]=n}catch(e){return}}dt.registerComponent("TextTrackDisplay",function(e){function t(t,n,i){function r(e){return a.updateDisplay(e)}var a=e.call(this,t,n,i)||this;return t.on("loadstart",(function(e){return a.toggleDisplay(e)})),t.on("texttrackchange",r),t.on("loadedmetadata",(function(e){return a.preselectTrack(e)})),t.ready(Ve(ht(a),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",r),t.on("playerresize",r),window.addEventListener("orientationchange",r),t.on("dispose",(function(){return window.removeEventListener("orientationchange",r)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),a}pt(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in i?n=o.kind!==a.kind&&n||o:a&&!a.enabled?t=e=n=null:o.default&&("descriptions"!==o.kind||e?o.kind in i&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,s=null,o=e.length;o--;){var u=e[o];"showing"===u.mode&&("descriptions"===u.kind?a=u:s=u)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r,a=n[i];a&&(r=a.displayState,t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&Xn(r.firstChild,"color",Yn(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Xn(r.firstChild,"backgroundColor",Yn(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Xn(r,"backgroundColor",Yn(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?r.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+zn:"raised"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+zn:"depressed"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+zn:"uniform"===t.edgeStyle&&(r.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+zn)),t.fontPercent&&1!==t.fontPercent&&(a=window.parseFloat(r.style.fontSize),r.style.fontSize=a*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"),t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=Kn[t.fontFamily]))}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof window.WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);window.WebVTT.processCues(window,t,this.el_);for(var a=0;a<e.length;++a){for(var s=e[a],o=0;o<s.activeCues.length;++o){var u=s.activeCues[o].displayState;te(u,"vjs-text-track-cue"),te(u,"vjs-text-track-cue-"+(s.language||a)),s.language&&oe(u,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},t}(dt)),dt.registerComponent("LoadingSpinner",function(e){function t(){return e.apply(this,arguments)||this}return pt(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player");return t=J("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),(n=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})).appendChild(t),n},t}(dt));var Jn=function(e){function t(){return e.apply(this,arguments)||this}pt(t,e);var n=t.prototype;return n.createEl=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),(n=J("button",t=T({className:this.buildCSSClass()},t),n=T({type:"button"},n))).appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return p.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),dt.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){ct.isEventKey(t,"Space")||ct.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(C);function $n(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60);return t=Math.floor(t/3600),(r=0<(r=isNaN(e)||e===1/0?i=n="-":r)||0<t?r+":":"")+(i=((r||10<=a)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)}dt.registerComponent("Button",Jn),xt=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.mouseused_=!1,i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return Tt(t),void(!this.player_.tech(!0)||(N||x)&&n||this.player_.tech(!0).focus())}var i=(n=this.player_.getChild("controlBar"))&&n.getChild("playToggle");i?(n=function(){return i.focus()},bt(t)?t.then(n,(function(){})):this.setTimeout(n,1)):this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(Jn),xt.prototype.controlText_="Play Video",dt.registerComponent("BigPlayButton",xt),dt.registerComponent("CloseButton",function(e){function t(t,n){return(t=e.call(this,t,n)||this).controlText(n&&n.controlText||t.localize("Close")),t}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){ct.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Jn)),Mt=function(e){function t(t,n){var i=e.call(this,t,n=void 0===n?{}:n)||this;return n.replay=void 0===n.replay||n.replay,i.on(t,"play",(function(e){return i.handlePlay(e)})),i.on(t,"pause",(function(e){return i.handlePause(e)})),n.replay&&i.on(t,"ended",(function(e){return i.handleEnded(e)})),i}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?Tt(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(Jn),Mt.prototype.controlText_="Play",dt.registerComponent("PlayToggle",Mt);var Zn=$n;function ei(e,t){return Zn(e,t=void 0===t?e:t)}function ti(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}function ni(e,t){return ti(e/t*100,0,100).toFixed(2)+"%"}Rt=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,["timeupdate","ended"],(function(e){return i.updateContent(e)})),i.updateTextNode_(),i}pt(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),i=J("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return n.appendChild(i),this.contentEl_=J("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;e=ei(e=void 0===e?0:e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){var e;t.contentEl_&&((e=t.textNode_)&&t.contentEl_.firstChild!==e&&(e=null,p.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=document.createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_)))})))},n.updateContent=function(e){},t}(dt),Rt.prototype.labelText_="Time",Rt.prototype.controlText_="Time",dt.registerComponent("TimeDisplay",Rt),Nt=function(e){function t(){return e.apply(this,arguments)||this}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(t)},t}(Rt),Nt.prototype.labelText_="Current Time",Nt.prototype.controlText_="Current Time",dt.registerComponent("CurrentTimeDisplay",Nt),F=function(e){function t(t,n){var i=e.call(this,t,n)||this;return n=function(e){return i.updateContent(e)},i.on(t,"durationchange",n),i.on(t,"loadstart",n),i.on(t,"loadedmetadata",n),i}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(Rt),F.prototype.labelText_="Duration",F.prototype.controlText_="Duration",dt.registerComponent("DurationDisplay",F),dt.registerComponent("TimeDivider",function(e){function t(){return e.apply(this,arguments)||this}return pt(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),i=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(i),t.appendChild(n),t},t}(dt)),m=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,"durationchange",(function(e){return i.updateContent(e)})),i}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(J("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(Rt),m.prototype.labelText_="Remaining Time",m.prototype.controlText_="Remaining Time",dt.registerComponent("RemainingTimeDisplay",m),dt.registerComponent("LiveDisplay",function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.updateShowing(),i.on(i.player(),"durationchange",(function(e){return i.updateShowing(e)})),i}pt(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=J("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(J("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(document.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(dt)),tn=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}pt(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=J("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(Jn),tn.prototype.controlText_="Seek to live, currently playing live",dt.registerComponent("SeekToLive",tn),hi=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}pt(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){var e;this.enabled()&&(e=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},n.createEl=function(t,n,i){return void 0===i&&(i={}),(n=void 0===n?{}:n).className=n.className+" vjs-slider",n=T({tabIndex:0},n),i=T({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),e.prototype.createEl.call(this,t,n,i)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||M||e.preventDefault(),le(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;ce(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(ti(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){return e=pe(this.el_,e),this.vertical()?e.y:e.x},n.handleKeyDown=function(t){ct.isEventKey(t,"Left")||ct.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):ct.isEventKey(t,"Right")||ct.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(dt),dt.registerComponent("Slider",hi),dt.registerComponent("LoadProgressBar",function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.partEls_=[],i.on(t,"progress",(function(e){return i.update(e)})),i}pt(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=J("span",{className:"vjs-control-text"}),i=J("span",{textContent:this.localize("Loaded")}),r=document.createTextNode(": ");return this.percentageEl_=J("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),i=(e=e&&e.isLive()?e.seekableEnd():t.player_.duration(),t.player_.bufferedEnd()),r=t.partEls_;e=ni(i,e),t.percent_!==e&&(t.el_.style.width=e,$(t.percentageEl_,e),t.percent_=e);for(var a=0;a<n.length;a++){var s=n.start(a),o=n.end(a),u=r[a];u||(u=t.el_.appendChild(J()),r[a]=u),u.dataset.start===s&&u.dataset.end===o||(u.dataset.start=s,u.dataset.end=o,u.style.left=ni(s,i),u.style.width=ni(o-s,i))}for(var l=r.length;l>n.length;l--)t.el_.removeChild(r[l-1]);r.length=n.length}))},t}(dt)),dt.registerComponent("TimeTooltip",function(e){function t(t,n){return(n=e.call(this,t,n)||this).update=Qe(Ve(ht(n),n.update),30),n}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=he(this.el_),r=de(this.player_.el()),a=e.width*t;r&&i&&(t=e.left-r.left+a,r=e.width-a+(r.right-e.right),t<(e=i.width/2)?e+=e-t:r<e&&(e=r),e<0?e=0:e>i.width&&(e=i.width),e=Math.round(e),this.el_.style.right="-"+e+"px",this.write(n))},n.write=function(e){$(this.el_,e)},n.updateTime=function(e,t,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,s,o=r.player_.duration();o=r.player_.liveTracker&&r.player_.liveTracker.isLive()?((s=(a=r.player_.liveTracker.liveWindow())-t*a)<1?"":"-")+ei(s,a):ei(n,o),r.update(e,t,o),i&&i()}))},t}(dt)),nn=function(e){function t(t,n){return(n=e.call(this,t,n)||this).update=Qe(Ve(ht(n),n.update),30),n}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n,i=this.getChild("timeTooltip");i&&(n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),i.updateTime(e,t,n))},t}(dt),nn.prototype.options_={children:[]},V||I||nn.prototype.options_.children.push("timeTooltip"),dt.registerComponent("PlayProgressBar",nn),A=function(e){function t(t,n){return(n=e.call(this,t,n)||this).update=Qe(Ve(ht(n),n.update),30),n}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left=e.width*t+"px"}))},t}(dt),A.prototype.options_={children:["timeTooltip"]},dt.registerComponent("MouseTimeDisplay",A),xt=function(e){function t(t,n){return(n=e.call(this,t,n)||this).setEventHandlers_(),n}pt(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=Ve(this,this.update),this.update=Qe(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.on(document,"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===document.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==document.visibilityState){var i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,r=n.player_.duration();t&&t.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===e&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[ei(e,r),ei(r,r)],"{1} of {2}")),n.currentTime_=e,n.duration_=r),n.bar&&n.bar.update(de(n.el()),n.getProgress())})),i}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){_e(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),_e(e)){t||this.player_.scrubbing()||this.player_.scrubbing(!0);var n=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(.99<=n)return void i.seekToLiveEdge();var r;if(t=i.seekableStart(),(r=(r=(e=i.liveCurrentTime())<=(r=t+n*i.liveWindow())?e:r)<=t?t+.1:r)===1/0)return}else(r=n*this.player_.duration())===this.player_.duration()&&(r-=.1);this.userSeek_(r)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Tt(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n,i=this.player_.liveTracker;ct.isEventKey(t,"Space")||ct.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.handleAction(t)):ct.isEventKey(t,"Home")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(0)):ct.isEventKey(t,"End")?(t.preventDefault(),t.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(ct(t))?(t.preventDefault(),t.stopPropagation(),n=10*(ct.codes[ct(t)]-ct.codes[0])/100,i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)):ct.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):ct.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.off(document,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(hi),xt.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},V||I||xt.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),dt.registerComponent("SeekBar",xt),Mt=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.handleMouseMove=Qe(Ve(ht(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=Qe(Ve(ht(i),i.handleMouseSeek),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t,n,i,r,a=this.getChild("seekBar");a&&(t=a.getChild("playProgressBar"),n=a.getChild("mouseTimeDisplay"),(t||n)&&(r=he(i=a.el()),e=ti(e=pe(i,e).x,0,1),n&&n.update(r,e),t&&t.update(r,a.getProgress())))},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){var e;this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing()&&(e=this.getChild("seekBar"),this.player_.scrubbing(!1),e.videoWasPlaying&&Tt(this.player_.play())))},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(dt),Mt.prototype.options_={children:["seekBar"]},dt.registerComponent("ProgressControl",Mt),Nt=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return i.handlePictureInPictureChange(e)})),i.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return i.handlePictureInPictureEnabledChange(e)})),i.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),i.hide()):i.show()})),i.disable(),i}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){document.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(Jn),Nt.prototype.controlText_="Picture-in-Picture",dt.registerComponent("PictureInPictureToggle",Nt),F=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,"fullscreenchange",(function(e){return i.handleFullscreenChange(e)})),!1===document[t.fsApi_.fullscreenEnabled]&&i.disable(),i}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(Jn),F.prototype.controlText_="Fullscreen",dt.registerComponent("FullscreenToggle",F),dt.registerComponent("VolumeLevel",function(e){function t(){return e.apply(this,arguments)||this}return pt(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(dt)),dt.registerComponent("VolumeLevelTooltip",function(e){function t(t,n){return(n=e.call(this,t,n)||this).update=Qe(Ve(ht(n),n.update),30),n}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,i){if(!n){var r=de(this.el_),a=de(this.player_.el());if(n=e.width*t,!a||!r)return;t=e.left-a.left+n,a=e.width-n+(a.right-e.right),t<(e=r.width/2)?e+=e-t:a<e&&(e=a),e<0?e=0:e>r.width&&(e=r.width),this.el_.style.right="-"+e+"px"}this.write(i+"%")},n.write=function(e){$(this.el_,e)},n.updateVolume=function(e,t,n,i,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,n,i.toFixed(0)),r&&r()}))},t}(dt)),Rt=function(e){function t(t,n){return(n=e.call(this,t,n)||this).update=Qe(Ve(ht(n),n.update),30),n}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var i=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,(function(){n?i.el_.style.bottom=e.height*t+"px":i.el_.style.left=e.width*t+"px"}))},t}(dt),Rt.prototype.options_={children:["volumeLevelTooltip"]},dt.registerComponent("MouseVolumeLevelDisplay",Rt),m=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on("slideractive",(function(e){return i.updateLastVolume_(e)})),i.on(t,"volumechange",(function(e){return i.updateARIAAttributes(e)})),t.ready((function(){return i.updateARIAAttributes()})),i}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){_e(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t,n,i,r=this.getChild("mouseVolumeLevelDisplay");r&&(t=de(i=this.el()),n=this.vertical(),i=pe(i,e),i=ti(i=n?i.y:i.x,0,1),r.update(t,i,n)),_e(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(hi),m.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},V||I||m.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),m.prototype.playerEvent="volumechange",dt.registerComponent("VolumeBar",m),tn=function(e){function t(t,n){var i,r,a;return(n=void 0===n?{}:n).vertical=n.vertical||!1,void 0!==n.volumeBar&&!w(n.volumeBar)||(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),i=e.call(this,t,n)||this,r=ht(i),(a=t).tech_&&!a.tech_.featuresVolumeControl&&r.addClass("vjs-hidden"),r.on(a,"loadstart",(function(){a.tech_.featuresVolumeControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})),i.throttledHandleMouseMove=Qe(Ve(ht(i),i.handleMouseMove),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i.on("touchstart",(function(e){return i.handleMouseDown(e)})),i.on("mousemove",(function(e){return i.handleMouseMove(e)})),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}pt(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(dt),tn.prototype.options_={children:["volumeBar"]},dt.registerComponent("VolumeControl",tn),nn=function(e){function t(t,n){var i,r,a=e.call(this,t,n)||this;return i=ht(a),(r=t).tech_&&!r.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(r,"loadstart",(function(){r.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})),a.on(t,["loadstart","volumechange"],(function(e){return a.update(e)})),a}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();0===t?(this.player_.volume(n<.1?.1:n),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;V&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)ne(this.el_,"vjs-vol-"+n);te(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(Jn),nn.prototype.controlText_="Mute",dt.registerComponent("MuteToggle",nn),A=function(e){function t(t,n){var i;return void 0!==(n=void 0===n?{}:n).inline?n.inline=n.inline:n.inline=!0,void 0!==n.volumeControl&&!w(n.volumeControl)||(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(t,["loadstart"],(function(e){return i.volumePanelState_(e)})),i.on(i.muteToggle,"keyup",(function(e){return i.handleKeyPress(e)})),i.on(i.volumeControl,"keyup",(function(e){return i.handleVolumeControlKeyUp(e)})),i.on("keydown",(function(e){return i.handleKeyPress(e)})),i.on("mouseover",(function(e){return i.handleMouseOver(e)})),i.on("mouseout",(function(e){return i.handleMouseOut(e)})),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}pt(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){ct.isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),Ue(document,"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),Be(document,"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){ct.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(dt),A.prototype.options_={children:["muteToggle","volumeControl"]},dt.registerComponent("VolumePanel",A);var ii=function(e){function t(t,n){var i=e.call(this,t,n)||this;return n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",(function(e){return i.handleKeyDown(e)})),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}pt(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof dt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof dt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){(e=this.addChild(e))&&this.addEventListenerForItem(e)},n.createEl=function(){var t=this.options_.contentElType||"ul";return this.contentEl_=J(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),(t=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"})).appendChild(this.contentEl_),Ue(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||document.activeElement;this.children().some((function(e){return e.el()===t}))||(e=this.menuButton_)&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()},n.handleTapClick=function(e){var t;this.menuButton_&&(this.menuButton_.unpressButton(),t=this.children(),!Array.isArray(t)||(t=t.filter((function(t){return t.el()===e.target}))[0])&&"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())},n.handleKeyDown=function(e){ct.isEventKey(e,"Left")||ct.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(ct.isEventKey(e,"Right")||ct.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},t}(dt);dt.registerComponent("Menu",ii),xt=function(e){function t(t,n){var i;return(i=e.call(this,t,n=void 0===n?{}:n)||this).menuButton_=new Jn(t,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true"),n=Jn.prototype.buildCSSClass(),i.menuButton_.el_.className=i.buildCSSClass()+" "+n,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,n=function(e){return i.handleClick(e)},i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",n),i.on(i.menuButton_,"click",n),i.on(i.menuButton_,"keydown",(function(e){return i.handleKeyDown(e)})),i.on(i.menuButton_,"mouseenter",(function(){i.addClass("vjs-hover"),i.menu.show(),Ue(document,"keyup",i.handleMenuKeyUp_)})),i.on("mouseleave",(function(e){return i.handleMouseLeave(e)})),i.on("keydown",(function(e){return i.handleSubmenuKeyDown(e)})),i}pt(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e,t=new ii(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(e=J("li",{className:"vjs-menu-title",textContent:st(this.options_.title),tabIndex:-1}),e=new dt(this.player_,{el:e}),t.addItem(e)),this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+Jn.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Be(document,"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){ct.isEventKey(e,"Esc")||ct.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),ct.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(ct.isEventKey(e,"Up")||ct.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(ct.isEventKey(e,"Esc")||ct.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(ct.isEventKey(e,"Esc")||ct.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ct.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),V&&Y()||this.menu.focus())},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(dt),dt.registerComponent("MenuButton",xt),Mt=function(e){function t(t,n){var i=n.tracks;if((n=e.call(this,t,n)||this).items.length<=1&&n.hide(),!i)return ht(n);var r=Ve(ht(n),n.update);return i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),i.addEventListener("labelchange",r),n.player_.on("ready",r),n.player_.on("dispose",(function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r),i.removeEventListener("labelchange",r)})),n}return pt(t,e),t}(xt),dt.registerComponent("TrackButton",Mt);var ri=["Tab","Esc","Up","Down","Right","Left"];Nt=function(e){function t(t,n){return(t=e.call(this,t,n)||this).selectable=n.selectable,t.isSelected_=n.selected||!1,t.multiSelectable=n.multiSelectable,t.selected(t.isSelected_),t.selectable?t.multiSelectable?t.el_.setAttribute("role","menuitemcheckbox"):t.el_.setAttribute("role","menuitemradio"):t.el_.setAttribute("role","menuitem"),t}pt(t,e);var n=t.prototype;return n.createEl=function(t,n,i){return this.nonIconControl=!0,(i=e.prototype.createEl.call(this,"li",T({className:"vjs-menu-item",tabIndex:-1},n),i)).replaceChild(J("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i},n.handleKeyDown=function(t){ri.some((function(e){return ct.isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(C),dt.registerComponent("MenuItem",Nt);var ai=function(e){function t(t,n){var i,r,a=n.track,o=t.textTracks();function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(ht(i),t)}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(ht(i),t)}return n.label=a.label||a.language||"Unknown",n.selected="showing"===a.mode,(i=e.call(this,t,n)||this).track=a,i.kinds=(n.kinds||[n.kind||i.track.kind]).filter(Boolean),t.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",l),i.on("dispose",(function(){t.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",l)})),void 0===o.onchange&&i.on(["tap","click"],(function(){if("object"!=s(window.Event))try{r=new window.Event("change")}catch(e){}r||(r=document.createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(r)})),i.handleTracksChange(),i}pt(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,i=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){var t;"showing"===this.track.mode&&((t=this.player_.cache_.selectedLanguage)&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Nt);dt.registerComponent("TextTrackMenuItem",ai);var si=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}pt(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(ai);dt.registerComponent("OffTextTrackMenuItem",si),F=function(e){function t(t,n){return(n=void 0===n?{}:n).tracks=t.textTracks(),e.call(this,t,n)||this}return pt(t,e),t.prototype.createItems=function(e,t){var n;void 0===t&&(t=ai),this.label_&&(n=this.label_+" off"),(e=void 0===e?[]:e).push(new si(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a,s=i[r];-1<this.kinds_.indexOf(s.kind)&&((a=new t(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass("vjs-"+s.kind+"-menu-item"),e.push(a))}return e},t}(Mt),dt.registerComponent("TextTrackButton",F);var oi=function(e){function t(t,n){var i=n.track,r=n.cue,a=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=r.text,n.selected=r.startTime<=a&&a<r.endTime,(n=e.call(this,t,n)||this).track=i,n.cue=r,n}return pt(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(Nt);dt.registerComponent("ChaptersTrackMenuItem",oi),Rt=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r.selectCurrentItem_=function(){r.items.forEach((function(e){e.selected(r.track_.activeCues[0]===e.cue)}))},r}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){t&&t.track&&"chapters"!==t.track.kind||((t=this.findChaptersTrack())!==this.track_?(this.setTrack(t),e.prototype.update.call(this)):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&e.prototype.update.call(this))},n.setTrack=function(e){var t;this.track_!==e&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null),this.track_=e,this.track_&&(this.track_.mode="hidden",(e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)))},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(st(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n];r=new oi(this.player_,{track:this.track_,cue:r}),e.push(r)}return e},t}(F),Rt.prototype.kind_="chapters",Rt.prototype.controlText_="Chapters",dt.registerComponent("ChaptersButton",Rt),hi=function(e){function t(t,n,i){i=e.call(this,t,n,i)||this;var r=t.textTracks(),a=Ve(ht(i),i.handleTracksChange);return r.addEventListener("change",a),i.on("dispose",(function(){r.removeEventListener("change",a)})),i}pt(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(F),hi.prototype.kind_="descriptions",hi.prototype.controlText_="Descriptions",dt.registerComponent("DescriptionsButton",hi),m=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(F),m.prototype.kind_="subtitles",m.prototype.controlText_="Subtitles",dt.registerComponent("SubtitlesButton",m);var ui=function(e){function t(t,n){return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(t=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),t.controlText(", opens "+n.kind+" settings dialog"),t}return pt(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(ai);dt.registerComponent("CaptionSettingsMenuItem",ui),tn=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ui(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(F),tn.prototype.kind_="captions",tn.prototype.controlText_="Captions",dt.registerComponent("CaptionsButton",tn);var li=function(e){function t(){return e.apply(this,arguments)||this}return pt(t,e),t.prototype.createEl=function(t,n,i){return i=(n=e.prototype.createEl.call(this,t,n,i)).querySelector(".vjs-menu-item-text"),"captions"===this.options_.track.kind&&(i.appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(J("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),n},t}(ai);dt.registerComponent("SubsCapsMenuItem",li),nn=function(e){function t(t,n){return(n=e.call(this,t,n=void 0===n?{}:n)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(st(n.label_)),n}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ui(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,li)},t}(F),nn.prototype.kinds_=["captions","subtitles"],nn.prototype.controlText_="Subtitles",dt.registerComponent("SubsCapsButton",nn);var ci=function(e){function t(t,n){var i,r=n.track,a=t.audioTracks();function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(ht(i),t)}return n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=e.call(this,t,n)||this).track=r,i.addClass("vjs-"+r.kind+"-menu-item"),a.addEventListener("change",s),i.on("dispose",(function(){a.removeEventListener("change",s)})),i}pt(t,e);var n=t.prototype;return n.createEl=function(t,n,i){return i=(n=e.prototype.createEl.call(this,t,n,i)).querySelector(".vjs-menu-item-text"),"main-desc"===this.options_.track.kind&&(i.appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(J("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n},n.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),i=0;i<n.length;i++){var r=n[i];r!==this.track&&(r.enabled=r===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Nt);dt.registerComponent("AudioTrackMenuItem",ci),A=function(e){function t(t,n){return(n=void 0===n?{}:n).tracks=t.audioTracks(),e.call(this,t,n)||this}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new ci(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},t}(Mt),A.prototype.controlText_="Audio Track",dt.registerComponent("AudioTrackButton",A);var di=function(e){function t(t,n){var i,r=n.rate,a=parseFloat(r,10);return n.label=r,n.selected=a===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=r,i.rate=a,i.on(t,"ratechange",(function(e){return i.update(e)})),i}pt(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Nt);di.prototype.contentElType="button",dt.registerComponent("PlaybackRateMenuItem",di),C=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(t,"loadstart",(function(e){return i.updateVisibility(e)})),i.on(t,"ratechange",(function(e){return i.updateLabel(e)})),i.on(t,"playbackrateschange",(function(e){return i.handlePlaybackRateschange(e)})),i}pt(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=J("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;0<=n;n--)t.push(new di(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),n=this.playbackRates();t=(n.indexOf(t)+1)%n.length,this.player().playbackRate(n[t])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(xt),C.prototype.controlText_="Playback Rate",dt.registerComponent("PlaybackRateMenuButton",C),Rt=function(e){function t(){return e.apply(this,arguments)||this}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,i){return void 0===t&&(t="div"),void 0===i&&(i={}),(n=void 0===n?{}:n).className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,i)},t}(dt),dt.registerComponent("Spacer",Rt),dt.registerComponent("CustomControlSpacer",function(e){function t(){return e.apply(this,arguments)||this}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},t}(Rt)),hi=function(e){function t(){return e.apply(this,arguments)||this}return pt(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(dt),hi.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in document&&hi.prototype.options_.children.splice(hi.prototype.options_.children.length-1,0,"pictureInPictureToggle"),dt.registerComponent("ControlBar",hi),m=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,"error",(function(e){return i.open(e)})),i}pt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Et),m.prototype.options_=y({},Et.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),dt.registerComponent("ErrorDisplay",m);var hi,pi="vjs-text-track-settings",fi={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[tn=["#000","Black"],xt=["#FFF","White"],Nt=["#F00","Red"],Mt=["#0F0","Green"],F=["#00F","Blue"],C=["#FF0","Yellow"],A=["#F0F","Magenta"],nn=["#0FF","Cyan"]]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Rt=["1","Opaque"],hi=["0.5","Semi-Transparent"],m=["0","Transparent"]]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[xt,tn,Nt,Mt,F,C,A,nn]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Rt,hi]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[m,hi,Rt]}};function mi(e,t){if((e=t?t(e):e)&&"none"!==e)return e}fi.windowColor.options=fi.backgroundColor.options,dt.registerComponent("TextTrackSettings",function(e){function t(t,n){var i;return n.temporary=!1,(i=e.call(this,t,n)||this).updateDisplay=i.updateDisplay.bind(ht(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=J("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),b(fi,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}pt(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=(e=fi[e]).id.replace("%s",this.id_),a=[t,r].join(" ").trim();return["<"+n+' id="'+r+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(e.label),"</"+n+">",'<select aria-labelledby="'+a+'">'].concat(e.options.map((function(e){var t=r+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+a+" "+t+'">',i.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return J("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return J("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return J("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,i=this;return t=function(e,t,n){var r;return void 0!==(r=i.$(t.selector),t=t.parser,t=mi(r.options[r.options.selectedIndex].value,t))&&(e[n]=t),e},void 0===(n={})&&(n=0),_(e=fi).reduce((function(n,i){return t(n,e[i],i)}),n)},n.setValues=function(e){var t=this;b(fi,(function(n,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(mi(e.options[i].value,n)===t){e.selectedIndex=i;break}}(t.$(n.selector),e[i],n.parser)}))},n.setDefaults=function(){var e=this;b(fi,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(window.localStorage.getItem(pi))}catch(e){p.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?window.localStorage.setItem(pi,JSON.stringify(e)):window.localStorage.removeItem(pi)}catch(e){p.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=(t=this.player_.controlBar)&&t.subsCapsButton,t=t&&t.captionsButton;e?e.focus():t&&t.focus()},t}(Et)),dt.registerComponent("ResizeManager",function(e){function t(t,n){var i,r=n.ResizeObserver||window.ResizeObserver,a=ot({createEl:!(r=null!==n.ResizeObserver&&r),reportTouchActivity:!1},n);return(i=e.call(this,t,a)||this).ResizeObserver=n.ResizeObserver||window.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(e,t,n,i){var r;function a(){var t=this,n=arguments,a=function(){a=r=null,e.apply(t,n)};i.clearTimeout(r),r=i.setTimeout(a,100)}return void 0===i&&(i=window),a.cancel=function(){i.clearTimeout(r),r=null},a}((function(){i.resizeHandler()}),0,0,ht(i)),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){var e,t;i.el_&&i.el_.contentWindow&&(e=i.debouncedHandler_,t=i.unloadListener_=function(){Be(this,"resize",e),Be(this,"unload",t),t=null},Ue(i.el_.contentWindow,"unload",t),Ue(i.el_.contentWindow,"resize",e))},i.one("load",i.loadListener_)),i}pt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(dt));var gi={trackingThreshold:20,liveTolerance:15};function yi(e){if((i=e.el()).hasAttribute("src"))return e.triggerSourceset(i.src),1;var t=e.$$("source"),n=[],i="";if(t.length){for(var r=0;r<t.length;r++){var a=t[r].src;a&&-1===n.indexOf(a)&&n.push(a)}return!!n.length&&(1===n.length&&(i=n[0]),e.triggerSourceset(i),!0)}}function vi(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n}function _i(e){var t,n,i,r=e.el();r.resetSourceWatch_||(t={},n=vi([e.el(),window.HTMLMediaElement.prototype,window.Element.prototype,Si],"innerHTML"),i=function(t){return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=t.apply(r,i);return yi(e),s}},["append","appendChild","insertAdjacentHTML"].forEach((function(e){r[e]&&(t[e]=r[e],r[e]=i(t[e]))})),Object.defineProperty(r,"innerHTML",ot(n,{set:i(n.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.defineProperty(r,"innerHTML",n)},e.one("sourceset",r.resetSourceWatch_))}function bi(e,t,n,i){function r(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})}var a={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return(i=void 0===i||i)&&(a.set=r),Object.defineProperty(e,t,a)}dt.registerComponent("LiveTracker",function(e){function t(t,n){n=ot(gi,n,{createEl:!1});var i=e.call(this,t,n)||this;return i.handleVisibilityChange_=function(e){return i.handleVisibilityChange(e)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",(function(e){return i.handleDurationchange(e)})),i.on(i.player_,"canplay",(function(){return i.toggleTracking()})),N&&"hidden"in document&&"visibilityState"in document&&i.on(document,"visibilitychange",i.handleVisibilityChange_),i}pt(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(document.hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e,t=this.player_.seekable();t&&t.length&&(e=Number(window.performance.now().toFixed(4)),t=-1===this.lastTime_?0:(e-this.lastTime_)/1e3,this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+t,e=this.liveCurrentTime(),t=this.player_.currentTime(),t=this.player_.paused()||this.seekedBehindLive_||Math.abs(e-t)>this.options_.liveTolerance,(t=!(!this.timeupdateSeen_||e===1/0)&&t)!==this.behindLiveEdge_&&(this.behindLiveEdge_=t,this.trigger("liveedgechange")))},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<e,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(document,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(dt));var Ti,Si=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=document.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=document.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,n),this.innerHTML}}),wi=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Dt(window.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return window.Element.prototype.setAttribute.call(this,"src",e),e}}),Ei=function(e){function t(t,n){var i=e.call(this,t,n)||this,r=(n=t.source,!1);if(i.featuresVideoFrameCallback=i.featuresVideoFrameCallback&&"VIDEO"===i.el_.tagName,n&&(i.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?i.setSource(n):i.handleLateInit_(i.el_),t.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var a=i.el_.childNodes,s=a.length,o=[];s--;){var u=a[s];"track"===u.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(u),i.remoteTextTracks().addTrack(u.track),i.textTracks().addTrack(u.track),r||i.el_.hasAttribute("crossorigin")||!Ot(u.src)||(r=!0)):o.push(u))}for(var l=0;l<o.length;l++)i.el_.removeChild(o[l])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&r&&p.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(j||H||L)&&!0===t.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}pt(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(e){var t,n,i,r;e.featuresSourceset&&((t=e.el()).resetSourceset_||(n=vi([e.el(),window.HTMLMediaElement.prototype,wi],"src"),i=t.setAttribute,r=t.load,Object.defineProperty(t,"src",ot(n,{set:function(i){return i=n.set.call(t,i),e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,r){return r=i.call(t,n,r),/src/i.test(n)&&e.triggerSourceset(t.src),r},t.load=function(){var n=r.call(t);return yi(e)||(e.triggerSourceset(""),_i(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):yi(e)||_i(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}))}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){t=[];for(var e=0;e<n.length;e++){var i=n[e];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}}var t,n=this.textTracks();function i(){for(var e=0;e<t.length;e++){var r=t[e];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}n.removeEventListener("change",i)}e(),n.addEventListener("change",e),this.on("dispose",(function(){return n.removeEventListener("change",e)})),this.on("webkitbeginfullscreen",(function(){n.removeEventListener("change",e),n.removeEventListener("change",i),n.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",i)}))},n.overrideNative_=function(e,t){var n,i=this;t===this["featuresNative"+e+"Tracks"]&&(this[(n=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach((function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n))},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t,n,i=this,r=$t[e],a=this.el()[r.getterName],s=this[r.getterName]();this["featuresNative"+r.capitalName+"Tracks"]&&a&&a.addEventListener&&(n=function(){for(var e=[],t=0;t<s.length;t++){for(var n=!1,i=0;i<a.length;i++)if(a[i]===s[t]){n=!0;break}n||e.push(s[t])}for(;e.length;)s.removeTrack(e.shift())},this[r.getterName+"Listeners_"]=t={change:function(t){var n={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(n),"text"===e&&i[Zt.remoteText.getterName]().trigger(n)},addtrack:function(e){s.addTrack(e.track)},removetrack:function(e){s.removeTrack(e.track)}},Object.keys(t).forEach((function(e){var n=t[e];a.addEventListener(e,n),i.on("dispose",(function(t){return a.removeEventListener(e,n)}))})),this.on("loadstart",n),this.on("dispose",(function(e){return i.off("loadstart",n)})))},n.proxyNativeTracks_=function(){var e=this;$t.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e,n=this.options_.tag;n&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(n?(e=n.cloneNode(!0),n.parentNode&&n.parentNode.insertBefore(e,n),t.disposeMediaElement(n),n=e):(n=document.createElement("video"),e=ot({},this.options_.tag&&ae(this.options_.tag)),j&&!0===this.options_.nativeControlsForTouch||delete e.controls,re(n,T(e,{id:this.options_.techId,class:"vjs-tech"}))),n.playerId=this.options_.playerId),void 0!==this.options_.preload&&oe(n,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(n.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],r=0;r<i.length;r++){var a=i[r],s=this.options_[a];void 0!==s&&(s?oe(n,a,a):ue(n,a),n[a]=s)}return n},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Q?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){p(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&I&&M&&0===this.el_.currentTime?(this.on("timeupdate",(function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e,t,n=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))},this.on("webkitbeginfullscreen",t),this.on("dispose",(function(){n.off("webkitbeginfullscreen",t),n.off("webkitendfullscreen",e)})))},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=window.navigator&&window.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Tt(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,i):e.prototype.addTextTrack.call(this,t,n,i)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=document.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){return n=e.prototype.addRemoteTextTrack.call(this,t,n),this.featuresNativeTextTracks&&this.el().appendChild(n),n},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)t!==n[i]&&t!==n[i].track||this.el().removeChild(n[i])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&"function"==typeof window.performance.now?e.creationTime=window.performance.now():window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.navigationStart&&(e.creationTime=window.Date.now()-window.performance.timing.navigationStart),e},t}(Mn);bi(Ei,"TEST_VID",(function(){if(z()){var e=document.createElement("video"),t=document.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),Ei.isSupported=function(){try{Ei.TEST_VID.volume=.5}catch(e){return!1}return!(!Ei.TEST_VID||!Ei.TEST_VID.canPlayType)},Ei.canPlayType=function(e){return Ei.TEST_VID.canPlayType(e)},Ei.canPlaySource=function(e,t){return Ei.canPlayType(e.type)},Ei.canControlVolume=function(){try{var e=Ei.TEST_VID.volume;Ei.TEST_VID.volume=e/2+.1;var t=e!==Ei.TEST_VID.volume;return t&&V?(window.setTimeout((function(){Ei&&Ei.prototype&&(Ei.prototype.featuresVolumeControl=e!==Ei.TEST_VID.volume)})),!1):t}catch(e){return!1}},Ei.canMuteVolume=function(){try{var e=Ei.TEST_VID.muted;return Ei.TEST_VID.muted=!e,Ei.TEST_VID.muted?oe(Ei.TEST_VID,"muted","muted"):ue(Ei.TEST_VID,"muted"),e!==Ei.TEST_VID.muted}catch(e){return!1}},Ei.canControlPlaybackRate=function(){if(I&&M&&R<58)return!1;try{var e=Ei.TEST_VID.playbackRate;return Ei.TEST_VID.playbackRate=e/2+.1,e!==Ei.TEST_VID.playbackRate}catch(e){return!1}},Ei.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(document.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ei.supportsNativeTextTracks=function(){return Q||V&&M},Ei.supportsNativeVideoTracks=function(){return!(!Ei.TEST_VID||!Ei.TEST_VID.videoTracks)},Ei.supportsNativeAudioTracks=function(){return!(!Ei.TEST_VID||!Ei.TEST_VID.audioTracks)},Ei.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];bi(Ei.prototype,t,(function(){return Ei[n]()}),!0)})),Ei.prototype.featuresVolumeControl=Ei.canControlVolume(),Ei.prototype.movingMediaElementInDOM=!V,Ei.prototype.featuresFullscreenResize=!0,Ei.prototype.featuresProgressEvents=!0,Ei.prototype.featuresTimeupdateEvents=!0,Ei.prototype.featuresVideoFrameCallback=!(!Ei.TEST_VID||!Ei.TEST_VID.requestVideoFrameCallback),Ei.patchCanPlayType=function(){4<=D&&!O&&!M&&(Ti=Ei.TEST_VID&&Ei.TEST_VID.constructor.prototype.canPlayType,Ei.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Ti.call(this,e)})},Ei.unpatchCanPlayType=function(){var e=Ei.TEST_VID.constructor.prototype.canPlayType;return Ti&&(Ei.TEST_VID.constructor.prototype.canPlayType=Ti),e},Ei.patchCanPlayType(),Ei.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ei.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ei.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ei.prototype["set"+st(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Ei.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Ei.prototype["set"+st(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ei.prototype[e]=function(){return this.el_[e]()}})),Mn.withSourceHandlers(Ei),Ei.nativeSourceHandler={},Ei.nativeSourceHandler.canPlayType=function(e){try{return Ei.TEST_VID.canPlayType(e)}catch(e){return""}},Ei.nativeSourceHandler.canHandleSource=function(e,t){return e.type?Ei.nativeSourceHandler.canPlayType(e.type):e.src?(e=Lt(e.src),Ei.nativeSourceHandler.canPlayType("video/"+e)):""},Ei.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ei.nativeSourceHandler.dispose=function(){},Ei.registerSourceHandler(Ei.nativeSourceHandler),Mn.registerTech("Html5",Ei);var ki=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ci={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ai=["tiny","xsmall","small","medium","large","xlarge","huge"],Pi={};Ai.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Pi[e]="vjs-layout-"+t}));var Ii={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Di=function(e){function n(i,r,a){var s,u;if(i.id=i.id||r.id||"vjs_video_"+De++,(r=T(n.getTagSettings(i),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof i.closest){var l=i.closest("[lang]");l&&l.getAttribute&&(r.language=l.getAttribute("lang"))}else for(var c=i;c&&1===c.nodeType;){if(ae(c).hasOwnProperty("lang")){r.language=c.getAttribute("lang");break}c=c.parentNode}if((s=e.call(this,null,r,a)||this).boundDocumentFullscreenChange_=function(e){return s.documentFullscreenChange_(e)},s.boundFullWindowOnEscKey_=function(e){return s.fullWindowOnEscKey(e)},s.boundUpdateStyleEl_=function(e){return s.updateStyleEl_(e)},s.boundApplyInitTime_=function(e){return s.applyInitTime_(e)},s.boundUpdateCurrentBreakpoint_=function(e){return s.updateCurrentBreakpoint_(e)},s.boundHandleTechClick_=function(e){return s.handleTechClick_(e)},s.boundHandleTechDoubleClick_=function(e){return s.handleTechDoubleClick_(e)},s.boundHandleTechTouchStart_=function(e){return s.handleTechTouchStart_(e)},s.boundHandleTechTouchMove_=function(e){return s.handleTechTouchMove_(e)},s.boundHandleTechTouchEnd_=function(e){return s.handleTechTouchEnd_(e)},s.boundHandleTechTap_=function(e){return s.handleTechTap_(e)},s.isFullscreen_=!1,s.log=f(s.id_),s.fsApi_=o,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");return s.tag=i,s.tagAttributes=i&&ae(i),s.language(s.options_.language),r.languages?(u={},Object.getOwnPropertyNames(r.languages).forEach((function(e){u[e.toLowerCase()]=r.languages[e]})),s.languages_=u):s.languages_=n.prototype.options_.languages,s.resetCache_(),s.poster_=r.poster||"",s.controls_=!!r.controls,i.controls=!1,i.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],i.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach((function(e){if("function"!=typeof s[e])throw new Error('plugin "'+e+'" does not exist')})),s.scrubbing_=!1,s.el_=s.createEl(),nt(ht(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(Ue(document,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_),a=ot(s.options_),r.plugins&&Object.keys(r.plugins).forEach((function(e){s[e](r.plugins[e])})),r.debug&&s.debug(!0),s.options_.playerOptions=a,s.middleware_=[],s.playbackRates(r.playbackRates),s.initChildren(),s.isAudio("audio"===i.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),j&&s.addClass("vjs-touch-enabled"),V||s.addClass("vjs-workinghover"),n.players[s.id_]=ht(s),i=t.split(".")[0],s.addClass("vjs-v"+i),s.userActive(!0),s.reportUserActivity(),s.one("play",(function(e){return s.listenForUserActivity_(e)})),s.on("stageclick",(function(e){return s.handleStageClick_(e)})),s.on("keydown",(function(e){return s.handleKeyDown(e)})),s.on("languagechange",(function(e){return s.handleLanguagechange(e)})),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",(function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)})),s}pt(n,e);var i=n.prototype;return i.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Be(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Be(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),n.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Nn[this.id()]=null,en.names.forEach((function(e){e=en[e],(e=t[e.getterName]())&&e.off&&e.off()})),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},i.createEl=function(){var t,n=this.tag,i=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();i?t=this.el_=n.parentNode:r||(t=this.el_=e.prototype.createEl.call(this,"div"));var a,s,o=ae(n);if(r){for(t=this.el_=n,n=this.tag=document.createElement("video");t.children.length;)n.appendChild(t.firstChild);ee(t,"video-js")||te(t,"video-js"),t.appendChild(n),i=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(e){}}))}n.setAttribute("tabindex","-1"),o.tabindex="-1",(N||M&&B)&&(n.setAttribute("role","application"),o.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach((function(e){r&&"class"===e||t.setAttribute(e,o[e]),r&&n.setAttribute(e,o[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",(n.player=t.player=this).addClass("vjs-paused"),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=Pe("vjs-styles-dimensions"),a=Te(".vjs-styles-defaults"),(s=Te("head")).insertBefore(this.styleEl_,a?a.nextSibling:s.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var u=n.getElementsByTagName("a"),l=0;l<u.length;l++){var c=u.item(l);te(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!i&&n.parentNode.insertBefore(t,n),Z(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t},i.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):p.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},i.width=function(e){return this.dimension("width",e)},i.height=function(e){return this.dimension("height",e)},i.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?p.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},i.fluid=function(e){var t,n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,et(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),t=function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)},et(e=this)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){var e,t,n,i;!0!==window.VIDEOJS_NO_DYNAMIC_STYLE?(i=(n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/n[0],e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*i,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Ie(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*i+"%;\n      }\n    ")):(t="number"==typeof this.width_?this.width_:this.options_.width,n="number"==typeof this.height_?this.height_:this.options_.height,(i=this.tech_&&this.tech_.el())&&(0<=t&&(i.width=t),0<=n&&(i.height=n)))},i.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=st(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Mn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay(),s={source:t,autoplay:a=!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};if(en.names.forEach((function(e){e=en[e],s[e.getterName]=n[e.privateName]})),T(s,this.options_[i]),T(s,this.options_[r]),T(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime),!(e=Mn.getTech(e)))throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new e(s),this.tech_.ready(Ve(this,this.handleTechReady_),!0),function(e,t){e.forEach((function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return n.addCue(e)}))})),t.textTracks()}(this.textTracksJson_||[],this.tech_),ki.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech"+st(e)+"_"](t)}))})),Object.keys(Ci).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ci[e]+"_"].bind(n),event:t}):n["handleTech"+Ci[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return n.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||Z(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var e=this;en.names.forEach((function(t){t=en[t],e[t.privateName]=e[t.getterName]()})),this.textTracksJson_=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=St(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(St))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(e){return void 0===e&&p.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},i.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,i=function(){var e=t.muted();function n(){t.muted(e)}t.muted(!0),t.playTerminatedQueue_.push(n);var i=t.play();if(bt(i))return i.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():i():bt(n=this.play())&&(n=n.catch(i)),bt(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},i.updateSourceCaches_=function(e){var t=e=void 0===e?"":e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return Qn(t)}(this,t)),this.cache_.source=ot({},e,{src:t,type:n}),n=this.cache_.sources.filter((function(e){return e.src&&e.src===t}));for(var i=[],r=this.$$("source"),a=[],s=0;s<r.length;s++){var o=ae(r[s]);i.push(o),o.src&&o.src===t&&a.push(o.src)}a.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},i.handleTechSourceset_=function(e){var t,n,i,r=this;this.changingSrc_||(t=function(e){return r.updateSourceCaches_(e)},n=this.currentSource().src,i=e.src,n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(this.lastSource_&&(this.lastSource_.tech===i||this.lastSource_.player===n)||(t=function(){})),t(i),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){"sourceset"!==e.type&&(e=r.techGet("currentSrc"),r.lastSource_.tech=e,r.updateSourceCaches_(e))}))),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},i.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(p.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Tt(this.play()):this.pause()))},i.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(e){var t=e.target.player;t&&t!==this||(e=this.el(),!(t=document[this.fsApi_.fullscreenElement]===e)&&e.matches?t=e.matches(":"+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(t))},i.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},i.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var e=this.tech_.error();this.error(e)},i.handleTechTextData_=function(){this.trigger("textdata",1<arguments.length?arguments[1]:null)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},i.techCall_=function(e,t){this.ready((function(){if(e in Fn)return n=this.middleware_,i=this.tech_,r=t,i[i=e](n.reduce(Vn(i),r));if(e in Hn)return Bn(this.middleware_,this.tech_,e,t);var n,i,r;try{this.tech_&&this.tech_[e](t)}catch(n){throw p(n),n}}),!0)},i.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in jn)return t=this.middleware_,n=this.tech_,i=e,t.reduceRight(Vn(i),n[i]());if(e in Hn)return Bn(this.middleware_,this.tech_,e);var t,n,i;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw p("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw p("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw p(t),t}}},i.play=function(){var e=this,t=this.options_.Promise||window.Promise;return t?new t((function(t){e.play_(t)})):this.play_()},i.play_=function(e){var t=this;if(this.playCallbacks_.push(e=void 0===e?Tt:e),e=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!e)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(e||!Q&&!V||this.load());null===(e=this.techGet_("play"))?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(e)},i.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},i.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},i.pause=function(){this.techCall_("pause")},i.paused=function(){return!1!==this.techGet_("paused")},i.played=function(){return this.techGet_("played")||gt(0,0)},i.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var e;return(e=this.techGet_("buffered"))&&e.length?e:gt(0,0)},i.bufferedPercent=function(){return yt(this.buffered(),this.duration())},i.bufferedEnd=function(){var e=this.buffered(),t=this.duration();return t<(e=e.end(e.length-1))?t:e},i.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},i.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},i.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},i.requestFullscreen=function(e){var t=this.options_.Promise||window.Promise;if(t){var n=this;return new t((function(t,i){function r(){n.off("fullscreenerror",s),n.off("fullscreenchange",a)}function a(){r(),t()}function s(e,t){r(),i(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",s);var o=n.requestFullscreenHelper_(e);o&&(o.then(r,r),o.then(t,i))}))}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(e){var t=this;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(n=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](n);return n&&n.then((function(){return t.isFullscreen(!0)}),(function(){return t.isFullscreen(!1)})),n}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var e=this.options_.Promise||window.Promise;if(e){var t=this;return new e((function(e,n){function i(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){i(),e()}function a(e,t){i(),n(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var s=t.exitFullscreenHelper_();s&&(s.then(i,i),s.then(e,n))}))}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=document[this.fsApi_.exitFullscreen]();return t&&Tt(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,Ue(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",te(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(e){ct.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Be(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,ne(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in document)return document.exitPictureInPicture()},i.handleKeyDown=function(e){var t=this.options_.userActions;t&&t.hotkeys&&(function(e){var t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))}(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))},i.handleHotkeys=function(e){var t=(i=this.options_.userActions?this.options_.userActions.hotkeys:{}).fullscreenKey,n=void 0===(n=i.muteKey)?function(e){return ct.isEventKey(e,"m")}:n,i=void 0===(i=i.playPauseKey)?function(e){return ct.isEventKey(e,"k")||ct.isEventKey(e,"Space")}:i;(void 0===t?function(e){return ct.isEventKey(e,"f")}:t).call(this,e)?(e.preventDefault(),e.stopPropagation(),t=dt.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)):n.call(this,e)?(e.preventDefault(),e.stopPropagation(),dt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):i.call(this,e)&&(e.preventDefault(),e.stopPropagation(),dt.getComponent("PlayToggle").prototype.handleClick.call(this,e))},i.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=Mn.getTech(r);if(a=a||dt.getComponent(r)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else p.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.selectSource=function(e){function t(e,t,n){var i;return e.some((function(e){return t.some((function(t){if(i=n(e,t))return!0}))})),i}var n,i=this,r=this.options_.techOrder.map((function(e){return[e,Mn.getTech(e)]})).filter((function(e){var t=e[0];return(e=e[1])?e.isSupported():(p.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),a=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return(a=this.options_.sourceOrder?t(e,r,(n=a,function(e,t){return n(t,e)})):t(r,e,a))||!1},i.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i,r,a=qn(e);a.length?(this.changingSrc_=!0,t||(this.cache_.sources=a),this.updateSourceCaches_(a[0]),function(e,t,n){e.setTimeout((function(){return function e(t,n,i,r,a,s){void 0===t&&(t={}),void 0===n&&(n=[]),void 0===a&&(a=[]),void 0===s&&(s=!1);var o=n,u=(n=o[0],o.slice(1));if("string"==typeof n)e(t,Rn[n],i,r,a,s);else if(n){var l=function(e,t){var n=Nn[e.id()],i=null;if(null==n)return i=t(e),Nn[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=(s=n[r])[0],s=s[1];a===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}(r,n);if(!l.setSource)return a.push(l),e(t,u,i,r,a,s);l.setSource(T({},t),(function(n,o){return n?e(t,u,i,r,a,s):(a.push(l),void e(o,t.type===o.type?u:Rn[o.type],i,r,a,s))}))}else u.length?e(t,u,i,r,a,s):s?i(t,a):e(t,Rn["*"],i,r,a,!0)}(t,Rn[t.type],n,e)}),1)}(this,a[0],(function(e,i){var r;return n.middleware_=i,t||(n.cache_.sources=a),n.updateSourceCaches_(e),n.src_(e)?1<a.length?n.handleSrc_(a.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void n.triggerReady()):(i=i,r=n.tech_,void i.forEach((function(e){return e.setTech&&e.setTech(r)})))})),this.options_.retryOnError&&1<a.length&&(r=function(){n.off("error",i)},this.one("error",i=function(){n.error(null),n.handleSrc_(a.slice(1),!0)}),this.one("playing",r),this.resetRetryOnError_=function(){n.off("error",i),n.off("playing",r)})):this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},i.src=function(e){return this.handleSrc_(e,!1)},i.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,st(t)!==st(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){i.changingSrc_=!1}))):this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1)},i.load=function(){this.techCall_("load")},i.reset=function(){var e=this,t=this.options_.Promise||window.Promise;this.paused()||!t?this.doReset_():Tt(this.play().then((function(){return e.doReset_()})))},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),et(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var e=(t=this.controlBar||{}).durationDisplay,t=t.remainingTimeDisplay;e&&e.updateContent(),t&&t.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},i.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},i.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},i.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},i.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){var e;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},i.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(r("beforeerror").forEach((function(n){S(n=n(t,e))&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new vt(e),this.addClass("vjs-error"),p.error("(CODE:"+this.error_.code+" "+vt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),r("error").forEach((function(e){return e(t,t.error_)}))},i.reportUserActivity=function(e){this.userActivity_=!0},i.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var e,t,n,i,r=Ve(this,this.reportUserActivity),a=function(t){r(),this.clearInterval(e)};this.on("mousedown",(function(){r(),this.clearInterval(e),e=this.setInterval(r,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())})),this.on("mouseup",a),this.on("mouseleave",a),!(a=this.getChild("controlBar"))||V||I||(a.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",r),this.on("keyup",r),this.setInterval((function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i),(e=this.options_.inactivityTimeout)<=0||(i=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e)))}),250)},i.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},i.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},i.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),i=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")},i.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},i.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||window.Promise;if(n){if(e){var i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),n.all(i).then((function(){return t.enableAudioOnlyUI_()}))}return n.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},i.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||window.Promise;return n?e?(this.audioOnlyMode()?this.audioOnlyMode(!1):n.resolve()).then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},i.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},i.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},i.removeRemoteTextTrack=function(e){var t=(t=(e=void 0===e?{}:e).track)||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),et(this)&&this.trigger("languagechange"))},i.languages=function(){return ot(n.prototype.options_.languages,this.languages_)},i.toJSON=function(){var e=ot(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=ot(i)).player=void 0,e.tracks[n]=i}return e},i.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new Et(this,t);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Ai.length;n++){var i=Ai[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Pi[e]),this.addClass(Pi[i]),this.breakpoint_=i;break}}},i.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},i.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=T({},Ii,e),this.updateCurrentBreakpoint_()),T(this.breakpoints_)},i.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return Pi[this.breakpoint_]||""},i.loadMedia=function(e,t){var n,i,r,a=this;e&&"object"==s(e)&&(this.reset(),this.cache_.media=ot(e),n=(r=this.cache_.media).artwork,i=r.poster,e=r.src,r=r.textTracks,!n&&i&&(this.cache_.media.artwork=[{src:i,type:Qn(i)}]),e&&this.src(e),i&&this.poster(i),Array.isArray(r)&&r.forEach((function(e){return a.addRemoteTextTrack(e,!1)})),this.ready(t))},i.getMedia=function(){if(this.cache_.media)return ot(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Qn(t.poster)}]),t},n.getTagSettings=function(e){var t,n={sources:[],tracks:[]},i=ae(e),r=i["data-setup"];if(ee(e,"vjs-fill")&&(i.fill=!0),ee(e,"vjs-fluid")&&(i.fluid=!0),null!==r&&(r=(t=function(e,t){var n,i=null;try{n=JSON.parse(e,void 0)}catch(e){i=e}return[i,n]}(r||"{}"))[0],t=t[1],r&&p.error(r),T(i,t)),T(n,i),e.hasChildNodes())for(var a=e.childNodes,s=0,o=a.length;s<o;s++){var u=a[s],l=u.nodeName.toLowerCase();"source"===l?n.sources.push(ae(u)):"track"===l&&n.tracks.push(ae(u))}return n},i.flexNotSupported_=function(){var e=document.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},i.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},n}(dt);en.names.forEach((function(e){var t=en[e];Di.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Di.prototype.crossorigin=Di.prototype.crossOrigin,Di.players={},Rt=window.navigator,Di.prototype.options_={techOrder:Mn.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Rt&&(Rt.languages&&Rt.languages[0]||Rt.userLanguage||Rt.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Di.prototype[e]=function(){return this.techGet_(e)}})),ki.forEach((function(e){Di.prototype["handleTech"+st(e)+"_"]=function(){return this.trigger(e)}})),dt.registerComponent("Player",Di);var Li=g((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,i)}e.exports=t}));function Oi(e){return Fi.hasOwnProperty(e)}function xi(e){return Oi(e)?Fi[e]:void 0}function Mi(e,t,n){n=(n?"before":"")+"pluginsetup",e.trigger(n,t),e.trigger(n+":"+t.name,t)}function Ri(e,t){return t.prototype.name=e,function(){Mi(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Ui(t,[this].concat(i));return this[e]=function(){return a},Mi(this,a.getEventHash()),a}}var Ni=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}},Ui=g((function(e){function t(n,i,r){return Ni()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,n){var i=[null];return i.push.apply(i,t),i=new(Function.bind.apply(e,i)),n&&Li(i,n.prototype),i},t.apply(null,arguments)}e.exports=t})),Bi="plugin",ji="activePlugins_",Fi={},Hi=function(e,t){e[ji]=e[ji]||{},e[ji][t]=!0},Vi=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),nt(this),delete this.trigger,rt(this,this.constructor.defaultState),Hi(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return(e=void 0===e?{}:e).name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return je(this.eventBusEl_,e,this.getEventHash(t=void 0===t?{}:t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[ji][e]=!1,this.player=this.state=null,t[e]=Ri(e,Fi[e])},e.isBasic=function(t){return"function"==typeof(t="string"==typeof t?xi(t):t)&&!e.prototype.isPrototypeOf(t.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+s(t)+".");if(Oi(t))p.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Di.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+s(n)+".");return Fi[t]=n,t!==Bi&&(e.isBasic(n)?Di.prototype[t]=function(e,t){function n(){Mi(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Hi(this,e),Mi(this,{name:e,plugin:t,instance:n}),n}return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Di.prototype[t]=Ri(t,n)),n},e.deregisterPlugin=function(e){if(e===Bi)throw new Error("Cannot de-register base plugin.");Oi(e)&&(delete Fi[e],delete Di.prototype[e])},e.getPlugins=function(e){var t;return(e=void 0===e?Object.keys(Fi):e).forEach((function(e){var n=xi(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){return(e=xi(e))&&e.VERSION||""},e}();Vi.getPlugin=xi,Vi.BASE_PLUGIN_NAME=Bi,Vi.registerPlugin(Bi,Vi),Di.prototype.usingPlugin=function(e){return!!this[ji]&&!0===this[ji][e]},Di.prototype.hasPlugin=function(e){return!!Oi(e)};var Qi=function(e){return 0===e.indexOf("#")?e.slice(1):e};function qi(e,t,n){if(a=qi.getPlayer(e))return t&&p.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&a.ready(n),a;var i="string"==typeof e?Te("#"+Qi(e)):e;if(!K(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");i.ownerDocument.defaultView&&i.ownerDocument.body.contains(i)||p.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),r("beforesetup").forEach((function(e){S(e=e(i,ot(t)))&&!Array.isArray(e)?t=ot(t,e):p.error("please return an object in beforesetup hooks")}));var a=new(dt.getComponent("Player"))(i,t,n);return r("setup").forEach((function(e){return e(a)})),a}function Gi(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=window.location&&window.location.href||"");var n="function"==typeof window.URL,i=/^\/\//.test(e),r=!window.location&&!/\/\//i.test(e);return n?e=new window.URL(e,window.location||zi):/\/\//i.test(e)||(e=Wi.buildAbsoluteURL(window.location&&window.location.href||"",e)),n?(n=new URL(t,e),r?n.href.slice(zi.length):i?n.href.slice(n.protocol.length):n.href):Wi.buildAbsoluteURL(e,t)}qi.hooks_=i,qi.hooks=r,qi.hook=function(e,t){r(e,t)},qi.hookOnce=function(e,t){r(e,[].concat(t).map((function(t){return function n(){return a(e,n),t.apply(void 0,arguments)}})))},qi.removeHook=a,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&z()&&((Ki=Te(".vjs-styles-defaults"))||(Ki=Pe("vjs-styles-defaults"),(Rt=Te("head"))&&Rt.insertBefore(Ki,Rt.firstChild),Ie(Ki,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    "))),Ce(1,qi),qi.VERSION=t,qi.options=Di.prototype.options_,qi.getPlayers=function(){return Di.players},qi.getPlayer=function(e){var t=Di.players;if("string"==typeof e){var n=Qi(e),i=t[n];if(i)return i;n=Te("#"+n)}else n=e;if(K(n)&&(e=n.player,n=n.playerId,e||t[n]))return e||t[n]},qi.getAllPlayers=function(){return Object.keys(Di.players).map((function(e){return Di.players[e]})).filter(Boolean)},qi.players=Di.players,qi.getComponent=dt.getComponent,qi.registerComponent=function(e,t){Mn.isTech(t)&&p.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),dt.registerComponent.call(dt,e,t)},qi.getTech=Mn.getTech,qi.registerTech=Mn.registerTech,qi.use=function(e,t){Rn[e]=Rn[e]||[],Rn[e].push(t)},Object.defineProperty(qi,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(qi.middleware,"TERMINATOR",{value:Un,writeable:!1,enumerable:!0}),qi.browser=q,qi.TOUCH_ENABLED=j,qi.extend=function(e,t){var n,i=function(){e.apply(this,arguments)},r={};for(n in"object"==s(t=void 0===t?{}:t)?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),r=t):"function"==typeof t&&(i=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Li(e,t)}(i,e),e&&(i.super_=e),r)r.hasOwnProperty(n)&&(i.prototype[n]=r[n]);return i},qi.mergeOptions=ot,qi.bind=Ve,qi.registerPlugin=Vi.registerPlugin,qi.deregisterPlugin=Vi.deregisterPlugin,qi.plugin=function(e,t){return p.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Vi.registerPlugin(e,t)},qi.getPlugins=Vi.getPlugins,qi.getPlugin=Vi.getPlugin,qi.getPluginVersion=Vi.getPluginVersion,qi.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),qi.options.languages=ot(qi.options.languages,((n={})[e]=t,n)),qi.options.languages[e]},qi.log=p,qi.createLogger=f,qi.createTimeRange=qi.createTimeRanges=gt,qi.formatTime=ei,qi.setFormatTime=function(e){Zn=e},qi.resetFormatTime=function(){Zn=$n},qi.parseUrl=It,qi.isCrossOrigin=Ot,qi.EventTarget=qe,qi.on=Ue,qi.one=Fe,qi.off=Be,qi.trigger=je,qi.xhr=Gt,qi.TextTrack=Jt,qi.AudioTrack=P,qi.VideoTrack=U,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){qi[e]=function(){return p.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),we[e].apply(null,arguments)}})),qi.computedStyle=E,qi.dom=we,qi.url=Vt,qi.defineLazyProperty=bi,qi.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Wi=g((function(e,t){var n,i,r,a,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}if(!(r=s.parseURL(t)))throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=s.normalizePath(r.path),s.buildURLFromParts(r)):t;if(!(t=s.parseURL(e)))throw new Error("Error trying to parse base URL.");var a;return!t.netLoc&&t.path&&"/"!==t.path[0]&&(a=i.exec(t.path),t.netLoc=a[1],t.path=a[2]),t.netLoc&&!t.path&&(t.path="/"),e={scheme:t.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment},r.netLoc||(e.netLoc=t.netLoc,"/"!==r.path[0]&&(r.path?(a=(a=t.path).substring(0,a.lastIndexOf("/")+1)+r.path,e.path=s.normalizePath(a)):(e.path=t.path,r.params||(e.params=t.params,r.query||(e.query=t.query))))),null===e.path&&(e.path=n.alwaysNormalize?s.normalizePath(r.path):r.path),s.buildURLFromParts(e)},parseURL:function(e){return(e=n.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s})),zi="http://example.com",Ki=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t)},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();function Yi(e){for(var t=function(e){return window.atob?window.atob(e):Buffer.from(e,"base64").toString("binary")}(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function Xi(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||"");return e={},t[1]&&(e.length=parseInt(t[1],10)),t[2]&&(e.offset=parseInt(t[2],10)),e}function Ji(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i}function $i(e){var t={};return Object.keys(e).forEach((function(n){t[n.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))]=e[n]})),t}function Zi(e){var t,n,i,r,a=e.serverControl,s=e.targetDuration,o=e.partTargetDuration;a&&(t="#EXT-X-SERVER-CONTROL",n="holdBack",i="partHoldBack",r=s&&3*s,e=o&&2*o,s&&!a.hasOwnProperty(n)&&(a[n]=r,this.trigger("info",{message:t+" defaulting HOLD-BACK to targetDuration * 3 ("+r+")."})),r&&a[n]<r&&(this.trigger("warn",{message:t+" clamping HOLD-BACK ("+a[n]+") to targetDuration * 3 ("+r+")"}),a[n]=r),o&&!a.hasOwnProperty(i)&&(a[i]=3*o,this.trigger("info",{message:t+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+a[i]+")."})),o&&a[i]<e&&(this.trigger("warn",{message:t+" clamping PART-HOLD-BACK ("+a[i]+") to partTargetDuration * 2 ("+e+")."}),a[i]=e))}function er(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)}))}function tr(e){e=(e=void 0===e?"":e).split(",");var t=[];return e.forEach((function(e){var n;e=e.trim(),gr.forEach((function(i){var r,a=mr[i].exec(e.toLowerCase());!a||a.length<=1||(n=i,r=e.substring(0,a[1].length),a=e.replace(r,""),t.push({type:r,details:a,mediaType:i}))})),n||t.push({type:e,details:"",mediaType:"unknown"})})),t}function nr(e){return mr.audio.test((e=void 0===e?"":e).trim().toLowerCase())}function ir(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map((function(e){return er(e.trim())})),n="video";1===t.length&&nr(t[0])?n="audio":1===t.length&&(i=t[0],mr.text.test((i=void 0===i?"":i).trim().toLowerCase()))&&(n="application");var i="mp4";return t.every((function(e){return mr.mp4.test(e)}))?i="mp4":t.every((function(e){return mr.webm.test(e)}))?i="webm":t.every((function(e){return mr.ogg.test(e)}))&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}}function rr(e){return void 0===e&&(e=""),window.MediaSource&&window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported(ir(e))||!1}function ar(e){return(e=void 0===e?"":e).toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<yr.length;t++)if(mr["muxer"+yr[t]].test(e))return!0;return!1}))}function sr(e){return _r.test(e)?"hls":br.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}function or(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer}function ur(e){return e instanceof Uint8Array?e:(Array.isArray(e)||Tr(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))}function lr(e,t){if("string"!=typeof(e="string"!=typeof e&&e&&"function"==typeof e.toString?e.toString():e))return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}function cr(e,t,n){var i=void 0===n?{}:n,r=void 0===(n=i.offset)?0:n,a=void 0===(i=i.mask)?[]:i;return e=ur(e),i=(t=ur(t)).every||Array.prototype.every,t.length&&e.length-r>=t.length&&i.call(t,(function(t,n){return t===(a[n]?a[n]&e[r+n]:e[r+n])}))}var dr=function(e){function t(){var t=e.call(this)||this;return t.buffer="",t}return pt(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Ki),hr=String.fromCharCode(9),pr=function(e){function t(){var t=e.call(this)||this;return t.customParsers=[],t.tagMappers=[],t}pt(t,e);var n=t.prototype;return n.push=function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){return(n=n(e))===e?t:t.concat([n])}),[e]).forEach((function(e){for(var r,a,s=0;s<i.customParsers.length;s++)if(i.customParsers[s].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return n=y(Xi(t[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e))return n={type:"tag",tagType:"map"},t[1]&&((r=Ji(t[1])).URI&&(n.uri=r.URI),r.BYTERANGE&&(n.byterange=Xi(r.BYTERANGE))),void i.trigger("data",n);if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))return n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=Ji(t[1]),n.attributes.RESOLUTION&&(a={},(r=n.attributes.RESOLUTION.split("x"))[0]&&(a.width=parseInt(r[0],10)),r[1]&&(a.height=parseInt(r[1],10)),n.attributes.RESOLUTION=a),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=Ji(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(t=/^#EXT-X-DISCONTINUITY/.exec(e)))return(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n)):(t=/^#EXT-X-KEY:?(.*)$/.exec(e))?(n={type:"tag",tagType:"key"},t[1]&&(n.attributes=Ji(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n)):(t=/^#EXT-X-START:?(.*)$/.exec(e))?(n={type:"tag",tagType:"start"},t[1]&&(n.attributes=Ji(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n)):(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n)):(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n)):(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n)):(t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"skip"}).attributes=Ji(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(hr)),void i.trigger("data",n)):(t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"part"}).attributes=Ji(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=Xi(n.attributes.BYTERANGE)),void i.trigger("data",n)):(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"server-control"}).attributes=Ji(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void i.trigger("data",n)):(t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"part-inf"}).attributes=Ji(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void i.trigger("data",n)):(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"preload-hint"}).attributes=Ji(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){var t;n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10),t="BYTERANGE-LENGTH"===e?"length":"offset",n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e])})),void i.trigger("data",n)):(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"rendition-report"}).attributes=Ji(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void i.trigger("data",n)):void i.trigger("data",{type:"tag",data:e.slice(4)});i.trigger("data",{type:"tag",tagType:"discontinuity"})}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(Ki),fr=function(e){function t(){var t=e.call(this)||this;t.lineStream=new dr,t.parseStream=new pr,t.lineStream.pipe(t.parseStream);var n,i,r=ht(t),a=[],s={},o=!1,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var c=0,d=0;return t.on("end",(function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&n&&(s.map=n),!s.key&&i&&(s.key=i),s.timeline||"number"!=typeof l||(s.timeline=l),t.manifest.preloadSegment=s)})),t.parseStream.on("data",(function(e){var t,h;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((s.byterange=t).length=e.length,"offset"in e||(e.offset=c)),"offset"in e&&((s.byterange=t).offset=e.offset),c=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<e.duration&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:Yi(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(i.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,l=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange),i&&(n.key=i)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(s.attributes||(s.attributes={}),y(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var n;this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME?((n=this.manifest.mediaGroups[e.attributes.TYPE])[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(h={default:/yes/i.test(e.attributes.DEFAULT)}).default?h.autoselect=!0:h.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(h.language=e.attributes.LANGUAGE),e.attributes.URI&&(h.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(h.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(h.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(h.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=h):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,Zi.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data},skip:function(){this.manifest.skip=$i(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;o=!0;var n=this.manifest.segments.length,i=$i(e.attributes);s.parts=s.parts||[],s.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=d),d=i.byterange.offset+i.byterange.length);var r=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+n,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=$i(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Zi.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=$i(e.attributes),i=n.type&&"PART"===n.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?d:0,i&&(d=n.byterange.offset+n.byterange.length)));var r=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t,e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<s.preloadHints.length-1;a++){var o=s.preloadHints[a];o.type&&o.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t+" has the same TYPE "+n.type+" as preload hint #"+a})}},"rendition-report":function(){var t=$i(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1;t=["LAST-MSN","URI"],o&&t.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,e.attributes,t)},"part-inf":function(){this.manifest.partInf=$i(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Zi.call(this,this.manifest)}}[e.tagType]||function(){}).call(r)},uri:function(){s.uri=e.uri,a.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),i&&(s.key=i),s.timeline=l,n&&(s.map=n),d=0,s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}pt(t,e);var n=t.prototype;return n.warnOnMissingAttributes_=function(e,t,n){var i=[];n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+i.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(Ki),mr={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},gr=["video","audio","text"],yr=["Video","Audio","Text"],vr="mp4a.40.2",_r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,br=/^application\/dash\+xml/i,Tr=or,Sr=window.BigInt||Number,wr=[Sr("0x1"),Sr("0x100"),Sr("0x10000"),Sr("0x1000000"),Sr("0x100000000"),Sr("0x10000000000"),Sr("0x1000000000000"),Sr("0x100000000000000"),Sr("0x10000000000000000")];function Er(e,t){return(t=void 0===t?Object:t)&&"function"==typeof t.freeze?t.freeze(e):e}var kr=Er({HTML:"text/html",isHTML:function(e){return e===kr.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Cr=Er({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===Cr.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),Ar={freeze:Er,MIME_TYPE:kr,NAMESPACE:Cr},Pr=Ar.NAMESPACE;function Ir(e){return""!==e}function Dr(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function Lr(e){return e?(e=(e=e)?e.split(/[\t\n\f\r ]+/).filter(Ir):[],Object.keys(e.reduce(Dr,{}))):[]}function Or(e,t){for(var n in e)t[n]=e[n]}function xr(e,t){var n,i=e.prototype;i instanceof t||((n=function(){}).prototype=t.prototype,Or(i,n=new n),e.prototype=i=n),i.constructor!=e&&(i.constructor=e)}var Mr,Rr=(q={}).ELEMENT_NODE=1,Nr=q.ATTRIBUTE_NODE=2,Ur=q.TEXT_NODE=3,Br=q.CDATA_SECTION_NODE=4,jr=q.ENTITY_REFERENCE_NODE=5,Fr=(q.ENTITY_NODE=6,q.PROCESSING_INSTRUCTION_NODE=7),Hr=q.COMMENT_NODE=8,Vr=q.DOCUMENT_NODE=9,Qr=q.DOCUMENT_TYPE_NODE=10,qr=q.DOCUMENT_FRAGMENT_NODE=11,Gr=(q.NOTATION_NODE=12,P={},{});function Wr(e,t){var n;return t instanceof Error?n=t:(n=this,Error.call(this,Gr[e]),this.message=Gr[e],Error.captureStackTrace&&Error.captureStackTrace(this,Wr)),n.code=e,t&&(this.message=this.message+": "+t),n}function zr(){}function Kr(e,t){this._node=e,this._refresh=t,Yr(this)}function Yr(e){var t,n=e._node._inc||e._node.ownerDocument._inc;e._inc!=n&&(t=e._refresh(e._node),Ca(e,"length",t.length),Or(t,e),e._inc=n)}function Xr(){}function Jr(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function $r(e,t,n,i){i?t[Jr(t,i)]=n:t[t.length++]=n,!e||(t=(n.ownerElement=e).ownerDocument)&&(i&&aa(t,e,i),e=e,n=n,(t=t)&&t._inc++,n.namespaceURI===Pr.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value))}function Zr(e,t,n){var i=Jr(t,n);if(!(0<=i))throw Wr(8,new Error(e.tagName+"@"+n));for(var r,a=t.length-1;i<a;)t[i]=t[++i];t.length=a,!e||(r=e.ownerDocument)&&(aa(r,e,n),n.ownerElement=null)}function ea(){}function ta(){}function na(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function ia(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(ia(e,t))return 1}while(e=e.nextSibling)}function ra(){}function aa(e,t,n){e&&e._inc++,n.namespaceURI===Pr.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function sa(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,a=0;r;)r=(i[a++]=r).nextSibling;i.length=a}}}function oa(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,sa(e.ownerDocument,e),t}function ua(e,t,n){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===qr){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;for(i=n?n.previousSibling:e.lastChild,r.previousSibling=i,a.nextSibling=n,i?i.nextSibling=r:e.firstChild=r,null==n?e.lastChild=a:n.previousSibling=a;r.parentNode=e,r!==a&&(r=r.nextSibling););return sa(e.ownerDocument||e,e),t.nodeType==qr&&(t.firstChild=t.lastChild=null),t}function la(){this._nsMap={}}function ca(){}function da(){}function ha(){}function pa(){}function fa(){}function ma(){}function ga(){}function ya(){}function va(){}function _a(){}function ba(){}function Ta(){}function Sa(e,t){var n,i=[],r=9==this.nodeType&&this.documentElement||this,a=r.prefix,s=r.namespaceURI;return ka(this,i,e,t,n=s&&null==a&&null==(a=r.lookupPrefix(s))?[{namespace:s,prefix:null}]:n),i.join("")}function wa(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(r&&("xml"!==i||r!==Pr.XML)&&r!==Pr.XMLNS){for(var a=n.length;a--;){var s=n[a];if(s.prefix===i)return s.namespace!==r}return 1}}function Ea(e,t,n){e.push(" ",t,'="',n.replace(/[<&"]/g,na),'"')}function ka(e,t,n,i,r){if(r=r||[],i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case Rr:var a,s,o,u=e.attributes,l=u.length,c=e.firstChild,d=e.tagName,h=d;if(!(n=Pr.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var p,f=0;f<u.length;f++)if("xmlns"===u.item(f).name){p=u.item(f).value;break}if(!p)for(var m=r.length-1;0<=m;m--)if(""===(g=r[m]).prefix&&g.namespace===e.namespaceURI){p=g.namespace;break}var g;if(p!==e.namespaceURI)for(m=r.length-1;0<=m;m--)if((g=r[m]).namespace===e.namespaceURI){g.prefix&&(h=g.prefix+":"+d);break}}t.push("<",h);for(var y=0;y<l;y++)"xmlns"==(a=u.item(y)).prefix?r.push({prefix:a.localName,namespace:a.value}):"xmlns"==a.nodeName&&r.push({prefix:"",namespace:a.value});for(y=0;y<l;y++)wa(a=u.item(y),0,r)&&(Ea(t,(s=a.prefix||"")?"xmlns:"+s:"xmlns",o=a.namespaceURI),r.push({prefix:s,namespace:o})),ka(a,t,n,i,r);if(d===h&&wa(e,0,r)&&(Ea(t,(s=e.prefix||"")?"xmlns:"+s:"xmlns",o=e.namespaceURI),r.push({prefix:s,namespace:o})),c||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(d)){if(t.push(">"),n&&/^script$/i.test(d))for(;c;)c.data?t.push(c.data):ka(c,t,n,i,r.slice()),c=c.nextSibling;else for(;c;)ka(c,t,n,i,r.slice()),c=c.nextSibling;t.push("</",h,">")}else t.push("/>");return;case Vr:case qr:for(c=e.firstChild;c;)ka(c,t,n,i,r.slice()),c=c.nextSibling;return;case Nr:return Ea(t,e.name,e.value),0;case Ur:return t.push(e.data.replace(/[<&]/g,na).replace(/]]>/g,"]]&gt;"));case Br:return t.push("<![CDATA[",e.data,"]]>");case Hr:return t.push("\x3c!--",e.data,"--\x3e");case Qr:var v=e.publicId,_=e.systemId;return t.push("<!DOCTYPE ",e.name),void(v?(t.push(" PUBLIC ",v),_&&"."!=_&&t.push(" ",_),t.push(">")):_&&"."!=_?t.push(" SYSTEM ",_,">"):((_=e.internalSubset)&&t.push(" [",_,"]"),t.push(">")));case Fr:return t.push("<?",e.target," ",e.data,"?>");case jr:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Ca(e,t,n){e[t]=n}P.INDEX_SIZE_ERR=(Gr[1]="Index size error",1),P.DOMSTRING_SIZE_ERR=(Gr[2]="DOMString size error",2),P.HIERARCHY_REQUEST_ERR=(Gr[3]="Hierarchy request error",3),P.WRONG_DOCUMENT_ERR=(Gr[4]="Wrong document",4),P.INVALID_CHARACTER_ERR=(Gr[5]="Invalid character",5),P.NO_DATA_ALLOWED_ERR=(Gr[6]="No data allowed",6),P.NO_MODIFICATION_ALLOWED_ERR=(Gr[7]="No modification allowed",7),P.NOT_FOUND_ERR=(Gr[8]="Not found",8),P.NOT_SUPPORTED_ERR=(Gr[9]="Not supported",9),P.INUSE_ATTRIBUTE_ERR=(Gr[10]="Attribute in use",10),P.INVALID_STATE_ERR=(Gr[11]="Invalid state",11),P.SYNTAX_ERR=(Gr[12]="Syntax error",12),P.INVALID_MODIFICATION_ERR=(Gr[13]="Invalid modification",13),P.NAMESPACE_ERR=(Gr[14]="Invalid namespace",14),P.INVALID_ACCESS_ERR=(Gr[15]="Invalid access",15),Wr.prototype=Error.prototype,Or(P,Wr),zr.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)ka(this[i],n,e,t);return n.join("")}},Kr.prototype.item=function(e){return Yr(this),this[e]},xr(Kr,zr),Xr.prototype={length:0,item:zr.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Wr(10);return t=this.getNamedItem(e.nodeName),$r(this._ownerElement,this,e,t),t},setNamedItemNS:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Wr(10);return t=this.getNamedItemNS(e.namespaceURI,e.localName),$r(this._ownerElement,this,e,t),t},removeNamedItem:function(e){return e=this.getNamedItem(e),Zr(this._ownerElement,this,e),e},removeNamedItemNS:function(e,t){return t=this.getNamedItemNS(e,t),Zr(this._ownerElement,this,t),t},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},ea.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new ra;return i.implementation=this,i.childNodes=new zr,i.doctype=n||null,n&&i.appendChild(n),t&&(t=i.createElementNS(e,t),i.appendChild(t)),i},createDocumentType:function(e,t,n){var i=new ma;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},ta.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return ua(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return oa(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,i){var r=new n.constructor;for(var a in n){var o=n[a];"object"!=s(o)&&o!=r[a]&&(r[a]=o)}switch(n.childNodes&&(r.childNodes=new zr),r.ownerDocument=t,r.nodeType){case Rr:var u=n.attributes,l=r.attributes=new Xr,c=u.length;l._ownerElement=r;for(var d=0;d<c;d++)r.setAttributeNode(e(t,u.item(d),!0));break;case Nr:i=!0}if(i)for(var h=n.firstChild;h;)r.appendChild(e(t,h,i)),h=h.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Ur&&e.nodeType==Ur?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(n[i]==e)return i;t=t.nodeType==Nr?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==Nr?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Or(q,ta),Or(q,ta.prototype),ra.prototype={nodeName:"#document",nodeType:Vr,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=qr)return null==this.documentElement&&e.nodeType==Rr&&(this.documentElement=e),ua(this,e,t),e.ownerDocument=this,e;for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),oa(this,e)},importNode:function(e,t){return function e(t,n,i){var r;switch(n.nodeType){case Rr:(r=n.cloneNode(!1)).ownerDocument=t;case qr:break;case Nr:i=!0}if((r=r||n.cloneNode(!1)).ownerDocument=t,r.parentNode=null,i)for(var a=n.firstChild;a;)r.appendChild(e(t,a,i)),a=a.nextSibling;return r}(this,e,t)},getElementById:function(e){var t=null;return ia(this.documentElement,(function(n){if(n.nodeType==Rr&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=Lr(e);return new Kr(this,(function(n){var i=[];return 0<t.length&&ia(n.documentElement,(function(r){var a,s,o;r===n||r.nodeType!==Rr||(a=r.getAttribute("class"))&&((s=e===a)||(a=Lr(a),s=t.every((o=a,function(e){return o&&-1!==o.indexOf(e)}))),s&&i.push(r))})),i}))},createElement:function(e){var t=new la;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new zr,(t.attributes=new Xr)._ownerElement=t},createDocumentFragment:function(){var e=new _a;return e.ownerDocument=this,e.childNodes=new zr,e},createTextNode:function(e){var t=new ha;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new pa;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new fa;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ba;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new ca;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new va;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new la,i=t.split(":"),r=n.attributes=new Xr;return n.childNodes=new zr,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n},createAttributeNS:function(e,t){var n=new ca,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},xr(ra,ta),ra.prototype.getElementsByTagName=(la.prototype={nodeType:Rr,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){return(e=this.getAttributeNode(e))&&e.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){(e=this.ownerDocument.createAttribute(e)).value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(e){(e=this.getAttributeNode(e))&&this.removeAttributeNode(e)},appendChild:function(e){return e.nodeType===qr?this.insertBefore(e,null):function(e,t){var n=t.parentNode;n&&(i=e.lastChild,n.removeChild(t),i=e.lastChild);var i=e.lastChild;return t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,sa(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){(t=this.getAttributeNodeNS(e,t))&&this.removeAttributeNode(t)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){return(t=this.getAttributeNodeNS(e,t))&&t.value||""},setAttributeNS:function(e,t,n){(t=this.ownerDocument.createAttributeNS(e,t)).value=t.nodeValue=""+n,this.setAttributeNode(t)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new Kr(this,(function(t){var n=[];return ia(t,(function(i){i===t||i.nodeType!=Rr||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new Kr(this,(function(n){var i=[];return ia(n,(function(r){r===n||r.nodeType!==Rr||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}}).getElementsByTagName,ra.prototype.getElementsByTagNameNS=la.prototype.getElementsByTagNameNS,xr(la,ta),ca.prototype.nodeType=Nr,xr(ca,ta),da.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(Gr[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var i=this.data.substring(0,e);t=this.data.substring(e+t),this.nodeValue=this.data=n=i+n+t,this.length=n.length}},xr(da,ta),ha.prototype={nodeName:"#text",nodeType:Ur,splitText:function(e){var t=(n=this.data).substring(e),n=n.substring(0,e);return this.data=this.nodeValue=n,this.length=n.length,t=this.ownerDocument.createTextNode(t),this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}},xr(ha,da),pa.prototype={nodeName:"#comment",nodeType:Hr},xr(pa,da),fa.prototype={nodeName:"#cdata-section",nodeType:Br},xr(fa,da),ma.prototype.nodeType=Qr,xr(ma,ta),ga.prototype.nodeType=12,xr(ga,ta),ya.prototype.nodeType=6,xr(ya,ta),va.prototype.nodeType=jr,xr(va,ta),_a.prototype.nodeName="#document-fragment",_a.prototype.nodeType=qr,xr(_a,ta),ba.prototype.nodeType=Fr,xr(ba,ta),Ta.prototype.serializeToString=function(e,t,n){return Sa.call(e,t,n)},ta.prototype.toString=Sa;try{Object.defineProperty&&(Mr=function e(t){switch(t.nodeType){case Rr:case qr:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}},Object.defineProperty(Kr.prototype,"length",{get:function(){return Yr(this),this.$$length}}),Object.defineProperty(ta.prototype,"textContent",{get:function(){return Mr(this)},set:function(e){switch(this.nodeType){case Rr:case qr:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Ca=function(e,t,n){e["$$"+t]=n})}catch(e){}U={DocumentType:ma,DOMException:Wr,DOMImplementation:ea,Element:la,Node:ta,NodeList:zr,XMLSerializer:Ta};var Aa=g((function(e,t){var n=Ar.freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES}));Aa.XML_ENTITIES,Aa.HTML_ENTITIES,Aa.entityMap;var Pa=Ar.NAMESPACE,Ia=(Vt=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ki=new RegExp("[\\-\\.0-9"+Vt.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),new RegExp("^"+Vt.source+Ki.source+"*(?::"+Vt.source+Ki.source+"*)?$"));function Da(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,Da)}function La(){}function Oa(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function xa(e,t,n){for(var i=e.tagName,r=null,a=e.length;a--;){var s=e[a],o=s.qName,u=s.value;o=0<(c=o.indexOf(":"))?(l=s.prefix=o.slice(0,c),d=o.slice(c+1),"xmlns"===l&&d):(l=null,"xmlns"===(d=o)&&""),s.localName=d,!1!==o&&(null==r&&(r={},Ma(n,n={})),n[o]=r[o]=u,s.uri=Pa.XMLNS,t.startPrefixMapping(o,u))}var l;for(a=e.length;a--;)(l=(s=e[a]).prefix)&&("xml"===l&&(s.uri=Pa.XML),"xmlns"!==l&&(s.uri=n[l||""]));var c,d=0<(c=i.indexOf(":"))?(l=e.prefix=i.slice(0,c),e.localName=i.slice(c+1)):(l=null,e.localName=i),h=e.uri=n[l||""];if(t.startElement(h,d,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,1;if(t.endElement(h,d,i),r)for(l in r)t.endPrefixMapping(l)}function Ma(e,t){for(var n in e)t[n]=e[n]}function Ra(){this.attributeNames={}}(Da.prototype=new Error).name=Da.name,La.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),Ma(t,t={}),function(e,t,n,i,r){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?65535<(t=parseInt(t.substr(1).replace("x","0x")))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(r.error("entity not found:"+e),e)}function s(t){var n;f<t&&(n=e.substring(f,t).replace(/&#?\w+;/g,a),d&&o(f),i.characters(n,0,t-f),f=t)}function o(t,n){for(;l<=t&&(n=c.exec(e));)u=n.index,l=u+n[0].length,d.lineNumber++;d.columnNumber=t-u+1}for(var u=0,l=0,c=/.*(?:\r\n?|\n)|.*$/g,d=i.locator,h=[{currentNSMap:t}],p={},f=0;;){try{var m,g,y=e.indexOf("<",f);if(y<0)return e.substr(f).match(/^\s*$/)||(g=(m=i.doc).createTextNode(e.substr(f)),m.appendChild(g),i.currentElement=g);switch(f<y&&s(y),e.charAt(y+1)){case"/":var v=e.indexOf(">",y+3),_=e.substring(y+2,v).replace(/[ \t\n\r]+$/g,""),b=h.pop();v<0?(_=e.substring(y+2).replace(/[\s<].*/,""),r.error("end tag name: "+_+" is not complete:"+b.tagName),v=y+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),r.error("end tag name: "+_+" maybe not complete"),v=y+1+_.length);var T=b.localNSMap,S=b.tagName==_;if(S||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase()){if(i.endElement(b.uri,b.localName,_),T)for(var w in T)i.endPrefixMapping(w);S||r.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else h.push(b);v++;break;case"?":d&&o(y),v=function(e,t,n){var i=e.indexOf("?>",t);return i&&(t=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(t[0].length,n.processingInstruction(t[1],t[2]),i+2):-1}(e,y,i);break;case"!":d&&o(y),v=function(e,t,n,i){if("-"===e.charAt(t+2)){if("-"!==e.charAt(t+3))return-1;var r=e.indexOf("--\x3e",t+4);return t<r?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1)}if("CDATA["==e.substr(t+3,6))return r=e.indexOf("]]>",t+9),n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3;var a=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);n=r.exec(e);)if(i.push(n),n[1])return i}(e,t);return 1<(i=a.length)&&/!doctype/i.test(a[0][0])?(r=a[1][0],e=!1,t=!1,3<i&&(/^public$/i.test(a[2][0])?(e=a[3][0],t=4<i&&a[4][0]):/^system$/i.test(a[2][0])&&(t=a[3][0])),i=a[i-1],n.startDTD(r,e,t),n.endDTD(),i.index+i[0].length):-1}(e,y,i,r);break;default:d&&o(y);var E=new Ra,k=h[h.length-1].currentNSMap,C=(v=function(e,t,n,i,r,a){function s(e,t,i){n.attributeNames.hasOwnProperty(e)&&a.fatalError("Attribute "+e+" redefined"),n.addValue(e,t,i)}for(var o,u=++t,l=0;;){var c=e.charAt(u);switch(c){case"=":if(1===l)o=e.slice(t,u),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(a.warning('attribute value must after "="'),o=e.slice(t,u)),t=u+1,!(0<(u=e.indexOf(c,t))))throw new Error("attribute value no end '"+c+"' match");s(o,d=e.slice(t,u).replace(/&#?\w+;/g,r),t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');s(o,d=e.slice(t,u).replace(/&#?\w+;/g,r),t),a.warning('attribute "'+o+'" missed start quot('+c+")!!"),t=u+1,l=5}break;case"/":switch(l){case 0:n.setTagName(e.slice(t,u));case 5:case 6:case 7:l=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==l&&n.setTagName(e.slice(t,u)),u;case">":switch(l){case 0:n.setTagName(e.slice(t,u));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=e.slice(t,u)).slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case 2:2===l&&(d=o),4==l?(a.warning('attribute "'+d+'" missed quot(")!'),s(o,d.replace(/&#?\w+;/g,r),t)):(Pa.isHTML(i[""])&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),s(d,d,t));break;case 3:throw new Error("attribute value missed!!")}return u;case"":c=" ";default:if(c<=" ")switch(l){case 0:n.setTagName(e.slice(t,u)),l=6;break;case 1:o=e.slice(t,u),l=2;break;case 4:var d=e.slice(t,u).replace(/&#?\w+;/g,r);a.warning('attribute "'+d+'" missed quot(")!!'),s(o,d,t);case 5:l=6}else switch(l){case 2:n.tagName,Pa.isHTML(i[""])&&o.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,t),t=u,l=1;break;case 5:a.warning('attribute space is required"'+o+'"!!');case 6:l=1,t=u;break;case 3:l=4,t=u;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}(e,y,E,k,a,r),E.length);if(!E.closed&&function(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}(e,v,E.tagName,p)&&(E.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),d&&C){for(var A=Oa(d,{}),P=0;P<C;P++){var I=E[P];o(I.offset),I.locator=Oa(d,{})}i.locator=A,xa(E,i,k)&&h.push(E),i.locator=d}else xa(E,i,k)&&h.push(E);Pa.isHTML(E.uri)&&!E.closed?v=function(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t);if(e=e.substring(t+1,a),/[&<]/.test(e))return/^script$/i.test(n)||(e=e.replace(/&#?\w+;/g,i)),r.characters(e,0,e.length),a}return t+1}(e,v,E.tagName,a,i):v++}}catch(t){if(t instanceof Da)throw t;r.error("element parse error: "+t),v=-1}f<v?f=v:s(Math.max(y,f)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},Ra.prototype={setTagName:function(e){if(!Ia.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!Ia.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},P={XMLReader:La,ParseError:Da};var Na=U.DOMImplementation,Ua=Ar.NAMESPACE,Ba=P.ParseError,ja=P.XMLReader;function Fa(e){this.options=e||{locator:{}}}function Ha(){this.cdata=!1}function Va(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function Qa(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function qa(e,t){(e.currentElement||e.doc).appendChild(t)}function Ga(e){return!!e&&"object"==s(e)}function Wa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return"object"!=s(t)||Object.keys(t).forEach((function(n){Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):Ga(e[n])&&Ga(t[n])?e[n]=Wa(e[n],t[n]):e[n]=t[n]})),e}),{})}function za(e){return Object.keys(e).map((function(t){return e[t]}))}function Ka(e){return e.reduce((function(e,t){return e.concat(t)}),[])}function Ya(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function Xa(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function Ja(e){var t=e.baseUrl,n=void 0===(i=e.source)?"":i,i=void 0===(i=e.range)?"":i;return e=void 0===(e=e.indexRange)?"":e,n={uri:n,resolvedUri:Gi((void 0===t?"":t)||"",n)},(i||e)&&(i=(i||e).split("-"),e=window.BigInt?window.BigInt(i[0]):parseInt(i[0],10),i=window.BigInt?window.BigInt(i[1]):parseInt(i[1],10),e<Number.MAX_SAFE_INTEGER&&"bigint"==typeof e&&(e=Number(e)),"bigint"==typeof(i="bigint"==typeof(i=i<Number.MAX_SAFE_INTEGER&&"bigint"==typeof i?Number(i):i)||"bigint"==typeof e?window.BigInt(i)-window.BigInt(e)+window.BigInt(1):i-e+1)&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),n.byterange={length:i,offset:e}),n}function $a(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e}function Za(e){var t,n=e.type,i=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.periodDuration,o=e.sourceDuration;return e=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}((r=js[n](e)).start,r.end).map((t=e,function(e){var n=t.duration,i=t.timescale,r=t.periodStart,a=t.startNumber;return{number:(void 0===a?1:a)+e,duration:n/(void 0===i?1:i),timeline:r,time:e*n}})),"static"===n&&(e[n=e.length-1].duration=("number"==typeof s?s:o)-i/a*n),e}function es(e){var t=e.baseUrl,n=void 0===(u=e.initialization)?{}:u,i=e.sourceDuration,r=void 0===(o=e.indexRange)?"":o,a=e.periodStart,s=e.presentationTime,o=void 0===(u=e.number)?0:u,u=e.duration;if(!t)throw new Error(Us);return n=Ja({baseUrl:t,source:n.sourceURL,range:n.range}),(r=Ja({baseUrl:t,source:t,indexRange:r})).map=n,u?(e=Za(e)).length&&(r.duration=e[0].duration,r.timeline=e[0].timeline):i&&(r.duration=i,r.timeline=a),r.presentationTime=s||a,r.number=o,[r]}function ts(e,t,n){for(var i=e.sidx.map||null,r=e.sidx.duration,a=e.timeline||0,s=(s=e.sidx.byterange).offset+s.length,o=t.timescale,u=t.references.filter((function(e){return 1!==e.referenceType})),l=[],c=e.endList?"static":"dynamic",d=e.sidx.timeline,h=d,p=e.mediaSequence||0,f="bigint"==typeof t.firstOffset?window.BigInt(s)+t.firstOffset:s+t.firstOffset,m=0;m<u.length;m++){var g=(v=t.references[m]).referencedSize,y=v.subsegmentDuration,v=void 0;v=es({baseUrl:n,timescale:o,timeline:a,periodStart:d,presentationTime:h,number:p,duration:y,sourceDuration:r,indexRange:f+"-"+(v="bigint"==typeof f?f+window.BigInt(g)-window.BigInt(1):f+g-1),type:c})[0],i&&(v.map=i),l.push(v),f+="bigint"==typeof f?window.BigInt(g):g,h+=y/o,p++}return e.segments=l,e}function ns(e){return t=function(e){return e.timeline},za(e.reduce((function(e,n){return n.forEach((function(n){e[t(n)]=n})),e}),{})).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t}function is(e){var t,n,i=[];return t=e,n=function(e,t,n,r){i=i.concat(e.playlists||[])},Fs.forEach((function(e){for(var i in t.mediaGroups[e])for(var r in t.mediaGroups[e][i]){var a=t.mediaGroups[e][i][r];n(a)}})),i}function rs(e){var t=e.playlist;e=e.mediaSequence,t.mediaSequence=e,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))}function as(e){return e&&e.uri+"-"+(e="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?window.BigInt(t.offset)+window.BigInt(t.length)-window.BigInt(1):t.offset+t.length-1,t.offset+"-"+e);var t}function ss(e){return za(e.reduce((function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");return e[i]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments)),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):(e[i]=t,e[i].attributes.timelineStarts=[]),e[i].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){return e.discontinuityStarts=(e.segments||[]).reduce((function(e,t,n){return t.discontinuity&&e.push(n),e}),[]),e}))}function os(e,t){var n=as(e.sidx);return(n=n&&t[n]&&t[n].sidx)&&ts(e,n,e.sidx.resolvedUri),e}function us(e){var t=e.attributes,n=e.segments,i=e.sidx,r=e.discontinuityStarts;return n={attributes:((e={NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1,e),uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuityStarts:r,timelineStarts:t.timelineStarts,segments:n},t.contentProtection&&(n.contentProtection=t.contentProtection),i&&(n.sidx=i),n}function ls(e){return"video/mp4"===(e=e.attributes).mimeType||"video/webm"===e.mimeType||"video"===e.contentType}function cs(e){return"audio/mp4"===(e=e.attributes).mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType}function ds(e){return"text/vtt"===(e=e.attributes).mimeType||"text"===e.contentType}function hs(e){return e?Object.keys(e).reduce((function(t,n){return n=e[n],t.concat(n.playlists)}),[]):[]}function ps(e,t){for(var n,i,r,a,s,o,u=e.type,l=e.minimumUpdatePeriod,c=void 0===l?0:l,d=void 0===(l=e.media)?"":l,h=e.sourceDuration,p=void 0===(l=e.timescale)?1:l,f=void 0===(l=e.startNumber)?1:l,m=e.periodStart,g=[],y=-1,v=0;v<t.length;v++){var _,b,T=t[v],S=T.d,w=T.r||0,E=T.t||0;y<0&&(y=E),E&&y<E&&(y=E),b=w<0?(_=v+1)===t.length?"dynamic"===u&&0<c&&0<d.indexOf("$Number$")?(n=y,i=S,T=void 0,r=(E=e).NOW,a=E.clientOffset,s=E.availabilityStartTime,o=E.timescale,T=E.periodStart,E=E.minimumUpdatePeriod,Math.ceil((((r+a)/1e3+(void 0===E?0:E)-(s+(void 0===T?0:T)))*(void 0===o?1:o)-n)/i)):(h*p-y)/S:(t[_].t-y)/S:w+1;for(var k=f+g.length+b,C=f+g.length;C<k;)g.push({number:C,duration:S/p,time:y,timeline:m}),y+=S,C++}return g}function fs(e,t){return e.replace(Hs,(n=t,function(e,t,i,r){return"$$"===e?"$":void 0===n[t]?e:(e=""+n[t],"RepresentationID"===t||(r=i?parseInt(r,10):1)<=e.length?e:new Array(r-e.length+1).join("0")+e)}));var n}function ms(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=void 0===(i=e.initialization)?{sourceURL:"",range:""}:i,r=Ja({baseUrl:e.baseUrl,source:fs(i.sourceURL,n),range:i.range});return(i=t,(t=e).duration||i?t.duration?Za(t):ps(t,i):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]).map((function(t){n.Number=t.number,n.Time=t.time;var i=fs(e.media||"",n),a=e.timescale||1,s=e.presentationTimeOffset||0;return a=e.periodStart+(t.time-s)/a,{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:Gi(e.baseUrl||"",i),map:r,number:t.number,presentationTime:a}}))}function gs(e,t){var n=e.duration,i=void 0===(i=e.segmentUrls)?[]:i,r=e.periodStart;if(!n&&!t||n&&t)throw new Error(Bs);var a,s=i.map((function(t){return i=t,t=(n=e).baseUrl,n=Ja({baseUrl:t,source:(n=void 0===(n=n.initialization)?{}:n).sourceURL,range:n.range}),(i=Ja({baseUrl:t,source:i.media,range:i.mediaRange})).map=n,i;var n,i}));return n&&(a=Za(e)),(a=t?ps(e,t):a).map((function(t,n){if(s[n]){var i=s[n],a=e.timescale||1;return n=e.presentationTimeOffset||0,i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=r+(t.time-n)/a,i}})).filter((function(e){return e}))}function ys(e){var t,n=e.attributes,i=e.segmentInfo;i.template?(r=ms,t=Wa(n,i.template)):i.base?(r=es,t=Wa(n,i.base)):i.list&&(r=gs,t=Wa(n,i.list));var r,a={attributes:n};return r?(e=r(t,i.segmentTimeline),t.duration?(n=t.duration,r=t.timescale,t.duration=n/(void 0===r?1:r)):e.length?t.duration=e.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0,a.attributes=t,a.segments=e,i.base&&t.indexRange&&(a.sidx=e[0],a.segments=[]),a):a}function vs(e,t){return Ya(e.childNodes).filter((function(e){return e.tagName===t}))}function _s(e){return e.textContent.trim()}function bs(e){if(!(r=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e)))return 0;var t=(a=r.slice(1))[0],n=a[1],i=a[2],r=(e=a[3],a[4]),a=a[5];return 31536e3*parseFloat(t||0)+2592e3*parseFloat(n||0)+86400*parseFloat(i||0)+3600*parseFloat(e||0)+60*parseFloat(r||0)+parseFloat(a||0)}function Ts(e){return e&&e.attributes?Ya(e.attributes).reduce((function(e,t){var n=Vs[t.name]||Vs.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}}function Ss(e,t){return t.length?Ka(e.map((function(e){return t.map((function(t){return Gi(e,_s(t))}))}))):e}function ws(e){var t=vs(e,"SegmentTemplate")[0],n=vs(e,"SegmentList")[0],i=n&&vs(n,"SegmentURL").map((function(e){return Wa({tag:"SegmentURL"},Ts(e))})),r=vs(e,"SegmentBase")[0],a=(e=(a=n||t)&&vs(a,"SegmentTimeline")[0],(a=n||r||t)&&vs(a,"Initialization")[0]);(t=t&&Ts(t))&&a?t.initialization=a&&Ts(a):t&&t.initialization&&(t.initialization={sourceURL:t.initialization});var s={template:t,segmentTimeline:e&&vs(e,"S").map(Ts),list:n&&Wa(Ts(n),{segmentUrls:i,initialization:Ts(a)}),base:r&&Wa(Ts(r),{initialization:Ts(a)})};return Object.keys(s).forEach((function(e){s[e]||delete s[e]})),s}function Es(e){if(""===e)throw new Error(Rs);var t,n,i=new xs;try{n=(t=i.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(Ns);return n}function ks(e,t){return void 0===t&&(t=0),(e=ur(e)).length-t<10||!cr(e,Ws,{offset:t})?t:ks(e,t+=function(e,t){void 0===t&&(t=0);var n=(e=ur(e))[t+5];return t=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],(16&n)>>4?20+t:10+t}(e,t))}function Cs(e){return"string"==typeof e?lr(e):e}function As(e,t,n){var i;void 0===n&&(n=!1),i=t,t=Array.isArray(i)?i.map(Cs):[Cs(i)],e=ur(e);var r=[];if(!t.length)return r;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(0==s)break;var u=a+s;if(u>e.length){if(n)break;u=e.length}s=e.subarray(a+8,u),cr(o,t[0])&&(1===t.length?r.push(s):r.push.apply(r,As(s,t.slice(1),n))),a=u}return r}function Ps(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<Ks.length&&!(e&Ks[n]);n++)t++;return t}(e[t]),a=e.subarray(t,t+r);return n&&((a=Array.prototype.slice.call(e,t,t+r))[0]^=Ks[r-1]),{length:r,value:function(e,t){t=void 0!==(t=(n=void 0===t?{}:t).signed)&&t;var n,i=void 0!==(n=n.le)&&n;return n=((e=ur(e))[n=i?"reduce":"reduceRight"]||Array.prototype[n]).call(e,(function(t,n,r){return r=i?r:Math.abs(r+1-e.length),t+Sr(n)*wr[r]}),Sr(0)),!t||(t=wr[e.length]/Sr(2)-Sr(1))<(n=Sr(n))&&(n-=t,n-=t,n-=Sr(2)),Number(n)}(a,{signed:i}),bytes:a}}function Is(e){return"string"==typeof e?e.match(/.{1,2}/g).map(Is):"number"==typeof e?function(e,t){for(var n=void 0!==(t=(void 0===t?{}:t).le)&&t,i=(t=e=Sr(e="bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e?0:e),Math.ceil(t.toString(2).length/8)),r=new Uint8Array(new ArrayBuffer(i)),a=0;a<i;a++){var s=n?a:Math.abs(a+1-r.length);r[s]=Number(e/wr[a]&Sr(255)),e<0&&(r[s]=Math.abs(~r[s]),r[s]-=0===a?1:2)}return r}(e):e}function Ds(e,t,n){if(n>=t.length)return t.length;var i=Ps(t,n,!1);if(cr(e.bytes,i.bytes))return n;var r=Ps(t,n+i.length);return Ds(e,t,n+r.length+r.value+i.length)}function Ls(e,t){var n;n=t,t=Array.isArray(n)?n.map(Is):[Is(n)],e=ur(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var a=Ps(e,r,!1),s=Ps(e,r+a.length),o=r+a.length+s.length;127===s.value&&(s.value=Ds(a,e,o),s.value!==e.length&&(s.value-=o));var u=o+s.value>e.length?e.length:o+s.value;u=e.subarray(o,u),cr(t[0],a.bytes)&&(1===t.length?i.push(u):i=i.concat(Ls(u,t.slice(1)))),r+=a.length+s.length+u.length}return i}function Os(e,t,n,i){void 0===i&&(i=1/0),e=ur(e),n=[].concat(n);for(var r,a=0,s=0;a<e.length&&(s<i||r);){var o=void 0;if(cr(e.subarray(a),Ys)?o=4:cr(e.subarray(a),Xs)&&(o=3),o){if(s++,r)return function(e){for(var t=[],n=1;n<e.length-2;)cr(e.subarray(n,n+3),Js)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),r[n]=e[a];return r}(e.subarray(r,a));var u=void 0;"h264"===t?u=31&e[a+o]:"h265"===t&&(u=e[a+o]>>1&63),-1!==n.indexOf(u)&&(r=a+o),a+=o+("h264"===t?1:2)}else a++}return e.subarray(0,0)}Fa.prototype.parseFromString=function(e,t){var n=this.options,i=new ja,r=n.domBuilder||new Ha,a=n.errorHandler,s=n.locator,o=n.xmlns||{},u=/\/x?html?$/.test(t);return t=u?Aa.HTML_ENTITIES:Aa.XML_ENTITIES,s&&r.setDocumentLocator(s),i.errorHandler=function(e,t,n){if(!e){if(t instanceof Ha)return t;e=t}var i={},r=e instanceof Function;function a(t){var a=e[t];!a&&r&&(a=2==e.length?function(n){e(t,n)}:e),i[t]=a?function(e){a("[xmldom "+t+"]\t"+e+function(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(n))}:function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),i}(a,r,s),i.domBuilder=n.domBuilder||r,u&&(o[""]=Ua.HTML),o.xml=o.xml||Ua.XML,e&&"string"==typeof e?i.parse(e,o,t):i.errorHandler.error("invalid doc source"),r.doc},Ha.prototype={startDocument:function(){this.doc=(new Na).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,a=r.createElementNS(e,n||t),s=i.length;qa(this,a),this.currentElement=a,this.locator&&Va(this.locator,a);for(var o=0;o<s;o++){e=i.getURI(o);var u=i.getValue(o),l=(n=i.getQName(o),r.createAttributeNS(e,n));this.locator&&Va(i.getLocator(o),l),l.value=l.nodeValue=u,a.setAttributeNode(l)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){t=this.doc.createProcessingInstruction(e,t),this.locator&&Va(this.locator,t),qa(this,t)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){var i;(e=Qa.apply(this,arguments))&&(i=this.cdata?this.doc.createCDATASection(e):this.doc.createTextNode(e),this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&Va(this.locator,i))},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=Qa.apply(this,arguments),e=this.doc.createComment(e),this.locator&&Va(this.locator,e),qa(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;i&&i.createDocumentType&&(n=i.createDocumentType(e,t,n),this.locator&&Va(this.locator,n),qa(this,n),this.doc.doctype=n)},warning:function(e){},error:function(e){},fatalError:function(e){throw new Ba(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){Ha.prototype[e]=function(){return null}}));var xs={__DOMHandler:Ha,DOMParser:Fa,DOMImplementation:U.DOMImplementation,XMLSerializer:U.XMLSerializer}.DOMParser,Ms="INVALID_NUMBER_OF_PERIOD",Rs="DASH_EMPTY_MANIFEST",Ns="DASH_INVALID_XML",Us="NO_BASE_URL",Bs="SEGMENT_TIME_UNSPECIFIED",js={static:function(e){var t=e.duration,n=void 0===(r=e.timescale)?1:r,i=e.sourceDuration,r=e.periodDuration;return n=t/n,"number"==typeof(e=$a(e.endNumber))?{start:0,end:e}:"number"==typeof r?{start:0,end:r/n}:{start:0,end:i/n}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=void 0===(u=e.timescale)?1:u,a=e.duration,s=void 0===(o=e.periodStart)?0:o,o=void 0===(u=e.minimumUpdatePeriod)?0:u,u=void 0===(u=e.timeShiftBufferDepth)?1/0:u;return e=$a(e.endNumber),n=(t+n)/1e3,s=i+s,o=Math.ceil((n+o-s)*r/a),u=Math.floor((n-s-u)*r/a),a=Math.floor((n-s)*r/a),{start:Math.max(0,u),end:"number"==typeof e?e:Math.min(o,a)}}},Fs=["AUDIO","SUBTITLES"],Hs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Vs={mediaPresentationDuration:bs,availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=e)&&(e+="Z"),Date.parse(e)/1e3},minimumUpdatePeriod:bs,suggestedPresentationDelay:bs,type:function(e){return e},timeShiftBufferDepth:bs,start:bs,width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?bs(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Qs={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},qs=Math.pow(2,32),Gs=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return t.getBigUint64?(e=t.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(e):e:t.getUint32(0)*qs+t.getUint32(4)},Ws=ur([73,68,51]),zs={EBML:ur([26,69,223,163]),DocType:ur([66,130]),Segment:ur([24,83,128,103]),SegmentInfo:ur([21,73,169,102]),Tracks:ur([22,84,174,107]),Track:ur([174]),TrackNumber:ur([215]),DefaultDuration:ur([35,227,131]),TrackEntry:ur([174]),TrackType:ur([131]),FlagDefault:ur([136]),CodecID:ur([134]),CodecPrivate:ur([99,162]),VideoTrack:ur([224]),AudioTrack:ur([225]),Cluster:ur([31,67,182,117]),Timestamp:ur([231]),TimestampScale:ur([42,215,177]),BlockGroup:ur([160]),BlockDuration:ur([155]),Block:ur([161]),SimpleBlock:ur([163])},Ks=[128,64,32,16,8,4,2,1],Ys=ur([0,0,0,1]),Xs=ur([0,0,1]),Js=ur([0,0,3]),$s={webm:ur([119,101,98,109]),matroska:ur([109,97,116,114,111,115,107,97]),flac:ur([102,76,97,67]),ogg:ur([79,103,103,83]),ac3:ur([11,119]),riff:ur([82,73,70,70]),avi:ur([65,86,73]),wav:ur([87,65,86,69]),"3gp":ur([102,116,121,112,51,103]),mp4:ur([102,116,121,112]),fmp4:ur([115,116,121,112]),mov:ur([102,116,121,112,113,116]),moov:ur([109,111,111,118]),moof:ur([109,111,111,102])},Zs={aac:function(e){return cr(e,[255,16],{offset:ks(e),mask:[255,22]})},mp3:function(e){return cr(e,[255,2],{offset:ks(e),mask:[255,6]})},webm:function(e){return cr(e=Ls(e,[zs.EBML,zs.DocType])[0],$s.webm)},mkv:function(e){return cr(e=Ls(e,[zs.EBML,zs.DocType])[0],$s.matroska)},mp4:function(e){return!Zs["3gp"](e)&&!Zs.mov(e)&&(!(!cr(e,$s.mp4,{offset:4})&&!cr(e,$s.fmp4,{offset:4}))||!(!cr(e,$s.moof,{offset:4})&&!cr(e,$s.moov,{offset:4}))||void 0)},mov:function(e){return cr(e,$s.mov,{offset:4})},"3gp":function(e){return cr(e,$s["3gp"],{offset:4})},ac3:function(e){var t=ks(e);return cr(e,$s.ac3,{offset:t})},ts:function(e){if(e.length<189&&1<=e.length)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=ks(e);return cr(e,$s.flac,{offset:t})},ogg:function(e){return cr(e,$s.ogg)},avi:function(e){return cr(e,$s.riff)&&cr(e,$s.avi,{offset:8})},wav:function(e){return cr(e,$s.riff)&&cr(e,$s.wav,{offset:8})},h264:function(e){return Os(e,"h264",7,3).length},h265:function(e){return Os(e,"h265",[32,33],3).length}},eo=Object.keys(Zs).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);function to(e){e=ur(e);for(var t=0;t<eo.length;t++){var n=eo[t];if(Tu[n](e))return n}return""}function no(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t}function io(e){return qi.log.debug?qi.log.debug.bind(qi,"VHS:",e+" >"):function(){}}function ro(e,t){var n,i=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return qi.createTimeRanges(i)}function ao(e,t){return ro(e,(function(e,n){return e-.1<=t&&t<=n+.1}))}function so(e,t){return ro(e,(function(e){return t<=e-Eu}))}function oo(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")}function uo(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function lo(e){if(e&&e.length&&e.end)return e.end(e.length-1)}function co(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);a<t||(n+=r<t&&t<=a?a-t:a-r)}return n}function ho(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n}function po(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])}function fo(e){return(e=e.segments&&e.segments.length&&e.segments[e.segments.length-1])&&e.parts||[]}function mo(e){var t=e.preloadSegment;if(t)return e=t.parts,t=(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0),t+(e&&e.length?e.length:0)}function go(e,t){return t.endList?0:e&&e.suggestedPresentationDelay?e.suggestedPresentationDelay:(e=0<fo(t).length)&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:e&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0}function yo(e,t,n){if((t=void 0===t?e.mediaSequence+e.segments.length:t)<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=ho(e,r),void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);return i.precise?i.result:(t=function(e,t){for(var n,i=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=ho(e,n),void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?t.result:i.result+n}function vo(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return window.Infinity}return yo(e,t,n)}function _o(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,r=e.endIndex,a=0;if(r<i&&(i=(e=[r,i])[0],r=e[1]),i<0){for(var s=i;s<Math.min(0,r);s++)a+=t;i=0}for(var o=i;o<r;o++)a+=n[o].duration;return a}function bo(e,t,n,i){return e&&e.segments?e.endList?vo(e):null===t?null:(t=yo(e,e.mediaSequence+e.segments.length,t=t||0),n&&(t-=i="number"==typeof i?i:go(null,e)),Math.max(0,t)):null}function To(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function So(e){return e.excludeUntil&&e.excludeUntil===1/0}function wo(e){var t=To(e);return!e.disabled&&!t}function Eo(e,t){return t.attributes&&t.attributes[e]}function ko(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!wo(e)&&(e.attributes.BANDWIDTH||0)<n})).length}function Co(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))}function Ao(e,t){var n,i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(n in i){for(var a in i[n])if(r=t(i[n][a]))break;if(r)break}return!!r}function Po(e){if(!e||!e.playlists||!e.playlists.length)return Ao(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=0;t<e.playlists.length;t++){var n=function(t){var n=e.playlists[t];return(t=n.attributes&&n.attributes.CODECS)&&t.split(",").every(nr)||Ao(e,(function(e){return Co(n,e)}))?"continue":{v:!1}}(t);if("continue"!==n&&"object"==s(n))return n.v}return!0}function Io(e,t){return e+"-"+t}function Do(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][r];t(a,n,i,r)}}))}function Lo(e){var t=e.playlist,n=e.uri;e=e.id,t.id=e,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}}function Oo(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)e.playlists[n].uri||(e.playlists[n].uri="placeholder-uri-"+n);var i,r=Po(e);Do(e,(function(t,n,i,a){var s="placeholder-uri-"+n+"-"+i+"-"+a;if(!t.playlists||!t.playlists.length){if(r&&"AUDIO"===n&&!t.uri)for(var o=0;o<e.playlists.length;o++){var u=e.playlists[o];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===i)return}t.playlists=[y({},t)]}t.playlists.forEach((function(t,n){var i=Io(n,s);t.uri?t.resolvedUri=t.resolvedUri||wu(e.uri,t.uri):(t.uri=0===n?s:i,t.resolvedUri=t.uri),t.id=t.id||i,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Lo({playlist:n,id:Io(t,n.uri)}),n.resolvedUri=wu(e.uri,n.uri),e.playlists[n.id]=n,(e.playlists[n.uri]=n).attributes.BANDWIDTH||Au.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),Do(i=e,(function(e){e.uri&&(e.resolvedUri=wu(i.uri,e.uri))}))}function xo(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=wu(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=wu(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=wu(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=wu(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=wu(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=wu(t,e.uri))}))}function Mo(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t}function Ro(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment}function No(e,t,n){void 0===n&&(n=Ro);var i=Pu(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=Mo(t);var a=Pu(r,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(var s=0;s<t.skip.skippedSegments;s++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var i=e.slice(),r=t.slice();n=n||0;for(var a,s=[],o=0;o<r.length;o++){var u=i[o+n],l=r[o];u?(a=u.map||a,s.push(function(e,t){if(!e)return t;var n=Pu(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=Pu(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n}(u,l))):(a&&!l.map&&(l.map=a),s.push(l))}return s}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach((function(e){xo(e,a.resolvedUri)}));for(var o=0;o<i.playlists.length;o++)i.playlists[o].id===t.id&&(i.playlists[o]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,Do(e,(function(e,n,i,r){if(e.playlists)for(var s=0;s<e.playlists.length;s++)t.id===e.playlists[s].id&&(e.playlists[s]=a)})),i}function Uo(e,t){var n=e.segments||[],i=(n=(i=n[n.length-1])&&i.parts&&i.parts[i.parts.length-1])&&n.duration||i&&i.duration;return t&&i?1e3*i:500*(e.partTargetDuration||e.targetDuration||10)}function Bo(e,t,n,i){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),i(t=t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode?t:new Error("XHR Failed with a response of: "+(e&&(r||e.responseText))),e)}function jo(){function e(t,n){t=Lu({timeout:45e3},t);var i=e.beforeRequest||qi.Vhs.xhr.beforeRequest;!i||"function"!=typeof i||(i=i(t))&&(t=i);var r=(!0===qi.Vhs.xhr.original?Du:qi.Vhs.xhr)(t,(function(e,t){return Bo(r,e,t,n)})),a=r.abort;return r.abort=function(){return r.aborted=!0,a.apply(r,arguments)},r.uri=t.uri,r.requestTime=Date.now(),r}return e.original=!0,e}function Fo(e){var t,n={};return e.byterange&&(n.Range="bytes="+(e=(t=e.byterange).offset)+"-"+(t="bigint"==typeof t.offset||"bigint"==typeof t.length?window.BigInt(t.offset)+window.BigInt(t.length)-window.BigInt(1):t.offset+t.length-1)),n}function Ho(e,t){return e=e.toString(16),"00".substring(0,2-e.length)+e+(t%2?" ":"")}function Vo(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Qo(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];or(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t}function qo(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function Go(e){return e.resolvedUri}function Wo(e){for(var t=Array.prototype.slice.call(e),n="",i=0;i<t.length/16;i++)n+=t.slice(16*i,16*i+16).map(Ho).join("")+" "+t.slice(16*i,16*i+16).map(Vo).join("")+"\n";return n}function zo(e){var t=e.programTime,n=e.playlist,i=e.retryCount,r=void 0===i?2:i,a=e.seekTo,s=e.pauseAfterSeek,o=void 0===s||s,u=e.tech,l=e.callback;if(!l)throw new Error("seekToProgramTime: callback must be provided");return void 0!==t&&n&&a?n.endList||u.hasStarted_?function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n)?(i=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;if(n<(r=t.segments[0]).dateTimeObject)return null;for(var i=0;i<t.segments.length-1;i++){var r=t.segments[i];if(n<t.segments[i+1].dateTimeObject)break}var a=t.segments[t.segments.length-1],s=(e=a.dateTimeObject,a.videoTimingInfo?(s=a.videoTimingInfo).transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds:a.duration+.25*a.duration);return new Date(e.getTime()+1e3*s)<n?null:{segment:r=e<n?a:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Cu.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"}}(t,n))?(e=function(e,t){var n;try{i=new Date(e),n=new Date(t)}catch(e){}var i=i.getTime();return(n.getTime()-i)/1e3}((s=i.segment).dateTimeObject,t),"estimate"===i.type?0===r?l({message:t+" is not buffered yet. Try again"}):(a(i.estimatedStart+e),void u.one("seeked",(function(){zo({programTime:t,playlist:n,retryCount:r-1,seekTo:a,pauseAfterSeek:o,tech:u,callback:l})}))):(e=s.start+e,u.one("seeked",(function(){return l(null,u.currentTime())})),o&&u.pause(),void a(e))):l({message:t+" was not found in the stream"}):l({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri}):l({message:"player must be playing a live stream to start buffering"}):l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}function Ko(e,t){if(!Ro(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(i.byterange||r.byterange){if(i=i.byterange,r=r.byterange,i&&!r||!i&&r)return!1;if(i.offset!==r.offset||i.length!==r.length)return!1}}return!0}function Yo(e,t){var n,i={};for(n in e){var r=e[n].sidx;if(r){var a=as(r);if(!t[a])break;var s=t[a].sidxInfo;s=s,r=r,(Boolean(!s.map&&!r.map)||Boolean(s.map&&r.map&&s.map.byterange.offset===r.map.byterange.offset&&s.map.byterange.length===r.map.byterange.length))&&s.uri===r.uri&&s.byterange.offset===r.byterange.offset&&s.byterange.length===r.byterange.length&&(i[a]=t[a])}}return i}function Xo(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e}function Jo(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,s=e.onData,o=e.onTrackInfo,u=e.onAudioTimingInfo,l=e.onVideoTimingInfo,c=e.onVideoSegmentTimingInfo,d=e.onAudioSegmentTimingInfo,h=e.onId3,p=e.onCaptions,f=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,y=e.isEndOfTimeline,v={buffer:[]},_=y;t.onmessage=function(n){var i;t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var i=(l=e.data.segment).type,r=l.initSegment,a=l.captions,s=l.captionStreams,o=l.metadata,u=l.videoFrameDtsTime,l=l.videoFramePtsTime;t.buffer.push({captions:a,captionStreams:s,metadata:o}),e=e.data.segment.boxes||{data:e.data.segment.data},r={type:i,data:new Uint8Array(e.data,e.data.byteOffset,e.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)},void 0!==u&&(r.videoFrameDtsTime=u),void 0!==l&&(r.videoFramePtsTime=l),n(r)}(n,v,s),"trackinfo"===n.data.action&&o(n.data.trackInfo),"gopInfo"===n.data.action&&(v.gopInfo=n.data.gopInfo),"audioTimingInfo"===n.data.action&&u(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,n=(i={transmuxedData:v,callback:f}).transmuxedData,i=i.callback,n.buffer=[],i(n),Nu(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength&&(r=n instanceof ArrayBuffer?n:n.buffer,a=n instanceof ArrayBuffer?0:n.byteOffset,t.postMessage({action:"push",data:r,byteOffset:a,byteLength:n.byteLength},[r])),y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})}function $o(e,t){e.postMessage({action:t}),Nu(e)}function Zo(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=y({},e,{endAction:null,transmuxer:null,callback:null}),a=function r(a){a.data.action===n&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),i(a.data))};t.addEventListener("message",a),e.data?(a=e.data instanceof ArrayBuffer,r.byteOffset=a?0:e.data.byteOffset,r.byteLength=e.data.byteLength,a=[a?e.data:e.data.buffer],t.postMessage(r,a)):t.postMessage(r)}function eu(e){e.forEach((function(e){e.abort()}))}function tu(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:ju,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Fu,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Bu,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Bu,xhr:t}:null}function nu(e,t,n){return function(i,r){var a=r.response;if(i=tu(i,r))return n(i,e);if(16!==a.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Bu,xhr:r},e);a=new DataView(a);for(var s=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]),o=0;o<t.length;o++)t[o].bytes=s;return n(null,e)}}function iu(e,t){var n=to(e.map.bytes);if("mp4"!==n){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:Bu})}Zo({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var i=n.tracks;return n=n.data,e.map.bytes=n,i.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||"number"==typeof(e.map.tracks[t.type]=t).id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale)})),t(null)}})}function ru(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=new Uint8Array(n);if(0<As(f,["moof"]).length){t.isFmp4=!0;var m=t.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),i(t,g);var y=function(e){d(t,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),e&&e.length&&u(t,e),h(null,t,{})};Zo({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var i=e.data;e=e.startTime,n=i.buffer,t.bytes=f=i,g.hasAudio&&!g.isMuxed&&r(t,"audio","start",e),g.hasVideo&&r(t,"video","start",e),m.video&&i.byteLength&&t.transmuxer?Zo({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[m.video.id],callback:function(e){n=e.data.buffer,t.bytes=f=e.data,e.logs.forEach((function(e){p(qi.mergeOptions(e,{stream:"mp4CaptionParser"}))})),y(e.captions)}}):y()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=to(f)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),h(null,t,{}),0;!function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=(e=t.map&&t.map.tracks||{},Boolean(e.audio&&e.video)),m=r.bind(null,t,"audio","start"),g=r.bind(null,t,"audio","end"),y=r.bind(null,t,"video","start"),v=r.bind(null,t,"video","end");Zo({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data,(e=e.result)&&(i(t,{hasAudio:e.hasAudio,hasVideo:e.hasVideo,isMuxed:f}),i=null,e.hasAudio&&!f&&m(e.audioStart),e.hasVideo&&y(e.videoStart),y=m=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void Jo(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:f,onData:function(e){e.type="combined"===e.type?"video":e.type,d(t,e)},onTrackInfo:function(e){i&&(f&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),g&&void 0!==e.end&&g(e.end)},onVideoTimingInfo:function(e){y&&void 0!==e.start&&(y(e.start),y=null),v&&void 0!==e.end&&v(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){s(e)},onId3:function(e,n){o(t,e,n)},onCaptions:function(e){u(t,[e])},isEndOfTimeline:l,onEndedTimeline:function(){c()},onTransmuxerLog:p,onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})}({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})}else h(null,t,{})}function au(e,t){var n=e.id,i=e.key,r=e.encryptedBytes,a=e.decryptionWorker;e=function e(i){i.data.source===n&&(a.removeEventListener("message",e),i=i.data.decrypted,t(new Uint8Array(i.bytes,i.byteOffset,i.byteLength)))},a.addEventListener("message",e),e=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),a.postMessage(Qo({source:n,encrypted:r,key:e,iv:i.iv}),[r.buffer,e.buffer])}function su(e,t){return t=t.attributes||{},e&&e.mediaGroups&&e.mediaGroups.AUDIO&&t.AUDIO&&e.mediaGroups.AUDIO[t.AUDIO]}function ou(e){var t={};return e.forEach((function(e){var n=e.mediaType,i=e.type;e=e.details,t[n]=t[n]||[],t[n].push(er(""+i+e))})),Object.keys(t).forEach((function(e){return 1<t[e].length?(Hu("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null)):void(t[e]=t[e][0])})),t}function uu(e){var t=0;return e.audio&&t++,e.video&&t++,t}function lu(e,t){var n,i=t.attributes||{},r=ou(function(e){if((e=e.attributes||{}).CODECS)return tr(e.CODECS)}(t)||[]);return su(e,t)&&!r.audio&&!function(e,t){if(!su(e,t))return!0;t=t.attributes||{};var n,i=e.mediaGroups.AUDIO[t.AUDIO];for(n in i)if(!i[n].uri&&!i[n].playlists)return!0;return!1}(e,t)&&(n=ou(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n,i=e.mediaGroups.AUDIO[t];if(!i)return null;for(n in i){var r=i[n];if(r.default&&r.playlists)return tr(r.playlists[0].attributes.CODECS)}return null}(e,i.AUDIO)||[])).audio&&(r.audio=n.audio),r}function cu(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}}function du(e,t){return(e=e&&window.getComputedStyle(e))?e[t]:""}function hu(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))}function pu(e,t){var n,i;return(n=(n=e.attributes.BANDWIDTH?e.attributes.BANDWIDTH:n)||window.Number.MAX_VALUE)-((i=t.attributes.BANDWIDTH?t.attributes.BANDWIDTH:i)||window.Number.MAX_VALUE)}function fu(e,t,n,i,r,a){if(e){var s={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r},o=e.playlists;Cu.isAudioOnly(e)&&(o=a.getAudioTrackPlaylists_(),s.audioOnly=!0);var u=o.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t,height:n,playlist:e}}));hu(u,(function(e,t){return e.bandwidth-t.bandwidth}));var l,c,d,h=(u=u.filter((function(e){return!Cu.isIncompatible(e.playlist)}))).filter((function(e){return Cu.isEnabled(e.playlist)})),p=(e=(h=h.length?h:u.filter((function(e){return!Cu.isDisabled(e.playlist)}))).filter((function(e){return e.bandwidth*Mu.BANDWIDTH_VARIANCE<t})))[e.length-1];if(o=e.filter((function(e){return e.bandwidth===p.bandwidth}))[0],!1===r){var f=o||h[0]||u[0];return f&&f.playlist?(r=o?"bandwidthBestRep":"sortedPlaylistReps",h[0]&&(r="enabledPlaylistReps"),Vu("choosing "+cu(f)+" using "+r+" with options",s),f.playlist):(Vu("could not choose a playlist with options",s),null)}hu(f=e.filter((function(e){return e.width&&e.height})),(function(e,t){return e.width-t.width})),p=(e=f.filter((function(e){return e.width===n&&e.height===i})))[e.length-1],(e=e.filter((function(e){return e.bandwidth===p.bandwidth}))[0])||(c=(l=f.filter((function(e){return e.width>n||e.height>i}))).filter((function(e){return e.width===l[0].width&&e.height===l[0].height})),p=c[c.length-1],c=c.filter((function(e){return e.bandwidth===p.bandwidth}))[0]),a.experimentalLeastPixelDiffSelector&&(m=f.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e})),hu(m,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),d=m[0]);var m=d||c||e||o||h[0]||u[0];return m&&m.playlist?(u="sortedPlaylistReps",d?u="leastPixelDiffRep":c?u="resolutionPlusOneRep":e?u="resolutionBestRep":o?u="bandwidthBestRep":h[0]&&(u="enabledPlaylistReps"),Vu("choosing "+cu(m)+" using "+u+" with options",s),m.playlist):(Vu("could not choose a playlist with options",s),null)}}function mu(e,t,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=e&&r.endTime<=t&&n.removeCue(r)}function gu(e){return"number"==typeof e&&isFinite(e)}function yu(e){var t=e.startOfSegment,n=e.duration,i=e.segment,r=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=e.mediaIndex,c=e.partIndex,d=e.timeline,h=(void 0===u?[]:u).length-1,p="mediaIndex/partIndex increment";return e.getMediaInfoForTime?p="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(p+=" with independent "+e.independent),a="number"==typeof c,u=e.segment.uri?"segment":"pre-segment",e=a?mo({preloadSegment:i})-1:0,u+" ["+(s+l)+"/"+(s+h)+"]"+(a?" part ["+c+"/"+e+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+(a?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+d+"] selected by ["+p+"] playlist ["+o+"]"}function vu(e){return e+"TimingInfo"}function _u(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,r=e.loaderType;if(e=e.audioDisabled,n!==i){if("audio"===r)return!(n=t.lastTimelineChange({type:"main"}))||n.to!==i;if("main"===r&&e)return!(t=t.pendingTimelineChange({type:"audio"}))||t.to!==i}}function bu(e){var t=e.segmentDuration;return e=e.maxDuration,!!t&&Math.round(t)>e+Eu}eo.forEach((function(e){var t=Zs[e];Zs[e]=function(e){return t(ur(e))}}));var Tu=Zs,Su=9e4,wu=Gi,Eu=1/30,ku=qi.createTimeRange,Cu={liveEdgeDelay:go,duration:vo,seekable:function(e,t,n){var i=t||0;return null===(n=bo(e,t,!0,n))?ku():ku(i,n)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,s=e.experimentalExactManifestTimings,o=n-a,u=po(t),l=0,c=0;c<u.length;c++){var d=u[c];if(i===d.segmentIndex&&("number"!=typeof r||"number"!=typeof d.partIndex||r===d.partIndex)){l=c;break}}if(o<0){if(0<l)for(var h=l-1;0<=h;h--){var p=u[h];if(o+=p.duration,s){if(o<0)continue}else if(o+Eu<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:a-_o({defaultDuration:t.targetDuration,durationList:u,startIndex:l,endIndex:h})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n}}if(l<0){for(var f=l;f<0;f++)if((o-=t.targetDuration)<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n};l=0}for(var m=l;m<u.length;m++){var g=u[m];if(o-=g.duration,s){if(0<o)continue}else if(0<=o-Eu)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:a+_o({defaultDuration:t.targetDuration,durationList:u,startIndex:l,endIndex:m})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:n}},isEnabled:wo,isDisabled:function(e){return e.disabled},isBlacklisted:To,isIncompatible:So,playlistEnd:bo,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Eo,estimateSegmentRequestTime:function(e,t,n,i){return Eo("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*(i=void 0===i?0:i))/t:NaN},isLowestEnabledRendition:ko,isAudioOnly:Po,playlistMatch:Co,segmentDurationWithParts:ho},Au=qi.log,Pu=qi.mergeOptions,Iu=function(e){function t(t,n,i){var r;if(void 0===i&&(i={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");r.logger_=io("PlaylistLoader");var a=void 0!==(a=i.withCredentials)&&a;return i=void 0!==(i=i.handleManifestRedirects)&&i,r.src=t,r.vhs_=n,r.withCredentials=a,r.handleManifestRedirects=i,n=n.options_,r.customTagParsers=n&&n.customTagParsers||[],r.customTagMappers=n&&n.customTagMappers||[],r.experimentalLLHLS=n&&n.experimentalLLHLS||!1,qi.browser.IE_VERSION&&(r.experimentalLLHLS=!1),r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(ht(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}pt(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e,t,n=this;"HAVE_METADATA"===this.state&&(e=this.media(),t=wu(this.master.uri,e.uri),this.experimentalLLHLS&&(t=function(e,t){if(t.endList||!t.serverControl)return e;var n,i,r,a,s={};return t.serverControl.canBlockReload&&(r=t.preloadSegment,n=t.mediaSequence+t.segments.length,r&&(i=r.parts||[],-1<(r=mo(t)-1)&&r!=i.length-1&&(s._HLS_part=r),(-1<r||i.length)&&n--),s._HLS_msn=n),t.serverControl&&t.serverControl.canSkipUntil&&(s._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(s).length&&(a=new window.URL(e),["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){s.hasOwnProperty(e)&&a.searchParams.set(e,s[e])})),e=a.toString()),e}(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},(function(e,t){if(n.request)return e?n.playlistRequestError(n.request,n.media(),"HAVE_METADATA"):void n.haveMetadata({playlistString:n.request.responseText,url:n.media().uri,id:n.media().id})})))},n.playlistRequestError=function(e,t,n){var i=t.uri;t=t.id,this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+i+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,r=void 0===(a=e.customTagParsers)?[]:a,a=void 0===(a=e.customTagMappers)?[]:a,s=(e=e.experimentalLLHLS,new fr);t&&s.on("warn",t),n&&s.on("info",n),r.forEach((function(e){return s.addParser(e)})),a.forEach((function(e){return s.addTagMapper(e)})),s.push(i),s.end();var o=s.manifest;e||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){o.hasOwnProperty(e)&&delete o[e]})),o.segments&&o.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),o.targetDuration||(u=10,o.segments&&o.segments.length&&(u=o.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+u),o.targetDuration=u);var u=fo(o);return u.length&&!o.partTargetDuration&&(u=u.reduce((function(e,t){return Math.max(e,t.duration)}),0),t&&(t("manifest has no partTargetDuration defaulting to "+u),Au.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u),o}({onwarn:function(e){return e=e.message,t.logger_("m3u8-parser warn for "+n+": "+e)},oninfo:function(e){return e=e.message,t.logger_("m3u8-parser info for "+n+": "+e)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,i=e.url;e=e.id,this.request=null,this.state="HAVE_METADATA",(t=n||this.parseManifest_({url:i,manifestString:t})).lastRequest=Date.now(),Lo({playlist:t,uri:i,id:e}),i=No(this.master,t),this.targetDuration=t.partTargetDuration||t.targetDuration,this.pendingMedia_=null,i?(this.master=i,this.media_=this.master.playlists[e]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Uo(this.media(),!!i)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),window.clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(window.clearTimeout(this.finalRenditionTimeout),t){var i=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,e,!1),i)}else{var r=this.state;if(t=!this.media_||e.id!==this.media_.id,(i=this.master.playlists[e.id])&&i.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(t&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Uo(e,!0)),t){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=no(n.handleManifestRedirects,e.resolvedUri,i),t)return n.playlistRequestError(n.request,e,r);n.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();e?(e=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),e)):this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"==s(this.src))return this.src.uri||(this.src.uri=window.location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=no(e.handleManifestRedirects,e.src,n),n=e.parseManifest_({manifestString:n.responseText,url:e.src}),e.setupInitialPlaylist(n)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,Oo(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=Mo(e),e.segments.forEach((function(t){xo(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t,n,i,r=this.srcUri()||window.location.href;this.master=(n=Io(0,t=r),(i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]}).playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i),this.haveMetadata({playlistObject:e,url:r,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(q=qi.EventTarget),Du=qi.xhr,Lu=qi.mergeOptions,Ou=(Vt=Object.freeze({__proto__:null,createTransferableMessage:Qo,initSegmentId:qo,segmentKeyId:Go,hexDump:Wo,tagDump:function(e){return Wo(e=e.bytes)},textRanges:function(e){for(var t,n,i="",r=0;r<e.length;r++)i+=(n=r,(t=e).start(n)+"-"+t.end(n)+" ");return i}}),Ki=qi.EventTarget,qi.mergeOptions),xu=function(e){function t(t,n,i,r){var a;if(void 0===i&&(i={}),(a=e.call(this)||this).masterPlaylistLoader_=r||ht(a),r||(a.isMaster_=!0),r=void 0!==(r=i.withCredentials)&&r,i=void 0!==(i=i.handleManifestRedirects)&&i,a.vhs_=n,a.withCredentials=r,a.handleManifestRedirects=i,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=io("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}pt(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=s(e)||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var i,r,a=this,s=e.sidx&&as(e.sidx);e.sidx&&s&&!this.masterPlaylistLoader_.sidxMapping_[s]?(i=no(this.handleManifestRedirects,e.sidx.resolvedUri),r=function(i,r){if(!a.requestErrored_(i,r,t)){var o;i=a.masterPlaylistLoader_.sidxMapping_;try{o=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=Gs(e.subarray(i)),n.firstOffset=Gs(e.subarray(i+8)),i+=16);var r=t.getUint16(i+=2);for(i+=2;0<r;i+=12,r--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n}(ur(r.response).subarray(8))}catch(i){return void a.requestErrored_(i,r,t)}return i[s]={sidxInfo:e.sidx,sidx:o},ts(e,o,e.sidx.resolvedUri),n(!0)}},this.request=function(e,t,n){function i(e,t,i,r){return t.abort(),o=!0,n(e,t,i,r)}function r(e,t){if(!o){if(e)return i(e,t,"",s);var n=t.responseText.substring(s&&s.byteLength||0,t.responseText.length);return s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e}))).length<=1)return ur(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),a=0;return t.forEach((function(e){e=ur(e),r.set(e,a),a+=e.byteLength})),r}(s,lr(n,!0)),a=a||ks(s),s.length<10||a&&s.length<a+2||"ts"===(n=to(s))&&s.length<188||!n&&s.length<376?function(e,t){if(4===e.readyState)return t()}(t,(function(){return i(e,t,"",s)})):i(null,t,n,s)}}var a,s=[],o=!1,u=t({uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,Bo(e,null,{statusCode:e.status},r)}))}},(function(e,t){return Bo(u,e,t,r)}));return u}(i,this.vhs_.xhr,(function(t,n,s,o){if(t)return r(t,n);if(!s||"mp4"!==s)return r({status:n.status,message:"Unsupported "+(s||"unknown")+" container type for sidx segment at URL: "+i,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);s=(u=e.sidx.byterange).offset;var u=u.length;if(o.length>=u+s)return r(t,{response:o.subarray(s,s+u),status:n.status,uri:n.uri});a.request=a.vhs_.xhr({uri:i,responseType:"arraybuffer",headers:Fo({byterange:e.sidx.byterange})},r)}))):this.mediaRequest_=window.setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window.clearTimeout(this.minimumUpdatePeriodTimeout_),window.clearTimeout(this.mediaRequest_),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(i){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState;e=e.playlist,this.state="HAVE_METADATA",this.loadedPlaylists_[e.id]=e,this.mediaRequest_=null,this.refreshMedia_(e.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(window.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();e?(e=n?n.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout((function(){return t.load()}),e)):this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=window.setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(!t.requestErrored_(n,i)){var r=i.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.masterLoaded_=Date.parse(i.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=no(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,i),r?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(i,r)}))):e(i,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t=this,n=function(e){return function(e){if(!(e=vs(e,"UTCTiming")[0]))return null;var t=Ts(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return t}(Es(e))}(this.masterPlaylistLoader_.masterXml_);return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:wu(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(t.request){if(i)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();r="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=r-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,t=(Oo(n=function(e,t){void 0===t&&(t={});var n=function(e,t){var n=t=void 0===t?{}:t,i=void 0===(a=n.manifestUri)?"":a,r=(t=void 0===(r=n.NOW)?Date.now():r,void 0===(a=n.clientOffset)?0:a);if(!(n=vs(e,"Period")).length)throw new Error(Ms);var a=vs(e,"Location"),s=Ts(e);e=Ss([i],vs(e,"BaseURL")),s.type=s.type||"static",s.sourceDuration=s.mediaPresentationDuration||0,s.NOW=t,s.clientOffset=r,a.length&&(s.locations=a.map(_s));var o,u,l=[];return n.forEach((function(e,t){var n,i=Ts(e),r=l[t-1];i.start=(t=(n={attributes:i,priorPeriodAttributes:r?r.attributes:null,mpdType:s.type}).attributes,r=n.priorPeriodAttributes,n=n.mpdType,"number"==typeof t.start?t.start:r&&"number"==typeof r.start&&"number"==typeof r.duration?r.start+r.duration:r||"static"!==n?null:0),l.push({node:e,attributes:i})})),{locations:s.locations,representationInfo:Ka(l.map((o=s,u=e,function(e,t){var n=Ss(u,vs(e.node,"BaseURL")),i=Wa(o,{periodStart:e.attributes.start});"number"==typeof e.attributes.duration&&(i.periodDuration=e.attributes.duration);var r=vs(e.node,"AdaptationSet");return e=ws(e.node),Ka(r.map(function(e,t,n){return function(i){var r=Ts(i),a=Ss(t,vs(i,"BaseURL")),s={role:Ts(s=vs(i,"Role")[0])};r=Wa(e,r,s),s="urn:scte:dash:cc:cea-608:2015"===(s=Ts(s=vs(i,"Accessibility")[0])).schemeIdUri?("string"!=typeof s.value?[]:s.value.split(";")).map((function(e){var t,n,i;return/^CC\d=/.test(i=e)?(n=(t=e.split("="))[0],i=t[1]):/^CC\d$/.test(e)&&(n=e),{channel:n,language:i}})):"urn:scte:dash:cc:cea-708:2015"===s.schemeIdUri?("string"!=typeof s.value?[]:s.value.split(";")).map((function(e){var t,n,i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};return/=/.test(e)?(t=(n=e.split("="))[0],n=void 0===(n=n[1])?"":n,i.channel=t,i.language=e,n.split(",").forEach((function(e){e=(t=e.split(":"))[0];var t=t[1];"lang"===e?i.language=t:"er"===e?i.easyReader=Number(t):"war"===e?i.aspectRatio=Number(t):"3D"===e&&(i["3D"]=Number(t))}))):i.language=e,i.channel&&(i.channel="SERVICE"+i.channel),i})):void 0,s&&(r=Wa(r,{captionServices:s})),(s=vs(i,"Label")[0])&&s.childNodes.length&&(r=Wa(r,{label:c=s.childNodes[0].nodeValue.trim()}));var o,u,l,c=vs(i,"ContentProtection").reduce((function(e,t){var n=Ts(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var i=Qs[n.schemeIdUri];return i&&(e[i]={attributes:n},(t=vs(t,"cenc:pssh")[0])&&(t=_s(t),e[i].pssh=t&&Yi(t))),e}),{});return Object.keys(c).length&&(r=Wa(r,{contentProtection:c})),c=ws(i),i=vs(i,"Representation"),c=Wa(n,c),Ka(i.map((o=r,u=a,l=c,function(e){var t=vs(e,"BaseURL"),n=(t=Ss(u,t),Wa(o,Ts(e))),i=ws(e);return t.map((function(e){return{segmentInfo:Wa(l,i),attributes:Wa(n,{baseUrl:e})}}))})))}}(i,n,e)))})))}}(Es(e),t);return function(e){var t=e.dashPlaylists,n=e.locations,i=void 0===(h=e.sidxMapping)?{}:h,r=e.previousManifest;if(!t.length)return{};var a,s,o=(p=t[0].attributes).sourceDuration,u=p.type,l=p.suggestedPresentationDelay,c=p.minimumUpdatePeriod,d=ss(t.filter(ls)).map(us),h=ss(t.filter(cs)),p=(e=ss(t.filter(ds)),t.map((function(e){return e.attributes.captionServices})).filter(Boolean));return o={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((t={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:o,playlists:function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=os(e[n],t);return e}(d,i)},0<=c&&(o.minimumUpdatePeriod=1e3*c),n&&(o.locations=n),"dynamic"===u&&(o.suggestedPresentationDelay=l),l=0===o.playlists.length,l=h.length?function(e,t,n){var i;return void 0===t&&(t={}),void 0===n&&(n=!1),e=e.reduce((function(e,r){var a=r.attributes.role&&r.attributes.role.value||"",s=r.attributes.lang||"",o=r.attributes.label||"main";e[o=s&&!r.attributes.label?r.attributes.lang+(a?" ("+a+")":""):o]||(e[o]={language:s,autoselect:!0,default:"main"===a,playlists:[],uri:""});var u,l,c,d,h,p,f=os((l=n,c=(u=r).attributes,f=u.segments,d=u.sidx,h=u.mediaSequence,p=u.discontinuitySequence,s=u.discontinuityStarts,f={attributes:((u={NAME:c.id,BANDWIDTH:c.bandwidth,CODECS:c.codecs})["PROGRAM-ID"]=1,u),uri:"",endList:"static"===c.type,timeline:c.periodStart,resolvedUri:"",targetDuration:c.duration,discontinuitySequence:p,discontinuityStarts:s,timelineStarts:c.timelineStarts,mediaSequence:h,segments:f},c.contentProtection&&(f.contentProtection=c.contentProtection),d&&(f.sidx=d),l&&(f.attributes.AUDIO="audio",f.attributes.SUBTITLES="subs"),f),t);return e[o].playlists.push(f),void 0===i&&"main"===a&&((i=r).default=!0),e}),{}),i||(e[Object.keys(e)[0]].default=!0),e}(h,i,l):null,i=e.length?(void 0===(a=i)&&(a={}),e.reduce((function(e,t){var n=t.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),e[n].playlists.push(os(function(e){var t=e.attributes,n=e.segments,i=e.mediaSequence,r=e.discontinuityStarts,a=e.discontinuitySequence;return void 0===n&&(n=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration),(e={NAME:t.id,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1,t.codecs&&(e.CODECS=t.codecs),{attributes:e,uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:r,discontinuitySequence:a,mediaSequence:i,segments:n}}(t),a)),e}),{})):null,d=(e=d.concat(hs(l),hs(i))).map((function(e){return e.timelineStarts})),o.timelineStarts=ns(d),e=e,s=o.timelineStarts,e.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=Xa(s,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),l&&(o.mediaGroups.AUDIO.audio=l),i&&(o.mediaGroups.SUBTITLES.subs=i),p.length&&(o.mediaGroups["CLOSED-CAPTIONS"].cc=p.reduce((function(e,t){return t&&t.forEach((function(t){var n=t.channel,i=t.language;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e}),{})),r?function(e){var t,n,i=e.oldManifest,r=e.newManifest,a=i.playlists.concat(is(i));return e=r.playlists.concat(is(r)),r.timelineStarts=ns([i.timelineStarts,r.timelineStarts]),a={oldPlaylists:a,newPlaylists:e,timelineStarts:r.timelineStarts},t=a.oldPlaylists,e=a.newPlaylists,n=a.timelineStarts,e.forEach((function(e){e.discontinuitySequence=Xa(n,(function(t){return t.timeline===e.timeline}));var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(i&&!e.sidx){var r=e.segments[0],a=Xa(i.segments,(function(e){return Math.abs(e.presentationTime-r.presentationTime)<1/60}));if(-1===a)return rs({playlist:e,mediaSequence:i.mediaSequence+i.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!i.segments.length&&e.timeline>i.timeline||i.segments.length&&e.timeline>i.segments[i.segments.length-1].timeline)&&e.discontinuitySequence--);i.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),rs({playlist:e,mediaSequence:i.segments[a].number})}})),r}({oldManifest:r,newManifest:o}):o}({dashPlaylists:e=n.representationInfo.map(ys),locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})}((n={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e}).masterXml,{manifestUri:t=n.srcUrl,clientOffset:n.clientOffset,sidxMapping:n.sidxMapping,previousManifest:n=n.previousManifest}),t),n);e&&(t=function(e,t,n){for(var i=!0,r=Ou(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var s,o=t.playlists[a];o.sidx&&(s=as(o.sidx),n&&n[s]&&n[s].sidx&&ts(o,n[s].sidx,o.sidx.resolvedUri)),(o=No(r,o,Ko))&&(r=o,i=!1)}return Do(t,(function(e,t,n,a){var s;e.playlists&&e.playlists.length&&(s=e.playlists[0].id,(e=No(r,e.playlists[0],Ko))&&((r=e).mediaGroups[t][n][a].playlists[0]=r.playlists[s],i=!1))})),(i=t.minimumUpdatePeriod===e.minimumUpdatePeriod&&i)?null:r}(e,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||e;var n=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return n&&n!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(window.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=window.setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){var i,r;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,i=e.masterPlaylistLoader_.sidxMapping_,r=Yo(n.playlists,i),Do(n,(function(e,t,n,a){e.playlists&&e.playlists.length&&(e=e.playlists,r=Ou(r,Yo(e,i)))})),r),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,i=!this.media_||this.media_!==n[e];i?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=window.setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),Uo(t.media(),Boolean(i))))}(),this.trigger("loadedplaylist")},t}(Ki),Mu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Ru=(P=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=Xo(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},U=function(e){return"var browserWorkerPolyFill = "+Xo.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},q=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},P(U(q((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){return!!e[t]&&(n=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(n,1),-1<n)},this.trigger=function(t){var n,i,r,a=e[t];if(a)if(2===arguments.length)for(i=a.length,n=0;n<i;++n)a[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=a.length,n=0;n<i;++n)a[n].apply(this,r)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,r,a,o,u,l,c,d,h,p,f,m,g,y,v,_,b,T,S,w,E,k,C,A,P,I,D,L,O,x,M,R,N,U,B,j,F,H,V=e,Q=Math.pow(2,32),q={getUint64:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return t.getBigUint64?(e=t.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(e):e:t.getUint32(0)*Q+t.getUint32(4)},MAX_UINT32:Q},G=q.MAX_UINT32;function W(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n}function z(e){for(var t=[];e--;)t.push(0);return t}!function(){if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var e in w)w.hasOwnProperty(e)&&(w[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);E=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:A,audio:P},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),x=new Uint8Array([0,0,0,0,0,0,0,0]),M=x,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=x,D=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){for(var t,n=[],i=0,r=1;r<arguments.length;r++)n.push(arguments[r]);for(r=n.length;r--;)i+=n[r].byteLength;for(t=new Uint8Array(i+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),r=0,i=8;r<n.length;r++)t.set(n[r],i),i+=n[r].byteLength;return t},i=function(){return t(w.dinf,t(w.dref,O))},r=function(e){return t(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(w.hdlr,I[e])},m=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(w.mdhd,n)},f=function(e){return t(w.mdia,m(e),g(e.type),u(e))},o=function(e){return t(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return t(w.minf,"video"===e.type?t(w.vmhd,D):t(w.smhd,L),i(),v(e))},Pe=function(e,n){for(var i=[],r=n.length;r--;)i[r]=b(n[r]);return t.apply(null,[w.moof,o(e)].concat(i))},l=function(e){for(var n=e.length,i=[];n--;)i[n]=h(e[n]);return t.apply(null,[w.moov,d(4294967295)].concat(i).concat(c(e)))},c=function(e){for(var n=e.length,i=[];n--;)i[n]=T(e[n]);return t.apply(null,[w.mvex].concat(i))},d=function(e){return e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),t(w.mvhd,e)},y=function(e){for(var n,i=e.samples||[],r=new Uint8Array(4+i.length),a=0;a<i.length;a++)n=i[a].flags,r[a+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(w.sdtp,r)},v=function(e){return t(w.stbl,_(e),t(w.stts,N),t(w.stsc,M),t(w.stsz,R),t(w.stco,x))},_=function(e){return t(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?U:B)(e))},U=function(e){for(var n,i,r=e.sps||[],a=e.pps||[],s=[],o=[],u=0;u<r.length;u++)s.push((65280&r[u].byteLength)>>>8),s.push(255&r[u].byteLength),s=s.concat(Array.prototype.slice.call(r[u]));for(u=0;u<a.length;u++)o.push((65280&a[u].byteLength)>>>8),o.push(255&a[u].byteLength),o=o.concat(Array.prototype.slice.call(a[u]));return n=[w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(w.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],s,[a.length],o))),t(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio&&(i=e.sarRatio[0],e=e.sarRatio[1],n.push(t(w.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),t.apply(null,n)},B=function(e){return t(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},p=function(e){return e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]),t(w.tkhd,e)},b=function(e){var n,i=t(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),r=Math.floor(e.baseMediaDecodeTime/G),a=Math.floor(e.baseMediaDecodeTime%G);return r=t(w.tfdt,new Uint8Array([1,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===e.type?(n=S(e,92),t(w.traf,i,r,n)):(a=y(e),n=S(e,a.length+92),t(w.traf,i,r,n,a))},h=function(e){return e.duration=e.duration||4294967295,t(w.trak,p(e),f(e))},T=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(w.trex,n)},j=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},F=function(e,n){var i,r,a,s,o=e.samples||[];for(n+=20+16*o.length,n=j(o,n),(r=new Uint8Array(n.length+16*o.length)).set(n),i=n.length,s=0;s<o.length;s++)a=o[s],r[i++]=(4278190080&a.duration)>>>24,r[i++]=(16711680&a.duration)>>>16,r[i++]=(65280&a.duration)>>>8,r[i++]=255&a.duration,r[i++]=(4278190080&a.size)>>>24,r[i++]=(16711680&a.size)>>>16,r[i++]=(65280&a.size)>>>8,r[i++]=255&a.size,r[i++]=a.flags.isLeading<<2|a.flags.dependsOn,r[i++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,r[i++]=61440&a.flags.degradationPriority,r[i++]=15&a.flags.degradationPriority,r[i++]=(4278190080&a.compositionTimeOffset)>>>24,r[i++]=(16711680&a.compositionTimeOffset)>>>16,r[i++]=(65280&a.compositionTimeOffset)>>>8,r[i++]=255&a.compositionTimeOffset;return t(w.trun,r)},H=function(e,n){var i,r,a,s,o=e.samples||[];for(n+=20+8*o.length,n=j(o,n),(i=new Uint8Array(n.length+8*o.length)).set(n),r=n.length,s=0;s<o.length;s++)a=o[s],i[r++]=(4278190080&a.duration)>>>24,i[r++]=(16711680&a.duration)>>>16,i[r++]=(65280&a.duration)>>>8,i[r++]=255&a.duration,i[r++]=(4278190080&a.size)>>>24,i[r++]=(16711680&a.size)>>>16,i[r++]=(65280&a.size)>>>8,i[r++]=255&a.size;return t(w.trun,i)},S=function(e,t){return("audio"===e.type?H:F)(e,t)},a=function(){return t(w.ftyp,E,k,E,C)};var K,Y=function(e){return t(w.mdat,e)},X=Pe,J=function(e){var t=a(),n=l(e);return(e=new Uint8Array(t.byteLength+n.byteLength)).set(t),e.set(n,t.byteLength),e},$=[33,16,5,32,164,27],Z=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ee=function(e){return 9e4*e},te=function(e){return e/9e4},ne=9e4,ie=ee,re=te,ae=function(e,t){return ee(function(e,t){return e/t}(e,t))},se=function(e,t,n){return te(n?e:e-t)},oe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ue=function(e,t){var n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),t=e.timelineStartInfo.baseMediaDecodeTime,t+=n,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/9e4,t=Math.floor(t)),t},le=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},ce=function(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===n[0]&&(s++,n.shift()),a[i]=e[s];return a},de=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Te(0,0),new Te(0,1),new Te(1,0),new Te(1,1)],this.parse708captions_&&(this.cc708Stream_=new ge({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};function he(e){return 32<=e&&e<=127||160<=e&&e<=255}function pe(e){this.windowNum=e,this.reset()}(de.prototype=new V).push=function(e){var t,n;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,r=i=0}return n}(e.escapedRBSP)).payload&&4===t.payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},de.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},de.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0),this.flushCCStreams(e)},de.prototype.flush=function(){return this.flushStream("flush")},de.prototype.partialFlush=function(){return this.flushStream("partialFlush")},de.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},de.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},de.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},de.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},de.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},de.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var fe={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};function me(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new pe(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)}pe.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},pe.prototype.getText=function(){return this.rows.join("\n")},pe.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},pe.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},pe.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},pe.prototype.addText=function(e){this.rows[this.rowIdx]+=e},pe.prototype.backspace=function(){var e;this.isEmpty()||(e=this.rows[this.rowIdx],this.rows[this.rowIdx]=e.substr(0,e.length-1))},me.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new pe(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},me.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},me.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var ge=function e(t){t=t||{},e.prototype.init.call(this);var n,i=this,r=t.captionServices||{},a={};Object.keys(r).forEach((function(e){n=r[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){(3===e.type||null===i.current708Packet)&&i.new708Packet(),i.add708Bytes(e)}};function ye(e){return null===e?"":(e=_e[e]||e,String.fromCharCode(e))}function ve(){for(var e=[],t=15;t--;)e.push("");return e}ge.prototype=new V,ge.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ge.prototype.add708Bytes=function(e){var t=(n=e.ccData)>>>8,n=255&n;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(t),this.current708Packet.data.push(n)},ge.prototype.push708Packet=function(){var e,t=this.current708Packet,n=t.data,i=null,r=0,a=n[r++];for(t.seq=a>>6,t.sizeCode=63&a;r<n.length;r++)e=31&(a=n[r++]),7==(i=a>>5)&&0<e&&(i=n[r++]),this.pushServiceBlock(i,r,e),0<e&&(r+=e-1)},ge.prototype.pushServiceBlock=function(e,t,n){for(var i,r=t,a=this.current708Packet.data,s=(s=this.services[e])||this.initService(e,r);r<t+n&&r<a.length;r++)he(i=a[r])?r=this.handleText(r,s):24===i?r=this.multiByteCharacter(r,s):16===i?r=this.extendedCommands(r,s):128<=i&&i<=135?r=this.setCurrentWindow(r,s):152<=i&&i<=159?r=this.defineWindow(r,s):136===i?r=this.clearWindows(r,s):140===i?r=this.deleteWindows(r,s):137===i?r=this.displayWindows(r,s):138===i?r=this.hideWindows(r,s):139===i?r=this.toggleWindows(r,s):151===i?r=this.setWindowAttributes(r,s):144===i?r=this.setPenAttributes(r,s):145===i?r=this.setPenColor(r,s):146===i?r=this.setPenLocation(r,s):143===i?s=this.reset(r,s):8===i?s.currentWindow.backspace():12===i?s.currentWindow.clearText():13===i?s.currentWindow.pendingNewLine=!0:14===i?s.currentWindow.clearText():141===i&&r++},ge.prototype.extendedCommands=function(e,t){return he(this.current708Packet.data[++e])?this.handleText(e,t,{isExtended:!0}):e},ge.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},ge.prototype.initService=function(e,t){var n,i="SERVICE"+e,r=this;return i in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[e]=new me(e,n,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},ge.prototype.handleText=function(e,t,n){var i,r=n&&n.isExtended,a=n&&n.isMultiByte,s=r?4096:0,o=(u=this.current708Packet.data)[e],u=(n=u[e+1],t.currentWindow),l=t.textDecoder_&&!r?(a?(i=[o,n],e++):i=[o],t.textDecoder_.decode(new Uint8Array(i))):(l=fe[o|=s]||o,4096&o&&o===l?"":String.fromCharCode(l));return u.pendingNewLine&&!u.isEmpty()&&u.newLine(this.getPts(e)),u.pendingNewLine=!1,u.addText(l),e},ge.prototype.multiByteCharacter=function(e,t){var n=(i=this.current708Packet.data)[e+1],i=i[e+2];return he(n)&&he(i)?this.handleText(++e,t,{isMultiByte:!0}):e},ge.prototype.setCurrentWindow=function(e,t){var n=this.current708Packet.data[e];return t.setCurrentWindow(7&n),e},ge.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e];return t.setCurrentWindow(7&i),t=t.currentWindow,i=n[++e],t.visible=(32&i)>>5,t.rowLock=(16&i)>>4,t.columnLock=(8&i)>>3,t.priority=7&i,i=n[++e],t.relativePositioning=(128&i)>>7,t.anchorVertical=127&i,i=n[++e],t.anchorHorizontal=i,i=n[++e],t.anchorPoint=(240&i)>>4,t.rowCount=15&i,i=n[++e],t.columnCount=63&i,i=n[++e],t.windowStyle=(56&i)>>3,t.penStyle=7&i,t.virtualRowCount=t.rowCount+1,e},ge.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e];return t=t.currentWindow.winAttr,i=n[++e],t.fillOpacity=(192&i)>>6,t.fillRed=(48&i)>>4,t.fillGreen=(12&i)>>2,t.fillBlue=3&i,i=n[++e],t.borderType=(192&i)>>6,t.borderRed=(48&i)>>4,t.borderGreen=(12&i)>>2,t.borderBlue=3&i,i=n[++e],t.borderType+=(128&i)>>5,t.wordWrap=(64&i)>>6,t.printDirection=(48&i)>>4,t.scrollDirection=(12&i)>>2,t.justify=3&i,i=n[++e],t.effectSpeed=(240&i)>>4,t.effectDirection=(12&i)>>2,t.displayEffect=3&i,e},ge.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},ge.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},ge.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},ge.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},ge.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},ge.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},ge.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},ge.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e];return t=t.currentWindow.penAttr,i=n[++e],t.textTag=(240&i)>>4,t.offset=(12&i)>>2,t.penSize=3&i,i=n[++e],t.italics=(128&i)>>7,t.underline=(64&i)>>6,t.edgeType=(56&i)>>3,t.fontStyle=7&i,e},ge.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e];return t=t.currentWindow.penColor,i=n[++e],t.fgOpacity=(192&i)>>6,t.fgRed=(48&i)>>4,t.fgGreen=(12&i)>>2,t.fgBlue=3&i,i=n[++e],t.bgOpacity=(192&i)>>6,t.bgRed=(48&i)>>4,t.bgGreen=(12&i)>>2,t.bgBlue=3&i,i=n[++e],t.edgeRed=(48&i)>>4,t.edgeGreen=(12&i)>>2,t.edgeBlue=3&i,e},ge.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},ge.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var _e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},be=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Te=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a=32639&e.ccData;a!==this.lastControlCode_?(4096==(61440&a)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null),t=a>>>8,n=255&a,a===this.PADDING_||(a===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":a===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts):a===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):a===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):a===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):a===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):a===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):a===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=ve()):a===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=ve():a===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ve()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(t,n)?(i=ye((t=(3&t)<<8)|n),this[this.mode_](e.pts,i),this.column_++):this.isExtCharacter(t,n)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),i=ye((t=(3&t)<<8)|n),this[this.mode_](e.pts,i),this.column_++):this.isMidRowCode(t,n)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&n)&&this.addFormatting(e.pts,["i"]),1==(1&n)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(t,n)?this.column_+=3&n:this.isPAC(t,n)?(r=be.indexOf(7968&a),"rollUp"===this.mode_&&(r-this.rollUpRows_+1<0&&(r=this.rollUpRows_-1),this.setRollUp(e.pts,r)),r!==this.row_&&(this.clearFormatting(e.pts),this.row_=r),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&a)&&(this.column_=4*((14&a)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(t)&&(0===n&&(n=null),i=ye(t),i+=ye(n),this[this.mode_](e.pts,i),this.column_+=i.length))):this.lastControlCode_=null}};function Se(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}Te.prototype=new V,Te.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Te.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ve(),this.nonDisplayed_=ve(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Te.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Te.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Te.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Te.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Te.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Te.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Te.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Te.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Te.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ve(),this.displayed_=ve()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Te.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t),t=t.reduce((function(e,t){return e+"<"+t+">"}),""),this[this.mode_](e,t)},Te.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),""),this.formatting_=[],this[this.mode_](e,t))},Te.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=t},Te.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t},Te.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Te.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t};var we={CaptionStream:de,Cea608Stream:Te,Cea708Stream:ge},Ee={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function ke(e,t,n){for(var i="",r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}function Ce(e,t,n){return decodeURIComponent(ke(e,t,n))}function Ae(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}e=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=Se(e.dts,i),e.pts=Se(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}},e.prototype=new V;var Pe=e,Ie=(de=Se,{TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ce(e.data,1,t),e.value=Ce(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ce(e.data,1,t),e.url=Ce(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,n=0;n<e.data.length;n++)if(0===e.data[n]){e.owner=(t=e.data,unescape(ke(t,0,n)));break}e.privateData=e.data.subarray(n+1),e.data=e.privateData}}),De=function e(t){var n,i={descriptor:t&&t.descriptor},r=0,a=[],s=0;if(e.prototype.init.call(this),this.dispatchType=Ee.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(n=0;n<i.descriptor.length;n++)this.dispatchType+=("00"+i.descriptor[n].toString(16)).slice(-2);this.push=function(e){var t,n,i,o,u,l,c;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,a.length=0),0===a.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(a.push(e),s+=e.data.byteLength,1===a.length&&(r=Ae(e.data.subarray(6,10)),r+=10),!(s<r)){for(t={data:new Uint8Array(r),frames:[],pts:a[0].pts,dts:a[0].dts},o=0;o<r;)t.data.set(a[0].data.subarray(0,r-o),o),o+=a[0].data.byteLength,s-=a[0].data.byteLength,a.shift();n=10,64&t.data[5]&&(n+=4,n+=Ae(t.data.subarray(10,14)),r-=Ae(t.data.subarray(16,20)));do{if((i=Ae(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."})}while((c={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+i+10)}).key=c.id,Ie[c.id]&&(Ie[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner&&(l=(1&(u=c.data)[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2,l*=4,l+=3&u[7],c.timeStamp=l,void 0===t.pts&&void 0===t.dts&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c))),t.frames.push(c),n+=10,(n+=i)<r);this.trigger("data",t)}}};De.prototype=new V,e=De,Pe=Pe;var Le,Oe,xe=function e(){var t=new Uint8Array(188),n=0;e.prototype.init.call(this),this.push=function(e){var i,r=0,a=188;for(n?((i=new Uint8Array(e.byteLength+n)).set(t.subarray(0,n)),i.set(e,n),n=0):i=e;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=188,a+=188);r<i.byteLength&&(t.set(i.subarray(r),0),n=i.byteLength-r)},this.flush=function(){188===n&&71===t[0]&&(this.trigger("data",t),n=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){n=0,this.trigger("reset")}};xe.prototype=new V,(Le=function(){var e,t,n,i;Le.prototype.init.call(this),(i=this).packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),("pat"===i.type?t:n)(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===Ee.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=s:a===Ee.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=s:a===Ee.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],1<(48&t[3])>>>4&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Ee.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Ee.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new V,Le.STREAM_TYPES={h264:27,adts:15},(Oe=function(){function e(e,t,i){var r,a,s,o,u=new Uint8Array(e.size),l={type:t},c=0,d=0;if(e.data.length&&!(e.size<9)){for(l.trackId=e.data[0].pid,c=0;c<e.data.length;c++)r=e.data[c],u.set(r.data,d),d+=r.data.byteLength;s=l,o=(a=u)[0]<<16|a[1]<<8|a[2],s.data=new Uint8Array,1==o&&(s.packetLength=6+(a[4]<<8|a[5]),s.dataAlignmentIndicator=0!=(4&a[6]),192&(o=a[7])&&(s.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,s.pts*=4,s.pts+=(6&a[13])>>>1,s.dts=s.pts,64&o&&(s.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,s.dts*=4,s.dts+=(6&a[18])>>>1)),s.data=a.subarray(9+a[8])),t="video"===t||l.packetLength<=e.size,(i||t)&&(e.size=0,e.data.length=0),t&&n.trigger("data",l)}}var t,n=this,i=!1,r={data:[],size:0},a={data:[],size:0},s={data:[],size:0};Oe.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var t,n;switch(o.streamType){case Ee.H264_STREAM_TYPE:t=r,n="video";break;case Ee.ADTS_STREAM_TYPE:t=a,n="audio";break;case Ee.METADATA_STREAM_TYPE:t=s,n="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&e(t,n,!0),t.data.push(o),t.size+=o.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=o.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i=!0,n.trigger("data",e)}})[o.type]()},this.reset=function(){r.size=0,r.data.length=0,a.size=0,a.data.length=0,this.trigger("reset")},this.flushStreams_=function(){e(r,"video"),e(a,"audio"),e(s,"timed-metadata")},this.flush=function(){var e;!i&&t&&(e={type:"metadata",tracks:[]},null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),n.trigger("data",e)),i=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new V;var Me,Re={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:xe,TransportParseStream:Le,ElementaryStream:Oe,TimestampRolloverStream:Pe,CaptionStream:we.CaptionStream,Cea608Stream:we.Cea608Stream,Cea708Stream:we.Cea708Stream,MetadataStream:e};for(Me in Ee)Ee.hasOwnProperty(Me)&&(Re[Me]=Ee[Me]);var Ne=Re,Ue=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Be=function e(t){var n,i=0;e.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+i+" outside syncword"})},this.push=function(e){var r,a,s,o,u,l,c=0;if(t||(i=0),"audio"===e.type){for(n&&n.length?(s=n,(n=new Uint8Array(s.byteLength+e.data.byteLength)).set(s),n.set(e.data,s.byteLength)):n=e.data;c+7<n.length;)if(255===n[c]&&240==(246&n[c+1])){if("number"==typeof l&&(this.skipWarn_(l,c),l=null),a=2*(1&~n[c+1]),r=(3&n[c+3])<<11|n[c+4]<<3|(224&n[c+5])>>5,u=9e4*(o=1024*(1+(3&n[c+6])))/Ue[(60&n[c+2])>>>2],n.byteLength-c<r)break;this.trigger("data",{pts:e.pts+i*u,dts:e.dts+i*u,sampleCount:o,audioobjecttype:1+(n[c+2]>>>6&3),channelcount:(1&n[c+2])<<2|(192&n[c+3])>>>6,samplerate:Ue[(60&n[c+2])>>>2],samplingfrequencyindex:(60&n[c+2])>>>2,samplesize:16,data:n.subarray(c+7+a,c+r)}),i++,c+=r}else"number"!=typeof l&&(l=c),c++;"number"==typeof l&&(this.skipWarn_(l,c),l=null),n=n.subarray(c)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){n=void 0,this.trigger("reset")},this.endTimeline=function(){n=void 0,this.trigger("endedtimeline")}};Be.prototype=new V;var je,Fe,He=Be,Ve=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),n=new DataView(a.buffer).getUint32(0),i=8*s,t-=s},this.skipBits=function(e){var r;e<i||(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord()),n<<=e,i-=e},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return 0<(i-=r)?n<<=r:0<t&&this.loadWord(),0<(r=e-r)?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){for(var e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},Qe=function e(){var t,n,i=0;e.prototype.init.call(this),this.push=function(e){for(var r,a=(n=n?((r=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),r.set(e.data,n.byteLength),r):e.data).byteLength;i<a-3;i++)if(1===n[i+2]){t=i+5;break}for(;t<a;)switch(n[t]){case 0:if(0!==n[t-1]){t+=2;break}if(0!==n[t-2]){t++;break}for(i+3!==t-2&&this.trigger("data",n.subarray(i+3,t-2));1!==n[++t]&&t<a;);i=t-2,t+=3;break;case 1:if(0!==n[t-1]||0!==n[t-2]){t+=3;break}this.trigger("data",n.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}n=n.subarray(i),t-=i,i=0},this.reset=function(){n=null,i=0,this.trigger("reset")},this.flush=function(){n&&3<n.byteLength&&this.trigger("data",n.subarray(i+3)),n=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};function qe(e,t){var n=0<=(n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9])?n:0;return(16&e[t+5])>>4?n+20:n+10}function Ge(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:Ge(e,t+=qe(e,t))}function We(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}Qe.prototype=new V,Fe={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(je=function(){var e,t,n,i,r,a,s,o=new Qe;je.prototype.init.call(this),(e=this).push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,o.push(e))},o.on("data",(function(s){var o={trackId:t,pts:n,dts:i,data:s,nalUnitTypeCode:31&s[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),o.on("partialdone",(function(){e.trigger("partialdone")})),o.on("reset",(function(){e.trigger("reset")})),o.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){for(var n=8,i=8,r=0;r<e;r++)n=0===(i=0!==i?(n+t.readExpGolomb()+256)%256:i)?n:i},r=function(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===n[0]&&(s++,n.shift()),a[i]=e[s];return a},a=function(e){var t,n,i,r,a,o=0,u=0,l=0,c=0,d=[1,1],h=new Ve(e),p=h.readUnsignedByte(),f=h.readUnsignedByte(),m=h.readUnsignedByte();if(h.skipUnsignedExpGolomb(),Fe[p]&&(3===(n=h.readUnsignedExpGolomb())&&h.skipBits(1),h.skipUnsignedExpGolomb(),h.skipUnsignedExpGolomb(),h.skipBits(1),h.readBoolean()))for(r=3!==n?8:12,a=0;a<r;a++)h.readBoolean()&&s(a<6?16:64,h);if(h.skipUnsignedExpGolomb(),0===(i=h.readUnsignedExpGolomb()))h.readUnsignedExpGolomb();else if(1===i)for(h.skipBits(1),h.skipExpGolomb(),h.skipExpGolomb(),t=h.readUnsignedExpGolomb(),a=0;a<t;a++)h.skipExpGolomb();if(h.skipUnsignedExpGolomb(),h.skipBits(1),e=h.readUnsignedExpGolomb(),n=h.readUnsignedExpGolomb(),0===(i=h.readBits(1))&&h.skipBits(1),h.skipBits(1),h.readBoolean()&&(o=h.readUnsignedExpGolomb(),u=h.readUnsignedExpGolomb(),l=h.readUnsignedExpGolomb(),c=h.readUnsignedExpGolomb()),h.readBoolean()&&h.readBoolean()){switch(h.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[h.readUnsignedByte()<<8|h.readUnsignedByte(),h.readUnsignedByte()<<8|h.readUnsignedByte()]}d&&(d[0],d[1])}return{profileIdc:p,levelIdc:m,profileCompatibility:f,width:16*(e+1)-2*o-2*u,height:(2-i)*(n+1)*16-2*l-2*c,sarRatio:d}}}).prototype=new V,e={H264Stream:je,NalByteStream:Qe};var ze=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ke={isLikelyAacData:function(e){var t=Ge(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:qe,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return ze[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n=10;64&e[5]&&(n+=4,n+=We(e.subarray(10,14)));do{if((t=We(e.subarray(n+4,n+8)))<1)return null;if("PRIV"===String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]))for(var i=e.subarray(n+10,n+t+10),r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,n){for(var i="",r=0;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(i,0,r)))break;var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(s*=4)+(3&a[7])}}while(n+=10,(n+=t)<e.byteLength);return null}},Ye=function e(){var t=new Uint8Array,n=0;e.prototype.init.call(this),this.setTimestamp=function(e){n=e},this.push=function(e){var i,r,a=0,s=0;for(t.length?(r=t.length,(t=new Uint8Array(e.byteLength+r)).set(t.subarray(0,r)),t.set(e,r)):t=e;3<=t.length-s;)if(t[s]!=="I".charCodeAt(0)||t[s+1]!=="D".charCodeAt(0)||t[s+2]!=="3".charCodeAt(0))if(255!=(255&t[s])||240!=(240&t[s+1]))s++;else{if(t.length-s<7)break;if(s+(a=Ke.parseAdtsSize(t,s))>t.length)break;i={type:"audio",data:t.subarray(s,s+a),pts:n,dts:n},this.trigger("data",i),s+=a}else{if(t.length-s<10)break;if(s+(a=Ke.parseId3TagSize(t,s))>t.length)break;i={type:"timed-metadata",data:t.subarray(s,s+a)},this.trigger("data",i),s+=a}e=t.length-s,t=0<e?t.subarray(s):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}};function Xe(e,t){t.stream=e,this.trigger("log",t)}function Je(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",Xe.bind(e,r))}}function $e(e,t){var n;if(e.length===t.length){for(n=0;n<e.length;n++)if(e[n]!==t[n])return;return 1}}function Ze(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}}Ye.prototype=new V;var et,tt,nt,it=Ye,rt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],at=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],st=e.H264Stream,ot=Ke.isLikelyAacData,ut=function e(t,n){var i=[],r=0,a=0,s=1/0,o=(n=n||{}).firstSequenceNumber||0;e.prototype.init.call(this),this.push=function(e){le(t,e),t&&rt.forEach((function(n){t[n]=e[n]})),i.push(e)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var e,u,l,c,d;0!==i.length&&(e=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(i,t,r),t.baseMediaDecodeTime=ue(t,n.keepOriginalTimestamps),d=function(e,t,n,i){var r,a,s,o,u,l,c=0,d=0;if(t.length&&(r=ae(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(ne/(e.samplerate/1024)),n&&i&&(s=r-Math.max(n,i),d=(c=Math.floor(s/a))*a),!(c<1||ne/2<d))){for(o=(o=function(){var e,t;return K||(e={96e3:[$,[227,64],z(154),[56]],88200:[$,[231],z(170),[56]],64e3:[$,[248,192],z(240),[56]],48e3:[$,[255,192],z(268),[55,148,128],z(54),[112]],44100:[$,[255,192],z(268),[55,163,128],z(84),[112]],32e3:[$,[255,192],z(268),[55,234],z(226),[112]],24e3:[$,[255,192],z(268),[55,255,128],z(268),[111,112],z(126),[224]],16e3:[$,[255,192],z(268),[55,255,128],z(268),[111,255],z(269),[223,108],z(195),[1,192]],12e3:[Z,z(268),[3,127,248],z(268),[6,255,240],z(268),[13,255,224],z(268),[27,253,128],z(259),[56]],11025:[Z,z(268),[3,127,248],z(268),[6,255,240],z(268),[13,255,224],z(268),[27,255,192],z(268),[55,175,128],z(108),[112]],8e3:[Z,z(268),[3,121,16],z(47),[7]]},t=e,K=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})),K}()[e.samplerate])||t[0].data,u=0;u<c;u++)l=t[0],t.splice(0,0,{data:o,dts:l.dts-a,pts:l.pts-a});return e.baseMediaDecodeTime-=Math.floor(function(e,t){return function(e,t){return e*t}(te(e),t)}(d,e.samplerate)),d}}(t,e,a,s),t.samples=function(e){for(var t,n=[],i=0;i<e.length;i++)t=e[i],n.push({size:t.data.byteLength,duration:1024});return n}(e),u=Y(function(e){for(var t,n=0,i=new Uint8Array(function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].data.byteLength;return t}(e)),r=0;r<e.length;r++)t=e[r],i.set(t.data,n),n+=t.data.byteLength;return i}(e)),i=[],c=X(o,[t]),l=new Uint8Array(c.byteLength+u.byteLength),o++,l.set(c),l.set(u,c.byteLength),oe(t),c=Math.ceil(9216e4/t.samplerate),e.length&&(c=e.length*c,this.trigger("segmentTimingInfo",Ze(ae(t.baseMediaDecodeTime,t.samplerate),e[0].dts,e[0].pts,e[0].dts+c,e[0].pts+c,d||0)),this.trigger("timingInfo",{start:e[0].pts,end:e[0].pts+c})),this.trigger("data",{track:t,boxes:l})),this.trigger("done","AudioSegmentStream")},this.reset=function(){oe(t),i=[],this.trigger("reset")}};function lt(e){var t=31&e[1];return(t<<=8)|e[2]}function ct(e){return!!(64&e[1])}function dt(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function ht(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}ut.prototype=new V,(et=function(e,t){var n,i,r=[],a=[],s=(t=t||{}).firstSequenceNumber||0;et.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){le(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],at.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),r.push(t)},this.flush=function(){for(var n,i,o,u=0;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r}(r),(i=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r}(n))[0][0].keyFrame||((o=this.getGopForFusion_(r[0],e))?(u=o.duration,i.unshift(o),i.byteLength+=o.byteLength,i.nalCount+=o.nalCount,i.pts=o.pts,i.dts=o.dts,i.duration+=o.duration):i=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(i)),a.length){var l=t.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i);if(!l)return this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");oe(e),i=l}le(e,i),e.samples=function(e,t){for(var n,i,r,a=0,s=[],o=0;o<e.length;o++)for(i=e[o],n=0;n<i.length;n++)a+=(r=W(r=i[n],a)).size,s.push(r);return s}(i),n=Y(function(e){for(var t,n,i,r,a,s=0,o=e.byteLength,u=e.nalCount,l=new Uint8Array(o+4*u),c=new DataView(l.buffer),d=0;d<e.length;d++)for(i=e[d],t=0;t<i.length;t++)for(r=i[t],n=0;n<r.length;n++)a=r[n],c.setUint32(s,a.data.byteLength),l.set(a.data,s+=4),s+=a.data.byteLength;return l}(i)),e.baseMediaDecodeTime=ue(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",i.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),o=i[0],l=i[i.length-1],this.trigger("segmentTimingInfo",Ze(e.baseMediaDecodeTime,o.dts,o.pts,l.dts+l.duration,l.pts+l.duration,u)),this.trigger("timingInfo",{start:i[0].pts,end:i[i.length-1].pts+i[i.length-1].duration}),this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=X(s,[e]),i=new Uint8Array(u.byteLength+n.byteLength),s++,i.set(u),i.set(n,u.byteLength),this.trigger("data",{track:e,boxes:i}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),r=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){oe(e),i=n=void 0},this.getGopForFusion_=function(t){for(var n,i,r,a=1/0,s=0;s<this.gopCache_.length;s++)i=(r=this.gopCache_[s]).gop,e.pps&&$e(e.pps[0],r.pps[0])&&e.sps&&$e(e.sps[0],r.sps[0])&&(i.dts<e.timelineStartInfo.dts||-1e4<=(i=t.dts-i.dts-i.duration)&&i<=45e3&&(!n||i<a)&&(n=r,a=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){for(var t,n,i,r,s=e.byteLength,o=e.nalCount,u=e.duration,l=t=0;l<a.length&&t<e.length&&(n=a[l],i=e[t],n.pts!==i.pts);)i.pts>n.pts?l++:(t++,s-=i.byteLength,o-=i.nalCount,u-=i.duration);return 0===t?e:t===e.length?null:((r=e.slice(t)).byteLength=s,r.duration=u,r.nalCount=o,r.pts=r[0].pts,r.dts=r[0].dts,r)},this.alignGopsAtEnd_=function(e){for(var t,n,i=a.length-1,r=e.length-1,s=null,o=!1;0<=i&&0<=r;){if(t=a[i],n=e[r],t.pts===n.pts){o=!0;break}t.pts>n.pts?i--:(i===a.length-1&&(s=r),r--)}if(!o&&null===s)return null;if(0===(l=o?r:s))return e;var u=e.slice(l),l=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){a=e}}).prototype=new V,(nt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,nt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new V,nt.prototype.flush=function(e){var t,n,i,r=0,a={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,at.forEach((function(e){a.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,rt.forEach((function(e){a.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,e=J(this.pendingTracks),a.initSegment=new Uint8Array(e.byteLength),a.initSegment.set(e),a.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)a.data.set(this.pendingBoxes[i],r),r+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=se(t.startPts,s,this.keepOriginalTimestamps),t.endTime=se(t.endPts,s,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=se(n.pts,s,this.keepOriginalTimestamps),a.metadata.push(n);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),i=0;i<a.captions.length;i++)t=a.captions[i],this.trigger("caption",t);for(i=0;i<a.metadata.length;i++)n=a.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},nt.prototype.setRemux=function(e){this.remuxTracks=e},(tt=function(e){var t,n,i=this,r=!0;tt.prototype.init.call(this),this.baseMediaDecodeTime=(e=e||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};(this.transmuxPipeline_=r).type="aac",r.metadataStream=new Ne.MetadataStream,r.aacStream=new it,r.audioTimestampRolloverStream=new Ne.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Ne.TimestampRolloverStream("timed-metadata"),r.adtsStream=new He,r.coalesceStream=new nt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ut(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Je(this,r)},this.setupTsPipeline=function(){var r={};(this.transmuxPipeline_=r).type="ts",r.metadataStream=new Ne.MetadataStream,r.packetStream=new Ne.TransportPacketStream,r.parseStream=new Ne.TransportParseStream,r.elementaryStream=new Ne.ElementaryStream,r.timestampRolloverStream=new Ne.TimestampRolloverStream,r.adtsStream=new He,r.h264Stream=new st,r.captionStream=new Ne.CaptionStream(e),r.coalesceStream=new nt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?n||"audio"!==a.tracks[s].type||((n=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new et(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ut(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Je(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,oe(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,oe(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){var t;r&&((t=ot(e))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1),this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new V;var pt={Transmuxer:tt,VideoSegmentStream:et,AudioSegmentStream:ut,AUDIO_PROPERTIES:rt,VIDEO_PROPERTIES:at,generateSegmentTimingInfo:Ze},ft=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},mt=e=function(e){return e>>>0},gt=function e(t,n){var i,r,a,s=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=mt(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=ft(t.subarray(i+4,i+8)),r=1<r?i+r:t.byteLength,a===n[0]&&(1===n.length?s.push(t.subarray(i+8,r)):(a=e(t.subarray(i+8,r),n.slice(1))).length&&(s=s.concat(a))),i=r;return s},yt=e,vt=q.getUint64,_t=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},bt=(V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},V="undefined"!=typeof window?window:void 0!==V?V:"undefined"!=typeof self?self:{}),Tt=ce,St=we.CaptionStream,wt=function(){var e,t,n,i,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new St,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==s(t)&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,a,s){if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))n=a[0],i=s[n];else if(null===n||!i)return t.push(e),null;for(;0<t.length;){var o=t.shift();this.parse(o,a,s)}return(e=function(e,t,n){return null===t?null:(t=function(e,t){var n=gt(e,["moof","traf"]),i=(e=gt(e,["mdat"]),{}),r=[];return e.forEach((function(e,t){t=n[t],r.push({mdat:e,traf:t})})),r.forEach((function(e){var n,r,a,s,o,u=e.mdat,l=e.traf,c=gt(l,["tfhd"]),d=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},i=1&n.flags[2],r=2&n.flags[2],a=8&n.flags[2],s=16&n.flags[2],o=32&n.flags[2],u=65536&n.flags[0],l=131072&n.flags[0];return e=8,i&&(e+=4,n.baseDataOffset=t.getUint32(12),e+=4),r&&(n.sampleDescriptionIndex=t.getUint32(e),e+=4),a&&(n.defaultSampleDuration=t.getUint32(e),e+=4),s&&(n.defaultSampleSize=t.getUint32(e),e+=4),o&&(n.defaultSampleFlags=t.getUint32(e)),u&&(n.durationIsEmpty=!0),!i&&l&&(n.baseDataOffsetIsMoof=!0),n}(c[0]);e=d.trackId,c=0<(c=gt(l,["tfdt"])).length?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=vt(e.subarray(4)):t.baseMediaDecodeTime=yt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t}(c[0]).baseMediaDecodeTime:0,l=gt(l,["trun"]),t===e&&0<l.length&&(l=l,n=c,r=(d=d).defaultSampleDuration||0,a=d.defaultSampleSize||0,s=d.trackId,o=[],l.forEach((function(e){(e=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:_t(e.subarray(d,d+4))},d+=4,s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(t.flags=_t(e.subarray(d,d+4)),d+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n}(e).samples).forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof n?(e.pts=n+bt.BigInt(e.compositionTimeOffset),n+=bt.BigInt(e.duration)):(e.pts=n+e.compositionTimeOffset,n+=e.duration)})),o=o.concat(e)})),u=function(e,t,n){for(var i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={logs:[],seiNals:[]},o=0;o+4<e.length;o+=i)if(i=a.getUint32(o),o+=4,!(i<=0))switch(31&e[o]){case 6:var u=e.subarray(o+1,o+1+i),l=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null}(o,t);if(u={nalUnitType:"sei_rbsp",size:i,data:u,escapedRBSP:Tt(u),trackId:n},l)u.pts=l.pts,u.dts=l.dts,r=l;else{if(!r){s.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+o+" for trackId "+n+". See mux.js#223."});break}u.pts=r.pts,u.dts=r.dts}s.seiNals.push(u)}return s}(u,o,e),i[e]||(i[e]={seiNals:[],logs:[]}),i[e].seiNals=i[e].seiNals.concat(u.seiNals),i[e].logs=i[e].logs.concat(u.logs))})),i}(e,t)[t]||{},{seiNals:t.seiNals,logs:t.logs,timescale:n})}(e,n,i))&&e.logs&&(r.logs=r.logs.concat(e.logs)),null!==e&&e.seiNals?(this.pushNals(e.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Et=e,kt=function(e){return("00"+e.toString(16)).slice(-2)},Ct=q.getUint64,At=(V=function(e){return gt(e,["moov","trak"]).reduce((function(e,t){var n,i,r=gt(t,["tkhd"])[0];return r?(n=r[0],r=Et(r[i=0===n?12:20]<<24|r[1+i]<<16|r[2+i]<<8|r[3+i]),(t=gt(t,["mdia","mdhd"])[0])?(n=t[0],e[r]=Et(t[i=0===n?12:20]<<24|t[1+i]<<16|t[2+i]<<8|t[3+i]),e):null):null}),{})},ce=function(e,t){return t=gt(t,["moof","traf"]).reduce((function(t,n){var i,r=gt(n,["tfhd"])[0],a=Et(r[4]<<24|r[5]<<16|r[6]<<8|r[7]);return r=e[a]||9e4,a=gt(n,["tfdt"])[0],n=new DataView(a.buffer,a.byteOffset,a.byteLength),"bigint"==typeof(n=1===a[0]?Ct(a.subarray(4,12)):n.getUint32(4))?i=n/bt.BigInt(r):"number"!=typeof n||isNaN(n)||(i=n/r),(i=i<Number.MAX_SAFE_INTEGER?Number(i):i)<t?i:t}),1/0),"bigint"==typeof t||isFinite(t)?t:0},e=function(e){e=gt(e,["moov","trak"]);var t=[];return e.forEach((function(e){var n=gt(e,["mdia","hdlr"]),i=gt(e,["tkhd"]);n.forEach((function(e,n){e=ft(e.subarray(8,12)),n=i[n],"vide"===e&&(n=0===(n=new DataView(n.buffer,n.byteOffset,n.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),t.push(n))}))})),t},q=function(e){e=gt(e,["moov","trak"]);var t=[];return e.forEach((function(e){var n={},i=gt(e,["tkhd"])[0];i&&(i=(r=new DataView(i.buffer,i.byteOffset,i.byteLength)).getUint8(0),n.id=0===i?r.getUint32(12):r.getUint32(20));var r=gt(e,["mdia","hdlr"])[0];r&&(s=ft(r.subarray(8,12)),n.type="vide"===s?"video":"soun"===s?"audio":s);var a,s=gt(e,["mdia","minf","stbl","stsd"])[0];s&&(s=s.subarray(8),n.codec=ft(s.subarray(4,8)),(s=gt(s,[n.codec])[0])&&(/^[asm]vc[1-9]$/i.test(n.codec)?(a=s.subarray(78),"avcC"===ft(a.subarray(4,8))&&11<a.length?(n.codec+=".",n.codec+=kt(a[9]),n.codec+=kt(a[10]),n.codec+=kt(a[11])):n.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(n.codec)?(a=s.subarray(28),"esds"===ft(a.subarray(4,8))&&20<a.length&&0!==a[19]?(n.codec+="."+kt(a[19]),n.codec+="."+kt(a[20]>>>2&63).replace(/^0/,"")):n.codec="mp4a.40.2"):n.codec=n.codec.toLowerCase())),(e=gt(e,["mdia","mdhd"])[0])&&(n.timescale=function(e){var t=0===e[0]?12:20;return Et(e[t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])}(e)),t.push(n)})),t},ce),Pt=q,It=de,Dt={};function Lt(e,t,n){for(var i,r,a,s,o=0,u=188,l=!1;u<=e.byteLength;)if(71!==e[o]||71!==e[u]&&u!==e.byteLength)o++,u++;else{if(i=e.subarray(o,u),"pes"===Dt.ts.parseType(i,t.pid)&&(r=Dt.ts.parsePesType(i,t.table),a=Dt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Dt.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),l=!0)),l)break;o+=188,u+=188}for(o=(u=e.byteLength)-188,l=!1;0<=o;)if(71!==e[o]||71!==e[u]&&u!==e.byteLength)o--,u--;else{if(i=e.subarray(o,u),"pes"===Dt.ts.parseType(i,t.pid)&&(r=Dt.ts.parsePesType(i,t.table),a=Dt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Dt.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),l=!0)),l)break;o-=188,u-=188}}function Ot(e){var t,n={pid:null,table:null},i={};for(t in function(e,t){for(var n,i=0,r=188;r<e.byteLength;)if(71!==e[i]||71!==e[r])i++,r++;else{switch(n=e.subarray(i,r),Dt.ts.parseType(n,t.pid)){case"pat":t.pid=Dt.ts.parsePat(n);break;case"pmt":var a=Dt.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}i+=188,r+=188}}(e,n),n.table)if(n.table.hasOwnProperty(t))switch(n.table[t]){case Ee.H264_STREAM_TYPE:i.video=[],function(e,t,n){for(var i,r,a,s,o,u,l,c,d=0,h=188,p=!1,f={data:[],size:0};h<e.byteLength;)if(71!==e[d]||71!==e[h])d++,h++;else{if(i=e.subarray(d,h),"pes"===Dt.ts.parseType(i,t.pid)&&(r=Dt.ts.parsePesType(i,t.table),a=Dt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!p&&(s=Dt.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),p=!0),!n.firstKeyFrame))){if(a&&0!==f.size){for(o=new Uint8Array(f.size),u=0;f.data.length;)l=f.data.shift(),o.set(l,u),u+=l.byteLength;!Dt.ts.videoPacketContainsKeyFrame(o)||(c=Dt.ts.parsePesTime(o))&&(n.firstKeyFrame=c,n.firstKeyFrame.type="video"),f.size=0}f.data.push(i),f.size+=i.byteLength}if(p&&n.firstKeyFrame)break;d+=188,h+=188}for(d=(h=e.byteLength)-188,p=!1;0<=d;)if(71!==e[d]||71!==e[h])d--,h--;else{if(i=e.subarray(d,h),"pes"===Dt.ts.parseType(i,t.pid)&&(r=Dt.ts.parsePesType(i,t.table),a=Dt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(s=Dt.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),p=!0)),p)break;d-=188,h-=188}}(e,n,i),0===i.video.length&&delete i.video;break;case Ee.ADTS_STREAM_TYPE:i.audio=[],Lt(e,n,i),0===i.audio.length&&delete i.audio}return i}Dt.ts={parseType:function(e,t){return 0===(e=lt(e))?"pat":e===t?"pmt":t?"pes":null},parsePat:function(e){var t=ct(e),n=4+dt(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=ct(e),i=4+dt(e);if(n&&(i+=e[i]+1),1&e[i+5]){for(var r=3+((15&e[i+1])<<8|e[i+2])-4,a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var s=i+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:ct,parsePesType:function(e,t){switch(t[lt(e)]){case Ee.H264_STREAM_TYPE:return"video";case Ee.ADTS_STREAM_TYPE:return"audio";case Ee.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!ct(e))return null;var t=4+dt(e);if(t>=e.byteLength)return null;var n=null,i=e[t+7];return 192&i&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+dt(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===ht(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===ht(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,!!(n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===ht(31&n[r+3]))||a}},Dt.aac=Ke;var xt=ne,Mt=function(e,t){var n,i,r=(Dt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(Dt.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=Dt.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=Dt.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=Dt.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=Dt.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var u=xt/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*u,pts:a+1024*i*u}]}}:Ot)(e);return r&&(r.audio||r.video)?(e=t,(t=r).audio&&t.audio.length&&(void 0!==(n=e)&&!isNaN(n)||(n=t.audio[0].dts),t.audio.forEach((function(e){e.dts=It(e.dts,n),e.pts=It(e.pts,n),e.dtsTime=e.dts/xt,e.ptsTime=e.pts/xt}))),t.video&&t.video.length&&(void 0!==(i=e)&&!isNaN(i)||(i=t.video[0].dts),t.video.forEach((function(e){e.dts=It(e.dts,i),e.pts=It(e.pts,i),e.dtsTime=e.dts/xt,e.ptsTime=e.pts/xt})),t.firstKeyFrame&&((t=t.firstKeyFrame).dts=It(t.dts,i),t.pts=It(t.pts,i),t.dtsTime=t.dts/xt,t.ptsTime=t.pts/xt)),r):null},Rt=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new pt.Transmuxer(this.options),e=this.self,(t=this.transmuxer).on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength},n=t.data,t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:re(t.start.dts),presentation:re(t.start.pts)},end:{decode:re(t.end.dts),presentation:re(t.end.pts)},baseMediaDecodeTime:re(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=re(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:re(t.start.dts),presentation:re(t.start.pts)},end:{decode:re(t.end.dts),presentation:re(t.end.pts)},baseMediaDecodeTime:re(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=re(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:re(t.start),end:re(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:re(t.start),end:re(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new wt,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);e=this.captionParser.parse(t,e.trackIds,e.timescales),this.self.postMessage({action:"mp4Captions",captions:e&&e.captions||[],logs:e&&e.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales;e=e.data,t=At(t,e),this.self.postMessage({action:"probeMp4StartTime",startTime:t,data:e},[e.buffer])},t.probeMp4Tracks=function(e){var t=e.data;e=Pt(t),this.self.postMessage({action:"probeMp4Tracks",tracks:e,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=(e="number"!=typeof(n=e.baseStartTime)||isNaN(n)?void 0:n*ne,Mt(t,e));e=null,n&&((e={hasVideo:n.video&&2===n.video.length||!1,hasAudio:n.audio&&2===n.audio.length||!1}).hasVideo&&(e.videoStart=n.video[0].ptsTime),e.hasAudio&&(e.audioStart=n.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:e,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){e=new Uint8Array(e.data,e.byteOffset,e.byteLength),this.transmuxer.push(e)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){e=e.timestampOffset||0,this.transmuxer.setBaseMediaDecodeTime(Math.round(ie(e)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(ie(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Rt(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new Rt(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))))),Nu=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():Jo(e.currentTransmux))},Uu=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,$o(t,e),0;t.transmuxQueue.push($o.bind(null,t,e))}("reset",e)},Bu=2,ju=-101,Fu=-102,Hu=io("CodecUtils"),Vu=io("PlaylistSelector"),Qu=(Ki=function(){var e=this.useDevicePixelRatio&&window.devicePixelRatio||1;return fu(this.playlists.master,this.systemBandwidth,parseInt(du(this.tech_.el(),"width"),10)*e,parseInt(du(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},function(e){function t(t,n){var i=e.call(this)||this;if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=t.parse708captions,i.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,i.captionServices_=t.captionServices,i.experimentalExactManifestTimings=t.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=qi.browser.IE_VERSION,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=io("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(ht(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",(function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}pt(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return function(e){var t=new Ru;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Uu(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return qi.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo;if(e=e.isMuxed,n&&t&&!this.audioDisabled_&&!e)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=qo(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Go(e),i=this.keyCache_[n];return this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes}),e={resolvedUri:(i||e).resolvedUri},i&&(e.bytes=i.bytes),e},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");t=e.mediaSequence-n.mediaSequence,this.logger_("live window shift ["+t+"]"),null!==this.mediaIndex&&(this.mediaIndex-=t,this.mediaIndex<0?(this.mediaIndex=null,this.partIndex=null):(r=this.playlist_.segments[this.mediaIndex],!this.partIndex||r.parts&&r.parts.length&&r.parts[this.partIndex]||(r=this.mediaIndex,this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=r))),i&&(i.mediaIndex-=t,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(0<=i.mediaIndex&&(i.segment=e.segments[i.mediaIndex]),0<=i.partIndex&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&Uu(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,i){if(void 0===n&&(n=function(){}),void 0===i&&(i=!1),(t=t===1/0?this.duration_():t)<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r,a=1,s=function(){0==--a&&n()};for(r in!i&&this.audioDisabled_||(a++,this.sourceUpdater_.removeAudio(e,t,s)),!i&&"main"!==this.loaderType_||(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil((t-i)*Su),a=Math.ceil((n-i)*Su),s=(i=e.slice(),e.length);s--&&!(e[s].pts<=a););if(-1===s)return i;for(var o=s+1;o--&&!(e[o].pts<=r););return o=Math.max(o,0),i.splice(o,s-o+1),i}(this.gopBuffer_,e,t,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,t,s)),this.inbandTextTracks_)mu(e,t,this.inbandTextTracks_[r]);mu(e,t,this.segmentMetadataTrack_),s()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){var e;this.sourceUpdater_.updating()||(e=this.chooseNextRequest_())&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var i="number"==typeof e&&t.segments[e];return e=e+1===t.segments.length,i=!i||!i.parts||n+1===i.parts.length,t.endList&&"open"===this.mediaSource_.readyState&&e&&i},n.chooseNextRequest_=function(){var e,t,n=lo(e=this.buffered_())||0,i=co(e,this.currentTime_()),r=!this.hasPlayed_()&&1<=i,a=i>=this.goalBufferLength_();if(!(e=this.playlist_.segments).length||r||a)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()),(r={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)}).isSyncRequest?r.mediaIndex=function(e,t,n){t=t||[];for(var i=[],r=0,a=0;a<t.length;a++){var s=t[a];if(e===s.timeline&&(i.push(a),n<(r+=s.duration)))return a}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,e,n):null!==this.mediaIndex?(a=e[this.mediaIndex],t="number"==typeof this.partIndex?this.partIndex:-1,r.startOfSegment=a.end||n,a.parts&&a.parts[t+1]?(r.mediaIndex=this.mediaIndex,r.partIndex=t+1):r.mediaIndex=this.mediaIndex+1):(t=(o=Cu.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time})).segmentIndex,s=o.startTime,o=o.partIndex,r.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),r.mediaIndex=t,r.startOfSegment=s,r.partIndex=o);var s=e[r.mediaIndex],o=s&&"number"==typeof r.partIndex&&s.parts&&s.parts[r.partIndex];return!s||"number"==typeof r.partIndex&&!o?null:("number"!=typeof r.partIndex&&s.parts&&(r.partIndex=0,o=s.parts[0]),i||!o||o.independent||(0===r.partIndex?(o=(i=e[r.mediaIndex-1]).parts&&i.parts.length&&i.parts[i.parts.length-1])&&o.independent&&(--r.mediaIndex,r.partIndex=i.parts.length-1,r.independent="previous segment"):s.parts[r.partIndex-1].independent&&(--r.partIndex,r.independent="previous part")),s=this.mediaSource_&&"ended"===this.mediaSource_.readyState,r.mediaIndex>=e.length-1&&s&&!this.seeking_()?null:this.generateSegmentInfo_(r))},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,i=e.mediaIndex,r=e.startOfSegment,a=e.isSyncRequest,s=e.partIndex,o=e.forceTimestampOffset,u=e.getMediaInfoForTime,l=n.segments[i];return e="number"==typeof s&&l.parts[s],t={requestId:"segment-loader-"+Math.random(),uri:e&&e.resolvedUri||l.resolvedUri,mediaIndex:i,partIndex:e?s:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:e&&e.duration||l.duration,segment:l,part:e,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},o=void 0!==o?o:this.isPendingTimestampOffset_,t.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:o}),"number"==typeof(o=lo(this.sourceUpdater_.audioBuffered()))&&(t.audioAppendStart=o-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(t.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];for(var i=Math.ceil((t-n+3)*Su),r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),t},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,i=t.currentTimeline,r=t.startOfSegment,e=t.buffered,t.overrideCheck||n!==i?n<i||!e.length?r:e.end(e.length-1):null;var t,n,i,r},n.earlyAbortWhenNeeded_=function(e){var t,n,i,r,a,s,o,u,l,c,d,h,p;!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3||(t=this.currentTime_(),r=e.bandwidth,a=this.pendingSegment_.duration,p=Cu.estimateSegmentRequestTime(a,r,this.playlist_,e.bytesReceived),n=this.buffered_(),i=t,void 0===(e=this.vhs_.tech_.playbackRate())&&(e=1),p<=(e=((n.length?n.end(n.length-1):0)-i)/e-1)||(a=(r={master:this.vhs_.playlists.master,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:a,timeUntilRebuffer:e,currentTimeline:this.currentTimeline_,syncController:this.syncController_}).master,s=r.currentTime,o=r.bandwidth,u=r.duration,l=r.segmentDuration,c=r.timeUntilRebuffer,d=r.currentTimeline,h=r.syncController,a=(r=(a=(a=(r=a.playlists.filter((function(e){return!Cu.isIncompatible(e)}))).filter(Cu.isEnabled)).length?a:r.filter((function(e){return!Cu.isDisabled(e)}))).filter(Cu.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=h.getSyncPoint(e,u,d,s)?1:2;return{playlist:e,rebufferingImpact:Cu.estimateSegmentRequestTime(l,o,e)*t-c}}))).filter((function(e){return e.rebufferingImpact<=0})),hu(a,(function(e,t){return pu(t.playlist,e.playlist)})),(r=a.length?a[0]:(hu(r,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),r[0]||null))&&(p=p-e-r.rebufferingImpact,!r.playlist||r.playlist.uri===this.playlist_.uri||p<(e<=Eu?1:.5)||(this.bandwidth=r.playlist.attributes.BANDWIDTH*Mu.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))))))},n.handleAbort_=function(e){this.logger_("Aborting "+yu(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=n[r];if(a!==i[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,i){var r;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||((r=this.pendingSegment_)[e=vu(t)]=r[e]||{},r[e][n]=i,this.logger_("timinginfo: "+t+" - "+n+" - "+i),this.hasEnoughInfoToAppend_()&&this.processCallQueue_())},n.handleCaptions_=function(e,t){var n,i,r=this;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(0!==t.length?this.pendingSegment_.hasAppendedData_?(n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={},t.forEach((function(e){i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)})),Object.keys(i).forEach((function(e){var t,a,s,o,u,l,c,d,h,p,f=i[e],m=f.startTime,g=f.endTime,y=f.captions,v=r.inbandTextTracks_;r.logger_("adding cues from "+m+" -> "+g+" for "+e),t=v,a=r.vhs_.tech_,t[s=e]||(a.trigger({type:"usage",name:"vhs-608"}),a.trigger({type:"usage",name:"hls-608"}),/^cc708_/.test(o=s)&&(o="SERVICE"+s.split("_")[1]),(c=a.textTracks().getTrackById(o))?t[s]=c:(l=u=s,f=!1,(c=(a.options_.vhs&&a.options_.vhs.captionServices||{})[o])&&(u=c.label,l=c.language,f=c.default),t[s]=a.addRemoteTextTrack({kind:"captions",id:o,default:f,label:u,language:l},!1).track)),mu(m,g,v[e]),h=(y={captionArray:y,inbandTextTracks:v,timestampOffset:n}).inbandTextTracks,v=y.captionArray,p=y.timestampOffset,v&&(d=window.WebKitDataCue||window.VTTCue,v.forEach((function(e){var t=e.stream;h[t].addCue(new d(e.startTime+p,e.endTime+p,e.text))})))})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})):this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t)):this.logger_("SegmentLoader received no captions from a caption event"))},n.handleId3_=function(e,t,n){var i,r,a,s;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?(i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r=this.inbandTextTracks_,a=n,s=this.vhs_.tech_,r.metadataTrack_||(r.metadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,r.metadataTrack_.inBandMetadataTrackDispatchType=a),function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,r=e.videoDuration;if(n){var a=window.WebKitDataCue||window.VTTCue,s=t.metadataTrack_;if(s&&(n.forEach((function(e){var t=e.cueTime+i;!("number"!=typeof t||window.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n,i=new a(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,n=i,Object.defineProperties(n.frame,{id:{get:function(){return qi.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get:function(){return qi.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get:function(){return qi.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}}),s.addCue(i)}))})),s.cues&&s.cues.length)){for(var o=s.cues,u=[],l=0;l<o.length;l++)o[l]&&u.push(o[l]);var c=u.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),d=Object.keys(c).sort((function(e,t){return Number(e)-Number(t)}));d.forEach((function(e,t){e=c[e];var n=Number(d[t+1])||r;e.forEach((function(e){e.endTime=n}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:this.duration_()})):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n)))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&_u({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return(e=void 0===e?this.pendingSegment_:e)&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,i=t.hasVideo;return t=t.isMuxed,!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!t&&!e.audioTimingInfo||_u({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n,i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4?(this.trigger("fmp4"),i.timingInfo.start=i[vu(t.type)].start):(n=this.getCurrentMediaInfo_(),(n="main"===this.loaderType_&&n&&n.hasVideo)&&(r=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:n,firstVideoFrameTimeForData:r,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})),this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var r=this.chooseNextRequest_();if(r.mediaIndex!==i.mediaIndex||r.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,i=e.map,r=e.playlist;if(i){if(e=qo(i),this.activeInitSegmentId_===e)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=e}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes,s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();1<s.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+uo(s).join(", ")),1<o.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+uo(o).join(", "));var u=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,c=o.length?o.start(0):0;if(e=o.length?o.end(o.length-1):0,l-u<=1&&e-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+uo(s).join(", ")+", video buffer: "+uo(o).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:r,bytes:a})),a=this.currentTime_()-1,this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+a),this.remove(0,a,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=window.setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,i=e.type;e=e.bytes,t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(i+" append of "+e.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:i,bytes:e}))},n.appendToSourceBuffer_=function(e){var t,n,i=e.segmentInfo,r=e.type,a=e.initSegment,s=e.data,o=e.bytes;o||(e=[s],s=s.byteLength,a&&(e.unshift(a),s+=a.byteLength),n=0,(e={bytes:s,segments:e}).bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((function(e){t.set(e,n),n+=e.byteLength}))),o=t),this.sourceUpdater_.appendBuffer({segmentInfo:i,type:r,bytes:o},this.handleAppendError_.bind(this,{segmentInfo:i,type:r,bytes:o}))},n.handleSegmentTimingInfo_=function(e,t,n){this.pendingSegment_&&t===this.pendingSegment_.requestId&&((t=this.pendingSegment_.segment)[e+="TimingInfo"]||(t[e]={}),t[e].transmuxerPrependedSeconds=n.prependedContentDuration||0,t[e].transmuxedPresentationStart=n.start.presentation,t[e].transmuxedDecodeStart=n.start.decode,t[e].transmuxedPresentationEnd=n.end.presentation,t[e].transmuxedDecodeEnd=n.end.decode,t[e].baseMediaDecodeTime=n.baseMediaDecodeTime)},n.appendData_=function(e,t){var n=t.type,i=t.data;i&&i.byteLength&&("audio"===n&&this.audioDisabled_||(t=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:t,data:i})))},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=y({},e,{forceTimestampOffset:!0});y(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&0<e.timeline;a=i||r&&a,this.logger_("Requesting "+yu(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=function(e){var t,n,i,r=e.xhr,a=e.xhrOptions,s=e.decryptionWorker,o=e.segment,u=e.abortFn,l=e.progressFn,c=e.trackInfoFn,d=e.timingInfoFn,h=e.videoSegmentTimingInfoFn,p=e.audioSegmentTimingInfoFn,f=e.id3Fn,m=e.captionsFn,g=e.isEndOfTimeline,y=e.endedTimelineFn,v=e.dataFn,_=e.doneFn,b=(e=e.onTransmuxerLog,[]);_=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=0,m=!1;return function(e,g){if(!m){if(e)return m=!0,eu(t),h(e,g);if((f+=1)===t.length){var y=function(){if(g.encryptedBytes)return t=(e={decryptionWorker:n,segment:g,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p}).decryptionWorker,m=e.trackInfoFn,y=e.timingInfoFn,v=e.videoSegmentTimingInfoFn,_=e.audioSegmentTimingInfoFn,b=e.id3Fn,T=e.captionsFn,S=e.isEndOfTimeline,w=e.endedTimelineFn,E=e.dataFn,k=e.doneFn,C=e.onTransmuxerLog,void au({id:(f=e.segment).requestId,key:f.key,encryptedBytes:f.encryptedBytes,decryptionWorker:t},(function(e){f.bytes=e,ru({segment:f,bytes:f.bytes,trackInfoFn:m,timingInfoFn:y,videoSegmentTimingInfoFn:v,audioSegmentTimingInfoFn:_,id3Fn:b,captionsFn:T,isEndOfTimeline:S,endedTimelineFn:w,dataFn:E,doneFn:k,onTransmuxerLog:C})}));var e,t,f,m,y,v,_,b,T,S,w,E,k,C;ru({segment:g,bytes:g.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return au({decryptionWorker:n,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(function(e){g.map.bytes=e,iu(g,(function(e){return e?(eu(t),h(e,g)):void y()}))}));y()}}}}({activeXhrs:b,decryptionWorker:s,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:p,id3Fn:f,captionsFn:m,isEndOfTimeline:g,endedTimelineFn:y,dataFn:v,doneFn:_,onTransmuxerLog:e}),o.key&&!o.key.bytes&&(e=[o.key],o.map&&!o.map.bytes&&o.map.key&&o.map.key.resolvedUri===o.key.resolvedUri&&e.push(o.map.key),e=r(qi.mergeOptions(a,{uri:o.key.resolvedUri,responseType:"arraybuffer"}),nu(o,e,_)),b.push(e)),o.map&&!o.map.bytes&&(!o.map.key||o.key&&o.key.resolvedUri===o.map.key.resolvedUri||(t=r(qi.mergeOptions(a,{uri:o.map.key.resolvedUri,responseType:"arraybuffer"}),nu(o,[o.map.key],_)),b.push(t)),t=r(qi.mergeOptions(a,{uri:o.map.resolvedUri,responseType:"arraybuffer",headers:Fo(o.map)}),(n=(t={segment:o,finishProcessingFn:_}).segment,i=t.finishProcessingFn,function(e,t){return(e=tu(e,t))?i(e,n):(e=new Uint8Array(t.response),n.map.key?(n.map.encryptedBytes=e,i(null,n)):(n.map.bytes=e,void iu(n,(function(e){return e?(e.xhr=t,e.status=t.status,i(e,n)):void i(null,n)}))))})),b.push(t)),(a=r(a=qi.mergeOptions(a,{uri:o.part&&o.part.resolvedUri||o.resolvedUri,responseType:"arraybuffer",headers:Fo(o)}),function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(e,r){return(e=tu(e,r))?n(e,t):(e="arraybuffer"!==i&&r.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(r.responseText.substring(t.lastReachedChar||0)):r.response,t.stats={bandwidth:(r=r).bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0},t.key?t.encryptedBytes=new Uint8Array(e):t.bytes=new Uint8Array(e),n(null,t))}}({segment:o,finishProcessingFn:_,responseType:a.responseType}))).addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return function(e){var i,r=e.target;if(!r.aborted)return t.stats=qi.mergeOptions(t.stats,(r=(i=e).target,(r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0}).bytesReceived=i.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}}({segment:o,progressFn:l,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:p,id3Fn:f,captionsFn:m,isEndOfTimeline:g,endedTimelineFn:y,dataFn:v})),b.push(a);var T={};return b.forEach((function(e){var t,n;e.addEventListener("loadend",(t=(e={loadendState:T,abortFn:u}).loadendState,n=e.abortFn,function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}))})),function(){return eu(b)}}({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var i=n.message,r=n.level;n=n.stream,t.logger_(yu(e)+" logged from transmuxer stream "+n+" as a "+r+": "+i)}})},n.trimBackBuffer_=function(e){var t,n,i,r;0<(t=this.seekable_(),n=this.currentTime_(),i=this.playlist_.targetDuration||10,r=n-Mu.BACK_BUFFER_LENGTH,t.length&&(r=Math.max(r,t.start(0))),r=Math.min(n-i,r))&&this.remove(0,r)},n.createSimplifiedSegmentObj_=function(e){var t,n=e.segment,i={resolvedUri:((t=e.part)||n).resolvedUri,byterange:(t||n).byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part};return(t=e.playlist.segments[e.mediaIndex-1])&&t.timeline===n.timeline&&(t.videoTimingInfo?i.baseStartTime=t.videoTimingInfo.transmuxedDecodeEnd:t.audioTimingInfo&&(i.baseStartTime=t.audioTimingInfo.transmuxedDecodeEnd)),n.key&&(e=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]),i.key=this.segmentKey(n.key),i.key.iv=e),n.map&&(i.map=this.initSegmentForMap(n.map)),i},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+1/60):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Fu?void 0:(this.pause(),e.code===ju?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));e=this.pendingSegment_,this.saveBandwidthRelatedStats_(e.duration,t.stats),e.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(e)}},n.setTimeMapping_=function(e){null!==(e=this.syncController_.mappingForTimeline(e))&&(this.timeMapping_=e)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,i=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo;return e=e.audioTimingInfo,void 0!==t?t:s?(n=n.segments[i-1],0!==i&&n&&void 0!==n.start&&n.end===r+a?o.start:r):e.start},n.waitForAppendsToComplete_=function(e){if(!(i=this.getCurrentMediaInfo_(e)))return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=i.hasAudio,n=i.hasVideo,i=i.isMuxed;if(n="main"===this.loaderType_&&n,i=!this.audioDisabled_&&t&&!i,e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);n&&e.waitingOnAppends++,i&&e.waitingOnAppends++,n&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),i&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t,n;return t=this.loaderType_,n=this.getCurrentMediaInfo_(),e=e,!(!(e="main"===t&&n&&e?e.hasAudio||e.hasVideo?n.hasVideo&&!e.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.hasVideo&&e.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)||(this.error({message:e,blacklistDuration:1/0}),this.trigger("error"),0))},n.updateSourceBufferTimestampOffset_=function(e){var t;null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_||(t=!1,e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset"))},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo;return e=e.timingInfo,this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:e.start:e.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_();(t="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo)&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var n,i,r=(n={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},i=0,["video","audio"].forEach((function(e){var t,r=n[e+"TimingInfo"];r&&(e=r.start,r=r.end,"bigint"==typeof e||"bigint"==typeof r?t=window.BigInt(r)-window.BigInt(e):"number"==typeof e&&"number"==typeof r&&(t=r-e),void 0!==t&&i<t&&(i=t))})),i="bigint"==typeof i&&i<Number.MAX_SAFE_INTEGER?Number(i):i);if(!r)return null;var a=bu({segmentDuration:r,maxDuration:2*(s=e.playlist.targetDuration)}),s=(t=bu({segmentDuration:r,maxDuration:s}),"Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+r+" when the reported duration is "+e.duration+" and the target duration is "+s+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1");return a||t?{severity:a?"warn":"info",message:s}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?qi.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+yu(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment;if(t=e.part,n=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,t=t&&t.end&&this.currentTime_()-t.end>3*e.playlist.partTargetDuration,n||t)return this.logger_("bad "+(n?"segment":"part")+" "+yu(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+yu(e))},n.recordThroughput_=function(e){var t,n;e.duration<1/60?this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+1/60):(t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/n*8*1e3),this.throughput.rate+=(n-t)/++this.throughput.count)},n.addSegmentMetadataCue_=function(e){var t,n,i,r;this.segmentMetadataTrack_&&(n=(t=e.segment).start,r=t.end,gu(n)&&gu(r)&&(mu(n,r,this.segmentMetadataTrack_),i=window.WebKitDataCue||window.VTTCue,e={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},(r=new i(n,r,JSON.stringify(e))).value=e,this.segmentMetadataTrack_.addCue(r)))},t}(qi.EventTarget));function qu(){}function Gu(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))}function Wu(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]}function zu(e,t){if(0!==t.queue.length){var n=0,i=t.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!Wu(e,t)){if(i.type!==e){if(null===(n=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(e,t.queue)))return;i=t.queue[n]}t.queue.splice(n,1),(t.queuePending[e]=i).action(e,t),i.doneFn||(t.queuePending[e]=null,zu(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),zu("audio",t),zu("video",t))}}function Ku(e,t){var n=t[e+"Buffer"],i=Gu(e);n&&(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)}function Yu(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)}function Xu(e){var t=e.type,n=e.sourceUpdater,i=e.action,r=e.doneFn;e=e.name,n.queue.push({type:t,action:i,doneFn:r,name:e}),zu(t,n)}function Ju(e,t){return function(n){var i;t.queuePending[e]&&(i=t.queuePending[e].doneFn,t.queuePending[e]=null,i&&i(t[e+"Error_"])),zu(e,t)}}function $u(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}function Zu(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function el(e,t){(t.activePlaylistLoader=e).load()}function tl(e,t){for(var n=0;n<e.length;n++){if(Co(t,e[n]))return!0;if(e[n].playlists&&tl(e[n].playlists,t))return!0}return!1}function nl(e,t,n){var i,r,a,s,o=e.masterPlaylistController_,u=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);t.attributes&&(i=t.attributes.RESOLUTION,this.width=i&&i.width,this.height=i&&i.height,this.bandwidth=t.attributes.BANDWIDTH),this.codecs=lu(o.master(),t),this.playlist=t,this.id=n,this.enabled=(r=e.playlists,a=t.id,s=u,function(e){var t=r.master.playlists[a],n=So(t),i=wo(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})}function il(e,t){var n=0,i=0,r=qi.mergeOptions(Dl,t);function a(){i&&e.currentTime(i)}function s(t){null!=t&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())}function o(){return Date.now()-n<1e3*r.errorInterval?(e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void e.trigger({type:"usage",name:"hls-error-reload-canceled"})):r.getSource&&"function"==typeof r.getSource?(n=Date.now(),r.getSource.call(e,s)):void qi.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function u(){e.off("loadedmetadata",a),e.off("error",o),e.off("dispose",u)}e.ready((function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})})),e.on("error",o),e.on("dispose",u),e.reloadSourceOnError=function(t){u(),il(e,t)}}var rl,al=["video","audio"],sl=function(e,t,n){return function(i,r){var a=r[i+"Buffer"];if(Yu(r.mediaSource,a)){r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{a.appendBuffer(e)}catch(a){r.logger_("Error with code "+a.code+" "+(22===a.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+i+"Buffer"),r.queuePending[i]=null,n(a)}}}},ol=function(e,t){return function(n,i){var r=i[n+"Buffer"];if(Yu(i.mediaSource,r)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{r.remove(e,t)}catch(r){i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},ul=function(e){return function(t,n){var i=n[t+"Buffer"];Yu(n.mediaSource,i)&&(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},ll=function(e){return function(t,n){e()}},cl=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(t){qi.log.warn("Failed to call media source endOfStream",t)}}}},dl=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(t){qi.log.warn("Failed to set media source duration",t)}}},hl=function(e,t){return function(n){var i=Gu(e),r=ir(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource"),(r=n.mediaSource.addSourceBuffer(r)).addEventListener("updateend",n["on"+i+"UpdateEnd_"]),r.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=r}},pl=function(e){return function(t){var n=t[e+"Buffer"];if(Ku(e,t),Yu(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){qi.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},fl=function(e){return function(t,n){var i=n[t+"Buffer"],r=ir(e);Yu(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),i.changeType(r),n.codecs[t]=e)}},ml=function(e){function t(t){var n=e.call(this)||this;return n.mediaSource=t,n.sourceopenListener_=function(){return zu("mediaSource",ht(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=io("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=Ju("video",ht(n)),n.onAudioUpdateEnd_=Ju("audio",ht(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}pt(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){Xu({type:"mediaSource",sourceUpdater:this,action:hl(e,t),name:"addSourceBuffer"})},n.abort=function(e){Xu({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(Yu(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){qi.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Xu({type:"mediaSource",sourceUpdater:this,action:pl(e),name:"removeSourceBuffer"}):qi.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!qi.browser.IE_VERSION&&!qi.browser.IS_FIREFOX&&window.MediaSource&&window.MediaSource.prototype&&"function"==typeof window.MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return window.SourceBuffer&&window.SourceBuffer.prototype&&"function"==typeof window.SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?Xu({type:e,sourceUpdater:this,action:fl(t),name:"changeType"}):qi.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=s(e)||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var i=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,i);t.canChangeType()&&t.changeType(n,i)}))},n.appendBuffer=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");Xu({type:r,sourceUpdater:this,action:sl(a,i||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(r=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+r.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,r.forEach((function(e){n.appendBuffer.apply(n,e)}))))},n.audioBuffered=function(){return Yu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered||qi.createTimeRange()},n.videoBuffered=function(){return Yu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered||qi.createTimeRange()},n.buffered=function(){var e=Yu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Yu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,i=null,r=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return qi.createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),o=0;o<a.length;o++)"start"===a[o].type?2==++r&&(n=a[o].time):"end"===a[o].type&&1==--r&&(i=a[o].time),null!==n&&null!==i&&(s.push([n,i]),i=n=null);return qi.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){void 0===t&&(t=qu),Xu({type:"mediaSource",sourceUpdater:this,action:dl(e),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===t&&(t=qu),Xu({type:"mediaSource",sourceUpdater:this,action:cl(e="string"!=typeof(e=void 0===e?null:e)?void 0:e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=qu),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Xu({type:"audio",sourceUpdater:this,action:ol(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=qu),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Xu({type:"video",sourceUpdater:this,action:ol(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!Wu("audio",this)&&!Wu("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Xu({type:"audio",sourceUpdater:this,action:ul(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Xu({type:"video",sourceUpdater:this,action:ul(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&Xu({type:"audio",sourceUpdater:this,action:ll(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&Xu({type:"video",sourceUpdater:this,action:ll(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),al.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return Ku(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(qi.EventTarget),gl=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),yl=function(e){function t(t,n){return(n=e.call(this,t,n=void 0===n?{}:n)||this).mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}pt(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return qi.createTimeRanges();var e=(t=this.subtitlesTrack_.cues)[0].startTime,t=t[t.length-1].startTime;return qi.createTimeRanges([[e,t]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=qo(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(t=gl.byteLength+e.bytes.byteLength,(t=new Uint8Array(t)).set(e.bytes),t.set(gl,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:t}),i||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){mu(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var i=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===ju&&this.handleTimeout_(),e.code===Fu?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof window.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var s=function(){i.subtitlesTrack_.tech_.off("vttjsloaded",o),i.stopForError({message:"Error loading vtt.js"})},o=function(){i.subtitlesTrack_.tech_.off("vttjserror",s),i.segmentRequestFinished_(e,t,n)};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",s)}a.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach((function(e){i.subtitlesTrack_.addCue(i.featuresNativeTextTracks_?new window.VTTCue(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],r=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&1<++r&&i.push(t[a]);i.length&&i.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t=!1;"function"==typeof window.TextDecoder?n=new window.TextDecoder("utf8"):(n=window.WebVTT.StringDecoder(),t=!0);var n=new window.WebVTT.Parser(window,window.vttjs,n);e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){qi.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map&&(i=e.segment.map.bytes,t&&(i=$u(i)),n.parse(i));var i=e.bytes;t&&(i=$u(i)),n.parse(i),n.flush()},n.updateTimeMapping_=function(e,t,n){var i,r,a=e.segment;t&&(e.cues.length?(r=e.timestampmap,i=r.MPEGTS/Su-r.LOCAL+t.mapping,e.cues.forEach((function(e){e.startTime+=i,e.endTime+=i})),n.syncInfo||(r=e.cues[0].startTime,t=e.cues[e.cues.length-1].startTime,n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(r,t-a.duration)})):a.empty=!0)},t}(Qu),vl=[{name:"VOD",run:function(e,t,n,i,r){return n===1/0?null:{time:0,segmentIndex:0,partIndex:null}}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,s=null,o=po(t);r=r||0;for(var u=0;u<o.length;u++){var l=o[t.endList||0===r?u:o.length-(u+1)],c=l.segment,d=e.timelineToDatetimeMappings[c.timeline];if(d&&c.dateTimeObject){var h=c.dateTimeObject.getTime()/1e3+d;if(c.parts&&"number"==typeof l.partIndex)for(var p=0;p<l.partIndex;p++)h+=c.parts[p].duration;if(d=Math.abs(r-h),null!==s&&(0===d||s<d))break;s=d,a={time:h,segmentIndex:l.segmentIndex,partIndex:l.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var a=null,s=null;r=r||0;for(var o=po(t),u=0;u<o.length;u++){var l=o[t.endList||0===r?u:o.length-(u+1)],c=l.segment,d=l.part&&l.part.start||c&&c.start;if(c.timeline===i&&void 0!==d){if(c=Math.abs(r-d),null!==s&&s<c)break;(!a||null===s||c<=s)&&(s=c,a={time:d,segmentIndex:l.segmentIndex,partIndex:l.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,c=e.discontinuities[l];if(c){if(l=Math.abs(r-c.time),null!==s&&s<l)break;(!a||null===s||l<=s)&&(s=l,a={time:c.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],_l=function(e){function t(t){var n=e.call(this)||this;return n.timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=io("SyncController"),n}pt(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,i){return(n=this.runStrategies_(e,t,n,i)).length?this.selectSyncPoint_(n,{key:"time",value:i}):null},n.getExpiredTime=function(e,t){return e&&e.segments&&(t=this.runStrategies_(e,t,e.discontinuitySequence,0)).length?(0<(t=this.selectSyncPoint_(t,{key:"segmentIndex",value:0})).segmentIndex&&(t.time*=-1),Math.abs(t.time+_o({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.segmentIndex,endIndex:0}))):null},n.runStrategies_=function(e,t,n,i){for(var r=[],a=0;a<vl.length;a++){var s=vl[a],o=s.run(this,e,t,n,i);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<i&&(i=s,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(86400<n)qi.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var i=n-1;0<=i;i--){var r=e.segments[i];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){var t;this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject&&(e=(t=e.segments[0]).dateTimeObject.getTime()/1e3,this.timelineToDatetimeMappings[t.timeline]=-e)},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(t,t.timingInfo,n);e=t.segment,i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:e.start})),t=e.dateTimeObject,e.discontinuity&&n&&t&&(this.timelineToDatetimeMappings[e.timeline]=-t.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var i,r,a=e.segment,s=e.part,o=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+o.time+"] [mapping: "+o.mapping+"]")),i=e.startOfSegment,r=t.end+o.mapping;else{if(!o)return!1;i=t.start+o.mapping,r=t.end+o.mapping}return s&&(s.start=i,s.end=r),(!a.start||i<a.start)&&(a.start=i),a.end=r,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r,a=t.discontinuityStarts[i],s=t.discontinuitySequence+i+1,o=a-e.mediaIndex,u=Math.abs(o);(!this.discontinuities[s]||this.discontinuities[s].accuracy>u)&&(r=o<0?n.start-_o({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:a}):n.end+_o({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[s]={time:r,accuracy:u})}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(qi.EventTarget),bl=function(e){function t(){var t=e.call(this)||this;return t.pendingTimelineChanges_={},t.lastTimelineChanges_={},t}pt(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from;return e=e.to,"number"==typeof n&&"number"==typeof e&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:e},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from;return e=e.to,"number"==typeof n&&"number"==typeof e&&(this.lastTimelineChanges_[t]={type:t,from:n,to:e},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(qi.EventTarget),Tl=P(U(q((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var i=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=t((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),s=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t)},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),o=null,u=function(){function e(e){var t,n,i;o=o||function(){for(var e,t,n,i,r,a,s,o=[[[],[],[],[],[]],[[],[],[],[],[]]],u=o[0],l=o[1],c=u[4],d=l[4],h=[],p=[],f=0;f<256;f++)p[(h[f]=f<<1^283*(f>>7))^f]=f;for(e=t=0;!c[e];e^=n||1,t=p[t]||1)for(s=16843009*h[i=h[n=h[d[c[e]=r=(r=t^t<<1^t<<2^t<<3^t<<4)>>8^255&r^99]=e]]]^65537*i^257*n^16843008*e,a=257*h[r]^16843008*r,f=0;f<4;f++)u[f][e]=a=a<<24^a>>>8,l[f][r]=s=s<<24^s>>>8;for(f=0;f<5;f++)u[f]=u[f].slice(0),l[f]=l[f].slice(0);return o}(),this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],s=e.length,u=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var l=e.slice(0),c=[];for(this._key=[l,c],t=s;t<4*s+28;t++)i=l[t-1],(t%s==0||8===s&&t%s==4)&&(i=r[i>>>24]<<24^r[i>>16&255]<<16^r[i>>8&255]<<8^r[255&i],t%s==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),l[t]=l[t-s]^i;for(n=0;t;n++,t--)i=l[3&n?t:t-4],c[n]=t<=4||n<4?i:a[0][r[i>>>24]]^a[1][r[i>>16&255]]^a[2][r[i>>8&255]]^a[3][r[255&i]]}return e.prototype.decrypt=function(e,t,n,i,r,a){for(var s,o,u,l=this._key[1],c=e^l[0],d=i^l[1],h=n^l[2],p=t^l[3],f=l.length/4-2,m=4,g=(t=this._tables[1])[0],y=t[1],v=t[2],_=t[3],b=t[4],T=0;T<f;T++)s=g[c>>>24]^y[d>>16&255]^v[h>>8&255]^_[255&p]^l[m],o=g[d>>>24]^y[h>>16&255]^v[p>>8&255]^_[255&c]^l[m+1],u=g[h>>>24]^y[p>>16&255]^v[c>>8&255]^_[255&d]^l[m+2],p=g[p>>>24]^y[c>>16&255]^v[d>>8&255]^_[255&h]^l[m+3],m+=4,c=s,d=o,h=u;for(T=0;T<4;T++)r[(3&-T)+a]=b[c>>>24]<<24^b[d>>16&255]<<16^b[h>>8&255]<<8^b[255&p]^l[m++],s=c,c=d,d=h,h=p,p=s},e}(),l=function(e){function t(){var t=e.call(this,s)||this;return t.jobs=[],t.delay=1,t.timeout_=null,t}a(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(s),c=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},d=function(){function e(t,n,i,r){var a=e.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),u=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),n,i,o)),u=a;u<s.length;u+=a)i=new Uint32Array([c(s[u-4]),c(s[u-3]),c(s[u-2]),c(s[u-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),n,i,o));this.asyncStream_.push((function(){var e;r(null,(e=o).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,i){return function(){var r=function(e,t,n){for(var i,r,a,s,o=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),l=new u(Array.prototype.slice.call(t)),d=(e=new Uint8Array(e.byteLength),new Int32Array(e.buffer)),h=n[0],p=n[1],f=n[2],m=n[3],g=0;g<o.length;g+=4)i=c(o[g]),r=c(o[g+1]),a=c(o[g+2]),s=c(o[g+3]),l.decrypt(i,r,a,s,d,g),d[g]=c(d[g]^h),d[g+1]=c(d[g+1]^p),d[g+2]=c(d[g+2]^f),d[g+3]=c(d[g+3]^m),h=i,p=r,f=a,m=s;return e}(e,t,n);i.set(r,e.byteOffset)}},i(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}();(e=(e="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number)("0x1"),e("0x100"),e("0x10000"),e("0x1000000"),e("0x100000000"),e("0x10000000000"),e("0x1000000000000"),e("0x100000000000000"),e("0x10000000000000000"),self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4);e=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4),new d(n,i,e,(function(e,n){self.postMessage(function(e){var t={};return Object.keys(e).forEach((function(n){var i,r=e[n];i=r,("function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t}({source:t.source,decrypted:n}),[n.buffer])}))}})))),Sl={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;Zu(n,i);var a=i.activeTrack(),s=(n=((n=i.activeGroup()).filter((function(e){return e.default}))[0]||n[0]).id,i.tracks[n]);if(a!==s){for(var o in qi.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[o].enabled=i.tracks[o]===s;i.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];qi.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Zu(n,i),(n=i.activeTrack())&&(n.mode="disabled"),i.onTrackChanged()}}},wl={AUDIO:function(e,t,n){var i,r,a;t&&(i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",Sl[e](e,n)))},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",Sl[e](e,n))}},El={AUDIO:function(e,t){var n,i,r=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,d=l.tracks,h=l.logger_,p=t.masterPlaylistLoader,f=Po(p.master);for(n in u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}},f&&(u[e].main.default.playlists=p.master.playlists)),u[e])for(var m in c[n]||(c[n]=[]),u[e][n]){var g=u[e][n][m],y=void 0;y=f?(h("AUDIO group '"+n+"' label '"+m+"' is a master playlist"),g.isMasterPlaylist=!0,null):"vhs-json"===a&&g.playlists?new Iu(g.playlists[0],r,o):g.resolvedUri?new Iu(g.resolvedUri,r,o):g.playlists&&"dash"===a?new xu(g.playlists[0],r,o,p):null,g=qi.mergeOptions({id:m,playlistLoader:y},g),wl[e](e,g.playlistLoader,t),c[n].push(g),void 0===d[m]&&(g=new qi.AudioTrack({id:m,kind:(i=void 0,i=(y=g).default?"main":"alternative",i=y.characteristics&&0<=y.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":i),enabled:!1,language:g.language,default:g.default,label:m}),d[m]=g)}s.on("error",Sl[e](e,t))},SUBTITLES:function(e,t){var n,i=t.tech,r=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,d=l.tracks,h=t.masterPlaylistLoader;for(n in u[e])for(var p in c[n]||(c[n]=[]),u[e][n])if(!u[e][n][p].forced){var f=u[e][n][p],m=void 0;if("hls"===a)m=new Iu(f.resolvedUri,r,o);else if("dash"===a){if(!f.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;m=new xu(f.playlists[0],r,o,h)}else"vhs-json"===a&&(m=new Iu(f.playlists?f.playlists[0]:f.resolvedUri,r,o));f=qi.mergeOptions({id:p,playlistLoader:m},f),wl[e](e,f.playlistLoader,t),c[n].push(f),void 0===d[p]&&(f=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track,d[p]=f)}s.on("error",Sl[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n,i=t.tech,r=t.master.mediaGroups,a=(t=t.mediaTypes[e]).groups,s=t.tracks;for(n in r[e])for(var o in a[n]||(a[n]=[]),r[e][n]){var u,l,c=r[e][n][o];/^(?:CC|SERVICE)/.test(c.instreamId)&&(void 0===(l=(u=i.options_.vhs&&i.options_.vhs.captionServices||{})[(l={label:o,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect}).instreamId]?qi.mergeOptions(l,u[l.instreamId]):l).default&&delete l.default,a[n].push(qi.mergeOptions({id:o},c)),void 0===s[o]&&(l=i.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default,language:l.language,label:l.label},!1).track,s[o]=l))}}},kl={AUDIO:function(e,t){return function(){var n,i=t.mediaTypes[e].tracks;for(n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var n,i=t.mediaTypes[e].tracks;for(n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},Cl=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Al=function(e){function t(t){var n=e.call(this)||this,i=t.src,r=t.handleManifestRedirects,a=t.withCredentials,s=t.tech,o=t.bandwidth,u=t.externVhs,l=t.useCueTags,c=t.blacklistDuration,d=t.enableLowInitialPlaylist,h=t.sourceType,p=t.cacheEncryptionKeys,f=t.experimentalBufferBasedABR,m=t.experimentalLeastPixelDiffSelector,g=t.captionServices;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var y,v=t.maxPlaylistRetries;return null!=v||(v=1/0),rl=u,n.experimentalBufferBasedABR=Boolean(f),n.experimentalLeastPixelDiffSelector=Boolean(m),n.withCredentials=a,n.tech_=s,n.vhs_=s.vhs,n.sourceType_=h,n.useCueTags_=l,n.blacklistDuration=c,n.maxPlaylistRetries=v,n.enableLowInitialPlaylist=d,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:a,handleManifestRedirects:r,maxPlaylistRetries:v,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=(y={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){y[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:qu,activeTrack:qu,getActiveGroup:qu,onGroupChanged:qu,onTrackChanged:qu,lastTrack_:null,logger_:io("MediaGroups["+e+"]")}})),y),n.mediaSource=new window.MediaSource,n.handleDurationChange_=n.handleDurationChange_.bind(ht(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(ht(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(ht(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=qi.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new _l(t),n.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Tl,n.sourceUpdater_=new ml(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new bl,p={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:g,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:o,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:p,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings},n.masterPlaylistLoader_=new("dash"===n.sourceType_?xu:Iu)(i,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Qu(qi.mergeOptions(p,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new Qu(qi.mergeOptions(p,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new yl(qi.mergeOptions(p,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),Cl.forEach((function(e){n[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(ht(n),e)})),n.logger_=io("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1,t="none"===n.tech_.preload()?"play":"loadstart",n.tech_.one(t,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}pt(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,n){var i=(r=this.media())&&(r.id||r.uri),r=e.id||e.uri;i&&i!==r&&(this.logger_("switch media "+i+" -> "+r+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=window.setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window.clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,i=e.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a,s=i.main||r.length&&i[r[0]];for(a in s)if(s[a].default){n={label:a};break}}if(!n)return t;var o,u=[];for(o in i)if(i[o][n.label]){var l=i[o][n.label];if(l.playlists&&l.playlists.length)u.push.apply(u,l.playlists);else if(l.uri)u.push(l);else if(e.playlists.length)for(var c=0;c<e.playlists.length;c++){var d=e.playlists[c];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===o&&u.push(d)}}return u.length?u:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;ko(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){El[t](t,e)}));var t,n=e.mediaTypes,i=e.masterPlaylistLoader,r=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,u=s.main;function l(){n.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})}for(t in["AUDIO","SUBTITLES"].forEach((function(t){var i,r,a,s,o,u,l,c,d,h;n[t].activeGroup=(i=t,r=e,function(e){var t=r.masterPlaylistLoader,n=r.mediaTypes[i].groups,a=t.media();if(!a)return null;var s=null;a.attributes[i]&&(s=n[a.attributes[i]]);var o=Object.keys(n);if(!s)if("AUDIO"===i&&1<o.length&&Po(r.master))for(var u=0;u<o.length;u++){var l=n[o[u]];if(tl(l,a)){s=l;break}}else n.main?s=n.main:1===o.length&&(s=n[o[0]]);return void 0===e?s:null!==e&&s&&s.filter((function(t){return t.id===e.id}))[0]||null}),n[t].activeTrack=kl[t](t,e),n[t].onGroupChanged=(a=t,s=e,function(){var e=(u=s.segmentLoaders)[a],t=u.main,n=s.mediaTypes[a],i=n.activeTrack(),r=n.getActiveGroup(),o=n.activePlaylistLoader,u=n.lastGroup_;r&&u&&r.id===u.id||(n.lastGroup_=r,n.lastTrack_=i,Zu(e,n),r&&!r.isMasterPlaylist&&(r.playlistLoader?(e.resyncLoader(),el(r.playlistLoader,n)):o&&t.resetEverything()))}),n[t].onGroupChanging=(o=t,u=e,function(){var e=u.segmentLoaders[o];u.mediaTypes[o].lastGroup_=null,e.abort(),e.pause()}),n[t].onTrackChanged=(l=t,c=e,function(){var e=c.masterPlaylistLoader,t=(d=c.segmentLoaders)[l],n=d.main,i=c.mediaTypes[l],r=i.activeTrack(),a=i.getActiveGroup(),s=i.activePlaylistLoader,o=i.lastTrack_;if((!o||!r||o.id!==r.id)&&(i.lastGroup_=a,i.lastTrack_=r,Zu(t,i),a)){if(a.isMasterPlaylist){if(!r||!o||r.id===o.id)return;var u=c.vhs.masterPlaylistController_,d=u.selectPlaylist();return u.media()===d?void 0:(i.logger_("track change. Switching master audio from "+o.id+" to "+r.id),e.pause(),n.resetEverything(),void u.fastQualityChange_(d))}if("AUDIO"===l){if(!a.playlistLoader)return n.setAudio(!0),void n.resetEverything();t.setAudio(!0),n.setAudio(!1)}s!==a.playlistLoader&&(t.track&&t.track(r),t.resetEverything()),el(a.playlistLoader,i)}}),n[t].getActiveGroup=(d=t,h=e.mediaTypes,function(){var e=h[d].activeTrack();return e?h[d].activeGroup(e):null})})),(s=n.AUDIO.activeGroup())&&(s=(s.filter((function(e){return e.default}))[0]||s[0]).id,n.AUDIO.tracks[s].enabled=!0,n.AUDIO.onGroupChanged(),n.AUDIO.onTrackChanged(),n.AUDIO.getActiveGroup().playlistLoader?(u.setAudio(!1),o.setAudio(!0)):u.setAudio(!0)),i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return n[e].onGroupChanged()}))})),i.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return n[e].onGroupChanging()}))})),r.audioTracks().addEventListener("change",l),r.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),a.on("dispose",(function(){r.audioTracks().removeEventListener("change",l),r.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),n.AUDIO.tracks)r.audioTracks().addTrack(n.AUDIO.tracks[t])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t,n=e.masterPlaylistLoader_.media();if(!n){if(e.excludeUnsupportedVariants_(),!(t=(t=e.enableLowInitialPlaylist?e.selectInitialPlaylist():t)||e.selectPlaylist())||!e.shouldSwitchToMedia_(t))return;if(e.initialMedia_=t,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;n=e.initialMedia_}e.handleUpdatedMediaPlaylist(n)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;ko(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n,i=e.mediaGroups||{},r=!0;for(n in e=Object.keys(i.AUDIO),i.AUDIO)for(var a in i.AUDIO[n])i.AUDIO[n][a].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),rl.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&1<Object.keys(i.AUDIO[e[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,r=e.nextPlaylist,a=e.bufferLowWaterLine,s=e.bufferHighWaterLine,o=e.duration,u=e.experimentalBufferBasedABR,l=e.log;if(!r)return qi.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(t&&t.id||"null")+" -> "+r.id;return t?!(r.id===t.id||(e=Boolean(ao(n,i).length),t.endList?(n=co(n,i),o<(i=u?Mu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Mu.MAX_BUFFER_LOW_WATER_LINE)?(l(c+" as duration < max low water line ("+o+" < "+i+")"),0):(i=r.attributes.BANDWIDTH)<(r=t.attributes.BANDWIDTH)&&(!u||n<s)?(t=c+" as next bandwidth < current bandwidth ("+i+" < "+r+")",u&&(t+=" and forwardBuffer < bufferHighWaterLine ("+n+" < "+s+")"),l(t),0):(!u||r<i)&&a<=n?(a=c+" as forwardBuffer >= bufferLowWaterLine ("+n+" >= "+a+")",u&&(a+=" and next bandwidth > current bandwidth ("+i+" > "+r+")"),l(a),0):(l("not "+c+" as no switching criteria met"),1)):e||"number"!=typeof t.partTargetDuration?(l(c+" as current playlist is live"),0):(l("not "+c+" as current playlist is live llhls, but currentTime isn't in buffered."),1))):(l(c+" as current playlist is not set"),!0)}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;function t(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)}this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.switchMedia_(t,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))})),this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;(e=void 0===e?this.selectPlaylist():e)!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){qi.browser.IE_VERSION||qi.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(qi.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){var e;this.tryToCreateSourceBuffers_(),!this.tech_.autoplay()||void 0!==(e=this.tech_.play())&&"function"==typeof e.then&&e.then(null,(function(e){})),this.trigger("sourceopen")},n.handleSourceEnded_=function(){var e,t;!this.inbandTextTracks_.metadataTrack_||(e=this.inbandTextTracks_.metadataTrack_.cues)&&e.length&&(t=this.duration(),e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t)},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e,t=this.mainSegmentLoader_.ended_;(t=this.mediaTypes_.AUDIO.activePlaylistLoader?((e=this.mainSegmentLoader_.getCurrentMediaInfo_())&&!e.hasVideo||t)&&this.audioSegmentLoader_.ended_:t)&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;if(null===(t=this.syncController_.getExpiredTime(e,this.duration())))return!1;var t,n=rl.Playlist.playlistEnd(e,t);return e=this.tech_.currentTime(),(t=this.tech_.buffered()).length?(t=t.end(t.length-1))-e<=.1&&n-t<=.1:n-e<=.1},n.blacklistCurrentPlaylist=function(e,t){var n=(e=void 0===e?{}:e).playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var i,r=this.masterPlaylistLoader_.master.playlists,a=r.filter(wo),s=1===a.length&&a[0]===n;return 1===r.length&&t!==1/0?(qi.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(s&&(i=!1,r.forEach((function(e){var t;e===n||void 0!==(t=e.excludeUntil)&&t!==1/0&&(i=!0,delete e.excludeUntil)})),i&&(qi.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))),a=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=a,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),(r=this.selectPlaylist())?(t=e.internal?this.logger_:qi.log.warn,a=e.message?" "+e.message:"",t((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+a+" Switching to playlist "+r.id+"."),r.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),r.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),a=r.targetDuration/2*1e3||5e3,a="number"==typeof r.lastRequest&&Date.now()-r.lastRequest<=a,this.switchMedia_(r,"exclude",s||a)):(this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error")))},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,i=[],r="all"===e;!r&&"main"!==e||i.push(this.masterPlaylistLoader_);var a=[];!r&&"audio"!==e||a.push("AUDIO"),!r&&"subtitle"!==e||(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){(e=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader)&&i.push(e)})),["main","audio","subtitle"].forEach((function(t){var r=n[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||i.push(r)})),i.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=ao(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:rl.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var i,r,a=this.masterPlaylistLoader_.master,s=rl.Playlist.seekable(t,n,rl.Playlist.liveEdgeDelay(a,t));if(0!==s.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=rl.Playlist.seekable(t,n,rl.Playlist.liveEdgeDelay(a,t))).length)return}this.seekable_&&this.seekable_.length&&(i=this.seekable_.end(0),r=this.seekable_.start(0)),!e||e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=qi.createTimeRanges([[(e.start(0)>s.start(0)?e:s).start(0),(e.end(0)<s.end(0)?e:s).end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===i&&this.seekable_.start(0)===r||(this.logger_("seekable updated ["+oo(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();return t.length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))):void 0}e=this.tech_.buffered(),t=rl.Playlist.duration(this.masterPlaylistLoader_.media()),0<e.length&&(t=Math.max(t,e.end(e.length-1))),this.mediaSource.duration!==t&&this.sourceUpdater_.setDuration(t)},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n,i=e.mediaTypes_[t].groups;for(n in i)i[n].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_();return e=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_(),t&&e},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=lu(this.master(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=n.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(i.video+=","+(n.audio||t.main.audioCodec||vr)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(i.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||vr,t.audio.isFmp4=(t.main.hasAudio&&!t.main.isMuxed?t.main:t.audio).isFmp4),i.audio||i.video){var a,s,o={};if(["video","audio"].forEach((function(e){var n;i.hasOwnProperty(e)&&!(t[e].isFmp4?rr:ar)(n=i[e])&&(n=t[e].isFmp4?"browser":"muxer",o[n]=o[n]||[],o[n].push(i[e]),"audio"===e&&(a=n))})),r&&a&&this.media().attributes.AUDIO&&(s=this.media().attributes.AUDIO,this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===s&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+s+" as "+a+' does not support codec(s): "'+i.audio+'"')),!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var n=(tr(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(tr(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&u.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+i[t]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}r=Object.keys(o).reduce((function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+o[t].join(",")+'"'}),"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:r,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){var e;"open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_()||(e=this.getCodecsOrExclude_())&&(this.sourceUpdater_.createSourceBuffers(e),e=[e.video,e.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(e))},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(i){var r,a=t[i];-1===n.indexOf(a.id)&&(n.push(a.id),r=[],!(i=lu(e.master,a)).audio||ar(i.audio)||rr(i.audio)||r.push("audio codec "+i.audio),!i.video||ar(i.video)||rr(i.video)||r.push("video codec "+i.video),i.text&&"stpp.ttml.im1t"===i.text&&r.push("text codec "+i.text),r.length&&(a.excludeUntil=1/0,e.logger_("excluding "+a.id+" for unsupported: "+r.join(", "))))}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],i=this.master().playlists,r=uu(e=ou(tr(e))),a=e.video&&tr(e.video)[0]||null,s=e.audio&&tr(e.audio)[0]||null;Object.keys(i).forEach((function(e){var o,u,l=i[e];-1===n.indexOf(l.id)&&l.excludeUntil!==1/0&&(n.push(l.id),o=[],e=uu(u=lu(t.masterPlaylistLoader_.master,l)),(u.audio||u.video)&&(e!==r&&o.push('codec count "'+e+'" !== "'+r+'"'),t.sourceUpdater_.canChangeType()||(e=u.video&&tr(u.video)[0]||null,u=u.audio&&tr(u.audio)[0]||null,e&&a&&e.type.toLowerCase()!==a.type.toLowerCase()&&o.push('video codec "'+e.type+'" !== "'+a.type+'"'),u&&s&&u.type.toLowerCase()!==s.type.toLowerCase()&&o.push('audio codec "'+u.type+'" !== "'+s.type+'"')),o.length&&(l.excludeUntil=1/0,t.logger_("blacklisting "+l.id+": "+o.join(" && ")))))}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var i=n,r=0;r<e.segments.length;r++){var a,s,o,u=e.segments[r];if(o=o||function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null}(t,i+u.duration/2)){if("cueIn"in u){o.endTime=i,o.adEndTime=i,i+=u.duration,o=null;continue}if(i<o.endTime){i+=u.duration;continue}o.endTime+=u.duration}else"cueOut"in u&&((o=new window.VTTCue(i,i+u.duration,u.cueOut)).adStartTime=i,o.adEndTime=i+parseFloat(u.cueOut),t.addCue(o)),"cueOutCont"in u&&(a=(s=u.cueOutCont.split("/").map(parseFloat))[0],s=s[1],(o=new window.VTTCue(i,i+u.duration,"")).adStartTime=i-a,o.adEndTime=o.adStartTime+s,t.addCue(o));i+=u.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=Mu.GOAL_BUFFER_LENGTH,n=Mu.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Mu.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=Mu.BUFFER_LOW_WATER_LINE,n=Mu.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Mu.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,Mu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?r:i)},n.bufferHighWaterLine=function(){return Mu.BUFFER_HIGH_WATER_LINE},t}(qi.EventTarget),Pl=["seeking","seeked","pause","playing","error"],Il=function(){function e(e){var t=this;function n(){return t.monitorCurrentTime_()}function i(){return t.monitorCurrentTime_()}function r(){return t.techWaiting_()}function a(){return t.cancelTimer_()}this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=io("PlaybackWatcher"),this.logger_("initialize");var s=this.masterPlaylistController_,o=["main","subtitle","audio"],u={};function l(e){["main","audio"].forEach((function(n){s[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))}o.forEach((function(e){u[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",u[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",u[e].reset),t.tech_.on(["seeked","seeking"],u[e].reset)})),this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),l("off"))},this.clearSeekingAppendCheck_=function(){return l("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),l("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(Pl,a),this.tech_.on("canplay",i),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",r),t.tech_.off(Pl,a),t.tech_.off("canplay",i),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),o.forEach((function(e){s[e+"SegmentLoader_"].off("appendsdone",u[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",u[e].reset),t.tech_.off(["seeked","seeking"],u[e].reset)})),t.checkCurrentTimeTimeout_&&window.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];0<this[e+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],i);this[e+"Buffered_"]=i,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:uo(i)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),void 0!==(e=this.beforeSeekableWindow_(t,n)?(a=t.start(0))+(a===t.end(0)?0:.1):e))return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+oo(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var i=this.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered(),a=i.audioBuffer?i.audioBuffered():null,s=(t=i.videoBuffer?i.videoBuffered():null,(i=this.media()).partTargetDuration||2*(i.targetDuration-Eu)),o=[a,t],u=0;u<o.length;u++)if(o[u]&&co(o[u],n)<s)return!1;return 0!==(r=so(r,n)).length&&(e=r.start(0)+.1,this.logger_("Buffered region starts ("+r.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){var e,t;this.techWaiting_()||(e=this.tech_.currentTime(),(t=ao(t=this.tech_.buffered(),e)).length&&e+3<=t.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})))},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}return e=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,n=this.tech_.buffered(),this.videoUnderflow_({audioBuffered:e.audioBuffered(),videoBuffered:e.videoBuffered(),currentTime:t})?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<(e=so(n,t)).length&&(n=e.start(0)-t,this.logger_("Stopped at "+t+", setting timer for "+n+", seeking to "+e.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*n,t),!0)},t.afterSeekableWindow_=function(e,t,n,i){if(void 0===i&&(i=!1),!e.length)return!1;var r=e.end(e.length-1)+.1;return(r=!n.endList&&i?e.end(e.length-1)+3*n.targetDuration:r)<t},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t,n,i=e.videoBuffered,r=e.audioBuffered,a=e.currentTime;if(i)return i.length&&r.length?(n=ao(i,a-3),e=ao(i,a),(r=ao(r,a)).length&&!e.length&&n.length&&(t={start:n.end(0),end:r.end(0)})):so(i,a).length||(t=this.gapFromVideoUnderflow_(i,a)),!!t&&(this.logger_("Encountered a gap in video from "+t.start+" to "+t.end+". Seeking to current time "+a),!0)},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime();t=so(t,n),this.cancelTimer_(),0!==t.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",t.start(0)),this.tech_.setCurrentTime(t.start(0)+Eu),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return qi.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return qi.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&2<t-r)return{start:r,end:a}}return null},e}(),Dl={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Ll={PlaylistLoader:Iu,Playlist:Cu,utils:Vt,STANDARD_PLAYLIST_SELECTOR:Ki,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Cu.isEnabled);return hu(t,pu),t.filter((function(t){return!!lu(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:Ki,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||1<e)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&window.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),0<this.systemBandwidth&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),fu(this.playlists.master,t,parseInt(du(this.tech_.el(),"width"),10)*i,parseInt(du(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:pu,comparePlaylistResolution:function(e,t){var n,i;return(n=(n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width?e.attributes.RESOLUTION.width:n)||window.Number.MAX_VALUE)===(i=(i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width?t.attributes.RESOLUTION.width:i)||window.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:jo()};function Ol(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})}Object.keys(Mu).forEach((function(e){Object.defineProperty(Ll,e,{get:function(){return qi.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),Mu[e]},set:function(t){qi.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?qi.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):Mu[e]=t}})}));var xl="videojs-vhs";function Ml(){if(!window.localStorage)return null;var e=window.localStorage.getItem(xl);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}Ll.canPlaySource=function(){return qi.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Ll.supportsNativeHls=function(){if(!document||!document.createElement)return!1;var e=document.createElement("video");return!!qi.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Ll.supportsNativeDash=!!(document&&document.createElement&&qi.getTech("Html5").isSupported())&&/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")),Ll.supportsTypeNatively=function(e){return"hls"===e?Ll.supportsNativeHls:"dash"===e&&Ll.supportsNativeDash},Ll.isSupported=function(){return qi.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Rl=function(e){function t(t,n,i){var r=e.call(this,n,qi.mergeOptions(i.hls,i.vhs))||this;if(i.hls&&Object.keys(i.hls).length&&qi.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof i.initialBandwidth&&(r.options_.bandwidth=i.initialBandwidth),r.logger_=io("VhsHandler"),n.options_&&n.options_.playerId&&((i=qi(n.options_.playerId)).hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return qi.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),ht(r)},configurable:!0}),i.hasOwnProperty("vhs")||Object.defineProperty(i,"vhs",{get:function(){return qi.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),ht(r)},configurable:!0}),i.hasOwnProperty("dash")||Object.defineProperty(i,"dash",{get:function(){return qi.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),ht(r)},configurable:!0}),r.player_=i),r.tech_=n,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t&&t.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}pt(t,e);var n=t.prototype;return n.setOptions_=function(){var e,t=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((e=Ml())&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Mu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Mu.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;e&&(this.setOptions_(),this.options_.src=0===(e=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e,this.options_.tech=this.tech_,this.options_.externVhs=Ll,this.options_.sourceType=sr(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&qi.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Al(this.options_),t=qi.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new Il(t),this.masterPlaylistController_.on("error",(function(){var e=qi.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=s(t)||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)})),t=this.options_.experimentalBufferBasedABR?Ll.movingAverageBandwidthSelector(.55):Ll.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=(this.selectPlaylist||t).bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ll.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;return this.options_.useNetworkInformationApi&&t?1e7<=(t=1e3*t.downlink*1e3)&&1e7<=e?Math.max(e,t):t:e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=0<this.throughput?1/this.throughput:0;return Math.floor(1/(e+t))},set:function(){qi.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return uo(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return uo(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(window.localStorage){var t=(t=Ml())?qi.mergeOptions(t,e):e;try{window.localStorage.setItem(xl,JSON.stringify(t))}catch(e){return}}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t;return(t=Po(t=e.masterPlaylistController_.master())?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists)?t.filter((function(e){return!So(e)})).map((function(t,n){return new nl(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia;if(e=e.mainPlaylists,!t.eme.initializeMediaKeys)return Promise.resolve();e=e=i?e.concat([i]):e,r=Object.keys(n),e=e.reduce((function(e,t){if(!t.contentProtection)return e;var n=r.reduce((function(e,n){var i=t.contentProtection[n];return i&&i.pssh&&(e[n]={pssh:i.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[]);var r,a=[],s=[];return e.forEach((function(e){s.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),a.push(new Promise((function(n,i){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?i(e):n()}))})))})),Promise.race([Promise.all(a),Promise.race(s)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;t=function(e){var t=e.player;return!(!(e=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=ou(tr(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r,a=ir(i.video),s=ir(i.audio),o={};for(r in e)o[r]={},s&&(o[r].audioContentType=s),a&&(o[r].videoContentType=a),t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(o[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(o[r].url=e[r]);return qi.mergeOptions(e,o)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=e)&&!t.eme&&(qi.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()}),this.player_.tech_.on("keystatuschange",(function(t){"output-restricted"===t.status&&e.masterPlaylistController_.blacklistCurrentPlaylist({playlist:e.masterPlaylistController_.media(),message:"DRM keystatus changed to "+t.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==qi.browser.IE_VERSION&&t?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=qi.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),Ol(t,n.playlists)})),this.playlists.on("mediachange",(function(){Ol(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":"2.14.2","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return ml.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&window.URL.revokeObjectURL&&(window.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n;if(!(n=e.callback))throw new Error("getProgramTime: callback must be provided");return t&&void 0!==i?(e=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,i=0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(i<e){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(i,t))?"estimate"===e.type?n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:e.estimatedStart}):(t={mediaSeconds:i},(e=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds;return n=e-(t.videoTimingInfo.transmuxedPresentationStart+n),new Date(t.dateTimeObject.getTime()+1e3*n)}(i,e.segment))&&(t.programDateTime=e.toISOString()),n(null,t)):n({message:"valid programTime was not found"}):n({message:"getProgramTime: playlist and time must be provided"})}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=2),zo({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(qi.getComponent("Component")),Nl={name:"videojs-http-streaming",VERSION:"2.14.2",canHandleSource:function(e,t){return t=qi.mergeOptions(qi.options,t=void 0===t?{}:t),Nl.canPlayType(e.type,t)},handleSource:function(e,t,n){return n=qi.mergeOptions(qi.options,n=void 0===n?{}:n),t.vhs=new Rl(e,t,n),qi.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return qi.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=jo(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var n=qi.mergeOptions(qi.options,t=void 0===t?{}:t);return t=void 0===(t=(t=void 0===(t=n.vhs)?{}:t).overrideNative)?!qi.browser.IS_ANY_SAFARI:t,n=void 0!==(n=(n=void 0===(n=n.hls)?{}:n).overrideNative)&&n,(e=sr(e))&&(!Ll.supportsTypeNatively(e)||n||t)?"maybe":""}};return rr("avc1.4d400d,mp4a.40.2")&&qi.getTech("Html5").registerSourceHandler(Nl,0),qi.VhsHandler=Rl,Object.defineProperty(qi,"HlsHandler",{get:function(){return qi.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Rl},configurable:!0}),qi.VhsSourceHandler=Nl,Object.defineProperty(qi,"HlsSourceHandler",{get:function(){return qi.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Nl},configurable:!0}),qi.Vhs=Ll,Object.defineProperty(qi,"Hls",{get:function(){return qi.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ll},configurable:!0}),qi.use||(qi.registerComponent("Hls",Ll),qi.registerComponent("Vhs",Ll)),qi.options.vhs=qi.options.vhs||{},qi.options.hls=qi.options.hls||{},qi.getPlugin&&qi.getPlugin("reloadSourceOnError")||(qi.registerPlugin||qi.plugin)("reloadSourceOnError",(function(e){il(this,e)})),qi},"object"==s(t)?e.exports=a():void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n(817)}();
//# sourceMappingURL=page-editorial.js.map
;/*})'"*/
;/*})'"*/
!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)}((function(i){"use strict";var e=window.Slick||{};(e=function(){var e=0;return function(t,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(t),appendDots:i(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(i,e){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(e+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!1,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.hidden="hidden",n.paused=!1,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(t),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,s=i(t).data("slick")||{},n.options=i.extend({},n.defaults,s,o),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.instanceUid=e++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0),n.checkResponsive(!0)}}()).prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if("boolean"==typeof t)o=t,t=null;else if(0>t||t>=s.slideCount)return!1;s.unload(),"number"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):!0===o?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each((function(e,t){i(t).attr("data-slick-index",e)})),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),!0===s.options.rtl&&!1===s.options.vertical&&(e=-e),!1===s.transformsEnabled?!1===s.options.vertical?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):!1===s.cssTransitions?(!0===s.options.rtl&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),!1===s.options.vertical?(o[s.animType]="translate("+i+"px, 0px)",s.$slideTrack.css(o)):(o[s.animType]="translate(0px,"+i+"px)",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),!1===s.options.vertical?o[s.animType]="translate3d("+e+"px, 0px, 0px)":o[s.animType]="translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(o),t&&setTimeout((function(){s.disableTransition(),t.call()}),s.options.speed))},e.prototype.asNavFor=function(e){var t=this.options.asNavFor;t&&null!==t&&(t=i(t).not(this.$slider)),null!==t&&"object"==typeof t&&t.each((function(){var t=i(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)}))},e.prototype.applyTransition=function(i){var e=this,t={};!1===e.options.fade?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer),i.slideCount>i.options.slidesToShow&&!0!==i.paused&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this;!1===i.options.infinite?1===i.direction?(i.currentSlide+1===i.slideCount-1&&(i.direction=0),i.slideHandler(i.currentSlide+i.options.slidesToScroll)):(i.currentSlide-1==0&&(i.direction=1),i.slideHandler(i.currentSlide-i.options.slidesToScroll)):i.slideHandler(i.currentSlide+i.options.slidesToScroll)},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=i(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=i(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,t,o=this;if(!0===o.options.dots&&o.slideCount>o.options.slidesToShow){for(t='<ul class="'+o.options.dotsClass+'">',e=0;e<=o.getDotCount();e+=1)t+="<li>"+o.options.customPaging.call(this,o,e)+"</li>";t+="</ul>",o.$dots=i(t).appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each((function(e,t){i(t).attr("data-slick-index",e).data("originalStyling",i(t).attr("style")||"")})),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?i('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),(!0===e.options.centerMode||!0===e.options.swipeToSlide)&&(e.options.slidesToScroll=1),i("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var i,e,t,o,s,n,l,r=this;if(o=document.createDocumentFragment(),n=r.$slider.children(),r.options.rows>1){for(l=r.options.slidesPerRow*r.options.rows,s=Math.ceil(n.length/l),i=0;s>i;i++){var a=document.createElement("div");for(e=0;e<r.options.rows;e++){var d=document.createElement("div");for(t=0;t<r.options.slidesPerRow;t++){var c=i*l+(e*r.options.slidesPerRow+t);n.get(c)&&d.appendChild(n.get(c))}a.appendChild(d)}o.appendChild(a)}r.$slider.html(o),r.$slider.children().children().children().css({width:100/r.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,l=this,r=!1,a=l.$slider.width(),d=window.innerWidth||i(window).width();if("window"===l.respondTo?n=d:"slider"===l.respondTo?n=a:"min"===l.respondTo&&(n=Math.min(d,a)),l.options.responsive&&l.options.responsive.length&&null!==l.options.responsive){for(o in s=null,l.breakpoints)l.breakpoints.hasOwnProperty(o)&&(!1===l.originalSettings.mobileFirst?n<l.breakpoints[o]&&(s=l.breakpoints[o]):n>l.breakpoints[o]&&(s=l.breakpoints[o]));null!==s?null!==l.activeBreakpoint?(s!==l.activeBreakpoint||t)&&(l.activeBreakpoint=s,"unslick"===l.breakpointSettings[s]?l.unslick(s):(l.options=i.extend({},l.originalSettings,l.breakpointSettings[s]),!0===e&&(l.currentSlide=l.options.initialSlide),l.refresh(e)),r=s):(l.activeBreakpoint=s,"unslick"===l.breakpointSettings[s]?l.unslick(s):(l.options=i.extend({},l.originalSettings,l.breakpointSettings[s]),!0===e&&(l.currentSlide=l.options.initialSlide),l.refresh(e)),r=s):null!==l.activeBreakpoint&&(l.activeBreakpoint=null,l.options=l.originalSettings,!0===e&&(l.currentSlide=l.options.initialSlide),l.refresh(e),r=s),e||!1===r||l.$slider.trigger("breakpoint",[l,r])}},e.prototype.changeSlide=function(e,t){var o,s,n=this,l=i(e.target);switch(l.is("a")&&e.preventDefault(),l.is("li")||(l=l.closest("li")),o=n.slideCount%n.options.slidesToScroll!=0?0:(n.slideCount-n.currentSlide)%n.options.slidesToScroll,e.data.message){case"previous":s=0===o?n.options.slidesToScroll:n.options.slidesToShow-o,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide-s,!1,t);break;case"next":s=0===o?n.options.slidesToScroll:o,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide+s,!1,t);break;case"index":var r=0===e.data.index?0:e.data.index||l.index()*n.options.slidesToScroll;n.slideHandler(n.checkNavigable(r),!1,t),l.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(i){var e,t;if(t=0,i>(e=this.getNavigableIndexes())[e.length-1])i=e[e.length-1];else for(var o in e){if(i<e[o]){i=t;break}t=e[o]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i("li",e.$dots).off("click.slick",e.changeSlide),!0===e.options.pauseOnDotsHover&&!0===e.options.autoplay&&i("li",e.$dots).off("mouseenter.slick",i.proxy(e.setPaused,e,!0)).off("mouseleave.slick",i.proxy(e.setPaused,e,!1))),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide)),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.$list.off("mouseenter.slick",i.proxy(e.setPaused,e,!0)),e.$list.off("mouseleave.slick",i.proxy(e.setPaused,e,!1)),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().off("click.slick",e.selectHandler),i(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),i(window).off("resize.slick.slick-"+e.instanceUid,e.resize),i("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),i(window).off("load.slick.slick-"+e.instanceUid,e.setPosition),i(document).off("ready.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>1&&((i=e.$slides.children().children()).removeAttr("style"),e.$slider.html(i))},e.prototype.clickHandler=function(i){!1===this.shouldClick&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each((function(){i(this).attr("style",i(this).data("originalStyling"))})),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;!1===t.cssTransitions?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout((function(){t.disableTransition(i),e.call()}),t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;!1===e.cssTransitions?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){return this.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(!0===i.options.infinite)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(!0===i.options.centerMode)o=i.slideCount;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;return o-1},e.prototype.getLeft=function(i){var e,t,o,s=this,n=0;return s.slideOffset=0,t=s.$slides.first().outerHeight(!0),!0===s.options.infinite?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideWidth*s.options.slidesToShow*-1,n=t*s.options.slidesToShow*-1),s.slideCount%s.options.slidesToScroll!=0&&i+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(i>s.slideCount?(s.slideOffset=(s.options.slidesToShow-(i-s.slideCount))*s.slideWidth*-1,n=(s.options.slidesToShow-(i-s.slideCount))*t*-1):(s.slideOffset=s.slideCount%s.options.slidesToScroll*s.slideWidth*-1,n=s.slideCount%s.options.slidesToScroll*t*-1))):i+s.options.slidesToShow>s.slideCount&&(s.slideOffset=(i+s.options.slidesToShow-s.slideCount)*s.slideWidth,n=(i+s.options.slidesToShow-s.slideCount)*t),s.slideCount<=s.options.slidesToShow&&(s.slideOffset=0,n=0),!0===s.options.centerMode&&!0===s.options.infinite?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:!0===s.options.centerMode&&(s.slideOffset=0,s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),e=!1===s.options.vertical?i*s.slideWidth*-1+s.slideOffset:i*t*-1+n,!0===s.options.variableWidth&&(o=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(i):s.$slideTrack.children(".slick-slide").eq(i+s.options.slidesToShow),e=!0===s.options.rtl?o[0]?-1*(s.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,!0===s.options.centerMode&&(o=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(i):s.$slideTrack.children(".slick-slide").eq(i+s.options.slidesToShow+1),e=!0===s.options.rtl?o[0]?-1*(s.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,e+=(s.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){return this.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(!1===e.options.infinite?i=e.slideCount:(t=-1*e.options.slidesToScroll,o=-1*e.options.slidesToScroll,i=2*e.slideCount);i>t;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o=this;return t=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each((function(s,n){return n.offsetLeft-t+i(n).outerWidth()/2>-1*o.swipeLeft?(e=n,!1):void 0})),Math.abs(i(e).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){this.changeSlide({data:{message:"index",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass("slick-initialized")||(i(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),e&&t.$slider.trigger("init",[t]),!0===t.options.accessibility&&t.initADA()},e.prototype.initArrowEvents=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.on("click.slick",{message:"next"},i.changeSlide))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&i("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&!0===e.options.autoplay&&i("li",e.$dots).on("mouseenter.slick",i.proxy(e.setPaused,e,!0)).on("mouseleave.slick",i.proxy(e.setPaused,e,!1))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),e.$list.on("mouseenter.slick",i.proxy(e.setPaused,e,!0)),e.$list.on("mouseleave.slick",i.proxy(e.setPaused,e,!1)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),i(window).on("orientationchange.slick.slick-"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on("resize.slick.slick-"+e.instanceUid,i.proxy(e.resize,e)),i("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),i(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),i(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.initUI=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.show(),!0===i.options.autoplay&&i.autoPlay()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===i.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:"previous"}}):39===i.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:"next"}}))},e.prototype.lazyLoad=function(){function e(e){i("img[data-lazy]",e).each((function(){var e=i(this),t=i(this).attr("data-lazy"),o=document.createElement("img");o.onload=function(){e.animate({opacity:0},100,(function(){e.attr("src",t).animate({opacity:1},200,(function(){e.removeAttr("data-lazy").removeClass("slick-loading")}))}))},o.src=t}))}var t,o,s=this;!0===s.options.centerMode?!0===s.options.infinite?o=(t=s.currentSlide+(s.options.slidesToShow/2+1))+s.options.slidesToShow+2:(t=Math.max(0,s.currentSlide-(s.options.slidesToShow/2+1)),o=s.options.slidesToShow/2+1+2+s.currentSlide):(o=(t=s.options.infinite?s.options.slidesToShow+s.currentSlide:s.currentSlide)+s.options.slidesToShow,!0===s.options.fade&&(t>0&&t--,o<=s.slideCount&&o++)),e(s.$slider.find(".slick-slide").slice(t,o)),s.slideCount<=s.options.slidesToShow?e(s.$slider.find(".slick-slide")):s.currentSlide>=s.slideCount-s.options.slidesToShow?e(s.$slider.find(".slick-cloned").slice(0,s.options.slidesToShow)):0===s.currentSlide&&e(s.$slider.find(".slick-cloned").slice(-1*s.options.slidesToShow))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){this.paused=!1,this.autoPlay()},e.prototype.postSlide=function(i){var e=this;e.$slider.trigger("afterChange",[e,i]),e.animating=!1,e.setPosition(),e.swipeLeft=null,!0===e.options.autoplay&&!1===e.paused&&e.autoPlay(),!0===e.options.accessibility&&e.initADA()},e.prototype.prev=e.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(){var e,t=this;i("img[data-lazy]",t.$slider).length>0&&((e=i("img[data-lazy]",t.$slider).first()).attr("src",null),e.attr("src",e.attr("data-lazy")).removeClass("slick-loading").load((function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad(),!0===t.options.adaptiveHeight&&t.setPosition()})).error((function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad()})))},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,s.options.infinite||(s.slideCount<=s.options.slidesToShow?s.currentSlide=0:s.currentSlide>o&&(s.currentSlide=o)),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:"index",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if("array"===i.type(n)&&n.length){for(e in s.respondTo=s.options.respondTo||"window",n)if(o=s.breakpoints.length-1,t=n[e].breakpoint,n.hasOwnProperty(e)){for(;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort((function(i,e){return s.options.mobileFirst?i-e:e-i}))}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),e.$slider.trigger("reInit",[e]),!0===e.options.autoplay&&e.focusHandler()},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout((function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()}),50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;return i="boolean"==typeof i?!0===(e=i)?0:o.slideCount-1:!0===e?--i:i,!(o.slideCount<1||0>i||i>o.slideCount-1)&&(o.unload(),!0===t?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,void o.reinit())},e.prototype.setCSS=function(i){var e,t,o=this,s={};!0===o.options.rtl&&(i=-i),e="left"==o.positionProp?Math.ceil(i)+"px":"0px",t="top"==o.positionProp?Math.ceil(i)+"px":"0px",s[o.positionProp]=i,!1===o.transformsEnabled?o.$slideTrack.css(s):(s={},!1===o.cssTransitions?(s[o.animType]="translate("+e+", "+t+")",o.$slideTrack.css(s)):(s[o.animType]="translate3d("+e+", "+t+", 0px)",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;!1===i.options.vertical?!0===i.options.centerMode&&i.$list.css({padding:"0px "+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),!0===i.options.centerMode&&i.$list.css({padding:i.options.centerPadding+" 0px"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),!1===i.options.vertical&&!1===i.options.variableWidth?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(".slick-slide").length))):!0===i.options.variableWidth?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(".slick-slide").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();!1===i.options.variableWidth&&i.$slideTrack.children(".slick-slide").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each((function(o,s){e=t.slideWidth*o*-1,!0===t.options.rtl?i(s).css({position:"relative",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:"relative",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})})),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(e,t,o){var s,n,l=this;if("responsive"===e&&"array"===i.type(t))for(n in t)if("array"!==i.type(l.options.responsive))l.options.responsive=[t[n]];else{for(s=l.options.responsive.length-1;s>=0;)l.options.responsive[s].breakpoint===t[n].breakpoint&&l.options.responsive.splice(s,1),s--;l.options.responsive.push(t[n])}else l.options[e]=t;!0===o&&(l.unload(),l.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),!1===i.options.fade?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger("setPosition",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=!0===i.options.vertical?"top":"left","top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),(void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.msTransition)&&!0===i.options.useCSS&&(i.cssTransitions=!0),i.options.fade&&("number"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&!1!==i.animType&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&!1!==i.animType},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;t=n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),n.$slides.eq(i).addClass("slick-current"),!0===n.options.centerMode?(e=Math.floor(n.options.slidesToShow/2),!0===n.options.infinite&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e,i+e+1).addClass("slick-active").attr("aria-hidden","false"):(o=n.options.slidesToShow+i,t.slice(o-e+1,o+e+2).addClass("slick-active").attr("aria-hidden","false")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass("slick-center"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(i).addClass("slick-center")):i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):t.length<=n.options.slidesToShow?t.addClass("slick-active").attr("aria-hidden","false"):(s=n.slideCount%n.options.slidesToShow,o=!0===n.options.infinite?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass("slick-active").attr("aria-hidden","false"):t.slice(o,o+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===n.options.lazyLoad&&n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(!0===s.options.fade&&(s.options.centerMode=!1),!0===s.options.infinite&&!1===s.options.fade&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=!0===s.options.centerMode?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;o>e;e+=1)t=e,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each((function(){i(this).attr("id","")}))}},e.prototype.setPaused=function(i){var e=this;!0===e.options.autoplay&&!0===e.options.pauseOnHover&&(e.paused=i,i?e.autoPlayClear():e.autoPlay())},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(".slick-slide")?i(e.target):i(e.target).parents(".slick-slide"),s=parseInt(o.attr("data-slick-index"));return s||(s=0),t.slideCount<=t.options.slidesToShow?(t.setSlideClasses(s),void t.asNavFor(s)):void t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,l,r=null,a=this;return e=e||!1,!0===a.animating&&!0===a.options.waitForAnimate||!0===a.options.fade&&a.currentSlide===i||a.slideCount<=a.options.slidesToShow?void 0:(!1===e&&a.asNavFor(i),o=i,r=a.getLeft(o),l=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?l:a.swipeLeft,!1===a.options.infinite&&!1===a.options.centerMode&&(0>i||i>a.getDotCount()*a.options.slidesToScroll)||!1===a.options.infinite&&!0===a.options.centerMode&&(0>i||i>a.slideCount-a.options.slidesToScroll)?void(!1===a.options.fade&&(o=a.currentSlide,!0!==t?a.animateSlide(l,(function(){a.postSlide(o)})):a.postSlide(o))):(!0===a.options.autoplay&&clearInterval(a.autoPlayTimer),s=0>o?a.slideCount%a.options.slidesToScroll!=0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!=0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows(),!0===a.options.fade?(!0!==t?(a.fadeSlideOut(n),a.fadeSlide(s,(function(){a.postSlide(s)}))):a.postSlide(s),void a.animateHeight()):void(!0!==t?a.animateSlide(r,(function(){a.postSlide(s)})):a.postSlide(s))))},e.prototype.startLoad=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),0>(o=Math.round(180*t/Math.PI))&&(o=360-Math.abs(o)),45>=o&&o>=0||360>=o&&o>=315?!1===s.options.rtl?"left":"right":o>=135&&225>=o?!1===s.options.rtl?"right":"left":!0===s.options.verticalSwiping?o>=35&&135>=o?"left":"right":"vertical"},e.prototype.swipeEnd=function(i){var e,t=this;if(t.dragging=!1,t.shouldClick=!(t.touchObject.swipeLength>10),void 0===t.touchObject.curX)return!1;if(!0===t.touchObject.edgeHit&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==i.type.indexOf("mouse")))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),!0===l.options.verticalSwiping&&(l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2)))),"vertical"!==(t=l.swipeDirection())?(void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&i.preventDefault(),s=(!1===l.options.rtl?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),!0===l.options.verticalSwiping&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,!1===l.options.infinite&&(0===l.currentSlide&&"right"===t||l.currentSlide>=l.getDotCount()&&"left"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),!1===l.options.vertical?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,!0===l.options.verticalSwiping&&(l.swipeLeft=e+o*s),!0!==l.options.fade&&!1!==l.options.touchMove&&(!0===l.animating?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))):void 0)},e.prototype.swipeStart=function(i){var e,t=this;return 1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,void(t.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger("unslick",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i=this;Math.floor(i.options.slidesToShow/2),!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&!i.options.infinite&&(i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===i.currentSlide?(i.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(i.currentSlide>=i.slideCount-i.options.slidesToShow&&!1===i.options.centerMode||i.currentSlide>=i.slideCount-1&&!0===i.options.centerMode)&&(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},e.prototype.visibility=function(){var i=this;document[i.hidden]?(i.paused=!0,i.autoPlayClear()):!0===i.options.autoplay&&(i.paused=!1,i.autoPlay())},e.prototype.initADA=function(){var e=this;e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),e.$slideTrack.attr("role","listbox"),e.$slides.not(e.$slideTrack.find(".slick-cloned")).each((function(t){i(this).attr({role:"option","aria-describedby":"slick-slide"+e.instanceUid+t})})),null!==e.$dots&&e.$dots.attr("role","tablist").find("li").each((function(t){i(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+e.instanceUid+t,id:"slick-slide"+e.instanceUid+t})})).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),e.activateADA()},e.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.focusHandler=function(){var e=this;e.$slider.on("focus.slick blur.slick","*",(function(t){t.stopImmediatePropagation();var o=i(this);setTimeout((function(){e.isPlay&&(o.is(":focus")?(e.autoPlayClear(),e.paused=!0):(e.paused=!1,e.autoPlay()))}),0)}))},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),l=o.length;for(i=0;l>i;i++)if("object"==typeof s||void 0===s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),void 0!==t)return t;return o}}));
;/*})'"*/
;/*})'"*/
/*! For license information please see app.js.LICENSE.txt */
!function(){var e={2097:function(){var e=jQuery(document),t=jQuery("body");e.on("mousemove",(function(){t.removeClass("keyboard-nav")})),e.on("keydown",(function(e){"Tab"!==e.key&&"ArrowDown"!==e.key&&"ArrowUp"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||t.addClass("keyboard-nav")}))},4342:function(){jQuery.fn.pwdMeter=function(e){return e=jQuery.extend({minLength:6,displayGeneratePassword:!1,generatePassText:"Password Generator",generatePassClass:"GeneratePasswordLink",randomPassLength:13,passwordBox:this},e),this.each((function(){var t;jQuery(this).keyup((function(){t=jQuery(".pwdMeter"),function(){var r=0,i=jQuery(e.passwordBox).val();switch(i.length>0&&i.length<e.minLength&&(r=1),i.length>=e.minLength&&r++,i.match(/[a-z]/)&&i.match(/[A-Z]/)&&r++,i.match(/\d+/)&&r++,i.match(/.[!,@#$%^&*?_~\-()]/)&&r++,i.length>12&&r++,t.attr("class","pwdMeter"),t.addClass("neutral"),r){case 1:case 2:t.addClass("weak");break;case 3:t.addClass("medium");break;case 4:case 5:t.addClass("strong");break;default:t.addClass("neutral")}}()}))}))}},1696:function(){!function(e){e.fn.serializeObject=function(){"use strict";var t={};return e.each(this.serializeArray(),(function(r,i){var n=t[i.name];null!=n?e.isArray(n)?n.push(i.value):t[i.name]=[n,i.value]:t[i.name]=i.value})),t}}(jQuery)},1154:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function e(t,r,i){function n(s,o){if(!r[s]){if(!t[s]){if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return n(t[s][1][e]||e)}),u,u.exports,e,t,r,i)}return r[s].exports}for(var a=void 0,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,r){e(276),e(212),e(214),e(213),e(216),e(218),e(223),e(217),e(215),e(225),e(224),e(220),e(221),e(219),e(211),e(222),e(226),e(227),e(178),e(180),e(179),e(229),e(228),e(199),e(209),e(210),e(200),e(201),e(202),e(203),e(204),e(205),e(206),e(207),e(208),e(182),e(183),e(184),e(185),e(186),e(187),e(188),e(189),e(190),e(191),e(192),e(193),e(194),e(195),e(196),e(197),e(198),e(263),e(268),e(275),e(266),e(258),e(259),e(264),e(269),e(271),e(254),e(255),e(256),e(257),e(260),e(261),e(262),e(265),e(267),e(270),e(272),e(273),e(274),e(173),e(175),e(174),e(177),e(176),e(161),e(159),e(166),e(163),e(169),e(171),e(158),e(165),e(155),e(170),e(153),e(168),e(167),e(160),e(164),e(152),e(154),e(157),e(156),e(172),e(162),e(245),e(246),e(252),e(247),e(248),e(249),e(250),e(251),e(230),e(181),e(253),e(288),e(289),e(277),e(278),e(283),e(286),e(287),e(281),e(284),e(282),e(285),e(279),e(280),e(231),e(232),e(233),e(234),e(235),e(238),e(236),e(237),e(239),e(240),e(241),e(242),e(244),e(243),t.exports=e(50)},{152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,50:50}],2:[function(e,t,r){e(290),t.exports=e(50).Array.flatMap},{290:290,50:50}],3:[function(e,t,r){e(291),t.exports=e(50).Array.includes},{291:291,50:50}],4:[function(e,t,r){e(292),t.exports=e(50).Object.entries},{292:292,50:50}],5:[function(e,t,r){e(293),t.exports=e(50).Object.getOwnPropertyDescriptors},{293:293,50:50}],6:[function(e,t,r){e(294),t.exports=e(50).Object.values},{294:294,50:50}],7:[function(e,t,r){"use strict";e(230),e(295),t.exports=e(50).Promise.finally},{230:230,295:295,50:50}],8:[function(e,t,r){e(296),t.exports=e(50).String.padEnd},{296:296,50:50}],9:[function(e,t,r){e(297),t.exports=e(50).String.padStart},{297:297,50:50}],10:[function(e,t,r){e(299),t.exports=e(50).String.trimRight},{299:299,50:50}],11:[function(e,t,r){e(298),t.exports=e(50).String.trimLeft},{298:298,50:50}],12:[function(e,t,r){e(300),t.exports=e(149).f("asyncIterator")},{149:149,300:300}],13:[function(e,t,r){e(30),t.exports=e(16).global},{16:16,30:30}],14:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],15:[function(e,t,r){var i=e(26);t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{26:26}],16:[function(e,t,r){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},{}],17:[function(e,t,r){var i=e(14);t.exports=function(e,t,r){if(i(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)}}return function(){return e.apply(t,arguments)}}},{14:14}],18:[function(e,t,r){t.exports=!e(21)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},{21:21}],19:[function(e,t,r){var i=e(26),n=e(22).document,a=i(n)&&i(n.createElement);t.exports=function(e){return a?n.createElement(e):{}}},{22:22,26:26}],20:[function(e,t,r){var i=e(22),n=e(16),a=e(17),s=e(24),o=e(23),c=function e(t,r,c){var u,l,d,h=t&e.F,p=t&e.G,f=t&e.S,m=t&e.P,g=t&e.B,y=t&e.W,v=p?n:n[r]||(n[r]={}),b=v.prototype,_=p?i:f?i[r]:(i[r]||{}).prototype;for(u in p&&(c=r),c)(l=!h&&_&&void 0!==_[u])&&o(v,u)||(d=l?_[u]:c[u],v[u]=p&&"function"!=typeof _[u]?c[u]:g&&l?a(d,i):y&&_[u]==d?function(e){var t=function(t,r,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((v.virtual||(v.virtual={}))[u]=d,t&e.R&&b&&!b[u]&&s(b,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},{16:16,17:17,22:22,23:23,24:24}],21:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],22:[function(e,t,r){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],23:[function(e,t,r){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],24:[function(e,t,r){var i=e(27),n=e(28);t.exports=e(18)?function(e,t,r){return i.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},{18:18,27:27,28:28}],25:[function(e,t,r){t.exports=!e(18)&&!e(21)((function(){return 7!=Object.defineProperty(e(19)("div"),"a",{get:function(){return 7}}).a}))},{18:18,19:19,21:21}],26:[function(t,r,i){r.exports=function(t){return"object"===e(t)?null!==t:"function"==typeof t}},{}],27:[function(e,t,r){var i=e(15),n=e(25),a=e(29),s=Object.defineProperty;r.f=e(18)?Object.defineProperty:function(e,t,r){if(i(e),t=a(t,!0),i(r),n)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{15:15,18:18,25:25,29:29}],28:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],29:[function(e,t,r){var i=e(26);t.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},{26:26}],30:[function(e,t,r){var i=e(20);i(i.G,{global:e(22)})},{20:20,22:22}],31:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{14:14}],32:[function(e,t,r){var i=e(46);t.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},{46:46}],33:[function(e,t,r){var i=e(150)("unscopables"),n=Array.prototype;null==n[i]&&e(70)(n,i,{}),t.exports=function(e){n[i][e]=!0}},{150:150,70:70}],34:[function(e,t,r){"use strict";var i=e(127)(!0);t.exports=function(e,t,r){return t+(r?i(e,t).length:1)}},{127:127}],35:[function(e,t,r){t.exports=function(e,t,r,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(r+": incorrect invocation!");return e}},{}],36:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{15:15,79:79}],37:[function(e,t,r){"use strict";var i=e(140),n=e(135),a=e(139);t.exports=[].copyWithin||function(e,t){var r=i(this),s=a(r.length),o=n(e,s),c=n(t,s),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?s:n(u,s))-c,s-o),d=1;for(c<o&&o<c+l&&(d=-1,c+=l-1,o+=l-1);l-- >0;)c in r?r[o]=r[c]:delete r[o],o+=d,c+=d;return r}},{135:135,139:139,140:140}],38:[function(e,t,r){"use strict";var i=e(140),n=e(135),a=e(139);t.exports=function(e){for(var t=i(this),r=a(t.length),s=arguments.length,o=n(s>1?arguments[1]:void 0,r),c=s>2?arguments[2]:void 0,u=void 0===c?r:n(c,r);u>o;)t[o++]=e;return t}},{135:135,139:139,140:140}],39:[function(e,t,r){var i=e(138),n=e(139),a=e(135);t.exports=function(e){return function(t,r,s){var o,c=i(t),u=n(c.length),l=a(s,u);if(e&&r!=r){for(;u>l;)if((o=c[l++])!=o)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}}},{135:135,138:138,139:139}],40:[function(e,t,r){var i=e(52),n=e(75),a=e(140),s=e(139),o=e(43);t.exports=function(e,t){var r=1==e,c=2==e,u=3==e,l=4==e,d=6==e,h=5==e||d,p=t||o;return function(t,o,f){for(var m,g,y=a(t),v=n(y),b=i(o,f,3),_=s(v.length),k=0,w=r?p(t,_):c?p(t,0):void 0;_>k;k++)if((h||k in v)&&(g=b(m=v[k],k,y),e))if(r)w[k]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return k;case 2:w.push(m)}else if(l)return!1;return d?-1:u||l?l:w}}},{139:139,140:140,43:43,52:52,75:75}],41:[function(e,t,r){var i=e(31),n=e(140),a=e(75),s=e(139);t.exports=function(e,t,r,o,c){i(t);var u=n(e),l=a(u),d=s(u.length),h=c?d-1:0,p=c?-1:1;if(r<2)for(;;){if(h in l){o=l[h],h+=p;break}if(h+=p,c?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;c?h>=0:d>h;h+=p)h in l&&(o=t(o,l[h],h,u));return o}},{139:139,140:140,31:31,75:75}],42:[function(e,t,r){var i=e(79),n=e(77),a=e(150)("species");t.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),i(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},{150:150,77:77,79:79}],43:[function(e,t,r){var i=e(42);t.exports=function(e,t){return new(i(e))(t)}},{42:42}],44:[function(e,t,r){"use strict";var i=e(31),n=e(79),a=e(74),s=[].slice,o={},c=function(e,t,r){if(!(t in o)){for(var i=[],n=0;n<t;n++)i[n]="a["+n+"]";o[t]=Function("F,a","return new F("+i.join(",")+")")}return o[t](e,r)};t.exports=Function.bind||function(e){var t=i(this),r=s.call(arguments,1),o=function i(){var n=r.concat(s.call(arguments));return this instanceof i?c(t,n.length,n):a(t,n,e)};return n(t.prototype)&&(o.prototype=t.prototype),o}},{31:31,74:74,79:79}],45:[function(e,t,r){var i=e(46),n=e(150)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),n))?r:a?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},{150:150,46:46}],46:[function(e,t,r){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],47:[function(e,t,r){"use strict";var i=e(97).f,n=e(96),a=e(115),s=e(52),o=e(35),c=e(66),u=e(83),l=e(85),d=e(121),h=e(56),p=e(92).fastKey,f=e(147),m=h?"_s":"size",g=function(e,t){var r,i=p(t);if("F"!==i)return e._i[i];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,u){var l=e((function(e,i){o(e,l,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[m]=0,null!=i&&c(i,r,e[u],e)}));return a(l.prototype,{clear:function(){for(var e=f(this,t),r=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete r[i.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=f(this,t),i=g(r,e);if(i){var n=i.n,a=i.p;delete r._i[i.i],i.r=!0,a&&(a.n=n),n&&(n.p=a),r._f==i&&(r._f=n),r._l==i&&(r._l=a),r[m]--}return!!i},forEach:function(e){f(this,t);for(var r,i=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(i(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(f(this,t),e)}}),h&&i(l.prototype,"size",{get:function(){return f(this,t)[m]}}),l},def:function(e,t,r){var i,n,a=g(e,t);return a?a.v=r:(e._l=a={i:n=p(t,!0),k:t,v:r,p:i=e._l,n:void 0,r:!1},e._f||(e._f=a),i&&(i.n=a),e[m]++,"F"!==n&&(e._i[n]=a)),e},getEntry:g,setStrong:function(e,t,r){u(e,t,(function(e,r){this._t=f(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?l(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,l(1))}),r?"entries":"values",!r,!0),d(t)}}},{115:115,121:121,147:147,35:35,52:52,56:56,66:66,83:83,85:85,92:92,96:96,97:97}],48:[function(e,t,r){"use strict";var i=e(115),n=e(92).getWeak,a=e(36),s=e(79),o=e(35),c=e(66),u=e(40),l=e(69),d=e(147),h=u(5),p=u(6),f=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},y=function(e,t){return h(e.a,(function(e){return e[0]===t}))};g.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,a){var u=e((function(e,i){o(e,u,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=i&&c(i,r,e[a],e)}));return i(u.prototype,{delete:function(e){if(!s(e))return!1;var r=n(e);return!0===r?m(d(this,t)).delete(e):r&&l(r,this._i)&&delete r[this._i]},has:function(e){if(!s(e))return!1;var r=n(e);return!0===r?m(d(this,t)).has(e):r&&l(r,this._i)}}),u},def:function(e,t,r){var i=n(a(t),!0);return!0===i?m(e).set(t,r):i[e._i]=r,e},ufstore:m}},{115:115,147:147,35:35,36:36,40:40,66:66,69:69,79:79,92:92}],49:[function(e,t,r){"use strict";var i=e(68),n=e(60),a=e(116),s=e(115),o=e(92),c=e(66),u=e(35),l=e(79),d=e(62),h=e(84),p=e(122),f=e(73);t.exports=function(e,t,r,m,g,y){var v=i[e],b=v,_=g?"set":"add",k=b&&b.prototype,w={},P=function(e){var t=k[e];a(k,e,"delete"==e||"has"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(y||k.forEach&&!d((function(){(new b).entries().next()})))){var A=new b,C=A[_](y?{}:-0,1)!=A,S=d((function(){A.has(1)})),E=h((function(e){new b(e)})),T=!y&&d((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));E||((b=t((function(t,r){u(t,b,e);var i=f(new v,t,b);return null!=r&&c(r,g,i[_],i),i}))).prototype=k,k.constructor=b),(S||T)&&(P("delete"),P("has"),g&&P("get")),(T||C)&&P(_),y&&k.clear&&delete k.clear}else b=m.getConstructor(t,e,g,_),s(b.prototype,r),o.NEED=!0;return p(b,e),w[e]=b,n(n.G+n.W+n.F*(b!=v),w),y||m.setStrong(b,e,g),b}},{115:115,116:116,122:122,35:35,60:60,62:62,66:66,68:68,73:73,79:79,84:84,92:92}],50:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{16:16}],51:[function(e,t,r){"use strict";var i=e(97),n=e(114);t.exports=function(e,t,r){t in e?i.f(e,t,n(0,r)):e[t]=r}},{114:114,97:97}],52:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{17:17,31:31}],53:[function(e,t,r){"use strict";var i=e(62),n=Date.prototype.getTime,a=Date.prototype.toISOString,s=function(e){return e>9?e:"0"+e};t.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-50000000000001))}))||!i((function(){a.call(new Date(NaN))}))?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(r>99?r:"0"+s(r))+"Z"}:a},{62:62}],54:[function(e,t,r){"use strict";var i=e(36),n=e(141),a="number";t.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return n(i(this),e!=a)}},{141:141,36:36}],55:[function(e,t,r){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],56:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{18:18,62:62}],57:[function(e,t,r){arguments[4][19][0].apply(r,arguments)},{19:19,68:68,79:79}],58:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],59:[function(e,t,r){var i=e(105),n=e(102),a=e(106);t.exports=function(e){var t=i(e),r=n.f;if(r)for(var s,o=r(e),c=a.f,u=0;o.length>u;)c.call(e,s=o[u++])&&t.push(s);return t}},{102:102,105:105,106:106}],60:[function(e,t,r){var i=e(68),n=e(50),a=e(70),s=e(116),o=e(52),c=function e(t,r,c){var u,l,d,h,p=t&e.F,f=t&e.G,m=t&e.P,g=t&e.B,y=f?i:t&e.S?i[r]||(i[r]={}):(i[r]||{}).prototype,v=f?n:n[r]||(n[r]={}),b=v.prototype||(v.prototype={});for(u in f&&(c=r),c)d=((l=!p&&y&&void 0!==y[u])?y:c)[u],h=g&&l?o(d,i):m&&"function"==typeof d?o(Function.call,d):d,y&&s(y,u,d,t&e.U),v[u]!=d&&a(v,u,h),m&&b[u]!=d&&(b[u]=d)};i.core=n,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},{116:116,50:50,52:52,68:68,70:70}],61:[function(e,t,r){var i=e(150)("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},{150:150}],62:[function(e,t,r){arguments[4][21][0].apply(r,arguments)},{21:21}],63:[function(e,t,r){"use strict";e(246);var i=e(116),n=e(70),a=e(62),s=e(55),o=e(150),c=e(118),u=o("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(e,t,r){var h=o(e),p=!a((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p?!a((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[h](""),!t})):void 0;if(!p||!f||"replace"===e&&!l||"split"===e&&!d){var m=/./[h],g=r(s,h,""[e],(function(e,t,r,i,n){return t.exec===c?p&&!n?{done:!0,value:m.call(t,r,i)}:{done:!0,value:e.call(r,t,i)}:{done:!1}})),y=g[0],v=g[1];i(String.prototype,e,y),n(RegExp.prototype,h,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},{116:116,118:118,150:150,246:246,55:55,62:62,70:70}],64:[function(e,t,r){"use strict";var i=e(36);t.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{36:36}],65:[function(e,t,r){"use strict";var i=e(77),n=e(79),a=e(139),s=e(52),o=e(150)("isConcatSpreadable");t.exports=function e(t,r,c,u,l,d,h,p){for(var f,m,g=l,y=0,v=!!h&&s(h,p,3);y<u;){if(y in c){if(f=v?v(c[y],y,r):c[y],m=!1,n(f)&&(m=void 0!==(m=f[o])?!!m:i(f)),m&&d>0)g=e(t,r,f,a(f.length),g,d-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=f}g++}y++}return g}},{139:139,150:150,52:52,77:77,79:79}],66:[function(e,t,r){var i=e(52),n=e(81),a=e(76),s=e(36),o=e(139),c=e(151),u={},l={};(r=t.exports=function(e,t,r,d,h){var p,f,m,g,y=h?function(){return e}:c(e),v=i(r,d,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(p=o(e.length);p>b;b++)if((g=t?v(s(f=e[b])[0],f[1]):v(e[b]))===u||g===l)return g}else for(m=y.call(e);!(f=m.next()).done;)if((g=n(m,v,f.value,t))===u||g===l)return g}).BREAK=u,r.RETURN=l},{139:139,151:151,36:36,52:52,76:76,81:81}],67:[function(e,t,r){t.exports=e(124)("native-function-to-string",Function.toString)},{124:124}],68:[function(e,t,r){arguments[4][22][0].apply(r,arguments)},{22:22}],69:[function(e,t,r){arguments[4][23][0].apply(r,arguments)},{23:23}],70:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{114:114,24:24,56:56,97:97}],71:[function(e,t,r){var i=e(68).document;t.exports=i&&i.documentElement},{68:68}],72:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{25:25,56:56,57:57,62:62}],73:[function(e,t,r){var i=e(79),n=e(120).set;t.exports=function(e,t,r){var a,s=t.constructor;return s!==r&&"function"==typeof s&&(a=s.prototype)!==r.prototype&&i(a)&&n&&n(e,a),e}},{120:120,79:79}],74:[function(e,t,r){t.exports=function(e,t,r){var i=void 0===r;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],75:[function(e,t,r){var i=e(46);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{46:46}],76:[function(e,t,r){var i=e(86),n=e(150)("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||a[n]===e)}},{150:150,86:86}],77:[function(e,t,r){var i=e(46);t.exports=Array.isArray||function(e){return"Array"==i(e)}},{46:46}],78:[function(e,t,r){var i=e(79),n=Math.floor;t.exports=function(e){return!i(e)&&isFinite(e)&&n(e)===e}},{79:79}],79:[function(e,t,r){arguments[4][26][0].apply(r,arguments)},{26:26}],80:[function(e,t,r){var i=e(79),n=e(46),a=e(150)("match");t.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==n(e))}},{150:150,46:46,79:79}],81:[function(e,t,r){var i=e(36);t.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&i(a.call(e)),t}}},{36:36}],82:[function(e,t,r){"use strict";var i=e(96),n=e(114),a=e(122),s={};e(70)(s,e(150)("iterator"),(function(){return this})),t.exports=function(e,t,r){e.prototype=i(s,{next:n(1,r)}),a(e,t+" Iterator")}},{114:114,122:122,150:150,70:70,96:96}],83:[function(e,t,r){"use strict";var i=e(87),n=e(60),a=e(116),s=e(70),o=e(86),c=e(82),u=e(122),l=e(103),d=e(150)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};t.exports=function(e,t,r,g,y,v,b){c(r,t,g);var _,k,w,P=function(e){if(!h&&e in E)return E[e];switch(e){case p:case f:return function(){return new r(this,e)}}return function(){return new r(this,e)}},A=t+" Iterator",C=y==f,S=!1,E=e.prototype,T=E[d]||E["@@iterator"]||y&&E[y],x=T||P(y),D=y?C?P("entries"):x:void 0,O="Array"==t&&E.entries||T;if(O&&(w=l(O.call(new e)))!==Object.prototype&&w.next&&(u(w,A,!0),i||"function"==typeof w[d]||s(w,d,m)),C&&T&&T.name!==f&&(S=!0,x=function(){return T.call(this)}),i&&!b||!h&&!S&&E[d]||s(E,d,x),o[t]=x,o[A]=m,y)if(_={values:C?x:P(f),keys:v?x:P(p),entries:D},b)for(k in _)k in E||a(E,k,_[k]);else n(n.P+n.F*(h||S),t,_);return _}},{103:103,116:116,122:122,150:150,60:60,70:70,82:82,86:86,87:87}],84:[function(e,t,r){var i=e(150)("iterator"),n=!1;try{var a=[7][i]();a.return=function(){n=!0},Array.from(a,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var a=[7],s=a[i]();s.next=function(){return{done:r=!0}},a[i]=function(){return s},e(a)}catch(e){}return r}},{150:150}],85:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],86:[function(e,t,r){t.exports={}},{}],87:[function(e,t,r){t.exports=!1},{}],88:[function(e,t,r){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:i},{}],89:[function(e,t,r){var i=e(91),n=Math.pow,a=n(2,-52),s=n(2,-23),o=n(2,127)*(2-s),c=n(2,-126);t.exports=Math.fround||function(e){var t,r,n=Math.abs(e),u=i(e);return n<c?u*(n/c/s+1/a-1/a)*c*s:(r=(t=(1+s/a)*n)-(t-n))>o||r!=r?u*(1/0):u*r}},{91:91}],90:[function(e,t,r){t.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],91:[function(e,t,r){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],92:[function(t,r,i){var n=t(145)("meta"),a=t(79),s=t(69),o=t(97).f,c=0,u=Object.isExtensible||function(){return!0},l=!t(62)((function(){return u(Object.preventExtensions({}))})),d=function(e){o(e,n,{value:{i:"O"+ ++c,w:{}}})},h=r.exports={KEY:n,NEED:!1,fastKey:function(t,r){if(!a(t))return"symbol"==e(t)?t:("string"==typeof t?"S":"P")+t;if(!s(t,n)){if(!u(t))return"F";if(!r)return"E";d(t)}return t[n].i},getWeak:function(e,t){if(!s(e,n)){if(!u(e))return!0;if(!t)return!1;d(e)}return e[n].w},onFreeze:function(e){return l&&h.NEED&&u(e)&&!s(e,n)&&d(e),e}}},{145:145,62:62,69:69,79:79,97:97}],93:[function(e,t,r){var i=e(68),n=e(134).set,a=i.MutationObserver||i.WebKitMutationObserver,s=i.process,o=i.Promise,c="process"==e(46)(s);t.exports=function(){var e,t,r,u=function(){var i,n;for(c&&(i=s.domain)&&i.exit();e;){n=e.fn,e=e.next;try{n()}catch(i){throw e?r():t=void 0,i}}t=void 0,i&&i.enter()};if(c)r=function(){s.nextTick(u)};else if(!a||i.navigator&&i.navigator.standalone)if(o&&o.resolve){var l=o.resolve(void 0);r=function(){l.then(u)}}else r=function(){n.call(i,u)};else{var d=!0,h=document.createTextNode("");new a(u).observe(h,{characterData:!0}),r=function(){h.data=d=!d}}return function(i){var n={fn:i,next:void 0};t&&(t.next=n),e||(e=n,r()),t=n}}},{134:134,46:46,68:68}],94:[function(e,t,r){"use strict";var i=e(31);function n(e){var t,r;this.promise=new e((function(e,i){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=i})),this.resolve=i(t),this.reject=i(r)}t.exports.f=function(e){return new n(e)}},{31:31}],95:[function(e,t,r){"use strict";var i=e(56),n=e(105),a=e(102),s=e(106),o=e(140),c=e(75),u=Object.assign;t.exports=!u||e(62)((function(){var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=i}))?function(e,t){for(var r=o(e),u=arguments.length,l=1,d=a.f,h=s.f;u>l;)for(var p,f=c(arguments[l++]),m=d?n(f).concat(d(f)):n(f),g=m.length,y=0;g>y;)p=m[y++],i&&!h.call(f,p)||(r[p]=f[p]);return r}:u},{102:102,105:105,106:106,140:140,56:56,62:62,75:75}],96:[function(e,t,r){var i=e(36),n=e(98),a=e(58),s=e(123)("IE_PROTO"),o=function(){},c=function(){var t,r=e(57)("iframe"),i=a.length;for(r.style.display="none",e(71).appendChild(r),r.src="javascript:",(t=r.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;i--;)delete c.prototype[a[i]];return c()};t.exports=Object.create||function(e,t){var r;return null!==e?(o.prototype=i(e),r=new o,o.prototype=null,r[s]=e):r=c(),void 0===t?r:n(r,t)}},{123:123,36:36,57:57,58:58,71:71,98:98}],97:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{141:141,27:27,36:36,56:56,72:72}],98:[function(e,t,r){var i=e(97),n=e(36),a=e(105);t.exports=e(56)?Object.defineProperties:function(e,t){n(e);for(var r,s=a(t),o=s.length,c=0;o>c;)i.f(e,r=s[c++],t[r]);return e}},{105:105,36:36,56:56,97:97}],99:[function(e,t,r){var i=e(106),n=e(114),a=e(138),s=e(141),o=e(69),c=e(72),u=Object.getOwnPropertyDescriptor;r.f=e(56)?u:function(e,t){if(e=a(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(o(e,t))return n(!i.f.call(e,t),e[t])}},{106:106,114:114,138:138,141:141,56:56,69:69,72:72}],100:[function(t,r,i){var n=t(138),a=t(101).f,s={}.toString,o="object"==("undefined"==typeof window?"undefined":e(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(e){return o&&"[object Window]"==s.call(e)?function(e){try{return a(e)}catch(e){return o.slice()}}(e):a(n(e))}},{101:101,138:138}],101:[function(e,t,r){var i=e(104),n=e(58).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},{104:104,58:58}],102:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],103:[function(e,t,r){var i=e(69),n=e(140),a=e(123)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=n(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{123:123,140:140,69:69}],104:[function(e,t,r){var i=e(69),n=e(138),a=e(39)(!1),s=e(123)("IE_PROTO");t.exports=function(e,t){var r,o=n(e),c=0,u=[];for(r in o)r!=s&&i(o,r)&&u.push(r);for(;t.length>c;)i(o,r=t[c++])&&(~a(u,r)||u.push(r));return u}},{123:123,138:138,39:39,69:69}],105:[function(e,t,r){var i=e(104),n=e(58);t.exports=Object.keys||function(e){return i(e,n)}},{104:104,58:58}],106:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],107:[function(e,t,r){var i=e(60),n=e(50),a=e(62);t.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],s={};s[e]=t(r),i(i.S+i.F*a((function(){r(1)})),"Object",s)}},{50:50,60:60,62:62}],108:[function(e,t,r){var i=e(56),n=e(105),a=e(138),s=e(106).f;t.exports=function(e){return function(t){for(var r,o=a(t),c=n(o),u=c.length,l=0,d=[];u>l;)r=c[l++],i&&!s.call(o,r)||d.push(e?[r,o[r]]:o[r]);return d}}},{105:105,106:106,138:138,56:56}],109:[function(e,t,r){var i=e(101),n=e(102),a=e(36),s=e(68).Reflect;t.exports=s&&s.ownKeys||function(e){var t=i.f(a(e)),r=n.f;return r?t.concat(r(e)):t}},{101:101,102:102,36:36,68:68}],110:[function(e,t,r){var i=e(68).parseFloat,n=e(132).trim;t.exports=1/i(e(133)+"-0")!=-1/0?function(e){var t=n(String(e),3),r=i(t);return 0===r&&"-"==t.charAt(0)?-0:r}:i},{132:132,133:133,68:68}],111:[function(e,t,r){var i=e(68).parseInt,n=e(132).trim,a=e(133),s=/^[-+]?0[xX]/;t.exports=8!==i(a+"08")||22!==i(a+"0x16")?function(e,t){var r=n(String(e),3);return i(r,t>>>0||(s.test(r)?16:10))}:i},{132:132,133:133,68:68}],112:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],113:[function(e,t,r){var i=e(36),n=e(79),a=e(94);t.exports=function(e,t){if(i(e),n(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},{36:36,79:79,94:94}],114:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{28:28}],115:[function(e,t,r){var i=e(116);t.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},{116:116}],116:[function(e,t,r){var i=e(68),n=e(70),a=e(69),s=e(145)("src"),o=e(67),c="toString",u=(""+o).split(c);e(50).inspectSource=function(e){return o.call(e)},(t.exports=function(e,t,r,o){var c="function"==typeof r;c&&(a(r,"name")||n(r,"name",t)),e[t]!==r&&(c&&(a(r,s)||n(r,s,e[t]?""+e[t]:u.join(String(t)))),e===i?e[t]=r:o?e[t]?e[t]=r:n(e,t,r):(delete e[t],n(e,t,r)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[s]||o.call(this)}))},{145:145,50:50,67:67,68:68,69:69,70:70}],117:[function(t,r,i){"use strict";var n=t(45),a=RegExp.prototype.exec;r.exports=function(t,r){var i=t.exec;if("function"==typeof i){var s=i.call(t,r);if("object"!==e(s))throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,r)}},{45:45}],118:[function(e,t,r){"use strict";var i,n,a=e(64),s=RegExp.prototype.exec,o=String.prototype.replace,c=s,u=(i=/a/,n=/b*/g,s.call(i,"a"),s.call(n,"a"),0!==i.lastIndex||0!==n.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(e){var t,r,i,n,c=this;return l&&(r=new RegExp("^"+c.source+"$(?!\\s)",a.call(c))),u&&(t=c.lastIndex),i=s.call(c,e),u&&i&&(c.lastIndex=c.global?i.index+i[0].length:t),l&&i&&i.length>1&&o.call(i[0],r,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(i[n]=void 0)})),i}),t.exports=c},{64:64}],119:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],120:[function(e,t,r){var i=e(79),n=e(36),a=function(e,t){if(n(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,i){try{(i=e(52)(Function.call,e(99).f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return a(e,t),r?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:a}},{36:36,52:52,79:79,99:99}],121:[function(e,t,r){"use strict";var i=e(68),n=e(97),a=e(56),s=e(150)("species");t.exports=function(e){var t=i[e];a&&t&&!t[s]&&n.f(t,s,{configurable:!0,get:function(){return this}})}},{150:150,56:56,68:68,97:97}],122:[function(e,t,r){var i=e(97).f,n=e(69),a=e(150)("toStringTag");t.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},{150:150,69:69,97:97}],123:[function(e,t,r){var i=e(124)("keys"),n=e(145);t.exports=function(e){return i[e]||(i[e]=n(e))}},{124:124,145:145}],124:[function(e,t,r){var i=e(50),n=e(68),a="__core-js_shared__",s=n[a]||(n[a]={});(t.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:e(87)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{50:50,68:68,87:87}],125:[function(e,t,r){var i=e(36),n=e(31),a=e(150)("species");t.exports=function(e,t){var r,s=i(e).constructor;return void 0===s||null==(r=i(s)[a])?t:n(r)}},{150:150,31:31,36:36}],126:[function(e,t,r){"use strict";var i=e(62);t.exports=function(e,t){return!!e&&i((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},{62:62}],127:[function(e,t,r){var i=e(137),n=e(55);t.exports=function(e){return function(t,r){var a,s,o=String(n(t)),c=i(r),u=o.length;return c<0||c>=u?e?"":void 0:(a=o.charCodeAt(c))<55296||a>56319||c+1===u||(s=o.charCodeAt(c+1))<56320||s>57343?e?o.charAt(c):a:e?o.slice(c,c+2):s-56320+(a-55296<<10)+65536}}},{137:137,55:55}],128:[function(e,t,r){var i=e(80),n=e(55);t.exports=function(e,t,r){if(i(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(n(e))}},{55:55,80:80}],129:[function(e,t,r){var i=e(60),n=e(62),a=e(55),s=/"/g,o=function(e,t,r,i){var n=String(a(e)),o="<"+t;return""!==r&&(o+=" "+r+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+n+"</"+t+">"};t.exports=function(e,t){var r={};r[e]=t(o),i(i.P+i.F*n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)}},{55:55,60:60,62:62}],130:[function(e,t,r){var i=e(139),n=e(131),a=e(55);t.exports=function(e,t,r,s){var o=String(a(e)),c=o.length,u=void 0===r?" ":String(r),l=i(t);if(l<=c||""==u)return o;var d=l-c,h=n.call(u,Math.ceil(d/u.length));return h.length>d&&(h=h.slice(0,d)),s?h+o:o+h}},{131:131,139:139,55:55}],131:[function(e,t,r){"use strict";var i=e(137),n=e(55);t.exports=function(e){var t=String(n(this)),r="",a=i(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},{137:137,55:55}],132:[function(e,t,r){var i=e(60),n=e(55),a=e(62),s=e(133),o="["+s+"]",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),l=function(e,t,r){var n={},o=a((function(){return!!s[e]()||"​"!="​"[e]()})),c=n[e]=o?t(d):s[e];r&&(n[r]=c),i(i.P+i.F*o,"String",n)},d=l.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};t.exports=l},{133:133,55:55,60:60,62:62}],133:[function(e,t,r){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],134:[function(e,t,r){var i,n,a,s=e(52),o=e(74),c=e(71),u=e(57),l=e(68),d=l.process,h=l.setImmediate,p=l.clearImmediate,f=l.MessageChannel,m=l.Dispatch,g=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++g]=function(){o("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete y[e]},"process"==e(46)(d)?i=function(e){d.nextTick(s(v,e,1))}:m&&m.now?i=function(e){m.now(s(v,e,1))}:f?(a=(n=new f).port2,n.port1.onmessage=b,i=s(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):i="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),t.exports={set:h,clear:p}},{46:46,52:52,57:57,68:68,71:71,74:74}],135:[function(e,t,r){var i=e(137),n=Math.max,a=Math.min;t.exports=function(e,t){return(e=i(e))<0?n(e+t,0):a(e,t)}},{137:137}],136:[function(e,t,r){var i=e(137),n=e(139);t.exports=function(e){if(void 0===e)return 0;var t=i(e),r=n(t);if(t!==r)throw RangeError("Wrong length!");return r}},{137:137,139:139}],137:[function(e,t,r){var i=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},{}],138:[function(e,t,r){var i=e(75),n=e(55);t.exports=function(e){return i(n(e))}},{55:55,75:75}],139:[function(e,t,r){var i=e(137),n=Math.min;t.exports=function(e){return e>0?n(i(e),9007199254740991):0}},{137:137}],140:[function(e,t,r){var i=e(55);t.exports=function(e){return Object(i(e))}},{55:55}],141:[function(e,t,r){arguments[4][29][0].apply(r,arguments)},{29:29,79:79}],142:[function(t,r,i){"use strict";if(t(56)){var n=t(87),a=t(68),s=t(62),o=t(60),c=t(144),u=t(143),l=t(52),d=t(35),h=t(114),p=t(70),f=t(115),m=t(137),g=t(139),y=t(136),v=t(135),b=t(141),_=t(69),k=t(45),w=t(79),P=t(140),A=t(76),C=t(96),S=t(103),E=t(101).f,T=t(151),x=t(145),D=t(150),O=t(40),j=t(39),I=t(125),L=t(162),R=t(86),M=t(84),F=t(121),N=t(38),Q=t(37),$=t(97),U=t(99),B=$.f,V=U.f,z=a.RangeError,H=a.TypeError,q=a.Uint8Array,G="ArrayBuffer",K="SharedArrayBuffer",W="BYTES_PER_ELEMENT",Y=Array.prototype,X=u.ArrayBuffer,Z=u.DataView,J=O(0),ee=O(2),te=O(3),re=O(4),ie=O(5),ne=O(6),ae=j(!0),se=j(!1),oe=L.values,ce=L.keys,ue=L.entries,le=Y.lastIndexOf,de=Y.reduce,he=Y.reduceRight,pe=Y.join,fe=Y.sort,me=Y.slice,ge=Y.toString,ye=Y.toLocaleString,ve=D("iterator"),be=D("toStringTag"),_e=x("typed_constructor"),ke=x("def_constructor"),we=c.CONSTR,Pe=c.TYPED,Ae=c.VIEW,Ce="Wrong length!",Se=O(1,(function(e,t){return Oe(I(e,e[ke]),t)})),Ee=s((function(){return 1===new q(new Uint16Array([1]).buffer)[0]})),Te=!!q&&!!q.prototype.set&&s((function(){new q(1).set({})})),xe=function(e,t){var r=m(e);if(r<0||r%t)throw z("Wrong offset!");return r},De=function(e){if(w(e)&&Pe in e)return e;throw H(e+" is not a typed array!")},Oe=function(e,t){if(!w(e)||!(_e in e))throw H("It is not a typed array constructor!");return new e(t)},je=function(e,t){return Ie(I(e,e[ke]),t)},Ie=function(e,t){for(var r=0,i=t.length,n=Oe(e,i);i>r;)n[r]=t[r++];return n},Le=function(e,t,r){B(e,t,{get:function(){return this._d[r]}})},Re=function(e){var t,r,i,n,a,s,o=P(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=T(o);if(null!=h&&!A(h)){for(s=h.call(o),i=[],t=0;!(a=s.next()).done;t++)i.push(a.value);o=i}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,r=g(o.length),n=Oe(this,r);r>t;t++)n[t]=d?u(o[t],t):o[t];return n},Me=function(){for(var e=0,t=arguments.length,r=Oe(this,t);t>e;)r[e]=arguments[e++];return r},Fe=!!q&&s((function(){ye.call(new q(1))})),Ne=function(){return ye.apply(Fe?me.call(De(this)):De(this),arguments)},Qe={copyWithin:function(e,t){return Q.call(De(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return re(De(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return N.apply(De(this),arguments)},filter:function(e){return je(this,ee(De(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ie(De(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ne(De(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){J(De(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return se(De(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(De(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return pe.apply(De(this),arguments)},lastIndexOf:function(e){return le.apply(De(this),arguments)},map:function(e){return Se(De(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return de.apply(De(this),arguments)},reduceRight:function(e){return he.apply(De(this),arguments)},reverse:function(){for(var e,t=this,r=De(t).length,i=Math.floor(r/2),n=0;n<i;)e=t[n],t[n++]=t[--r],t[r]=e;return t},some:function(e){return te(De(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return fe.call(De(this),e)},subarray:function(e,t){var r=De(this),i=r.length,n=v(e,i);return new(I(r,r[ke]))(r.buffer,r.byteOffset+n*r.BYTES_PER_ELEMENT,g((void 0===t?i:v(t,i))-n))}},$e=function(e,t){return je(this,me.call(De(this),e,t))},Ue=function(e){De(this);var t=xe(arguments[1],1),r=this.length,i=P(e),n=g(i.length),a=0;if(n+t>r)throw z(Ce);for(;a<n;)this[t+a]=i[a++]},Be={entries:function(){return ue.call(De(this))},keys:function(){return ce.call(De(this))},values:function(){return oe.call(De(this))}},Ve=function(t,r){return w(t)&&t[Pe]&&"symbol"!=e(r)&&r in t&&String(+r)==String(r)},ze=function(e,t){return Ve(e,t=b(t,!0))?h(2,e[t]):V(e,t)},He=function(e,t,r){return!(Ve(e,t=b(t,!0))&&w(r)&&_(r,"value"))||_(r,"get")||_(r,"set")||r.configurable||_(r,"writable")&&!r.writable||_(r,"enumerable")&&!r.enumerable?B(e,t,r):(e[t]=r.value,e)};we||(U.f=ze,$.f=He),o(o.S+o.F*!we,"Object",{getOwnPropertyDescriptor:ze,defineProperty:He}),s((function(){ge.call({})}))&&(ge=ye=function(){return pe.call(this)});var qe=f({},Qe);f(qe,Be),p(qe,ve,Be.values),f(qe,{slice:$e,set:Ue,constructor:function(){},toString:ge,toLocaleString:Ne}),Le(qe,"buffer","b"),Le(qe,"byteOffset","o"),Le(qe,"byteLength","l"),Le(qe,"length","e"),B(qe,be,{get:function(){return this[Pe]}}),r.exports=function(e,t,r,i){var u=e+((i=!!i)?"Clamped":"")+"Array",l="get"+e,h="set"+e,f=a[u],m=f||{},v=f&&S(f),b=!f||!c.ABV,_={},P=f&&f.prototype,A=function(e,r){B(e,r,{get:function(){return function(e,r){var i=e._d;return i.v[l](r*t+i.o,Ee)}(this,r)},set:function(e){return function(e,r,n){var a=e._d;i&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),a.v[h](r*t+a.o,n,Ee)}(this,r,e)},enumerable:!0})};b?(f=r((function(e,r,i,n){d(e,f,u,"_d");var a,s,o,c,l=0,h=0;if(w(r)){if(!(r instanceof X||(c=k(r))==G||c==K))return Pe in r?Ie(f,r):Re.call(f,r);a=r,h=xe(i,t);var m=r.byteLength;if(void 0===n){if(m%t)throw z(Ce);if((s=m-h)<0)throw z(Ce)}else if((s=g(n)*t)+h>m)throw z(Ce);o=s/t}else o=y(r),a=new X(s=o*t);for(p(e,"_d",{b:a,o:h,l:s,e:o,v:new Z(a)});l<o;)A(e,l++)})),P=f.prototype=C(qe),p(P,"constructor",f)):s((function(){f(1)}))&&s((function(){new f(-1)}))&&M((function(e){new f,new f(null),new f(1.5),new f(e)}),!0)||(f=r((function(e,r,i,n){var a;return d(e,f,u),w(r)?r instanceof X||(a=k(r))==G||a==K?void 0!==n?new m(r,xe(i,t),n):void 0!==i?new m(r,xe(i,t)):new m(r):Pe in r?Ie(f,r):Re.call(f,r):new m(y(r))})),J(v!==Function.prototype?E(m).concat(E(v)):E(m),(function(e){e in f||p(f,e,m[e])})),f.prototype=P,n||(P.constructor=f));var T=P[ve],x=!!T&&("values"==T.name||null==T.name),D=Be.values;p(f,_e,!0),p(P,Pe,u),p(P,Ae,!0),p(P,ke,f),(i?new f(1)[be]==u:be in P)||B(P,be,{get:function(){return u}}),_[u]=f,o(o.G+o.W+o.F*(f!=m),_),o(o.S,u,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*s((function(){m.of.call(f,1)})),u,{from:Re,of:Me}),W in P||p(P,W,t),o(o.P,u,Qe),F(u),o(o.P+o.F*Te,u,{set:Ue}),o(o.P+o.F*!x,u,Be),n||P.toString==ge||(P.toString=ge),o(o.P+o.F*s((function(){new f(1).slice()})),u,{slice:$e}),o(o.P+o.F*(s((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!s((function(){P.toLocaleString.call([1,2])}))),u,{toLocaleString:Ne}),R[u]=x?T:D,n||x||p(P,ve,D)}}else r.exports=function(){}},{101:101,103:103,114:114,115:115,121:121,125:125,135:135,136:136,137:137,139:139,140:140,141:141,143:143,144:144,145:145,150:150,151:151,162:162,35:35,37:37,38:38,39:39,40:40,45:45,52:52,56:56,60:60,62:62,68:68,69:69,70:70,76:76,79:79,84:84,86:86,87:87,96:96,97:97,99:99}],143:[function(e,t,r){"use strict";var i=e(68),n=e(56),a=e(87),s=e(144),o=e(70),c=e(115),u=e(62),l=e(35),d=e(137),h=e(139),p=e(136),f=e(101).f,m=e(97).f,g=e(38),y=e(122),v="ArrayBuffer",b="DataView",_="Wrong index!",k=i.ArrayBuffer,w=i.DataView,P=i.Math,A=i.RangeError,C=i.Infinity,S=k,E=P.abs,T=P.pow,x=P.floor,D=P.log,O=P.LN2,j="buffer",I="byteLength",L="byteOffset",R=n?"_b":j,M=n?"_l":I,F=n?"_o":L;function N(e,t,r){var i,n,a,s=new Array(r),o=8*r-t-1,c=(1<<o)-1,u=c>>1,l=23===t?T(2,-24)-T(2,-77):0,d=0,h=e<0||0===e&&1/e<0?1:0;for((e=E(e))!=e||e===C?(n=e!=e?1:0,i=c):(i=x(D(e)/O),e*(a=T(2,-i))<1&&(i--,a*=2),(e+=i+u>=1?l/a:l*T(2,1-u))*a>=2&&(i++,a/=2),i+u>=c?(n=0,i=c):i+u>=1?(n=(e*a-1)*T(2,t),i+=u):(n=e*T(2,u-1)*T(2,t),i=0));t>=8;s[d++]=255&n,n/=256,t-=8);for(i=i<<t|n,o+=t;o>0;s[d++]=255&i,i/=256,o-=8);return s[--d]|=128*h,s}function Q(e,t,r){var i,n=8*r-t-1,a=(1<<n)-1,s=a>>1,o=n-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;o>0;l=256*l+e[c],c--,o-=8);for(i=l&(1<<-o)-1,l>>=-o,o+=t;o>0;i=256*i+e[c],c--,o-=8);if(0===l)l=1-s;else{if(l===a)return i?NaN:u?-C:C;i+=T(2,t),l-=s}return(u?-1:1)*i*T(2,l-t)}function $(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function U(e){return[255&e]}function B(e){return[255&e,e>>8&255]}function V(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return N(e,52,8)}function H(e){return N(e,23,4)}function q(e,t,r){m(e.prototype,t,{get:function(){return this[r]}})}function G(e,t,r,i){var n=p(+r);if(n+t>e[M])throw A(_);var a=e[R]._b,s=n+e[F],o=a.slice(s,s+t);return i?o:o.reverse()}function K(e,t,r,i,n,a){var s=p(+r);if(s+t>e[M])throw A(_);for(var o=e[R]._b,c=s+e[F],u=i(+n),l=0;l<t;l++)o[c+l]=u[a?l:t-l-1]}if(s.ABV){if(!u((function(){k(1)}))||!u((function(){new k(-1)}))||u((function(){return new k,new k(1.5),new k(NaN),k.name!=v}))){for(var W,Y=(k=function(e){return l(this,k),new S(p(e))}).prototype=S.prototype,X=f(S),Z=0;X.length>Z;)(W=X[Z++])in k||o(k,W,S[W]);a||(Y.constructor=k)}var J=new w(new k(2)),ee=w.prototype.setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||c(w.prototype,{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else k=function(e){l(this,k,v);var t=p(e);this._b=g.call(new Array(t),0),this[M]=t},w=function(e,t,r){l(this,w,b),l(e,k,b);var i=e[M],n=d(t);if(n<0||n>i)throw A("Wrong offset!");if(n+(r=void 0===r?i-n:h(r))>i)throw A("Wrong length!");this[R]=e,this[F]=n,this[M]=r},n&&(q(k,I,"_l"),q(w,j,"_b"),q(w,I,"_l"),q(w,L,"_o")),c(w.prototype,{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return $(G(this,4,e,arguments[1]))},getUint32:function(e){return $(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return Q(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return Q(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){K(this,1,e,U,t)},setUint8:function(e,t){K(this,1,e,U,t)},setInt16:function(e,t){K(this,2,e,B,t,arguments[2])},setUint16:function(e,t){K(this,2,e,B,t,arguments[2])},setInt32:function(e,t){K(this,4,e,V,t,arguments[2])},setUint32:function(e,t){K(this,4,e,V,t,arguments[2])},setFloat32:function(e,t){K(this,4,e,H,t,arguments[2])},setFloat64:function(e,t){K(this,8,e,z,t,arguments[2])}});y(k,v),y(w,b),o(w.prototype,s.VIEW,!0),r.ArrayBuffer=k,r.DataView=w},{101:101,115:115,122:122,136:136,137:137,139:139,144:144,35:35,38:38,56:56,62:62,68:68,70:70,87:87,97:97}],144:[function(e,t,r){for(var i,n=e(68),a=e(70),s=e(145),o=s("typed_array"),c=s("view"),u=!(!n.ArrayBuffer||!n.DataView),l=u,d=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(i=n[h[d++]])?(a(i.prototype,o,!0),a(i.prototype,c,!0)):l=!1;t.exports={ABV:u,CONSTR:l,TYPED:o,VIEW:c}},{145:145,68:68,70:70}],145:[function(e,t,r){var i=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},{}],146:[function(e,t,r){var i=e(68).navigator;t.exports=i&&i.userAgent||""},{68:68}],147:[function(e,t,r){var i=e(79);t.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{79:79}],148:[function(e,t,r){var i=e(68),n=e(50),a=e(87),s=e(149),o=e(97).f;t.exports=function(e){var t=n.Symbol||(n.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},{149:149,50:50,68:68,87:87,97:97}],149:[function(e,t,r){r.f=e(150)},{150:150}],150:[function(e,t,r){var i=e(124)("wks"),n=e(145),a=e(68).Symbol,s="function"==typeof a;(t.exports=function(e){return i[e]||(i[e]=s&&a[e]||(s?a:n)("Symbol."+e))}).store=i},{124:124,145:145,68:68}],151:[function(e,t,r){var i=e(45),n=e(150)("iterator"),a=e(86);t.exports=e(50).getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||a[i(e)]}},{150:150,45:45,50:50,86:86}],152:[function(e,t,r){var i=e(60);i(i.P,"Array",{copyWithin:e(37)}),e(33)("copyWithin")},{33:33,37:37,60:60}],153:[function(e,t,r){"use strict";var i=e(60),n=e(40)(4);i(i.P+i.F*!e(126)([].every,!0),"Array",{every:function(e){return n(this,e,arguments[1])}})},{126:126,40:40,60:60}],154:[function(e,t,r){var i=e(60);i(i.P,"Array",{fill:e(38)}),e(33)("fill")},{33:33,38:38,60:60}],155:[function(e,t,r){"use strict";var i=e(60),n=e(40)(2);i(i.P+i.F*!e(126)([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},{126:126,40:40,60:60}],156:[function(e,t,r){"use strict";var i=e(60),n=e(40)(6),a="findIndex",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),e(33)(a)},{33:33,40:40,60:60}],157:[function(e,t,r){"use strict";var i=e(60),n=e(40)(5),a="find",s=!0;a in[]&&Array(1).find((function(){s=!1})),i(i.P+i.F*s,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),e(33)(a)},{33:33,40:40,60:60}],158:[function(e,t,r){"use strict";var i=e(60),n=e(40)(0),a=e(126)([].forEach,!0);i(i.P+i.F*!a,"Array",{forEach:function(e){return n(this,e,arguments[1])}})},{126:126,40:40,60:60}],159:[function(e,t,r){"use strict";var i=e(52),n=e(60),a=e(140),s=e(81),o=e(76),c=e(139),u=e(51),l=e(151);n(n.S+n.F*!e(84)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,n,d,h=a(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,y=0,v=l(h);if(g&&(m=i(m,f>2?arguments[2]:void 0,2)),null==v||p==Array&&o(v))for(r=new p(t=c(h.length));t>y;y++)u(r,y,g?m(h[y],y):h[y]);else for(d=v.call(h),r=new p;!(n=d.next()).done;y++)u(r,y,g?s(d,m,[n.value,y],!0):n.value);return r.length=y,r}})},{139:139,140:140,151:151,51:51,52:52,60:60,76:76,81:81,84:84}],160:[function(e,t,r){"use strict";var i=e(60),n=e(39)(!1),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!e(126)(a)),"Array",{indexOf:function(e){return s?a.apply(this,arguments)||0:n(this,e,arguments[1])}})},{126:126,39:39,60:60}],161:[function(e,t,r){var i=e(60);i(i.S,"Array",{isArray:e(77)})},{60:60,77:77}],162:[function(e,t,r){"use strict";var i=e(33),n=e(85),a=e(86),s=e(138);t.exports=e(83)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},{138:138,33:33,83:83,85:85,86:86}],163:[function(e,t,r){"use strict";var i=e(60),n=e(138),a=[].join;i(i.P+i.F*(e(75)!=Object||!e(126)(a)),"Array",{join:function(e){return a.call(n(this),void 0===e?",":e)}})},{126:126,138:138,60:60,75:75}],164:[function(e,t,r){"use strict";var i=e(60),n=e(138),a=e(137),s=e(139),o=[].lastIndexOf,c=!!o&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(c||!e(126)(o)),"Array",{lastIndexOf:function(e){if(c)return o.apply(this,arguments)||0;var t=n(this),r=s(t.length),i=r-1;for(arguments.length>1&&(i=Math.min(i,a(arguments[1]))),i<0&&(i=r+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},{126:126,137:137,138:138,139:139,60:60}],165:[function(e,t,r){"use strict";var i=e(60),n=e(40)(1);i(i.P+i.F*!e(126)([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},{126:126,40:40,60:60}],166:[function(e,t,r){"use strict";var i=e(60),n=e(51);i(i.S+i.F*e(62)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)n(r,e,arguments[e++]);return r.length=t,r}})},{51:51,60:60,62:62}],167:[function(e,t,r){"use strict";var i=e(60),n=e(41);i(i.P+i.F*!e(126)([].reduceRight,!0),"Array",{reduceRight:function(e){return n(this,e,arguments.length,arguments[1],!0)}})},{126:126,41:41,60:60}],168:[function(e,t,r){"use strict";var i=e(60),n=e(41);i(i.P+i.F*!e(126)([].reduce,!0),"Array",{reduce:function(e){return n(this,e,arguments.length,arguments[1],!1)}})},{126:126,41:41,60:60}],169:[function(e,t,r){"use strict";var i=e(60),n=e(71),a=e(46),s=e(135),o=e(139),c=[].slice;i(i.P+i.F*e(62)((function(){n&&c.call(n)})),"Array",{slice:function(e,t){var r=o(this.length),i=a(this);if(t=void 0===t?r:t,"Array"==i)return c.call(this,e,t);for(var n=s(e,r),u=s(t,r),l=o(u-n),d=new Array(l),h=0;h<l;h++)d[h]="String"==i?this.charAt(n+h):this[n+h];return d}})},{135:135,139:139,46:46,60:60,62:62,71:71}],170:[function(e,t,r){"use strict";var i=e(60),n=e(40)(3);i(i.P+i.F*!e(126)([].some,!0),"Array",{some:function(e){return n(this,e,arguments[1])}})},{126:126,40:40,60:60}],171:[function(e,t,r){"use strict";var i=e(60),n=e(31),a=e(140),s=e(62),o=[].sort,c=[1,2,3];i(i.P+i.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!e(126)(o)),"Array",{sort:function(e){return void 0===e?o.call(a(this)):o.call(a(this),n(e))}})},{126:126,140:140,31:31,60:60,62:62}],172:[function(e,t,r){e(121)("Array")},{121:121}],173:[function(e,t,r){var i=e(60);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},{60:60}],174:[function(e,t,r){var i=e(60),n=e(53);i(i.P+i.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},{53:53,60:60}],175:[function(e,t,r){"use strict";var i=e(60),n=e(140),a=e(141);i(i.P+i.F*e(62)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=n(this),r=a(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},{140:140,141:141,60:60,62:62}],176:[function(e,t,r){var i=e(150)("toPrimitive"),n=Date.prototype;i in n||e(70)(n,i,e(54))},{150:150,54:54,70:70}],177:[function(e,t,r){var i=Date.prototype,n="Invalid Date",a=i.toString,s=i.getTime;new Date(NaN)+""!=n&&e(116)(i,"toString",(function(){var e=s.call(this);return e==e?a.call(this):n}))},{116:116}],178:[function(e,t,r){var i=e(60);i(i.P,"Function",{bind:e(44)})},{44:44,60:60}],179:[function(e,t,r){"use strict";var i=e(79),n=e(103),a=e(150)("hasInstance"),s=Function.prototype;a in s||e(97).f(s,a,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=n(e);)if(this.prototype===e)return!0;return!1}})},{103:103,150:150,79:79,97:97}],180:[function(e,t,r){var i=e(97).f,n=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in n||e(56)&&i(n,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},{56:56,97:97}],181:[function(e,t,r){"use strict";var i=e(47),n=e(147),a="Map";t.exports=e(49)(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(n(this,a),e);return t&&t.v},set:function(e,t){return i.def(n(this,a),0===e?0:e,t)}},i,!0)},{147:147,47:47,49:49}],182:[function(e,t,r){var i=e(60),n=e(90),a=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:n(e-1+a(e-1)*a(e+1))}})},{60:60,90:90}],183:[function(e,t,r){var i=e(60),n=Math.asinh;i(i.S+i.F*!(n&&1/n(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{60:60}],184:[function(e,t,r){var i=e(60),n=Math.atanh;i(i.S+i.F*!(n&&1/n(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{60:60}],185:[function(e,t,r){var i=e(60),n=e(91);i(i.S,"Math",{cbrt:function(e){return n(e=+e)*Math.pow(Math.abs(e),1/3)}})},{60:60,91:91}],186:[function(e,t,r){var i=e(60);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{60:60}],187:[function(e,t,r){var i=e(60),n=Math.exp;i(i.S,"Math",{cosh:function(e){return(n(e=+e)+n(-e))/2}})},{60:60}],188:[function(e,t,r){var i=e(60),n=e(88);i(i.S+i.F*(n!=Math.expm1),"Math",{expm1:n})},{60:60,88:88}],189:[function(e,t,r){var i=e(60);i(i.S,"Math",{fround:e(89)})},{60:60,89:89}],190:[function(e,t,r){var i=e(60),n=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var r,i,a=0,s=0,o=arguments.length,c=0;s<o;)c<(r=n(arguments[s++]))?(a=a*(i=c/r)*i+1,c=r):a+=r>0?(i=r/c)*i:r;return c===1/0?1/0:c*Math.sqrt(a)}})},{60:60}],191:[function(e,t,r){var i=e(60),n=Math.imul;i(i.S+i.F*e(62)((function(){return-5!=n(4294967295,5)||2!=n.length})),"Math",{imul:function(e,t){var r=65535,i=+e,n=+t,a=r&i,s=r&n;return 0|a*s+((r&i>>>16)*s+a*(r&n>>>16)<<16>>>0)}})},{60:60,62:62}],192:[function(e,t,r){var i=e(60);i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{60:60}],193:[function(e,t,r){var i=e(60);i(i.S,"Math",{log1p:e(90)})},{60:60,90:90}],194:[function(e,t,r){var i=e(60);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{60:60}],195:[function(e,t,r){var i=e(60);i(i.S,"Math",{sign:e(91)})},{60:60,91:91}],196:[function(e,t,r){var i=e(60),n=e(88),a=Math.exp;i(i.S+i.F*e(62)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(n(e)-n(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},{60:60,62:62,88:88}],197:[function(e,t,r){var i=e(60),n=e(88),a=Math.exp;i(i.S,"Math",{tanh:function(e){var t=n(e=+e),r=n(-e);return t==1/0?1:r==1/0?-1:(t-r)/(a(e)+a(-e))}})},{60:60,88:88}],198:[function(e,t,r){var i=e(60);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},{60:60}],199:[function(e,t,r){"use strict";var i=e(68),n=e(69),a=e(46),s=e(73),o=e(141),c=e(62),u=e(101).f,l=e(99).f,d=e(97).f,h=e(132).trim,p="Number",f=i.Number,m=f,g=f.prototype,y=a(e(96)(g))==p,v="trim"in String.prototype,b=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){var r,i,n,a=(t=v?t.trim():h(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+t}for(var s,c=t.slice(2),u=0,l=c.length;u<l;u++)if((s=c.charCodeAt(u))<48||s>n)return NaN;return parseInt(c,i)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof f&&(y?c((function(){g.valueOf.call(r)})):a(r)!=p)?s(new m(b(t)),r,f):b(t)};for(var _,k=e(56)?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;k.length>w;w++)n(m,_=k[w])&&!n(f,_)&&d(f,_,l(m,_));f.prototype=g,g.constructor=f,e(116)(i,p,f)}},{101:101,116:116,132:132,141:141,46:46,56:56,62:62,68:68,69:69,73:73,96:96,97:97,99:99}],200:[function(e,t,r){var i=e(60);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},{60:60}],201:[function(e,t,r){var i=e(60),n=e(68).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},{60:60,68:68}],202:[function(e,t,r){var i=e(60);i(i.S,"Number",{isInteger:e(78)})},{60:60,78:78}],203:[function(e,t,r){var i=e(60);i(i.S,"Number",{isNaN:function(e){return e!=e}})},{60:60}],204:[function(e,t,r){var i=e(60),n=e(78),a=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return n(e)&&a(e)<=9007199254740991}})},{60:60,78:78}],205:[function(e,t,r){var i=e(60);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{60:60}],206:[function(e,t,r){var i=e(60);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{60:60}],207:[function(e,t,r){var i=e(60),n=e(110);i(i.S+i.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},{110:110,60:60}],208:[function(e,t,r){var i=e(60),n=e(111);i(i.S+i.F*(Number.parseInt!=n),"Number",{parseInt:n})},{111:111,60:60}],209:[function(e,t,r){"use strict";var i=e(60),n=e(137),a=e(32),s=e(131),o=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",d="0",h=function(e,t){for(var r=-1,i=t;++r<6;)i+=e*u[r],u[r]=i%1e7,i=c(i/1e7)},p=function(e){for(var t=6,r=0;--t>=0;)r+=u[t],u[t]=c(r/e),r=r%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var r=String(u[e]);t=""===t?r:t+s.call(d,7-r.length)+r}return t},m=function e(t,r,i){return 0===r?i:r%2==1?e(t,r-1,i*t):e(t*t,r/2,i)};i(i.P+i.F*(!!o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e(62)((function(){o.call({})}))),"Number",{toFixed:function(e){var t,r,i,o,c=a(this,l),u=n(e),g="",y=d;if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(g="-",c=-c),c>1e-21)if(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(c*m(2,69,1))-69,r=t<0?c*m(2,-t,1):c/m(2,t,1),r*=4503599627370496,(t=52-t)>0){for(h(0,r),i=u;i>=7;)h(1e7,0),i-=7;for(h(m(10,i,1),0),i=t-1;i>=23;)p(1<<23),i-=23;p(1<<i),h(1,1),p(2),y=f()}else h(0,r),h(1<<-t,0),y=f()+s.call(d,u);return u>0?g+((o=y.length)<=u?"0."+s.call(d,u-o)+y:y.slice(0,o-u)+"."+y.slice(o-u)):g+y}})},{131:131,137:137,32:32,60:60,62:62}],210:[function(e,t,r){"use strict";var i=e(60),n=e(62),a=e(32),s=1..toPrecision;i(i.P+i.F*(n((function(){return"1"!==s.call(1,void 0)}))||!n((function(){s.call({})}))),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},{32:32,60:60,62:62}],211:[function(e,t,r){var i=e(60);i(i.S+i.F,"Object",{assign:e(95)})},{60:60,95:95}],212:[function(e,t,r){var i=e(60);i(i.S,"Object",{create:e(96)})},{60:60,96:96}],213:[function(e,t,r){var i=e(60);i(i.S+i.F*!e(56),"Object",{defineProperties:e(98)})},{56:56,60:60,98:98}],214:[function(e,t,r){var i=e(60);i(i.S+i.F*!e(56),"Object",{defineProperty:e(97).f})},{56:56,60:60,97:97}],215:[function(e,t,r){var i=e(79),n=e(92).onFreeze;e(107)("freeze",(function(e){return function(t){return e&&i(t)?e(n(t)):t}}))},{107:107,79:79,92:92}],216:[function(e,t,r){var i=e(138),n=e(99).f;e(107)("getOwnPropertyDescriptor",(function(){return function(e,t){return n(i(e),t)}}))},{107:107,138:138,99:99}],217:[function(e,t,r){e(107)("getOwnPropertyNames",(function(){return e(100).f}))},{100:100,107:107}],218:[function(e,t,r){var i=e(140),n=e(103);e(107)("getPrototypeOf",(function(){return function(e){return n(i(e))}}))},{103:103,107:107,140:140}],219:[function(e,t,r){var i=e(79);e(107)("isExtensible",(function(e){return function(t){return!!i(t)&&(!e||e(t))}}))},{107:107,79:79}],220:[function(e,t,r){var i=e(79);e(107)("isFrozen",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},{107:107,79:79}],221:[function(e,t,r){var i=e(79);e(107)("isSealed",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},{107:107,79:79}],222:[function(e,t,r){var i=e(60);i(i.S,"Object",{is:e(119)})},{119:119,60:60}],223:[function(e,t,r){var i=e(140),n=e(105);e(107)("keys",(function(){return function(e){return n(i(e))}}))},{105:105,107:107,140:140}],224:[function(e,t,r){var i=e(79),n=e(92).onFreeze;e(107)("preventExtensions",(function(e){return function(t){return e&&i(t)?e(n(t)):t}}))},{107:107,79:79,92:92}],225:[function(e,t,r){var i=e(79),n=e(92).onFreeze;e(107)("seal",(function(e){return function(t){return e&&i(t)?e(n(t)):t}}))},{107:107,79:79,92:92}],226:[function(e,t,r){var i=e(60);i(i.S,"Object",{setPrototypeOf:e(120).set})},{120:120,60:60}],227:[function(e,t,r){"use strict";var i=e(45),n={};n[e(150)("toStringTag")]="z",n+""!="[object z]"&&e(116)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},{116:116,150:150,45:45}],228:[function(e,t,r){var i=e(60),n=e(110);i(i.G+i.F*(parseFloat!=n),{parseFloat:n})},{110:110,60:60}],229:[function(e,t,r){var i=e(60),n=e(111);i(i.G+i.F*(parseInt!=n),{parseInt:n})},{111:111,60:60}],230:[function(e,t,r){"use strict";var i,n,a,s,o=e(87),c=e(68),u=e(52),l=e(45),d=e(60),h=e(79),p=e(31),f=e(35),m=e(66),g=e(125),y=e(134).set,v=e(93)(),b=e(94),_=e(112),k=e(146),w=e(113),P="Promise",A=c.TypeError,C=c.process,S=C&&C.versions,E=S&&S.v8||"",T=c.Promise,x="process"==l(C),D=function(){},O=n=b.f,j=!!function(){try{var t=T.resolve(1),r=(t.constructor={})[e(150)("species")]=function(e){e(D,D)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(D)instanceof r&&0!==E.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;v((function(){for(var i=e._v,n=1==e._s,a=0,s=function(t){var r,a,s,o=n?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{o?(n||(2==e._h&&F(e),e._h=1),!0===o?r=i:(l&&l.enter(),r=o(i),l&&(l.exit(),s=!0)),r===t.promise?u(A("Promise-chain cycle")):(a=I(r))?a.call(r,c,u):c(r)):u(i)}catch(e){l&&!s&&l.exit(),u(e)}};r.length>a;)s(r[a++]);e._c=[],e._n=!1,t&&!e._h&&R(e)}))}},R=function(e){y.call(c,(function(){var t,r,i,n=e._v,a=M(e);if(a&&(t=_((function(){x?C.emit("unhandledRejection",n,e):(r=c.onunhandledrejection)?r({promise:e,reason:n}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",n)})),e._h=x||M(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){y.call(c,(function(){var t;x?C.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},Q=function e(t){var r,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw A("Promise can't be resolved itself");(r=I(t))?v((function(){var n={_w:i,_d:!1};try{r.call(t,u(e,n,1),u(N,n,1))}catch(e){N.call(n,e)}})):(i._v=t,i._s=1,L(i,!1))}catch(e){N.call({_w:i,_d:!1},e)}}};j||(T=function(e){f(this,T,P,"_h"),p(e),i.call(this);try{e(u(Q,this,1),u(N,this,1))}catch(e){N.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e(115)(T.prototype,{then:function(e,t){var r=O(g(this,T));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=x?C.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i;this.promise=e,this.resolve=u(Q,e,1),this.reject=u(N,e,1)},b.f=O=function(e){return e===T||e===s?new a(e):n(e)}),d(d.G+d.W+d.F*!j,{Promise:T}),e(122)(T,P),e(121)(P),s=e(50).Promise,d(d.S+d.F*!j,P,{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(o||!j),P,{resolve:function(e){return w(o&&this===s?T:this,e)}}),d(d.S+d.F*!(j&&e(84)((function(e){T.all(e).catch(D)}))),P,{all:function(e){var t=this,r=O(t),i=r.resolve,n=r.reject,a=_((function(){var r=[],a=0,s=1;m(e,!1,(function(e){var o=a++,c=!1;r.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,r[o]=e,--s||i(r))}),n)})),--s||i(r)}));return a.e&&n(a.v),r.promise},race:function(e){var t=this,r=O(t),i=r.reject,n=_((function(){m(e,!1,(function(e){t.resolve(e).then(r.resolve,i)}))}));return n.e&&i(n.v),r.promise}})},{112:112,113:113,115:115,121:121,122:122,125:125,134:134,146:146,150:150,31:31,35:35,45:45,50:50,52:52,60:60,66:66,68:68,79:79,84:84,87:87,93:93,94:94}],231:[function(e,t,r){var i=e(60),n=e(31),a=e(36),s=(e(68).Reflect||{}).apply,o=Function.apply;i(i.S+i.F*!e(62)((function(){s((function(){}))})),"Reflect",{apply:function(e,t,r){var i=n(e),c=a(r);return s?s(i,t,c):o.call(i,t,c)}})},{31:31,36:36,60:60,62:62,68:68}],232:[function(e,t,r){var i=e(60),n=e(96),a=e(31),s=e(36),o=e(79),c=e(62),u=e(44),l=(e(68).Reflect||{}).construct,d=c((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),h=!c((function(){l((function(){}))}));i(i.S+i.F*(d||h),"Reflect",{construct:function(e,t){a(e),s(t);var r=arguments.length<3?e:a(arguments[2]);if(h&&!d)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(u.apply(e,i))}var c=r.prototype,p=n(o(c)?c:Object.prototype),f=Function.apply.call(e,p,t);return o(f)?f:p}})},{31:31,36:36,44:44,60:60,62:62,68:68,79:79,96:96}],233:[function(e,t,r){var i=e(97),n=e(60),a=e(36),s=e(141);n(n.S+n.F*e(62)((function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,r){a(e),t=s(t,!0),a(r);try{return i.f(e,t,r),!0}catch(e){return!1}}})},{141:141,36:36,60:60,62:62,97:97}],234:[function(e,t,r){var i=e(60),n=e(99).f,a=e(36);i(i.S,"Reflect",{deleteProperty:function(e,t){var r=n(a(e),t);return!(r&&!r.configurable)&&delete e[t]}})},{36:36,60:60,99:99}],235:[function(e,t,r){"use strict";var i=e(60),n=e(36),a=function(e){this._t=n(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};e(82)(a,"Object",(function(){var e,t=this,r=t._k;do{if(t._i>=r.length)return{value:void 0,done:!0}}while(!((e=r[t._i++])in t._t));return{value:e,done:!1}})),i(i.S,"Reflect",{enumerate:function(e){return new a(e)}})},{36:36,60:60,82:82}],236:[function(e,t,r){var i=e(99),n=e(60),a=e(36);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(a(e),t)}})},{36:36,60:60,99:99}],237:[function(e,t,r){var i=e(60),n=e(103),a=e(36);i(i.S,"Reflect",{getPrototypeOf:function(e){return n(a(e))}})},{103:103,36:36,60:60}],238:[function(e,t,r){var i=e(99),n=e(103),a=e(69),s=e(60),o=e(79),c=e(36);s(s.S,"Reflect",{get:function e(t,r){var s,u,l=arguments.length<3?t:arguments[2];return c(t)===l?t[r]:(s=i.f(t,r))?a(s,"value")?s.value:void 0!==s.get?s.get.call(l):void 0:o(u=n(t))?e(u,r,l):void 0}})},{103:103,36:36,60:60,69:69,79:79,99:99}],239:[function(e,t,r){var i=e(60);i(i.S,"Reflect",{has:function(e,t){return t in e}})},{60:60}],240:[function(e,t,r){var i=e(60),n=e(36),a=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return n(e),!a||a(e)}})},{36:36,60:60}],241:[function(e,t,r){var i=e(60);i(i.S,"Reflect",{ownKeys:e(109)})},{109:109,60:60}],242:[function(e,t,r){var i=e(60),n=e(36),a=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){n(e);try{return a&&a(e),!0}catch(e){return!1}}})},{36:36,60:60}],243:[function(e,t,r){var i=e(60),n=e(120);n&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){n.check(e,t);try{return n.set(e,t),!0}catch(e){return!1}}})},{120:120,60:60}],244:[function(e,t,r){var i=e(97),n=e(99),a=e(103),s=e(69),o=e(60),c=e(114),u=e(36),l=e(79);o(o.S,"Reflect",{set:function e(t,r,o){var d,h,p=arguments.length<4?t:arguments[3],f=n.f(u(t),r);if(!f){if(l(h=a(t)))return e(h,r,o,p);f=c(0)}if(s(f,"value")){if(!1===f.writable||!l(p))return!1;if(d=n.f(p,r)){if(d.get||d.set||!1===d.writable)return!1;d.value=o,i.f(p,r,d)}else i.f(p,r,c(0,o));return!0}return void 0!==f.set&&(f.set.call(p,o),!0)}})},{103:103,114:114,36:36,60:60,69:69,79:79,97:97,99:99}],245:[function(e,t,r){var i=e(68),n=e(73),a=e(97).f,s=e(101).f,o=e(80),c=e(64),u=i.RegExp,l=u,d=u.prototype,h=/a/g,p=/a/g,f=new u(h)!==h;if(e(56)&&(!f||e(62)((function(){return p[e(150)("match")]=!1,u(h)!=h||u(p)==p||"/a/i"!=u(h,"i")})))){u=function(e,t){var r=this instanceof u,i=o(e),a=void 0===t;return!r&&i&&e.constructor===u&&a?e:n(f?new l(i&&!a?e.source:e,t):l((i=e instanceof u)?e.source:e,i&&a?c.call(e):t),r?this:d,u)};for(var m=function(e){e in u||a(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},g=s(l),y=0;g.length>y;)m(g[y++]);d.constructor=u,u.prototype=d,e(116)(i,"RegExp",u)}e(121)("RegExp")},{101:101,116:116,121:121,150:150,56:56,62:62,64:64,68:68,73:73,80:80,97:97}],246:[function(e,t,r){"use strict";var i=e(118);e(60)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},{118:118,60:60}],247:[function(e,t,r){e(56)&&"g"!=/./g.flags&&e(97).f(RegExp.prototype,"flags",{configurable:!0,get:e(64)})},{56:56,64:64,97:97}],248:[function(e,t,r){"use strict";var i=e(36),n=e(139),a=e(34),s=e(117);e(63)("match",1,(function(e,t,r,o){return[function(r){var i=e(this),n=null==r?void 0:r[t];return void 0!==n?n.call(r,i):new RegExp(r)[t](String(i))},function(e){var t=o(r,e,this);if(t.done)return t.value;var c=i(e),u=String(this);if(!c.global)return s(c,u);var l=c.unicode;c.lastIndex=0;for(var d,h=[],p=0;null!==(d=s(c,u));){var f=String(d[0]);h[p]=f,""===f&&(c.lastIndex=a(u,n(c.lastIndex),l)),p++}return 0===p?null:h}]}))},{117:117,139:139,34:34,36:36,63:63}],249:[function(e,t,r){"use strict";var i=e(36),n=e(140),a=e(139),s=e(137),o=e(34),c=e(117),u=Math.max,l=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;e(63)("replace",2,(function(e,t,r,f){return[function(i,n){var a=e(this),s=null==i?void 0:i[t];return void 0!==s?s.call(i,a,n):r.call(String(a),i,n)},function(e,t){var n=f(r,e,this,t);if(n.done)return n.value;var d=i(e),h=String(this),p="function"==typeof t;p||(t=String(t));var g=d.global;if(g){var y=d.unicode;d.lastIndex=0}for(var v=[];;){var b=c(d,h);if(null===b)break;if(v.push(b),!g)break;""===String(b[0])&&(d.lastIndex=o(h,a(d.lastIndex),y))}for(var _,k="",w=0,P=0;P<v.length;P++){b=v[P];for(var A=String(b[0]),C=u(l(s(b.index),h.length),0),S=[],E=1;E<b.length;E++)S.push(void 0===(_=b[E])?_:String(_));var T=b.groups;if(p){var x=[A].concat(S,C,h);void 0!==T&&x.push(T);var D=String(t.apply(void 0,x))}else D=m(A,h,C,S,T,t);C>=w&&(k+=h.slice(w,C)+D,w=C+A.length)}return k+h.slice(w)}];function m(e,t,i,a,s,o){var c=i+e.length,u=a.length,l=p;return void 0!==s&&(s=n(s),l=h),r.call(o,l,(function(r,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(c);case"<":o=s[n.slice(1,-1)];break;default:var l=+n;if(0===l)return r;if(l>u){var h=d(l/10);return 0===h?r:h<=u?void 0===a[h-1]?n.charAt(1):a[h-1]+n.charAt(1):r}o=a[l-1]}return void 0===o?"":o}))}}))},{117:117,137:137,139:139,140:140,34:34,36:36,63:63}],250:[function(e,t,r){"use strict";var i=e(36),n=e(119),a=e(117);e(63)("search",1,(function(e,t,r,s){return[function(r){var i=e(this),n=null==r?void 0:r[t];return void 0!==n?n.call(r,i):new RegExp(r)[t](String(i))},function(e){var t=s(r,e,this);if(t.done)return t.value;var o=i(e),c=String(this),u=o.lastIndex;n(u,0)||(o.lastIndex=0);var l=a(o,c);return n(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]}))},{117:117,119:119,36:36,63:63}],251:[function(e,t,r){"use strict";var i=e(80),n=e(36),a=e(125),s=e(34),o=e(139),c=e(117),u=e(118),l=e(62),d=Math.min,h=[].push,p=4294967295,f=!l((function(){RegExp(p,"y")}));e(63)("split",2,(function(e,t,r,l){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return r.call(n,e,t);for(var a,s,o,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,f=void 0===t?p:t>>>0,m=new RegExp(e.source,l+"g");(a=u.call(m,n))&&!((s=m.lastIndex)>d&&(c.push(n.slice(d,a.index)),a.length>1&&a.index<n.length&&h.apply(c,a.slice(1)),o=a[0].length,d=s,c.length>=f));)m.lastIndex===a.index&&m.lastIndex++;return d===n.length?!o&&m.test("")||c.push(""):c.push(n.slice(d)),c.length>f?c.slice(0,f):c}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,i){var n=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,n,i):m.call(String(n),r,i)},function(e,t){var i=l(m,e,this,t,m!==r);if(i.done)return i.value;var u=n(e),h=String(this),g=a(u,RegExp),y=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),b=new g(f?u:"^(?:"+u.source+")",v),_=void 0===t?p:t>>>0;if(0===_)return[];if(0===h.length)return null===c(b,h)?[h]:[];for(var k=0,w=0,P=[];w<h.length;){b.lastIndex=f?w:0;var A,C=c(b,f?h:h.slice(w));if(null===C||(A=d(o(b.lastIndex+(f?0:w)),h.length))===k)w=s(h,w,y);else{if(P.push(h.slice(k,w)),P.length===_)return P;for(var S=1;S<=C.length-1;S++)if(P.push(C[S]),P.length===_)return P;w=k=A}}return P.push(h.slice(k)),P}]}))},{117:117,118:118,125:125,139:139,34:34,36:36,62:62,63:63,80:80}],252:[function(e,t,r){"use strict";e(247);var i=e(36),n=e(64),a=e(56),s="toString",o=/./.toString,c=function(t){e(116)(RegExp.prototype,s,t,!0)};e(62)((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?c((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?n.call(e):void 0)})):o.name!=s&&c((function(){return o.call(this)}))},{116:116,247:247,36:36,56:56,62:62,64:64}],253:[function(e,t,r){"use strict";var i=e(47),n=e(147);t.exports=e(49)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(n(this,"Set"),e=0===e?0:e,e)}},i)},{147:147,47:47,49:49}],254:[function(e,t,r){"use strict";e(129)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},{129:129}],255:[function(e,t,r){"use strict";e(129)("big",(function(e){return function(){return e(this,"big","","")}}))},{129:129}],256:[function(e,t,r){"use strict";e(129)("blink",(function(e){return function(){return e(this,"blink","","")}}))},{129:129}],257:[function(e,t,r){"use strict";e(129)("bold",(function(e){return function(){return e(this,"b","","")}}))},{129:129}],258:[function(e,t,r){"use strict";var i=e(60),n=e(127)(!1);i(i.P,"String",{codePointAt:function(e){return n(this,e)}})},{127:127,60:60}],259:[function(e,t,r){"use strict";var i=e(60),n=e(139),a=e(128),s="endsWith",o="".endsWith;i(i.P+i.F*e(61)(s),"String",{endsWith:function(e){var t=a(this,e,s),r=arguments.length>1?arguments[1]:void 0,i=n(t.length),c=void 0===r?i:Math.min(n(r),i),u=String(e);return o?o.call(t,u,c):t.slice(c-u.length,c)===u}})},{128:128,139:139,60:60,61:61}],260:[function(e,t,r){"use strict";e(129)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},{129:129}],261:[function(e,t,r){"use strict";e(129)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},{129:129}],262:[function(e,t,r){"use strict";e(129)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},{129:129}],263:[function(e,t,r){var i=e(60),n=e(135),a=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,r=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],n(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},{135:135,60:60}],264:[function(e,t,r){"use strict";var i=e(60),n=e(128),a="includes";i(i.P+i.F*e(61)(a),"String",{includes:function(e){return!!~n(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},{128:128,60:60,61:61}],265:[function(e,t,r){"use strict";e(129)("italics",(function(e){return function(){return e(this,"i","","")}}))},{129:129}],266:[function(e,t,r){"use strict";var i=e(127)(!0);e(83)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=i(t,r),this._i+=e.length,{value:e,done:!1})}))},{127:127,83:83}],267:[function(e,t,r){"use strict";e(129)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},{129:129}],268:[function(e,t,r){var i=e(60),n=e(138),a=e(139);i(i.S,"String",{raw:function(e){for(var t=n(e.raw),r=a(t.length),i=arguments.length,s=[],o=0;r>o;)s.push(String(t[o++])),o<i&&s.push(String(arguments[o]));return s.join("")}})},{138:138,139:139,60:60}],269:[function(e,t,r){var i=e(60);i(i.P,"String",{repeat:e(131)})},{131:131,60:60}],270:[function(e,t,r){"use strict";e(129)("small",(function(e){return function(){return e(this,"small","","")}}))},{129:129}],271:[function(e,t,r){"use strict";var i=e(60),n=e(139),a=e(128),s="startsWith",o="".startsWith;i(i.P+i.F*e(61)(s),"String",{startsWith:function(e){var t=a(this,e,s),r=n(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return o?o.call(t,i,r):t.slice(r,r+i.length)===i}})},{128:128,139:139,60:60,61:61}],272:[function(e,t,r){"use strict";e(129)("strike",(function(e){return function(){return e(this,"strike","","")}}))},{129:129}],273:[function(e,t,r){"use strict";e(129)("sub",(function(e){return function(){return e(this,"sub","","")}}))},{129:129}],274:[function(e,t,r){"use strict";e(129)("sup",(function(e){return function(){return e(this,"sup","","")}}))},{129:129}],275:[function(e,t,r){"use strict";e(132)("trim",(function(e){return function(){return e(this,3)}}))},{132:132}],276:[function(t,r,i){"use strict";var n=t(68),a=t(69),s=t(56),o=t(60),c=t(116),u=t(92).KEY,l=t(62),d=t(124),h=t(122),p=t(145),f=t(150),m=t(149),g=t(148),y=t(59),v=t(77),b=t(36),_=t(79),k=t(140),w=t(138),P=t(141),A=t(114),C=t(96),S=t(100),E=t(99),T=t(102),x=t(97),D=t(105),O=E.f,j=x.f,I=S.f,L=n.Symbol,R=n.JSON,M=R&&R.stringify,F=f("_hidden"),N=f("toPrimitive"),Q={}.propertyIsEnumerable,$=d("symbol-registry"),U=d("symbols"),B=d("op-symbols"),V=Object.prototype,z="function"==typeof L&&!!T.f,H=n.QObject,q=!H||!H.prototype||!H.prototype.findChild,G=s&&l((function(){return 7!=C(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(e,t,r){var i=O(V,t);i&&delete V[t],j(e,t,r),i&&e!==V&&j(V,t,i)}:j,K=function(e){var t=U[e]=C(L.prototype);return t._k=e,t},W=z&&"symbol"==e(L.iterator)?function(t){return"symbol"==e(t)}:function(e){return e instanceof L},Y=function(e,t,r){return e===V&&Y(B,t,r),b(e),t=P(t,!0),b(r),a(U,t)?(r.enumerable?(a(e,F)&&e[F][t]&&(e[F][t]=!1),r=C(r,{enumerable:A(0,!1)})):(a(e,F)||j(e,F,A(1,{})),e[F][t]=!0),G(e,t,r)):j(e,t,r)},X=function(e,t){b(e);for(var r,i=y(t=w(t)),n=0,a=i.length;a>n;)Y(e,r=i[n++],t[r]);return e},Z=function(e){var t=Q.call(this,e=P(e,!0));return!(this===V&&a(U,e)&&!a(B,e))&&(!(t||!a(this,e)||!a(U,e)||a(this,F)&&this[F][e])||t)},J=function(e,t){if(e=w(e),t=P(t,!0),e!==V||!a(U,t)||a(B,t)){var r=O(e,t);return!r||!a(U,t)||a(e,F)&&e[F][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=I(w(e)),i=[],n=0;r.length>n;)a(U,t=r[n++])||t==F||t==u||i.push(t);return i},te=function(e){for(var t,r=e===V,i=I(r?B:w(e)),n=[],s=0;i.length>s;)!a(U,t=i[s++])||r&&!a(V,t)||n.push(U[t]);return n};z||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function t(r){this===V&&t.call(B,r),a(this,F)&&a(this[F],e)&&(this[F][e]=!1),G(this,e,A(1,r))};return s&&q&&G(V,e,{configurable:!0,set:t}),K(e)},c(L.prototype,"toString",(function(){return this._k})),E.f=J,x.f=Y,t(101).f=S.f=ee,t(106).f=Z,T.f=te,s&&!t(87)&&c(V,"propertyIsEnumerable",Z,!0),m.f=function(e){return K(f(e))}),o(o.G+o.W+o.F*!z,{Symbol:L});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)f(re[ie++]);for(var ne=D(f.store),ae=0;ne.length>ae;)g(ne[ae++]);o(o.S+o.F*!z,"Symbol",{for:function(e){return a($,e+="")?$[e]:$[e]=L(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in $)if($[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),o(o.S+o.F*!z,"Object",{create:function(e,t){return void 0===t?C(e):X(C(e),t)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var se=l((function(){T.f(1)}));o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function(e){return T.f(k(e))}}),R&&o(o.S+o.F*(!z||l((function(){var e=L();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);if(r=t=i[1],(_(t)||void 0!==e)&&!W(e))return v(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),i[1]=t,M.apply(R,i)}}),L.prototype[N]||t(70)(L.prototype,N,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},{100:100,101:101,102:102,105:105,106:106,114:114,116:116,122:122,124:124,138:138,140:140,141:141,145:145,148:148,149:149,150:150,36:36,56:56,59:59,60:60,62:62,68:68,69:69,70:70,77:77,79:79,87:87,92:92,96:96,97:97,99:99}],277:[function(e,t,r){"use strict";var i=e(60),n=e(144),a=e(143),s=e(36),o=e(135),c=e(139),u=e(79),l=e(68).ArrayBuffer,d=e(125),h=a.ArrayBuffer,p=a.DataView,f=n.ABV&&l.isView,m=h.prototype.slice,g=n.VIEW,y="ArrayBuffer";i(i.G+i.W+i.F*(l!==h),{ArrayBuffer:h}),i(i.S+i.F*!n.CONSTR,y,{isView:function(e){return f&&f(e)||u(e)&&g in e}}),i(i.P+i.U+i.F*e(62)((function(){return!new h(2).slice(1,void 0).byteLength})),y,{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(s(this),e);for(var r=s(this).byteLength,i=o(e,r),n=o(void 0===t?r:t,r),a=new(d(this,h))(c(n-i)),u=new p(this),l=new p(a),f=0;i<n;)l.setUint8(f++,u.getUint8(i++));return a}}),e(121)(y)},{121:121,125:125,135:135,139:139,143:143,144:144,36:36,60:60,62:62,68:68,79:79}],278:[function(e,t,r){var i=e(60);i(i.G+i.W+i.F*!e(144).ABV,{DataView:e(143).DataView})},{143:143,144:144,60:60}],279:[function(e,t,r){e(142)("Float32",4,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],280:[function(e,t,r){e(142)("Float64",8,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],281:[function(e,t,r){e(142)("Int16",2,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],282:[function(e,t,r){e(142)("Int32",4,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],283:[function(e,t,r){e(142)("Int8",1,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],284:[function(e,t,r){e(142)("Uint16",2,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],285:[function(e,t,r){e(142)("Uint32",4,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],286:[function(e,t,r){e(142)("Uint8",1,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},{142:142}],287:[function(e,t,r){e(142)("Uint8",1,(function(e){return function(t,r,i){return e(this,t,r,i)}}),!0)},{142:142}],288:[function(e,t,r){"use strict";var i,n=e(68),a=e(40)(0),s=e(116),o=e(92),c=e(95),u=e(48),l=e(79),d=e(147),h=e(147),p=!n.ActiveXObject&&"ActiveXObject"in n,f="WeakMap",m=o.getWeak,g=Object.isExtensible,y=u.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(e){if(l(e)){var t=m(e);return!0===t?y(d(this,f)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(d(this,f),e,t)}},_=t.exports=e(49)(f,v,b,u,!0,!0);h&&p&&(c((i=u.getConstructor(v,f)).prototype,b),o.NEED=!0,a(["delete","has","get","set"],(function(e){var t=_.prototype,r=t[e];s(t,e,(function(t,n){if(l(t)&&!g(t)){this._f||(this._f=new i);var a=this._f[e](t,n);return"set"==e?this:a}return r.call(this,t,n)}))})))},{116:116,147:147,40:40,48:48,49:49,68:68,79:79,92:92,95:95}],289:[function(e,t,r){"use strict";var i=e(48),n=e(147),a="WeakSet";e(49)(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(n(this,a),e,!0)}},i,!1,!0)},{147:147,48:48,49:49}],290:[function(e,t,r){"use strict";var i=e(60),n=e(65),a=e(140),s=e(139),o=e(31),c=e(43);i(i.P,"Array",{flatMap:function(e){var t,r,i=a(this);return o(e),t=s(i.length),r=c(i,0),n(r,i,i,t,0,1,e,arguments[1]),r}}),e(33)("flatMap")},{139:139,140:140,31:31,33:33,43:43,60:60,65:65}],291:[function(e,t,r){"use strict";var i=e(60),n=e(39)(!0);i(i.P,"Array",{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),e(33)("includes")},{33:33,39:39,60:60}],292:[function(e,t,r){var i=e(60),n=e(108)(!0);i(i.S,"Object",{entries:function(e){return n(e)}})},{108:108,60:60}],293:[function(e,t,r){var i=e(60),n=e(109),a=e(138),s=e(99),o=e(51);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,i=a(e),c=s.f,u=n(i),l={},d=0;u.length>d;)void 0!==(r=c(i,t=u[d++]))&&o(l,t,r);return l}})},{109:109,138:138,51:51,60:60,99:99}],294:[function(e,t,r){var i=e(60),n=e(108)(!1);i(i.S,"Object",{values:function(e){return n(e)}})},{108:108,60:60}],295:[function(e,t,r){"use strict";var i=e(60),n=e(50),a=e(68),s=e(125),o=e(113);i(i.P+i.R,"Promise",{finally:function(e){var t=s(this,n.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return o(t,e()).then((function(){return r}))}:e,r?function(r){return o(t,e()).then((function(){throw r}))}:e)}})},{113:113,125:125,50:50,60:60,68:68}],296:[function(e,t,r){"use strict";var i=e(60),n=e(130),a=e(146),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);i(i.P+i.F*s,"String",{padEnd:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},{130:130,146:146,60:60}],297:[function(e,t,r){"use strict";var i=e(60),n=e(130),a=e(146),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);i(i.P+i.F*s,"String",{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},{130:130,146:146,60:60}],298:[function(e,t,r){"use strict";e(132)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},{132:132}],299:[function(e,t,r){"use strict";e(132)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},{132:132}],300:[function(e,t,r){e(148)("asyncIterator")},{148:148}],301:[function(e,t,r){for(var i=e(162),n=e(105),a=e(116),s=e(68),o=e(70),c=e(86),u=e(150),l=u("iterator"),d=u("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(p),m=0;m<f.length;m++){var g,y=f[m],v=p[y],b=s[y],_=b&&b.prototype;if(_&&(_[l]||o(_,l,h),_[d]||o(_,d,y),c[y]=h,v))for(g in i)_[g]||a(_,g,i[g],!0)}},{105:105,116:116,150:150,162:162,68:68,70:70,86:86}],302:[function(e,t,r){var i=e(60),n=e(134);i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},{134:134,60:60}],303:[function(e,t,r){var i=e(68),n=e(60),a=e(146),s=[].slice,o=/MSIE .\./.test(a),c=function(e){return function(t,r){var i=arguments.length>2,n=!!i&&s.call(arguments,2);return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,r)}};n(n.G+n.B+n.F*o,{setTimeout:c(i.setTimeout),setInterval:c(i.setInterval)})},{146:146,60:60,68:68}],304:[function(e,t,r){e(303),e(302),e(301),t.exports=e(50)},{301:301,302:302,303:303,50:50}],305:[function(t,r,i){var n=function(t){"use strict";var r,i=Object.prototype,n=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r,i){var n=t&&t.prototype instanceof g?t:g,a=Object.create(n.prototype),s=new T(i||[]);return a._invoke=function(e,t,r){var i=d;return function(n,a){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===n)throw a;return D()}for(r.method=n,r.arg=a;;){var s=r.delegate;if(s){var o=C(s,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=l(e,t,r);if("normal"===c.type){if(i=r.done?f:h,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=f,r.method="throw",r.arg=c.arg)}}}(e,r,s),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",m={};function g(){}function y(){}function v(){}var b={};b[s]=function(){return this};var _=Object.getPrototypeOf,k=_&&_(_(x([])));k&&k!==i&&n.call(k,s)&&(b=k);var w=v.prototype=g.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function A(t,r){function i(a,s,o,c){var u=l(t[a],t,s);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"===e(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(e){i("next",e,o,c)}),(function(e){i("throw",e,o,c)})):r.resolve(h).then((function(e){d.value=e,o(d)}),(function(e){return i("throw",e,o,c)}))}c(u.arg)}var a;this._invoke=function(e,t){function n(){return new r((function(r,n){i(e,t,r,n)}))}return a=a?a.then(n,n):n()}}function C(e,t){var i=e.iterator[t.method];if(i===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,C(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=l(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,m;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:D}}function D(){return{value:r,done:!0}}return y.prototype=w.constructor=v,v.constructor=y,v[c]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},P(A.prototype),A.prototype[o]=function(){return this},t.AsyncIterator=A,t.async=function(e,r,i,n,a){void 0===a&&(a=Promise);var s=new A(u(e,r,i,n),a);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},P(w),w[c]="Generator",w[s]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=x,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return o.type="throw",o.arg=e,t.next=i,n&&(t.method="next",t.arg=r),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;E(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:x(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=r),m}},t}("object"===e(r)?r.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},{}],306:[function(e,t,r){"use strict";e(307);var i,n=(i=e(13))&&i.__esModule?i:{default:i};n.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),n.default._babelPolyfill=!0},{13:13,307:307}],307:[function(e,t,r){"use strict";e(1),e(3),e(2),e(9),e(8),e(11),e(10),e(12),e(5),e(6),e(4),e(7),e(304),e(305)},{1:1,10:10,11:11,12:12,2:2,3:3,304:304,305:305,4:4,5:5,6:6,7:7,8:8,9:9}]},{},[306])},6831:function(e,t){!function(r,i){var n={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},a=Array.prototype.map,s=Array.isArray,o=Object.prototype.toString;function c(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function u(e){return s?s(e):"[object Array]"===o.call(e)}function l(e){return e&&"[object Object]"===o.call(e)}function d(e,t){var r;for(r in e=e||{},t=t||{})t.hasOwnProperty(r)&&null==e[r]&&(e[r]=t[r]);return e}function h(e,t,r){var i,n,s=[];if(!e)return s;if(a&&e.map===a)return e.map(t,r);for(i=0,n=e.length;i<n;i++)s[i]=t.call(r,e[i],i,e);return s}function p(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function f(e){var t=n.settings.currency.format;return"function"==typeof e&&(e=e()),c(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:c(t)?n.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}var m=n.unformat=n.parse=function(e,t){if(u(e))return h(e,(function(e){return m(e,t)}));if("number"==typeof(e=e||0))return e;t=t||n.settings.number.decimal;var r=new RegExp("[^0-9-"+t+"]",["g"]),i=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(r,"").replace(t,"."));return isNaN(i)?0:i},g=n.toFixed=function(e,t){t=p(t,n.settings.number.precision);var r=Math.pow(10,t);return(Math.round(n.unformat(e)*r)/r).toFixed(t)},y=n.formatNumber=n.format=function(e,t,r,i){if(u(e))return h(e,(function(e){return y(e,t,r,i)}));e=m(e);var a=d(l(t)?t:{precision:t,thousand:r,decimal:i},n.settings.number),s=p(a.precision),o=e<0?"-":"",c=parseInt(g(Math.abs(e||0),s),10)+"",f=c.length>3?c.length%3:0;return o+(f?c.substr(0,f)+a.thousand:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a.thousand)+(s?a.decimal+g(Math.abs(e),s).split(".")[1]:"")},v=n.formatMoney=function(e,t,r,i,a,s){if(u(e))return h(e,(function(e){return v(e,t,r,i,a,s)}));e=m(e);var o=d(l(t)?t:{symbol:t,precision:r,thousand:i,decimal:a,format:s},n.settings.currency),c=f(o.format);return(e>0?c.pos:e<0?c.neg:c.zero).replace("%s",o.symbol).replace("%v",y(Math.abs(e),p(o.precision),o.thousand,o.decimal))};n.formatColumn=function(e,t,r,i,a,s){if(!e)return[];var o=d(l(t)?t:{symbol:t,precision:r,thousand:i,decimal:a,format:s},n.settings.currency),g=f(o.format),v=g.pos.indexOf("%s")<g.pos.indexOf("%v"),b=0,_=h(e,(function(e,t){if(u(e))return n.formatColumn(e,o);var r=((e=m(e))>0?g.pos:e<0?g.neg:g.zero).replace("%s",o.symbol).replace("%v",y(Math.abs(e),p(o.precision),o.thousand,o.decimal));return r.length>b&&(b=r.length),r}));return h(_,(function(e,t){return c(e)&&e.length<b?v?e.replace(o.symbol,o.symbol+new Array(b-e.length+1).join(" ")):new Array(b-e.length+1).join(" ")+e:e}))},e.exports&&(t=e.exports=n),t.accounting=n}()},9370:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},916:function(e){var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,i=0;r<e.length;r++,i+=8)t[i>>>5]|=e[r]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],i=0;i<e.length;i+=3)for(var n=e[i]<<16|e[i+1]<<8|e[i+2],a=0;a<4;a++)8*i+6*a<=8*e.length?r.push(t.charAt(n>>>6*(3-a)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],i=0,n=0;i<e.length;n=++i%4)0!=n&&r.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*n+8)-1)<<2*n|t.indexOf(e.charAt(i))>>>6-2*n);return r}},e.exports=r},8150:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},e.exports=t.default},1923:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(2,arguments);var r=(0,i.default)(e),a=(0,i.default)(t),s=r.getTime()-a.getTime();return s<0?-1:s>0?1:s};var i=a(r(853)),n=a(r(8150));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},234:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(2,arguments);var r=(0,i.default)(e),a=(0,i.default)(t);return r.getFullYear()-a.getFullYear()};var i=a(r(853)),n=a(r(8150));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},6252:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,s.default)(2,arguments);var r=(0,i.default)(e),o=(0,i.default)(t),c=(0,a.default)(r,o),u=Math.abs((0,n.default)(r,o));r.setFullYear("1584"),o.setFullYear("1584");var l=(0,a.default)(r,o)===-c,d=c*(u-l);return 0===d?0:d};var i=o(r(853)),n=o(r(234)),a=o(r(1923)),s=o(r(8150));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},3184:function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(1,arguments),e instanceof Date||"object"===i(e)&&"[object Date]"===Object.prototype.toString.call(e)};var n,a=(n=r(8150))&&n.__esModule?n:{default:n};e.exports=t.default},4687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,n.default)(1,arguments);var t=(0,i.default)(e);return!isNaN(t)};var i=a(r(853)),n=a(r(8150));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},853:function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===i(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))};var n,a=(n=r(8150))&&n.__esModule?n:{default:n};e.exports=t.default},358:function(e,t,r){var i,n=r(3409);"undefined"!=typeof navigator&&navigator&&(i=navigator.userAgent),e.exports=n(i)},3409:function(e,t,r){var i=r(7846);e.exports=function(e){return e?[["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/]].map((function(t){if(t[1].test(e)){var r=t[1].exec(e),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&Array.prototype.push.apply(n,1==n.length?[0,0]:[0]),{name:t[0],version:n.join("."),os:i(e)}}})).filter(Boolean).shift():null}},7846:function(e){e.exports=function(e){var t=[{name:"iOS",rule:/iP(hone|od|ad)/},{name:"Android OS",rule:/Android/},{name:"BlackBerry OS",rule:/BlackBerry|BB10/},{name:"Windows Mobile",rule:/IEMobile/},{name:"Amazon OS",rule:/Kindle/},{name:"Windows 3.11",rule:/Win16/},{name:"Windows 95",rule:/(Windows 95)|(Win95)|(Windows_95)/},{name:"Windows 98",rule:/(Windows 98)|(Win98)/},{name:"Windows 2000",rule:/(Windows NT 5.0)|(Windows 2000)/},{name:"Windows XP",rule:/(Windows NT 5.1)|(Windows XP)/},{name:"Windows Server 2003",rule:/(Windows NT 5.2)/},{name:"Windows Vista",rule:/(Windows NT 6.0)/},{name:"Windows 7",rule:/(Windows NT 6.1)/},{name:"Windows 8",rule:/(Windows NT 6.2)/},{name:"Windows 8.1",rule:/(Windows NT 6.3)/},{name:"Windows 10",rule:/(Windows NT 10.0)/},{name:"Windows ME",rule:/Windows ME/},{name:"Open BSD",rule:/OpenBSD/},{name:"Sun OS",rule:/SunOS/},{name:"Linux",rule:/(Linux)|(X11)/},{name:"Mac OS",rule:/(Mac_PowerPC)|(Macintosh)/},{name:"QNX",rule:/QNX/},{name:"BeOS",rule:/BeOS/},{name:"OS/2",rule:/OS\/2/},{name:"Search Bot",rule:/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/}].filter((function(t){if(e.match(t.rule))return!0}));return t&&t[0]?t[0].name:null}},1819:function(e,t,r){var i,n,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var o=e.exports&&void 0!==r.g?r.g:this||window;(o._gsQueue||(o._gsQueue=[])).push((function(){"use strict";o._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],(function(e,t){var r,i,n,a,c=function t(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=t.prototype.setRatio},u=o._gsDefine.globals,l={},d=c.prototype=new e("css");d.constructor=c,c.version="1.20.5",c.API=2,c.defaultTransformPerspective=0,c.defaultSkewType="compensated",c.defaultSmoothOrigin=!0,c.suffixMap={top:d="px",right:d,bottom:d,left:d,width:d,height:d,fontSize:d,padding:d,margin:d,perspective:d,lineHeight:""};var h,p,f,m,g,y,v,b,_=/(?:\-|\.|\b)(\d|\.|e\-)+/g,k=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,w=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,P=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,A=/(?:\d|\-|\+|=|#|\.)*/g,C=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,E=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,x=/([A-Z])/g,D=/-([a-z])/gi,O=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,j=function(e,t){return t.toUpperCase()},I=/(?:Left|Right|Width)/i,L=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,F=/[\s,\(]/i,N=Math.PI/180,Q=180/Math.PI,$={},U={style:{}},B=o.document||{createElement:function(){return U}},V=function(e,t){return B.createElementNS?B.createElementNS(t||"http://www.w3.org/1999/xhtml",e):B.createElement(e)},z=V("div"),H=V("img"),q=c._internals={_specialProps:l},G=(o.navigator||{}).userAgent||"",K=function(){var e=G.indexOf("Android"),t=V("a");return f=-1!==G.indexOf("Safari")&&-1===G.indexOf("Chrome")&&(-1===e||parseFloat(G.substr(e+8,2))>3),g=f&&parseFloat(G.substr(G.indexOf("Version/")+8,2))<6,m=-1!==G.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(G)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(G))&&(y=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),W=function(e){return C.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(e){o.console&&console.log(e)},X="",Z="",J=function(e,t){var r,i,n=(t=t||z).style;if(void 0!==n[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),r=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===n[r[i]+e];);return i>=0?(X="-"+(Z=3===i?"ms":r[i]).toLowerCase()+"-",Z+e):null},ee=("undefined"!=typeof window?window:B.defaultView||{getComputedStyle:function(){}}).getComputedStyle,te=c.getStyle=function(e,t,r,i,n){var a;return K||"opacity"!==t?(!i&&e.style[t]?a=e.style[t]:(r=r||ee(e))?a=r[t]||r.getPropertyValue(t)||r.getPropertyValue(t.replace(x,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==n||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:n):W(e)},re=q.convertToPixels=function(e,r,i,n,a){if("px"===n||!n&&"lineHeight"!==r)return i;if("auto"===n||!i)return 0;var s,o,u,l=I.test(r),d=e,h=z.style,p=i<0,f=1===i;if(p&&(i=-i),f&&(i*=100),"lineHeight"!==r||n)if("%"===n&&-1!==r.indexOf("border"))s=i/100*(l?e.clientWidth:e.clientHeight);else{if(h.cssText="border:0 solid red;position:"+te(e,"position")+";line-height:0;","%"!==n&&d.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)h[l?"borderLeftWidth":"borderTopWidth"]=i+n;else{if(d=e.parentNode||B.body,-1!==te(d,"display").indexOf("flex")&&(h.position="absolute"),o=d._gsCache,u=t.ticker.frame,o&&l&&o.time===u)return o.width*i/100;h[l?"width":"height"]=i+n}d.appendChild(z),s=parseFloat(z[l?"offsetWidth":"offsetHeight"]),d.removeChild(z),l&&"%"===n&&!1!==c.cacheWidths&&((o=d._gsCache=d._gsCache||{}).time=u,o.width=s/i*100),0!==s||a||(s=re(e,r,i,n,!0))}else o=ee(e).lineHeight,e.style.lineHeight=i,s=parseFloat(ee(e).lineHeight),e.style.lineHeight=o;return f&&(s/=100),p?-s:s},ie=q.calculateOffset=function(e,t,r){if("absolute"!==te(e,"position",r))return 0;var i="left"===t?"Left":"Top",n=te(e,"margin"+i,r);return e["offset"+i]-(re(e,t,parseFloat(n),n.replace(A,""))||0)},ne=function(e,t){var r,i,n,a={};if(t=t||ee(e,null))if(r=t.length)for(;--r>-1;)-1!==(n=t[r]).indexOf("-transform")&&Re!==n||(a[n.replace(D,j)]=t.getPropertyValue(n));else for(r in t)-1!==r.indexOf("Transform")&&Le!==r||(a[r]=t[r]);else if(t=e.currentStyle||e.style)for(r in t)"string"==typeof r&&void 0===a[r]&&(a[r.replace(D,j)]=t[r]);return K||(a.opacity=W(e)),i=We(e,t,!1),a.rotation=i.rotation,a.skewX=i.skewX,a.scaleX=i.scaleX,a.scaleY=i.scaleY,a.x=i.x,a.y=i.y,Fe&&(a.z=i.z,a.rotationX=i.rotationX,a.rotationY=i.rotationY,a.scaleZ=i.scaleZ),a.filters&&delete a.filters,a},ae=function(e,t,r,i,n){var a,s,o,c={},u=e.style;for(s in r)"cssText"!==s&&"length"!==s&&isNaN(s)&&(t[s]!==(a=r[s])||n&&n[s])&&-1===s.indexOf("Origin")&&("number"!=typeof a&&"string"!=typeof a||(c[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[s]||""===t[s].replace(P,"")?a:0:ie(e,s),void 0!==u[s]&&(o=new _e(u,s,u[s],o))));if(i)for(s in i)"className"!==s&&(c[s]=i[s]);return{difs:c,firstMPT:o}},se={width:["Left","Right"],height:["Top","Bottom"]},oe=["marginLeft","marginRight","marginTop","marginBottom"],ce=function(e,t,r){if("svg"===(e.nodeName+"").toLowerCase())return(r||ee(e))[t]||0;if(e.getCTM&&qe(e))return e.getBBox()[t]||0;var i=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),n=se[t],a=n.length;for(r=r||ee(e,null);--a>-1;)i-=parseFloat(te(e,"padding"+n[a],r,!0))||0,i-=parseFloat(te(e,"border"+n[a]+"Width",r,!0))||0;return i},ue=function e(t,r){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,n=t.split(" "),a=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":n[0],s=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":n[1];if(n.length>3&&!r){for(n=t.split(", ").join(",").split(","),t=[],i=0;i<n.length;i++)t.push(e(n[i]));return t.join(",")}return null==s?s="center"===a?"50%":"0":"center"===s&&(s="50%"),("center"===a||isNaN(parseFloat(a))&&-1===(a+"").indexOf("="))&&(a="50%"),t=a+" "+s+(n.length>2?" "+n[2]:""),r&&(r.oxp=-1!==a.indexOf("%"),r.oyp=-1!==s.indexOf("%"),r.oxr="="===a.charAt(1),r.oyr="="===s.charAt(1),r.ox=parseFloat(a.replace(P,"")),r.oy=parseFloat(s.replace(P,"")),r.v=t),r||t},le=function(e,t){return"function"==typeof e&&(e=e(b,v)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},de=function(e,t){return"function"==typeof e&&(e=e(b,v)),null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},he=function(e,t,r,i){var n,a,s,o,c,u=1e-6;return"function"==typeof e&&(e=e(b,v)),null==e?o=t:"number"==typeof e?o=e:(n=360,a=e.split("_"),s=((c="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===e.indexOf("rad")?1:Q)-(c?0:t),a.length&&(i&&(i[r]=t+s),-1!==e.indexOf("short")&&(s%=n)!=s%180&&(s=s<0?s+n:s-n),-1!==e.indexOf("_cw")&&s<0?s=(s+3599999999640)%n-(s/n|0)*n:-1!==e.indexOf("ccw")&&s>0&&(s=(s-3599999999640)%n-(s/n|0)*n)),o=t+s),o<u&&o>-u&&(o=0),o},pe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},fe=function(e,t,r){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)+.5|0},me=c.parseColor=function(e,t){var r,i,n,a,s,o,c,u,l,d,h;if(e)if("number"==typeof e)r=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),pe[e])r=pe[e];else if("#"===e.charAt(0))4===e.length&&(i=e.charAt(1),n=e.charAt(2),a=e.charAt(3),e="#"+i+i+n+n+a+a),r=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(r=h=e.match(_),t){if(-1!==e.indexOf("="))return e.match(k)}else s=Number(r[0])%360/360,o=Number(r[1])/100,i=2*(c=Number(r[2])/100)-(n=c<=.5?c*(o+1):c+o-c*o),r.length>3&&(r[3]=Number(r[3])),r[0]=fe(s+1/3,i,n),r[1]=fe(s,i,n),r[2]=fe(s-1/3,i,n);else r=e.match(_)||pe.transparent;r[0]=Number(r[0]),r[1]=Number(r[1]),r[2]=Number(r[2]),r.length>3&&(r[3]=Number(r[3]))}else r=pe.black;return t&&!h&&(i=r[0]/255,n=r[1]/255,a=r[2]/255,c=((u=Math.max(i,n,a))+(l=Math.min(i,n,a)))/2,u===l?s=o=0:(d=u-l,o=c>.5?d/(2-u-l):d/(u+l),s=u===i?(n-a)/d+(n<a?6:0):u===n?(a-i)/d+2:(i-n)/d+4,s*=60),r[0]=s+.5|0,r[1]=100*o+.5|0,r[2]=100*c+.5|0),r},ge=function(e,t){var r,i,n,a=e.match(ye)||[],s=0,o="";if(!a.length)return e;for(r=0;r<a.length;r++)i=a[r],s+=(n=e.substr(s,e.indexOf(i,s)-s)).length+i.length,3===(i=me(i,t)).length&&i.push(1),o+=n+(t?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return o+e.substr(s)},ye="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(d in pe)ye+="|"+d+"\\b";ye=new RegExp(ye+")","gi"),c.colorStringFilter=function(e){var t,r=e[0]+" "+e[1];ye.test(r)&&(t=-1!==r.indexOf("hsl(")||-1!==r.indexOf("hsla("),e[0]=ge(e[0],t),e[1]=ge(e[1],t)),ye.lastIndex=0},t.defaultStringFilter||(t.defaultStringFilter=c.colorStringFilter);var ve=function(e,t,r,i){if(null==e)return function(e){return e};var n,a=t?(e.match(ye)||[""])[0]:"",s=e.split(a).join("").match(w)||[],o=e.substr(0,e.indexOf(s[0])),c=")"===e.charAt(e.length-1)?")":"",u=-1!==e.indexOf(" ")?" ":",",l=s.length,d=l>0?s[0].replace(_,""):"";return l?t?(n=function(e){var t,h,p,f;if("number"==typeof e)e+=d;else if(i&&M.test(e)){for(f=e.replace(M,"|").split("|"),p=0;p<f.length;p++)f[p]=n(f[p]);return f.join(",")}if(t=(e.match(ye)||[a])[0],p=(h=e.split(t).join("").match(w)||[]).length,l>p--)for(;++p<l;)h[p]=r?h[(p-1)/2|0]:s[p];return o+h.join(u)+u+t+c+(-1!==e.indexOf("inset")?" inset":"")},n):(n=function(e){var t,a,h;if("number"==typeof e)e+=d;else if(i&&M.test(e)){for(a=e.replace(M,"|").split("|"),h=0;h<a.length;h++)a[h]=n(a[h]);return a.join(",")}if(h=(t=e.match(w)||[]).length,l>h--)for(;++h<l;)t[h]=r?t[(h-1)/2|0]:s[h];return o+t.join(u)+c},n):function(e){return e}},be=function(e){return e=e.split(","),function(t,r,i,n,a,s,o){var c,u=(r+"").split(" ");for(o={},c=0;c<4;c++)o[e[c]]=u[c]=u[c]||u[(c-1)/2>>0];return n.parse(t,o,a,s)}},_e=(q._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,r,i,n,a,s=this.data,o=s.proxy,c=s.firstMPT,u=1e-6;c;)t=o[c.v],c.r?t=c.r(t):t<u&&t>-u&&(t=0),c.t[c.p]=t,c=c._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod.call(this._tween,o.rotation,this.t,this._tween):o.rotation),1===e||0===e)for(c=s.firstMPT,a=1===e?"e":"b";c;){if((r=c.t).type){if(1===r.type){for(n=r.xs0+r.s+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r[a]=n}}else r[a]=r.s+r.xs0;c=c._next}},function(e,t,r,i,n){this.t=e,this.p=t,this.v=r,this.r=n,i&&(i._prev=this,this._next=i)}),ke=(q._parseToProxy=function(e,t,r,i,n,a){var s,o,c,u,l,d=i,h={},p={},f=r._transform,m=$;for(r._transform=null,$=t,i=l=r.parse(e,t,i,n),$=m,a&&(r._transform=f,d&&(d._prev=null,d._prev&&(d._prev._next=null)));i&&i!==d;){if(i.type<=1&&(p[o=i.p]=i.s+i.c,h[o]=i.s,a||(u=new _e(i,"s",o,u,i.r),i.c=0),1===i.type))for(s=i.l;--s>0;)c="xn"+s,p[o=i.p+"_"+c]=i.data[c],h[o]=i[c],a||(u=new _e(i,c,o,u,i.rxp[c]));i=i._next}return{proxy:h,end:p,firstMPT:u,pt:l}},q.CSSPropTween=function(e,t,i,n,s,o,c,u,l,d,h){this.t=e,this.p=t,this.s=i,this.c=n,this.n=c||t,e instanceof ke||a.push(this.n),this.r=u?"function"==typeof u?u:Math.round:u,this.type=o||0,l&&(this.pr=l,r=!0),this.b=void 0===d?i:d,this.e=void 0===h?i+n:h,s&&(this._next=s,s._prev=this)}),we=function(e,t,r,i,n,a){var s=new ke(e,t,r,i-r,n,-1,a);return s.b=r,s.e=s.xs0=i,s},Pe=c.parseComplex=function(e,t,r,i,n,a,s,o,u,l){r=r||a||"","function"==typeof i&&(i=i(b,v)),s=new ke(e,t,0,0,s,l?2:1,null,!1,o,r,i),i+="",n&&ye.test(i+r)&&(c.colorStringFilter(i=[r,i]),r=i[0],i=i[1]);var d,p,f,m,g,y,w,P,A,C,S,E,T,x=r.split(", ").join(",").split(" "),D=i.split(", ").join(",").split(" "),O=x.length,j=!1!==h;for(-1===i.indexOf(",")&&-1===r.indexOf(",")||(-1!==(i+r).indexOf("rgb")||-1!==(i+r).indexOf("hsl")?(x=x.join(" ").replace(M,", ").split(" "),D=D.join(" ").replace(M,", ").split(" ")):(x=x.join(" ").split(",").join(", ").split(" "),D=D.join(" ").split(",").join(", ").split(" ")),O=x.length),O!==D.length&&(O=(x=(a||"").split(" ")).length),s.plugin=u,s.setRatio=l,ye.lastIndex=0,d=0;d<O;d++)if(m=x[d],g=D[d]+"",(P=parseFloat(m))||0===P)s.appendXtra("",P,le(g,P),g.replace(k,""),!(!j||-1===g.indexOf("px"))&&Math.round,!0);else if(n&&ye.test(m))E=")"+((E=g.indexOf(")")+1)?g.substr(E):""),T=-1!==g.indexOf("hsl")&&K,C=g,m=me(m,T),g=me(g,T),(A=m.length+g.length>6)&&!K&&0===g[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(D[d]).join("transparent")):(K||(A=!1),T?s.appendXtra(C.substr(0,C.indexOf("hsl"))+(A?"hsla(":"hsl("),m[0],le(g[0],m[0]),",",!1,!0).appendXtra("",m[1],le(g[1],m[1]),"%,",!1).appendXtra("",m[2],le(g[2],m[2]),A?"%,":"%"+E,!1):s.appendXtra(C.substr(0,C.indexOf("rgb"))+(A?"rgba(":"rgb("),m[0],g[0]-m[0],",",Math.round,!0).appendXtra("",m[1],g[1]-m[1],",",Math.round).appendXtra("",m[2],g[2]-m[2],A?",":E,Math.round),A&&(m=m.length<4?1:m[3],s.appendXtra("",m,(g.length<4?1:g[3])-m,E,!1))),ye.lastIndex=0;else if(y=m.match(_)){if(!(w=g.match(k))||w.length!==y.length)return s;for(f=0,p=0;p<y.length;p++)S=y[p],C=m.indexOf(S,f),s.appendXtra(m.substr(f,C-f),Number(S),le(w[p],S),"",!(!j||"px"!==m.substr(C+S.length,2))&&Math.round,0===p),f=C+S.length;s["xs"+s.l]+=m.substr(f)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+g:g;if(-1!==i.indexOf("=")&&s.data){for(E=s.xs0+s.data.s,d=1;d<s.l;d++)E+=s["xs"+d]+s.data["xn"+d];s.e=E+s["xs"+d]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},Ae=9;for((d=ke.prototype).l=d.pr=0;--Ae>0;)d["xn"+Ae]=0,d["xs"+Ae]="";d.xs0="",d._next=d._prev=d.xfirst=d.data=d.plugin=d.setRatio=d.rxp=null,d.appendXtra=function(e,t,r,i,n,a){var s=this,o=s.l;return s["xs"+o]+=a&&(o||s["xs"+o])?" "+e:e||"",r||0===o||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=i||"",o>0?(s.data["xn"+o]=t+r,s.rxp["xn"+o]=n,s["xn"+o]=t,s.plugin||(s.xfirst=new ke(s,"xn"+o,t,r,s.xfirst||s,0,s.n,n,s.pr),s.xfirst.xs0=0),s):(s.data={s:t+r},s.rxp={},s.s=t,s.c=r,s.r=n,s)):(s["xs"+o]+=t+(i||""),s)};var Ce=function(e,t){t=t||{},this.p=t.prefix&&J(e)||e,l[e]=l[this.p]=this,this.format=t.formatter||ve(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},Se=q._registerComplexSpecialProp=function(e,t,r){"object"!==s(t)&&(t={parser:r});var i,n=e.split(","),a=t.defaultValue;for(r=r||[a],i=0;i<n.length;i++)t.prefix=0===i&&t.prefix,t.defaultValue=r[i]||a,new Ce(n[i],t)},Ee=q._registerPluginProp=function(e){if(!l[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Se(e,{parser:function(e,r,i,n,a,s,o){var c=u.com.greensock.plugins[t];return c?(c._cssRegister(),l[i].parse(e,r,i,n,a,s,o)):(Y("Error: "+t+" js file not loaded."),a)}})}};(d=Ce.prototype).parseComplex=function(e,t,r,i,n,a){var s,o,c,u,l,d,h=this.keyword;if(this.multi&&(M.test(r)||M.test(t)?(o=t.replace(M,"|").split("|"),c=r.replace(M,"|").split("|")):h&&(o=[t],c=[r])),c){for(u=c.length>o.length?c.length:o.length,s=0;s<u;s++)t=o[s]=o[s]||this.dflt,r=c[s]=c[s]||this.dflt,h&&(l=t.indexOf(h))!==(d=r.indexOf(h))&&(-1===d?o[s]=o[s].split(h).join(""):-1===l&&(o[s]+=" "+h));t=o.join(", "),r=c.join(", ")}return Pe(e,this.p,t,r,this.clrs,this.dflt,i,this.pr,n,a)},d.parse=function(e,t,r,i,a,s,o){return this.parseComplex(e.style,this.format(te(e,this.p,n,!1,this.dflt)),this.format(t),a,s)},c.registerSpecialProp=function(e,t,r){Se(e,{parser:function(e,i,n,a,s,o,c){var u=new ke(e,n,0,0,s,2,n,!1,r);return u.plugin=o,u.setRatio=t(e,i,a._tween,n),u},priority:r})},c.useSVGTransformAttr=!0;var Te,xe,De,Oe,je,Ie="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Le=J("transform"),Re=X+"transform",Me=J("transformOrigin"),Fe=null!==J("perspective"),Ne=q.Transform=function(){this.perspective=parseFloat(c.defaultTransformPerspective)||0,this.force3D=!(!1===c.defaultForce3D||!Fe)&&(c.defaultForce3D||"auto")},Qe=o.SVGElement,$e=function(e,t,r){var i,n=B.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(i in r)n.setAttributeNS(null,i.replace(a,"$1-$2").toLowerCase(),r[i]);return t.appendChild(n),n},Ue=B.documentElement||{},Be=(je=y||/Android/i.test(G)&&!o.chrome,B.createElementNS&&!je&&(xe=$e("svg",Ue),Oe=(De=$e("rect",xe,{width:100,height:50,x:100})).getBoundingClientRect().width,De.style[Me]="50% 50%",De.style[Le]="scaleX(0.5)",je=Oe===De.getBoundingClientRect().width&&!(m&&Fe),Ue.removeChild(xe)),je),Ve=function(e,t,r,i,n,a){var s,o,u,l,d,h,p,f,m,g,y,v,b,_,k=e._gsTransform,w=Ke(e,!0);k&&(b=k.xOrigin,_=k.yOrigin),(!i||(s=i.split(" ")).length<2)&&(0===(p=e.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),s=[(-1!==(t=ue(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*p.width:parseFloat(t[0]))+p.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*p.height:parseFloat(t[1]))+p.y]),r.xOrigin=l=parseFloat(s[0]),r.yOrigin=d=parseFloat(s[1]),i&&w!==Ge&&(h=w[0],p=w[1],f=w[2],m=w[3],g=w[4],y=w[5],(v=h*m-p*f)&&(o=l*(m/v)+d*(-f/v)+(f*y-m*g)/v,u=l*(-p/v)+d*(h/v)-(h*y-p*g)/v,l=r.xOrigin=s[0]=o,d=r.yOrigin=s[1]=u)),k&&(a&&(r.xOffset=k.xOffset,r.yOffset=k.yOffset,k=r),n||!1!==n&&!1!==c.defaultSmoothOrigin?(o=l-b,u=d-_,k.xOffset+=o*w[0]+u*w[2]-o,k.yOffset+=o*w[1]+u*w[3]-u):k.xOffset=k.yOffset=0),a||e.setAttribute("data-svg-origin",s.join(" "))},ze=function e(t){var r,i=V("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(Ue.appendChild(i),i.appendChild(this),this.style.display="block",t)try{r=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=e}catch(e){}else this._originalGetBBox&&(r=this._originalGetBBox());return a?n.insertBefore(this,a):n.appendChild(this),Ue.removeChild(i),this.style.cssText=s,r},He=function(e){try{return e.getBBox()}catch(t){return ze.call(e,!0)}},qe=function(e){return!(!Qe||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!He(e))},Ge=[1,0,0,1,0,0],Ke=function(e,t){var r,i,n,a,s,o,c=e._gsTransform||new Ne,u=1e5,l=e.style;if(Le?i=te(e,Re,null,!0):e.currentStyle&&(i=(i=e.currentStyle.filter.match(L))&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),c.x||0,c.y||0].join(","):""),r=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,!Le||!(o=!ee(e)||"none"===ee(e).display)&&e.parentNode||(o&&(a=l.display,l.display="block"),e.parentNode||(s=1,Ue.appendChild(e)),r=!(i=te(e,Re,null,!0))||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,a?l.display=a:o&&Je(l,"display"),s&&Ue.removeChild(e)),(c.svg||e.getCTM&&qe(e))&&(r&&-1!==(l[Le]+"").indexOf("matrix")&&(i=l[Le],r=0),n=e.getAttribute("transform"),r&&n&&(i="matrix("+(n=e.transform.baseVal.consolidate().matrix).a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")",r=0)),r)return Ge;for(n=(i||"").match(_)||[],Ae=n.length;--Ae>-1;)a=Number(n[Ae]),n[Ae]=(s=a-(a|=0))?(s*u+(s<0?-.5:.5)|0)/u+a:a;return t&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},We=q.getTransform=function(e,r,i,n){if(e._gsTransform&&i&&!n)return e._gsTransform;var a,s,o,u,l,d,h=i&&e._gsTransform||new Ne,p=h.scaleX<0,f=2e-5,m=1e5,g=Fe&&(parseFloat(te(e,Me,r,!1,"0 0 0").split(" ")[2])||h.zOrigin)||0,y=parseFloat(c.defaultTransformPerspective)||0;if(h.svg=!(!e.getCTM||!qe(e)),h.svg&&(Ve(e,te(e,Me,r,!1,"50% 50%")+"",h,e.getAttribute("data-svg-origin")),Te=c.useSVGTransformAttr||Be),(a=Ke(e))!==Ge){if(16===a.length){var v,b,_,k,w,P=a[0],A=a[1],C=a[2],S=a[3],E=a[4],T=a[5],x=a[6],D=a[7],O=a[8],j=a[9],I=a[10],L=a[12],R=a[13],M=a[14],F=a[11],N=Math.atan2(x,I);h.zOrigin&&(L=O*(M=-h.zOrigin)-a[12],R=j*M-a[13],M=I*M+h.zOrigin-a[14]),h.rotationX=N*Q,N&&(v=E*(k=Math.cos(-N))+O*(w=Math.sin(-N)),b=T*k+j*w,_=x*k+I*w,O=E*-w+O*k,j=T*-w+j*k,I=x*-w+I*k,F=D*-w+F*k,E=v,T=b,x=_),N=Math.atan2(-C,I),h.rotationY=N*Q,N&&(b=A*(k=Math.cos(-N))-j*(w=Math.sin(-N)),_=C*k-I*w,j=A*w+j*k,I=C*w+I*k,F=S*w+F*k,P=v=P*k-O*w,A=b,C=_),N=Math.atan2(A,P),h.rotation=N*Q,N&&(v=P*(k=Math.cos(N))+A*(w=Math.sin(N)),b=E*k+T*w,_=O*k+j*w,A=A*k-P*w,T=T*k-E*w,j=j*k-O*w,P=v,E=b,O=_),h.rotationX&&Math.abs(h.rotationX)+Math.abs(h.rotation)>359.9&&(h.rotationX=h.rotation=0,h.rotationY=180-h.rotationY),N=Math.atan2(E,T),h.scaleX=(Math.sqrt(P*P+A*A+C*C)*m+.5|0)/m,h.scaleY=(Math.sqrt(T*T+x*x)*m+.5|0)/m,h.scaleZ=(Math.sqrt(O*O+j*j+I*I)*m+.5|0)/m,P/=h.scaleX,E/=h.scaleY,A/=h.scaleX,T/=h.scaleY,Math.abs(N)>f?(h.skewX=N*Q,E=0,"simple"!==h.skewType&&(h.scaleY*=1/Math.cos(N))):h.skewX=0,h.perspective=F?1/(F<0?-F:F):0,h.x=L,h.y=R,h.z=M,h.svg&&(h.x-=h.xOrigin-(h.xOrigin*P-h.yOrigin*E),h.y-=h.yOrigin-(h.yOrigin*A-h.xOrigin*T))}else if(!Fe||n||!a.length||h.x!==a[4]||h.y!==a[5]||!h.rotationX&&!h.rotationY){var $=a.length>=6,U=$?a[0]:1,B=a[1]||0,V=a[2]||0,z=$?a[3]:1;h.x=a[4]||0,h.y=a[5]||0,o=Math.sqrt(U*U+B*B),u=Math.sqrt(z*z+V*V),l=U||B?Math.atan2(B,U)*Q:h.rotation||0,d=V||z?Math.atan2(V,z)*Q+l:h.skewX||0,h.scaleX=o,h.scaleY=u,h.rotation=l,h.skewX=d,Fe&&(h.rotationX=h.rotationY=h.z=0,h.perspective=y,h.scaleZ=1),h.svg&&(h.x-=h.xOrigin-(h.xOrigin*U+h.yOrigin*V),h.y-=h.yOrigin-(h.xOrigin*B+h.yOrigin*z))}for(s in Math.abs(h.skewX)>90&&Math.abs(h.skewX)<270&&(p?(h.scaleX*=-1,h.skewX+=h.rotation<=0?180:-180,h.rotation+=h.rotation<=0?180:-180):(h.scaleY*=-1,h.skewX+=h.skewX<=0?180:-180)),h.zOrigin=g,h)h[s]<f&&h[s]>-f&&(h[s]=0)}return i&&(e._gsTransform=h,h.svg&&(Te&&e.style[Le]?t.delayedCall(.001,(function(){Je(e.style,Le)})):!Te&&e.getAttribute("transform")&&t.delayedCall(.001,(function(){e.removeAttribute("transform")})))),h},Ye=function(e){var t,r,i=this.data,n=-i.rotation*N,a=n+i.skewX*N,s=1e5,o=(Math.cos(n)*i.scaleX*s|0)/s,c=(Math.sin(n)*i.scaleX*s|0)/s,u=(Math.sin(a)*-i.scaleY*s|0)/s,l=(Math.cos(a)*i.scaleY*s|0)/s,d=this.t.style,h=this.t.currentStyle;if(h){r=c,c=-u,u=-r,t=h.filter,d.filter="";var p,f,m=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==h.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+c+", M21="+u+", M22="+l,_=i.x+m*i.xPercent/100,k=i.y+g*i.yPercent/100;if(null!=i.ox&&(_+=(p=(i.oxp?m*i.ox*.01:i.ox)-m/2)-(p*o+(f=(i.oyp?g*i.oy*.01:i.oy)-g/2)*c),k+=f-(p*u+f*l)),b+=v?", Dx="+((p=m/2)-(p*o+(f=g/2)*c)+_)+", Dy="+(f-(p*u+f*l)+k)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?d.filter=t.replace(R,b):d.filter=b+" "+t,0!==e&&1!==e||1===o&&0===c&&0===u&&1===l&&(v&&-1===b.indexOf("Dx=0, Dy=0")||C.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&d.removeAttribute("filter")),!v){var w,P,S,E=y<8?1:-1;for(p=i.ieOffsetX||0,f=i.ieOffsetY||0,i.ieOffsetX=Math.round((m-((o<0?-o:o)*m+(c<0?-c:c)*g))/2+_),i.ieOffsetY=Math.round((g-((l<0?-l:l)*g+(u<0?-u:u)*m))/2+k),Ae=0;Ae<4;Ae++)S=(r=-1!==(w=h[P=oe[Ae]]).indexOf("px")?parseFloat(w):re(this.t,P,parseFloat(w),w.replace(A,""))||0)!==i[P]?Ae<2?-i.ieOffsetX:-i.ieOffsetY:Ae<2?p-i.ieOffsetX:f-i.ieOffsetY,d[P]=(i[P]=Math.round(r-S*(0===Ae||2===Ae?1:E)))+"px"}}},Xe=q.set3DTransformRatio=q.setTransformRatio=function(e){var t,r,i,n,a,s,o,c,u,l,d,h,p,f,g,y,v,b,_,k,w,P,A,C=this.data,S=this.t.style,E=C.rotation,T=C.rotationX,x=C.rotationY,D=C.scaleX,O=C.scaleY,j=C.scaleZ,I=C.x,L=C.y,R=C.z,M=C.svg,F=C.perspective,Q=C.force3D,$=C.skewY,U=C.skewX;if($&&(U+=$,E+=$),!((1!==e&&0!==e||"auto"!==Q||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&Q||R||F||x||T||1!==j)||Te&&M||!Fe)E||U||M?(E*=N,P=U*N,A=1e5,r=Math.cos(E)*D,a=Math.sin(E)*D,i=Math.sin(E-P)*-O,s=Math.cos(E-P)*O,P&&"simple"===C.skewType&&(t=Math.tan(P-$*N),i*=t=Math.sqrt(1+t*t),s*=t,$&&(t=Math.tan($*N),r*=t=Math.sqrt(1+t*t),a*=t)),M&&(I+=C.xOrigin-(C.xOrigin*r+C.yOrigin*i)+C.xOffset,L+=C.yOrigin-(C.xOrigin*a+C.yOrigin*s)+C.yOffset,Te&&(C.xPercent||C.yPercent)&&(g=this.t.getBBox(),I+=.01*C.xPercent*g.width,L+=.01*C.yPercent*g.height),I<(g=1e-6)&&I>-g&&(I=0),L<g&&L>-g&&(L=0)),_=(r*A|0)/A+","+(a*A|0)/A+","+(i*A|0)/A+","+(s*A|0)/A+","+I+","+L+")",M&&Te?this.t.setAttribute("transform","matrix("+_):S[Le]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix(":"matrix(")+_):S[Le]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix(":"matrix(")+D+",0,0,"+O+","+I+","+L+")";else{if(m&&(D<(g=1e-4)&&D>-g&&(D=j=2e-5),O<g&&O>-g&&(O=j=2e-5),!F||C.z||C.rotationX||C.rotationY||(F=0)),E||U)E*=N,y=r=Math.cos(E),v=a=Math.sin(E),U&&(E-=U*N,y=Math.cos(E),v=Math.sin(E),"simple"===C.skewType&&(t=Math.tan((U-$)*N),y*=t=Math.sqrt(1+t*t),v*=t,C.skewY&&(t=Math.tan($*N),r*=t=Math.sqrt(1+t*t),a*=t))),i=-v,s=y;else{if(!(x||T||1!==j||F||M))return void(S[Le]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) translate3d(":"translate3d(")+I+"px,"+L+"px,"+R+"px)"+(1!==D||1!==O?" scale("+D+","+O+")":""));r=s=1,i=a=0}l=1,n=o=c=u=d=h=0,p=F?-1/F:0,f=C.zOrigin,g=1e-6,k=",",w="0",(E=x*N)&&(y=Math.cos(E),c=-(v=Math.sin(E)),d=p*-v,n=r*v,o=a*v,l=y,p*=y,r*=y,a*=y),(E=T*N)&&(t=i*(y=Math.cos(E))+n*(v=Math.sin(E)),b=s*y+o*v,u=l*v,h=p*v,n=i*-v+n*y,o=s*-v+o*y,l*=y,p*=y,i=t,s=b),1!==j&&(n*=j,o*=j,l*=j,p*=j),1!==O&&(i*=O,s*=O,u*=O,h*=O),1!==D&&(r*=D,a*=D,c*=D,d*=D),(f||M)&&(f&&(I+=n*-f,L+=o*-f,R+=l*-f+f),M&&(I+=C.xOrigin-(C.xOrigin*r+C.yOrigin*i)+C.xOffset,L+=C.yOrigin-(C.xOrigin*a+C.yOrigin*s)+C.yOffset),I<g&&I>-g&&(I=w),L<g&&L>-g&&(L=w),R<g&&R>-g&&(R=0)),_=C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix3d(":"matrix3d(",_+=(r<g&&r>-g?w:r)+k+(a<g&&a>-g?w:a)+k+(c<g&&c>-g?w:c),_+=k+(d<g&&d>-g?w:d)+k+(i<g&&i>-g?w:i)+k+(s<g&&s>-g?w:s),T||x||1!==j?(_+=k+(u<g&&u>-g?w:u)+k+(h<g&&h>-g?w:h)+k+(n<g&&n>-g?w:n),_+=k+(o<g&&o>-g?w:o)+k+(l<g&&l>-g?w:l)+k+(p<g&&p>-g?w:p)+k):_+=",0,0,0,0,1,0,",_+=I+k+L+k+R+k+(F?1+-R/F:1)+")",S[Le]=_}};(d=Ne.prototype).x=d.y=d.z=d.skewX=d.skewY=d.rotation=d.rotationX=d.rotationY=d.zOrigin=d.xPercent=d.yPercent=d.xOffset=d.yOffset=0,d.scaleX=d.scaleY=d.scaleZ=1,Se("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,r,i,a,o,u){if(i._lastParsedTransform===u)return a;i._lastParsedTransform=u;var l,d=u.scale&&"function"==typeof u.scale?u.scale:0;"function"==typeof u[r]&&(l=u[r],u[r]=t),d&&(u.scale=d(b,e));var h,p,f,m,g,y,_,k,w,P=e._gsTransform,A=e.style,C=1e-6,S=Ie.length,E=u,T={},x="transformOrigin",D=We(e,n,!0,E.parseTransform),O=E.transform&&("function"==typeof E.transform?E.transform(b,v):E.transform);if(D.skewType=E.skewType||D.skewType||c.defaultSkewType,i._transform=D,O&&"string"==typeof O&&Le)(p=z.style)[Le]=O,p.display="block",p.position="absolute",-1!==O.indexOf("%")&&(p.width=te(e,"width"),p.height=te(e,"height")),B.body.appendChild(z),h=We(z,null,!1),"simple"===D.skewType&&(h.scaleY*=Math.cos(h.skewX*N)),D.svg&&(y=D.xOrigin,_=D.yOrigin,h.x-=D.xOffset,h.y-=D.yOffset,(E.transformOrigin||E.svgOrigin)&&(O={},Ve(e,ue(E.transformOrigin),O,E.svgOrigin,E.smoothOrigin,!0),y=O.xOrigin,_=O.yOrigin,h.x-=O.xOffset-D.xOffset,h.y-=O.yOffset-D.yOffset),(y||_)&&(k=Ke(z,!0),h.x-=y-(y*k[0]+_*k[2]),h.y-=_-(y*k[1]+_*k[3]))),B.body.removeChild(z),h.perspective||(h.perspective=D.perspective),null!=E.xPercent&&(h.xPercent=de(E.xPercent,D.xPercent)),null!=E.yPercent&&(h.yPercent=de(E.yPercent,D.yPercent));else if("object"===s(E)){if(h={scaleX:de(null!=E.scaleX?E.scaleX:E.scale,D.scaleX),scaleY:de(null!=E.scaleY?E.scaleY:E.scale,D.scaleY),scaleZ:de(E.scaleZ,D.scaleZ),x:de(E.x,D.x),y:de(E.y,D.y),z:de(E.z,D.z),xPercent:de(E.xPercent,D.xPercent),yPercent:de(E.yPercent,D.yPercent),perspective:de(E.transformPerspective,D.perspective)},null!=(g=E.directionalRotation))if("object"===s(g))for(p in g)E[p]=g[p];else E.rotation=g;"string"==typeof E.x&&-1!==E.x.indexOf("%")&&(h.x=0,h.xPercent=de(E.x,D.xPercent)),"string"==typeof E.y&&-1!==E.y.indexOf("%")&&(h.y=0,h.yPercent=de(E.y,D.yPercent)),h.rotation=he("rotation"in E?E.rotation:"shortRotation"in E?E.shortRotation+"_short":"rotationZ"in E?E.rotationZ:D.rotation,D.rotation,"rotation",T),Fe&&(h.rotationX=he("rotationX"in E?E.rotationX:"shortRotationX"in E?E.shortRotationX+"_short":D.rotationX||0,D.rotationX,"rotationX",T),h.rotationY=he("rotationY"in E?E.rotationY:"shortRotationY"in E?E.shortRotationY+"_short":D.rotationY||0,D.rotationY,"rotationY",T)),h.skewX=he(E.skewX,D.skewX),h.skewY=he(E.skewY,D.skewY)}for(Fe&&null!=E.force3D&&(D.force3D=E.force3D,m=!0),(f=D.force3D||D.z||D.rotationX||D.rotationY||h.z||h.rotationX||h.rotationY||h.perspective)||null==E.scale||(h.scaleZ=1);--S>-1;)((O=h[w=Ie[S]]-D[w])>C||O<-C||null!=E[w]||null!=$[w])&&(m=!0,a=new ke(D,w,D[w],O,a),w in T&&(a.e=T[w]),a.xs0=0,a.plugin=o,i._overwriteProps.push(a.n));return O=E.transformOrigin,D.svg&&(O||E.svgOrigin)&&(y=D.xOffset,_=D.yOffset,Ve(e,ue(O),h,E.svgOrigin,E.smoothOrigin),a=we(D,"xOrigin",(P?D:h).xOrigin,h.xOrigin,a,x),a=we(D,"yOrigin",(P?D:h).yOrigin,h.yOrigin,a,x),y===D.xOffset&&_===D.yOffset||(a=we(D,"xOffset",P?y:D.xOffset,D.xOffset,a,x),a=we(D,"yOffset",P?_:D.yOffset,D.yOffset,a,x)),O="0px 0px"),(O||Fe&&f&&D.zOrigin)&&(Le?(m=!0,w=Me,O=(O||te(e,w,n,!1,"50% 50%"))+"",(a=new ke(A,w,0,0,a,-1,x)).b=A[w],a.plugin=o,Fe?(p=D.zOrigin,O=O.split(" "),D.zOrigin=(O.length>2&&(0===p||"0px"!==O[2])?parseFloat(O[2]):p)||0,a.xs0=a.e=O[0]+" "+(O[1]||"50%")+" 0px",(a=new ke(D,"zOrigin",0,0,a,-1,a.n)).b=p,a.xs0=a.e=D.zOrigin):a.xs0=a.e=O):ue(O+"",D)),m&&(i._transformType=D.svg&&Te||!f&&3!==this._transformType?2:3),l&&(u[r]=l),d&&(u.scale=d),a},prefix:!0}),Se("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Se("borderRadius",{defaultValue:"0px",parser:function(e,t,r,a,s,o){t=this.format(t);var c,u,l,d,h,p,f,m,g,y,v,b,_,k,w,P,A=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],C=e.style;for(g=parseFloat(e.offsetWidth),y=parseFloat(e.offsetHeight),c=t.split(" "),u=0;u<A.length;u++)this.p.indexOf("border")&&(A[u]=J(A[u])),-1!==(h=d=te(e,A[u],n,!1,"0px")).indexOf(" ")&&(d=h.split(" "),h=d[0],d=d[1]),p=l=c[u],f=parseFloat(h),b=h.substr((f+"").length),(_="="===p.charAt(1))?(m=parseInt(p.charAt(0)+"1",10),p=p.substr(2),m*=parseFloat(p),v=p.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(p),v=p.substr((m+"").length)),""===v&&(v=i[r]||b),v!==b&&(k=re(e,"borderLeft",f,b),w=re(e,"borderTop",f,b),"%"===v?(h=k/g*100+"%",d=w/y*100+"%"):"em"===v?(h=k/(P=re(e,"borderLeft",1,"em"))+"em",d=w/P+"em"):(h=k+"px",d=w+"px"),_&&(p=parseFloat(h)+m+v,l=parseFloat(d)+m+v)),s=Pe(C,A[u],h+" "+d,p+" "+l,!1,"0px",s);return s},prefix:!0,formatter:ve("0px 0px 0px 0px",!1,!0)}),Se("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,r,i,a,s){return Pe(e.style,r,this.format(te(e,r,n,!1,"0px 0px")),this.format(t),!1,"0px",a)},prefix:!0,formatter:ve("0px 0px",!1,!0)}),Se("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,r,i,a,s){var o,c,u,l,d,h,p="background-position",f=n||ee(e,null),m=this.format((f?y?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==m.indexOf("%")!=(-1!==g.indexOf("%"))&&g.split(",").length<2&&(h=te(e,"backgroundImage").replace(O,""))&&"none"!==h){for(o=m.split(" "),c=g.split(" "),H.setAttribute("src",h),u=2;--u>-1;)(l=-1!==(m=o[u]).indexOf("%"))!=(-1!==c[u].indexOf("%"))&&(d=0===u?e.offsetWidth-H.width:e.offsetHeight-H.height,o[u]=l?parseFloat(m)/100*d+"px":parseFloat(m)/d*100+"%");m=o.join(" ")}return this.parseComplex(e.style,m,g,a,s)},formatter:ue}),Se("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:ue(-1===e.indexOf(" ")?e+" "+e:e)}}),Se("perspective",{defaultValue:"0px",prefix:!0}),Se("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Se("transformStyle",{prefix:!0}),Se("backfaceVisibility",{prefix:!0}),Se("userSelect",{prefix:!0}),Se("margin",{parser:be("marginTop,marginRight,marginBottom,marginLeft")}),Se("padding",{parser:be("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Se("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,r,i,a,s){var o,c,u;return y<9?(c=e.currentStyle,u=y<8?" ":",",o="rect("+c.clipTop+u+c.clipRight+u+c.clipBottom+u+c.clipLeft+")",t=this.format(t).split(",").join(u)):(o=this.format(te(e,this.p,n,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,o,t,a,s)}}),Se("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Se("autoRound,strictUnits",{parser:function(e,t,r,i,n){return n}}),Se("border",{defaultValue:"0px solid #000",parser:function(e,t,r,i,a,s){var o=te(e,"borderTopWidth",n,!1,"0px"),c=this.format(t).split(" "),u=c[0].replace(A,"");return"px"!==u&&(o=parseFloat(o)/re(e,"borderTopWidth",1,u)+u),this.parseComplex(e.style,this.format(o+" "+te(e,"borderTopStyle",n,!1,"solid")+" "+te(e,"borderTopColor",n,!1,"#000")),c.join(" "),a,s)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ye)||["#000"])[0]}}),Se("borderWidth",{parser:be("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Se("float,cssFloat,styleFloat",{parser:function(e,t,r,i,n,a){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new ke(s,o,0,0,n,-1,r,!1,0,s[o],t)}});var Ze=function(e){var t,r=this.t,i=r.filter||te(this.data,"filter")||"",n=this.s+this.c*e|0;100===n&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(r.removeAttribute("filter"),t=!te(this.data,"filter")):(r.filter=i.replace(E,""),t=!0)),t||(this.xn1&&(r.filter=i=i||"alpha(opacity="+n+")"),-1===i.indexOf("pacity")?0===n&&this.xn1||(r.filter=i+" alpha(opacity="+n+")"):r.filter=i.replace(C,"opacity="+n))};Se("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,r,i,a,s){var o=parseFloat(te(e,"opacity",n,!1,"1")),c=e.style,u="autoAlpha"===r;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+o),u&&1===o&&"hidden"===te(e,"visibility",n)&&0!==t&&(o=0),K?a=new ke(c,"opacity",o,t-o,a):((a=new ke(c,"opacity",100*o,100*(t-o),a)).xn1=u?1:0,c.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=e,a.plugin=s,a.setRatio=Ze),u&&((a=new ke(c,"visibility",0,0,a,-1,null,!1,0,0!==o?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(a.n),i._overwriteProps.push(r)),a}});var Je=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(x,"-$1").toLowerCase())):e.removeAttribute(t))},et=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,r=this.t.style;t;)t.v?r[t.p]=t.v:Je(r,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Se("className",{parser:function(e,t,i,a,s,o,c){var u,l,d,h,p,f=e.getAttribute("class")||"",m=e.style.cssText;if((s=a._classNamePT=new ke(e,i,0,0,s,2)).setRatio=et,s.pr=-11,r=!0,s.b=f,l=ne(e,n),d=e._gsClassPT){for(h={},p=d.data;p;)h[p.p]=1,p=p._next;d.setRatio(1)}return e._gsClassPT=s,s.e="="!==t.charAt(1)?t:f.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",s.e),u=ae(e,l,ne(e),c,h),e.setAttribute("class",f),s.data=u.firstMPT,e.style.cssText=m,s.xfirst=a.parse(e,u.difs,s,o)}});var tt=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,r,i,n,a,s=this.t.style,o=l.transform.parse;if("all"===this.e)s.cssText="",n=!0;else for(i=(t=this.e.split(" ").join("").split(",")).length;--i>-1;)r=t[i],l[r]&&(l[r].parse===o?n=!0:r="transformOrigin"===r?Me:l[r].p),Je(s,r);n&&(Je(s,Le),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Se("clearProps",{parser:function(e,t,i,n,a){return(a=new ke(e,i,0,0,a,2)).setRatio=tt,a.e=t,a.pr=-10,a.data=n._tween,r=!0,a}}),d="bezier,throwProps,physicsProps,physics2D".split(","),Ae=d.length;Ae--;)Ee(d[Ae]);(d=c.prototype)._firstPT=d._lastParsedTransform=d._transform=null,d._onInitTween=function(e,t,s,o){if(!e.nodeType)return!1;this._target=v=e,this._tween=s,this._vars=t,b=o,h=t.autoRound,r=!1,i=t.suffixMap||c.suffixMap,n=ee(e,""),a=this._overwriteProps;var u,d,m,y,_,k,w,P,A,C=e.style;if(p&&""===C.zIndex&&("auto"!==(u=te(e,"zIndex",n))&&""!==u||this._addLazySet(C,"zIndex",0)),"string"==typeof t&&(y=C.cssText,u=ne(e,n),C.cssText=y+";"+t,u=ae(e,u,ne(e)).difs,!K&&S.test(t)&&(u.opacity=parseFloat(RegExp.$1)),t=u,C.cssText=y),t.className?this._firstPT=d=l.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=d=this.parse(e,t,null),this._transformType){for(A=3===this._transformType,Le?f&&(p=!0,""===C.zIndex&&("auto"!==(w=te(e,"zIndex",n))&&""!==w||this._addLazySet(C,"zIndex",0)),g&&this._addLazySet(C,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(A?"visible":"hidden"))):C.zoom=1,m=d;m&&m._next;)m=m._next;P=new ke(e,"transform",0,0,null,2),this._linkCSSP(P,null,m),P.setRatio=Le?Xe:Ye,P.data=this._transform||We(e,n,!0),P.tween=s,P.pr=-1,a.pop()}if(r){for(;d;){for(k=d._next,m=y;m&&m.pr>d.pr;)m=m._next;(d._prev=m?m._prev:_)?d._prev._next=d:y=d,(d._next=m)?m._prev=d:_=d,d=k}this._firstPT=y}return!0},d.parse=function(e,t,r,a){var s,o,c,u,d,p,f,m,g,y,_=e.style;for(s in t){if("function"==typeof(p=t[s])&&(p=p(b,v)),o=l[s])r=o.parse(e,p,s,this,r,a,t);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,e.style,"setProperty",ee(e).getPropertyValue(s)+"",p+"",s,!1,s);continue}d=te(e,s,n)+"",g="string"==typeof p,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||g&&T.test(p)?(g||(p=((p=me(p)).length>3?"rgba(":"rgb(")+p.join(",")+")"),r=Pe(_,s,d,p,!0,"transparent",r,0,a)):g&&F.test(p)?r=Pe(_,s,d,p,!0,null,r,0,a):(f=(c=parseFloat(d))||0===c?d.substr((c+"").length):"",""!==d&&"auto"!==d||("width"===s||"height"===s?(c=ce(e,s,n),f="px"):"left"===s||"top"===s?(c=ie(e,s,n),f="px"):(c="opacity"!==s?0:1,f="")),(y=g&&"="===p.charAt(1))?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),m=p.replace(A,"")):(u=parseFloat(p),m=g?p.replace(A,""):""),""===m&&(m=s in i?i[s]:f),p=u||0===u?(y?u+c:u)+m:t[s],f!==m&&(""===m&&"lineHeight"!==s||(u||0===u)&&c&&(c=re(e,s,c,f),"%"===m?(c/=re(e,s,100,"%")/100,!0!==t.strictUnits&&(d=c+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?c/=re(e,s,1,m):"px"!==m&&(u=re(e,s,u,m),m="px"),y&&(u||0===u)&&(p=u+c+m))),y&&(u+=c),!c&&0!==c||!u&&0!==u?void 0!==_[s]&&(p||p+""!="NaN"&&null!=p)?(r=new ke(_,s,u||c||0,0,r,-1,s,!1,0,d,p)).xs0="none"!==p||"display"!==s&&-1===s.indexOf("Style")?p:d:Y("invalid "+s+" tween value: "+t[s]):(r=new ke(_,s,c,u-c,r,0,s,!1!==h&&("px"===m||"zIndex"===s),0,d,p)).xs0=m)}a&&r&&!r.plugin&&(r.plugin=a)}return r},d.setRatio=function(e){var t,r,i,n=this._firstPT,a=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;n;){if(t=n.c*e+n.s,n.r?t=n.r(t):t<a&&t>-a&&(t=0),n.type)if(1===n.type)if(2===(i=n.l))n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2;else if(3===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(r=n.xs0+t+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(e);else n.t[n.p]=t+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(e),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(t=n.r(n.s+n.c),n.type){if(1===n.type){for(i=n.l,r=n.xs0+t+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}}else n.t[n.p]=t+n.xs0;else n.t[n.p]=n.e;else n.setRatio(e);n=n._next}},d._enableTransforms=function(e){this._transform=this._transform||We(this._target,n,!0),this._transformType=this._transform.svg&&Te||!e&&3!==this._transformType?2:3};var rt=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};d._addLazySet=function(e,t,r){var i=this._firstPT=new ke(e,t,0,0,this._firstPT,2);i.e=r,i.setRatio=rt,i.data=this},d._linkCSSP=function(e,t,r,i){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,i=!0),r?r._next=e:i||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=r),e},d._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},d._kill=function(t){var r,i,n,a=t;if(t.autoAlpha||t.alpha){for(i in a={},t)a[i]=t[i];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(t.className&&(r=this._classNamePT)&&((n=r.xfirst)&&n._prev?this._linkCSSP(n._prev,r._next,n._prev._prev):n===this._firstPT&&(this._firstPT=r._next),r._next&&this._linkCSSP(r._next,r._next._next,n._prev),this._classNamePT=null),r=this._firstPT;r;)r.plugin&&r.plugin!==i&&r.plugin._kill&&(r.plugin._kill(t),i=r.plugin),r=r._next;return e.prototype._kill.call(this,a)};var it=function e(t,r,i){var n,a,s,o;if(t.slice)for(a=t.length;--a>-1;)e(t[a],r,i);else for(a=(n=t.childNodes).length;--a>-1;)o=(s=n[a]).type,s.style&&(r.push(ne(s)),i&&i.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||e(s,r,i)};return c.cascadeTo=function(e,r,i){var n,a,s,o,c=t.to(e,r,i),u=[c],l=[],d=[],h=[],p=t._internals.reservedProps;for(e=c._targets||c.target,it(e,l,h),c.render(r,!0,!0),it(e,d),c.render(0,!0,!0),c._enabled(!0),n=h.length;--n>-1;)if((a=ae(h[n],l[n],d[n])).firstMPT){for(s in a=a.difs,i)p[s]&&(a[s]=i[s]);for(s in o={},a)o[s]=l[n][s];u.push(t.fromTo(h[n],r,o,a))}return u},e.activate([c]),c}),!0)})),o._gsDefine&&o._gsQueue.pop()(),function(s){"use strict";var c=function(){return(o.GreenSockGlobals||o).CSSPlugin};e.exports?(r(97),e.exports=c()):(n=[r(97)],void 0===(a="function"==typeof(i=c)?i.apply(t,n):i)||(e.exports=a))}()},6608:function(e,t,r){var i,n,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var o=e.exports&&void 0!==r.g?r.g:this||window;(o._gsQueue||(o._gsQueue=[])).push((function(){"use strict";var e=(o.document||{}).documentElement,t=o,r=function(r,i){var n="x"===i?"Width":"Height",a="scroll"+n,s="client"+n,o=document.body;return r===t||r===e||r===o?Math.max(e[a],o[a])-(t["inner"+n]||e[s]||o[s]):r[a]-r["offset"+n]},i=function(r,i){var n="scroll"+("x"===i?"Left":"Top");return r===t&&(null!=r.pageXOffset?n="page"+i.toUpperCase()+"Offset":r=null!=e[n]?e:document.body),function(){return r[n]}},n=function(r,n){var a,s=(a=r,"string"==typeof a&&(a=TweenLite.selector(a)),a.length&&a!==t&&a[0]&&a[0].style&&!a.nodeType&&(a=a[0]),a===t||a.nodeType&&a.style?a:null).getBoundingClientRect(),o=document.body,c=!n||n===t||n===o,u=c?{top:e.clientTop-(window.pageYOffset||e.scrollTop||o.scrollTop||0),left:e.clientLeft-(window.pageXOffset||e.scrollLeft||o.scrollLeft||0)}:n.getBoundingClientRect(),l={x:s.left-u.left,y:s.top-u.top};return!c&&n&&(l.x+=i(n,"x")(),l.y+=i(n,"y")()),l},a=function(e,t,i){var a=s(e);return isNaN(e)?"number"===a||"string"===a&&"="===e.charAt(1)?e:"max"===e?r(t,i):Math.min(r(t,i),n(e,t)[i]):parseFloat(e)},c=o._gsDefine.plugin({propName:"scrollTo",API:2,global:!0,version:"1.9.1",init:function(e,r,n){return this._wdw=e===t,this._target=e,this._tween=n,"object"!==s(r)?"string"==typeof(r={y:r}).y&&"max"!==r.y&&"="!==r.y.charAt(1)&&(r.x=r.y):r.nodeType&&(r={y:r,x:r}),this.vars=r,this._autoKill=!1!==r.autoKill,this.getX=i(e,"x"),this.getY=i(e,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=r.x?(this._addTween(this,"x",this.x,a(r.x,e,"x")-(r.offsetX||0),"scrollTo_x",!0),this._overwriteProps.push("scrollTo_x")):this.skipX=!0,null!=r.y?(this._addTween(this,"y",this.y,a(r.y,e,"y")-(r.offsetY||0),"scrollTo_y",!0),this._overwriteProps.push("scrollTo_y")):this.skipY=!0,!0},set:function(e){this._super.setRatio.call(this,e);var i=this._wdw||!this.skipX?this.getX():this.xPrev,n=this._wdw||!this.skipY?this.getY():this.yPrev,a=n-this.yPrev,s=i-this.xPrev,o=c.autoKillThreshold;this.x<0&&(this.x=0),this.y<0&&(this.y=0),this._autoKill&&(!this.skipX&&(s>o||s<-o)&&i<r(this._target,"x")&&(this.skipX=!0),!this.skipY&&(a>o||a<-o)&&n<r(this._target,"y")&&(this.skipY=!0),this.skipX&&this.skipY&&(this._tween.kill(),this.vars.onAutoKill&&this.vars.onAutoKill.apply(this.vars.onAutoKillScope||this._tween,this.vars.onAutoKillParams||[]))),this._wdw?t.scrollTo(this.skipX?i:this.x,this.skipY?n:this.y):(this.skipY||(this._target.scrollTop=this.y),this.skipX||(this._target.scrollLeft=this.x)),this.xPrev=this.x,this.yPrev=this.y}}),u=c.prototype;c.max=r,c.getOffset=n,c.buildGetter=i,c.autoKillThreshold=7,u._kill=function(e){return e.scrollTo_x&&(this.skipX=!0),e.scrollTo_y&&(this.skipY=!0),this._super._kill.call(this,e)}})),o._gsDefine&&o._gsQueue.pop()(),function(s){"use strict";var c=function(){return(o.GreenSockGlobals||o).ScrollToPlugin};e.exports?(r(97),e.exports=c()):(n=[r(97)],void 0===(a="function"==typeof(i=c)?i.apply(t,n):i)||(e.exports=a))}()},97:function(e,t,r){var i;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}!function(r,a){"use strict";var s={},o=r.document,c=r.GreenSockGlobals=r.GreenSockGlobals||r;if(c.TweenLite)return c.TweenLite;var u,l,d,h,p,f,m,g=function(e){var t,r=e.split("."),i=c;for(t=0;t<r.length;t++)i[r[t]]=i=i[r[t]]||{};return i},y=g("com.greensock"),v=1e-10,b=function(e){var t,r=[],i=e.length;for(t=0;t!==i;r.push(e[t++]));return r},_=function(){},k=(f=Object.prototype.toString,m=f.call([]),function(e){return null!=e&&(e instanceof Array||"object"===n(e)&&!!e.push&&f.call(e)===m)}),w={},P=function r(n,a,o,u){this.sc=w[n]?w[n].sc:[],w[n]=this,this.gsClass=null,this.func=o;var l=[];this.check=function(d){for(var h,p,f,m,y=a.length,v=y;--y>-1;)(h=w[a[y]]||new r(a[y],[])).gsClass?(l[y]=h.gsClass,v--):d&&h.sc.push(this);if(0===v&&o){if(f=(p=("com.greensock."+n).split(".")).pop(),m=g(p.join("."))[f]=this.gsClass=o.apply(o,l),u)if(c[f]=s[f]=m,e.exports)if("TweenLite"===n)for(y in e.exports=s.TweenLite=m,s)m[y]=s[y];else s.TweenLite&&(s.TweenLite[f]=m);else void 0===(i=function(){return m}.apply(t,[]))||(e.exports=i);for(y=0;y<this.sc.length;y++)this.sc[y].check()}},this.check(!0)},A=r._gsDefine=function(e,t,r,i){return new P(e,t,r,i)},C=y._class=function(e,t,r){return t=t||function(){},A(e,[],(function(){return t}),r),t};A.globals=c;var S=[0,0,1,1],E=C("easing.Ease",(function(e,t,r,i){this._func=e,this._type=r||0,this._power=i||0,this._params=t?S.concat(t):S}),!0),T=E.map={},x=E.register=function(e,t,r,i){for(var n,a,s,o,c=t.split(","),u=c.length,l=(r||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(a=c[u],n=i?C("easing."+a,null,!0):y.easing[a]||{},s=l.length;--s>-1;)o=l[s],T[a+"."+o]=T[o+a]=n[o]=e.getRatio?e:e[o]||new e};for((d=E.prototype)._calcEnd=!1,d.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,r=this._power,i=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===r?i*=i:2===r?i*=i*i:3===r?i*=i*i*i:4===r&&(i*=i*i*i*i),1===t?1-i:2===t?i:e<.5?i/2:1-i/2},l=(u=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--l>-1;)d=u[l]+",Power"+l,x(new E(null,null,1,l),d,"easeOut",!0),x(new E(null,null,2,l),d,"easeIn"+(0===l?",easeNone":"")),x(new E(null,null,3,l),d,"easeInOut");T.linear=y.easing.Linear.easeIn,T.swing=y.easing.Quad.easeInOut;var D=C("events.EventDispatcher",(function(e){this._listeners={},this._eventTarget=e||this}));(d=D.prototype).addEventListener=function(e,t,r,i,n){n=n||0;var a,s,o=this._listeners[e],c=0;for(this!==h||p||h.wake(),null==o&&(this._listeners[e]=o=[]),s=o.length;--s>-1;)(a=o[s]).c===t&&a.s===r?o.splice(s,1):0===c&&a.pr<n&&(c=s+1);o.splice(c,0,{c:t,s:r,up:i,pr:n})},d.removeEventListener=function(e,t){var r,i=this._listeners[e];if(i)for(r=i.length;--r>-1;)if(i[r].c===t)return void i.splice(r,1)},d.dispatchEvent=function(e){var t,r,i,n=this._listeners[e];if(n)for((t=n.length)>1&&(n=n.slice(0)),r=this._eventTarget;--t>-1;)(i=n[t])&&(i.up?i.c.call(i.s||r,{type:e,target:r}):i.c.call(i.s||r))};var O=r.requestAnimationFrame,j=r.cancelAnimationFrame,I=Date.now||function(){return(new Date).getTime()},L=I();for(l=(u=["ms","moz","webkit","o"]).length;--l>-1&&!O;)O=r[u[l]+"RequestAnimationFrame"],j=r[u[l]+"CancelAnimationFrame"]||r[u[l]+"CancelRequestAnimationFrame"];C("Ticker",(function(e,t){var r,i,n,a,s,c=this,u=I(),l=!(!1===t||!O)&&"auto",d=500,f=33,m=function e(t){var o,l,h=I()-L;h>d&&(u+=h-f),L+=h,c.time=(L-u)/1e3,o=c.time-s,(!r||o>0||!0===t)&&(c.frame++,s+=o+(o>=a?.004:a-o),l=!0),!0!==t&&(n=i(e)),l&&c.dispatchEvent("tick")};D.call(c),c.time=c.frame=0,c.tick=function(){m(!0)},c.lagSmoothing=function(e,t){if(!arguments.length)return d<1/v;d=e||1/v,f=Math.min(t,d,0)},c.sleep=function(){null!=n&&(l&&j?j(n):clearTimeout(n),i=_,n=null,c===h&&(p=!1))},c.wake=function(e){null!==n?c.sleep():e?u+=-L+(L=I()):c.frame>10&&(L=I()-d+5),i=0===r?_:l&&O?O:function(e){return setTimeout(e,1e3*(s-c.time)+1|0)},c===h&&(p=!0),m(2)},c.fps=function(e){if(!arguments.length)return r;a=1/((r=e)||60),s=this.time+a,c.wake()},c.useRAF=function(e){if(!arguments.length)return l;c.sleep(),l=e,c.fps(r)},c.fps(e),setTimeout((function(){"auto"===l&&c.frame<5&&"hidden"!==(o||{}).visibilityState&&c.useRAF(!1)}),1500)})),(d=y.Ticker.prototype=new y.events.EventDispatcher).constructor=y.Ticker;var R=C("core.Animation",(function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,J){p||h.wake();var r=this.vars.useFrames?Z:J;r.add(this,r._time),this.vars.paused&&this.paused(!0)}}));h=R.ticker=new y.Ticker,(d=R.prototype)._dirty=d._gc=d._initted=d._paused=!1,d._totalTime=d._time=0,d._rawPrevTime=-1,d._next=d._last=d._onUpdate=d._timeline=d.timeline=null,d._paused=!1,function e(){p&&I()-L>2e3&&("hidden"!==(o||{}).visibilityState||!h.lagSmoothing())&&h.wake();var t=setTimeout(e,2e3);t.unref&&t.unref()}(),d.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},d.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},d.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},d.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},d.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},d.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},d.render=function(e,t,r){},d.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},d.isActive=function(){var e,t=this._timeline,r=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=r&&e<r+this.totalDuration()/this._timeScale-1e-7},d._enabled=function(e,t){return p||h.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},d._kill=function(e,t){return this._enabled(!1,!1)},d.kill=function(e,t){return this._kill(e,t),this},d._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},d._swapSelfInParams=function(e){for(var t=e.length,r=e.concat();--t>-1;)"{self}"===e[t]&&(r[t]=this);return r},d._callback=function(e){var t=this.vars,r=t[e],i=t[e+"Params"],n=t[e+"Scope"]||t.callbackScope||this;switch(i?i.length:0){case 0:r.call(n);break;case 1:r.call(n,i[0]);break;case 2:r.call(n,i[0],i[1]);break;default:r.apply(n,i)}},d.eventCallback=function(e,t,r,i){if("on"===(e||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[e];null==t?delete n[e]:(n[e]=t,n[e+"Params"]=k(r)&&-1!==r.join("").indexOf("{self}")?this._swapSelfInParams(r):r,n[e+"Scope"]=i),"onUpdate"===e&&(this._onUpdate=t)}return this},d.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},d.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},d.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},d.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},d.totalTime=function(e,t,r){if(p||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!r&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,n=this._timeline;if(e>i&&!r&&(e=i),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?i-e:e)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(Q.length&&te(),this.render(e,t,!1),Q.length&&te())}return this},d.progress=d.totalProgress=function(e,t){var r=this.duration();return arguments.length?this.totalTime(r*e,t):r?this._time/r:this.ratio},d.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},d.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},d.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,r;for(e=e||v,this._timeline&&this._timeline.smoothChildTiming&&(r=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=r-(r-this._startTime)*this._timeScale/e),this._timeScale=e,r=this.timeline;r&&r.timeline;)r._dirty=!0,r.totalDuration(),r=r.timeline;return this},d.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},d.paused=function(e){if(!arguments.length)return this._paused;var t,r,i=this._timeline;return e!=this._paused&&i&&(p||e||h.wake(),r=(t=i.rawTime())-this._pauseTime,!e&&i.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==r&&this._initted&&this.duration()&&(t=i.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var M=C("core.SimpleTimeline",(function(e){R.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0}));(d=M.prototype=new R).constructor=M,d.kill()._gc=!1,d._first=d._last=d._recent=null,d._sortChildren=!1,d.add=d.insert=function(e,t,r,i){var n,a;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),n=this._last,this._sortChildren)for(a=e._startTime;n&&n._startTime>a;)n=n._prev;return n?(e._next=n._next,n._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=n,this._recent=e,this._timeline&&this._uncache(!0),this},d._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},d.render=function(e,t,r){var i,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;n;)i=n._next,(n._active||e>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,r):n.render((e-n._startTime)*n._timeScale,t,r)),n=i},d.rawTime=function(){return p||h.wake(),this._totalTime};var F=C("TweenLite",(function(e,t,i){if(R.call(this,t,i),this.render=F.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:F.selector(e)||e;var n,a,s,o=e.jquery||e.length&&e!==r&&e[0]&&(e[0]===r||e[0].nodeType&&e[0].style&&!e.nodeType),c=this.vars.overwrite;if(this._overwrite=c=null==c?X[F.defaultOverwrite]:"number"==typeof c?c>>0:X[c],(o||e instanceof Array||e.push&&k(e))&&"number"!=typeof e[0])for(this._targets=s=b(e),this._propLookup=[],this._siblings=[],n=0;n<s.length;n++)(a=s[n])?"string"!=typeof a?a.length&&a!==r&&a[0]&&(a[0]===r||a[0].nodeType&&a[0].style&&!a.nodeType)?(s.splice(n--,1),this._targets=s=s.concat(b(a))):(this._siblings[n]=re(a,this,!1),1===c&&this._siblings[n].length>1&&ne(a,this,null,1,this._siblings[n])):"string"==typeof(a=s[n--]=F.selector(a))&&s.splice(n+1,1):s.splice(n--,1);else this._propLookup={},this._siblings=re(e,this,!1),1===c&&this._siblings.length>1&&ne(e,this,null,1,this._siblings);(this.vars.immediateRender||0===t&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))}),!0),N=function(e){return e&&e.length&&e!==r&&e[0]&&(e[0]===r||e[0].nodeType&&e[0].style&&!e.nodeType)};(d=F.prototype=new R).constructor=F,d.kill()._gc=!1,d.ratio=0,d._firstPT=d._targets=d._overwrittenProps=d._startAt=null,d._notifyPluginsOfEnabled=d._lazy=!1,F.version="1.20.5",F.defaultEase=d._ease=new E(null,null,1,1),F.defaultOverwrite="auto",F.ticker=h,F.autoSleep=120,F.lagSmoothing=function(e,t){h.lagSmoothing(e,t)},F.selector=r.$||r.jQuery||function(e){var t=r.$||r.jQuery;return t?(F.selector=t,t(e)):(o||(o=r.document),o?o.querySelectorAll?o.querySelectorAll(e):o.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var Q=[],$={},U=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,B=/[\+-]=-?[\.\d]/,V=function(e){for(var t,r=this._firstPT,i=1e-6;r;)t=r.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:r.c*e+r.s,r.m?t=r.m.call(this._tween,t,this._target||r.t,this._tween):t<i&&t>-i&&!r.blob&&(t=0),r.f?r.fp?r.t[r.p](r.fp,t):r.t[r.p](t):r.t[r.p]=t,r=r._next},z=function(e,t,r,i){var n,a,s,o,c,u,l,d=[],h=0,p="",f=0;for(d.start=e,d.end=t,e=d[0]=e+"",t=d[1]=t+"",r&&(r(d),e=d[0],t=d[1]),d.length=0,n=e.match(U)||[],a=t.match(U)||[],i&&(i._next=null,i.blob=1,d._firstPT=d._applyPT=i),c=a.length,o=0;o<c;o++)l=a[o],p+=(u=t.substr(h,t.indexOf(l,h)-h))||!o?u:",",h+=u.length,f?f=(f+1)%5:"rgba("===u.substr(-5)&&(f=1),l===n[o]||n.length<=o?p+=l:(p&&(d.push(p),p=""),s=parseFloat(n[o]),d.push(s),d._firstPT={_next:d._firstPT,t:d,p:d.length-1,s:s,c:("="===l.charAt(1)?parseInt(l.charAt(0)+"1",10)*parseFloat(l.substr(2)):parseFloat(l)-s)||0,f:0,m:f&&f<4?Math.round:0}),h+=l.length;return(p+=t.substr(h))&&d.push(p),d.setRatio=V,B.test(t)&&(d.end=null),d},H=function(e,t,r,i,a,s,o,c,u){"function"==typeof i&&(i=i(u||0,e));var l=n(e[t]),d="function"!==l?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),h="get"!==r?r:d?o?e[d](o):e[d]():e[t],p="string"==typeof i&&"="===i.charAt(1),f={t:e,p:t,s:h,f:"function"===l,pg:0,n:a||t,m:s?"function"==typeof s?s:Math.round:0,pr:0,c:p?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-h||0};if(("number"!=typeof h||"number"!=typeof i&&!p)&&(o||isNaN(h)||!p&&isNaN(i)||"boolean"==typeof h||"boolean"==typeof i?(f.fp=o,f={t:z(h,p?parseFloat(f.s)+f.c+(f.s+"").replace(/[0-9\-\.]/g,""):i,c||F.defaultStringFilter,f),p:"setRatio",s:0,c:1,f:2,pg:0,n:a||t,pr:0,m:0}):(f.s=parseFloat(h),p||(f.c=parseFloat(i)-f.s||0))),f.c)return(f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f},q=F._internals={isArray:k,isSelector:N,lazyTweens:Q,blobDif:z},G=F._plugins={},K=q.tweenLookup={},W=0,Y=q.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Z=R._rootFramesTimeline=new M,J=R._rootTimeline=new M,ee=30,te=q.lazyRender=function(){var e,t=Q.length;for($={};--t>-1;)(e=Q[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);Q.length=0};J._startTime=h.time,Z._startTime=h.frame,J._active=Z._active=!0,setTimeout(te,1),R._updateRoot=F.render=function(){var e,t,r;if(Q.length&&te(),J.render((h.time-J._startTime)*J._timeScale,!1,!1),Z.render((h.frame-Z._startTime)*Z._timeScale,!1,!1),Q.length&&te(),h.frame>=ee){for(r in ee=h.frame+(parseInt(F.autoSleep,10)||120),K){for(e=(t=K[r].tweens).length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete K[r]}if((!(r=J._first)||r._paused)&&F.autoSleep&&!Z._first&&1===h._listeners.tick.length){for(;r&&r._paused;)r=r._next;r||h.sleep()}}},h.addEventListener("tick",R._updateRoot);var re=function(e,t,r){var i,n,a=e._gsTweenID;if(K[a||(e._gsTweenID=a="t"+W++)]||(K[a]={target:e,tweens:[]}),t&&((i=K[a].tweens)[n=i.length]=t,r))for(;--n>-1;)i[n]===t&&i.splice(n,1);return K[a].tweens},ie=function(e,t,r,i){var n,a,s=e.vars.onOverwrite;return s&&(n=s(e,t,r,i)),(s=F.onOverwrite)&&(a=s(e,t,r,i)),!1!==n&&!1!==a},ne=function(e,t,r,i,n){var a,s,o,c;if(1===i||i>=4){for(c=n.length,a=0;a<c;a++)if((o=n[a])!==t)o._gc||o._kill(null,e,t)&&(s=!0);else if(5===i)break;return s}var u,l=t._startTime+v,d=[],h=0,p=0===t._duration;for(a=n.length;--a>-1;)(o=n[a])===t||o._gc||o._paused||(o._timeline!==t._timeline?(u=u||ae(t,0,p),0===ae(o,u,p)&&(d[h++]=o)):o._startTime<=l&&o._startTime+o.totalDuration()/o._timeScale>l&&((p||!o._initted)&&l-o._startTime<=2e-10||(d[h++]=o)));for(a=h;--a>-1;)if(o=d[a],2===i&&o._kill(r,e,t)&&(s=!0),2!==i||!o._firstPT&&o._initted){if(2!==i&&!ie(o,t))continue;o._enabled(!1,!1)&&(s=!0)}return s},ae=function(e,t,r){for(var i=e._timeline,n=i._timeScale,a=e._startTime;i._timeline;){if(a+=i._startTime,n*=i._timeScale,i._paused)return-100;i=i._timeline}return(a/=n)>t?a-t:r&&a===t||!e._initted&&a-t<2e-10?v:(a+=e.totalDuration()/e._timeScale/n)>t+v?0:a-t-v};d._init=function(){var e,t,r,i,n,a,s=this.vars,o=this._overwrittenProps,c=this._duration,u=!!s.immediateRender,l=s.ease;if(s.startAt){for(i in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={},s.startAt)n[i]=s.startAt[i];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=u&&!1!==s.lazy,n.startAt=n.delay=null,n.onUpdate=s.onUpdate,n.onUpdateParams=s.onUpdateParams,n.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=F.to(this.target||{},0,n),u)if(this._time>0)this._startAt=null;else if(0!==c)return}else if(s.runBackwards&&0!==c)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(i in 0!==this._time&&(u=!1),r={},s)Y[i]&&"autoCSS"!==i||(r[i]=s[i]);if(r.overwrite=0,r.data="isFromStart",r.lazy=u&&!1!==s.lazy,r.immediateRender=u,this._startAt=F.to(this.target,0,r),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof E?l:"function"==typeof l?new E(l,s.easeParams):T[l]||F.defaultEase:F.defaultEase,s.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;e<a;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(t&&F._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(r=this._firstPT;r;)r.s+=r.c,r.c=-r.c,r=r._next;this._onUpdate=s.onUpdate,this._initted=!0},d._initProps=function(e,t,i,n,a){var s,o,c,u,l,d;if(null==e)return!1;for(s in $[e._gsTweenID]&&te(),this.vars.css||e.style&&e!==r&&e.nodeType&&G.css&&!1!==this.vars.autoCSS&&function(e,t){var r,i={};for(r in e)Y[r]||r in t&&"transform"!==r&&"x"!==r&&"y"!==r&&"width"!==r&&"height"!==r&&"className"!==r&&"border"!==r||!(!G[r]||G[r]&&G[r]._autoCSS)||(i[r]=e[r],delete e[r]);e.css=i}(this.vars,e),this.vars)if(d=this.vars[s],Y[s])d&&(d instanceof Array||d.push&&k(d))&&-1!==d.join("").indexOf("{self}")&&(this.vars[s]=d=this._swapSelfInParams(d,this));else if(G[s]&&(u=new G[s])._onInitTween(e,this.vars[s],this,a)){for(this._firstPT=l={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:u._priority,m:0},o=u._overwriteProps.length;--o>-1;)t[u._overwriteProps[o]]=this._firstPT;(u._priority||u._onInitAllProps)&&(c=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),l._next&&(l._next._prev=l)}else t[s]=H.call(this,e,s,"get",d,s,0,null,this.vars.stringFilter,a);return n&&this._kill(n,e)?this._initProps(e,t,i,n,a):this._overwrite>1&&this._firstPT&&i.length>1&&ne(e,this,t,this._overwrite,i)?(this._kill(t,e),this._initProps(e,t,i,n,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&($[e._gsTweenID]=!0),c)},d.render=function(e,t,r){var i,n,a,s,o=this._time,c=this._duration,u=this._rawPrevTime;if(e>=c-1e-7&&e>=0)this._totalTime=this._time=c,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,n="onComplete",r=r||this._timeline.autoRemoveChildren),0===c&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(e=0),(u<0||e<=0&&e>=-1e-7||u===v&&"isPause"!==this.data)&&u!==e&&(r=!0,u>v&&(n="onReverseComplete")),this._rawPrevTime=s=!t||e||u===e?e:v);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===c&&u>0)&&(n="onReverseComplete",i=this._reversed),e<0&&(this._active=!1,0===c&&(this._initted||!this.vars.lazy||r)&&(u>=0&&(u!==v||"isPause"!==this.data)&&(r=!0),this._rawPrevTime=s=!t||e||u===e?e:v)),(!this._initted||this._startAt&&this._startAt.progress())&&(r=!0);else if(this._totalTime=this._time=e,this._easeType){var l=e/c,d=this._easeType,h=this._easePower;(1===d||3===d&&l>=.5)&&(l=1-l),3===d&&(l*=2),1===h?l*=l:2===h?l*=l*l:3===h?l*=l*l*l:4===h&&(l*=l*l*l*l),this.ratio=1===d?1-l:2===d?l:e/c<.5?l/2:1-l/2}else this.ratio=this._ease.getRatio(e/c);if(this._time!==o||r){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=u,Q.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/c):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&e>=0&&(this._active=!0),0===o&&(this._startAt&&(e>=0?this._startAt.render(e,!0,r):n||(n="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==c||t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,!0,r),t||(this._time!==o||i||r)&&this._callback("onUpdate")),n&&(this._gc&&!r||(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,!0,r),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===c&&this._rawPrevTime===v&&s!==v&&(this._rawPrevTime=0)))}},d._kill=function(e,t,r){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:F.selector(t)||t;var i,a,s,o,c,u,l,d,h,p=r&&this._time&&r._startTime===this._startTime&&this._timeline===r._timeline;if((k(t)||N(t))&&"number"!=typeof t[0])for(i=t.length;--i>-1;)this._kill(e,t[i],r)&&(u=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(t===this._targets[i]){c=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],a=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;c=this._propLookup,a=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(c){if(l=e||c,d=e!==a&&"all"!==a&&e!==c&&("object"!==n(e)||!e._tempKill),r&&(F.onOverwrite||this.vars.onOverwrite)){for(s in l)c[s]&&(h||(h=[]),h.push(s));if((h||!e)&&!ie(this,r,t,h))return!1}for(s in l)(o=c[s])&&(p&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,u=!0),o.pg&&o.t._kill(l)&&(u=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete c[s]),d&&(a[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return u},d.invalidate=function(){return this._notifyPluginsOfEnabled&&F._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],R.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},d._enabled=function(e,t){if(p||h.wake(),e&&this._gc){var r,i=this._targets;if(i)for(r=i.length;--r>-1;)this._siblings[r]=re(i[r],this,!0);else this._siblings=re(this.target,this,!0)}return R.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&F._onPluginEvent(e?"_onEnable":"_onDisable",this)},F.to=function(e,t,r){return new F(e,t,r)},F.from=function(e,t,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new F(e,t,r)},F.fromTo=function(e,t,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new F(e,t,i)},F.delayedCall=function(e,t,r,i,n){return new F(t,0,{delay:e,onComplete:t,onCompleteParams:r,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:r,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},F.set=function(e,t){return new F(e,0,t)},F.getTweensOf=function(e,t){if(null==e)return[];var r,i,n,a;if(e="string"!=typeof e?e:F.selector(e)||e,(k(e)||N(e))&&"number"!=typeof e[0]){for(r=e.length,i=[];--r>-1;)i=i.concat(F.getTweensOf(e[r],t));for(r=i.length;--r>-1;)for(a=i[r],n=r;--n>-1;)a===i[n]&&i.splice(r,1)}else if(e._gsTweenID)for(r=(i=re(e).concat()).length;--r>-1;)(i[r]._gc||t&&!i[r].isActive())&&i.splice(r,1);return i||[]},F.killTweensOf=F.killDelayedCallsTo=function(e,t,r){"object"===n(t)&&(r=t,t=!1);for(var i=F.getTweensOf(e,t),a=i.length;--a>-1;)i[a]._kill(r,e)};var se=C("plugins.TweenPlugin",(function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=se.prototype}),!0);if(d=se.prototype,se.version="1.19.0",se.API=2,d._firstPT=null,d._addTween=H,d.setRatio=V,d._kill=function(e){var t,r=this._overwriteProps,i=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=r.length;--t>-1;)null!=e[r[t]]&&r.splice(t,1);for(;i;)null!=e[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},d._mod=d._roundProps=function(e){for(var t,r=this._firstPT;r;)(t=e[this._propName]||null!=r.n&&e[r.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===r.f?r.t._applyPT.m=t:r.m=t),r=r._next},F._onPluginEvent=function(e,t){var r,i,n,a,s,o=t._firstPT;if("_onInitAllProps"===e){for(;o;){for(s=o._next,i=n;i&&i.pr>o.pr;)i=i._next;(o._prev=i?i._prev:a)?o._prev._next=o:n=o,(o._next=i)?i._prev=o:a=o,o=s}o=t._firstPT=n}for(;o;)o.pg&&"function"==typeof o.t[e]&&o.t[e]()&&(r=!0),o=o._next;return r},se.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===se.API&&(G[(new e[t])._propName]=e[t]);return!0},A.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,r=e.propName,i=e.priority||0,n=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=C("plugins."+r.charAt(0).toUpperCase()+r.substr(1)+"Plugin",(function(){se.call(this,r,i),this._overwriteProps=n||[]}),!0===e.global),o=s.prototype=new se(r);for(t in o.constructor=s,s.API=e.API,a)"function"==typeof e[t]&&(o[a[t]]=e[t]);return s.version=e.version,se.activate([s]),s},u=r._gsQueue){for(l=0;l<u.length;l++)u[l]();for(d in w)w[d].func||r.console.log("GSAP encountered missing dependency: "+d)}p=!1}(e.exports&&void 0!==r.g?r.g:this||window)},1826:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},3785:function(e,t,r){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e=r.nmd(e),function(t,r){var n=function(e,t){"use strict";if(t.getElementsByClassName){var r,i,n,a,s,o,c,u,l,d,h,p,f,m,g,y,v,b,_,k,w,P,A,C,S,E,T,x,D,O,j,I,L,R,M,F,N,Q,$,U=t.documentElement,B=e.HTMLPictureElement&&"sizes"in t.createElement("img"),V="addEventListener",z=e.addEventListener,H=e.setTimeout,q=e.requestAnimationFrame||H,G=/^picture$/i,K=["load","error","lazyincluded","_lazyloaded"],W={},Y=Array.prototype.forEach,X=function(e,t){return W[t]||(W[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),W[t].test(e.getAttribute("class")||"")&&W[t]},Z=function(e,t){X(e,t)||e.setAttribute("class",(e.getAttribute("class")||"").trim()+" "+t)},J=function(e,t){var r;(r=X(e,t))&&e.setAttribute("class",(e.getAttribute("class")||"").replace(r," "))},ee=function e(t,r,i){var n=i?V:"removeEventListener";i&&e(t,r),K.forEach((function(e){t[n](e,r)}))},te=function(e,r,i,n,a){var s=t.createEvent("CustomEvent");return s.initCustomEvent(r,!n,!a,i||{}),e.dispatchEvent(s),s},re=function(t,i){var n;!B&&(n=e.picturefill||r.pf)?n({reevaluate:!0,elements:[t]}):i&&i.src&&(t.src=i.src)},ie=function(e,t){return(getComputedStyle(e,null)||{})[t]},ne=function(e,t,i){for(i=i||e.offsetWidth;i<r.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},ae=function(t){var r,i=0,n=e.Date,a=function(){r=!1,i=n.now(),t()},s=function(){H(a)},o=function(){q(s)};return function(){if(!r){var e=125-(n.now()-i);r=!0,e<6&&(e=6),H(o,e)}}},se=(A=/^img$/i,C=/^iframe$/i,S="onscroll"in e&&!/glebot/.test(navigator.userAgent),0,E=0,T=0,x=0,D=function e(t){T--,t&&t.target&&ee(t.target,e),(!t||T<0||!t.target)&&(T=0)},O=function(e,r){var i,n=e,a="hidden"==ie(t.body,"visibility")||"hidden"!=ie(e,"visibility");for(f-=r,y+=r,m-=r,g+=r;a&&(n=n.offsetParent)&&n!=t.body&&n!=U;)(a=(ie(n,"opacity")||1)>0)&&"visible"!=ie(n,"overflow")&&(i=n.getBoundingClientRect(),a=g>i.left&&m<i.right&&y>i.top-1&&f<i.bottom+1);return a},I=ae(j=function(){var e,t,i,n,a,u,d,k,w;if((l=r.loadMode)&&T<8&&(e=s.length)){t=0,x++,null==b&&("expand"in r||(r.expand=U.clientHeight>600?U.clientWidth>600?550:410:359),v=r.expand,b=v*r.expFactor),E<b&&T<1&&x>3&&l>2?(E=b,x=0):E=l>1&&x>2&&T<6?v:0;for(;t<e;t++)if(s[t]&&!s[t]._lazyRace)if(S)if((k=s[t].getAttribute("data-expand"))&&(u=1*k)||(u=E),w!==u&&(h=innerWidth+u*_,p=innerHeight+u,d=-1*u,w=u),i=s[t].getBoundingClientRect(),(y=i.bottom)>=d&&(f=i.top)<=p&&(g=i.right)>=d*_&&(m=i.left)<=h&&(y||g||m||f)&&(c&&T<3&&!k&&(l<3||x<4)||O(s[t],u))){if(Q(s[t]),a=!0,T>9)break}else!a&&c&&!n&&T<4&&x<4&&l>2&&(o[0]||r.preloadAfterLoad)&&(o[0]||!k&&(y||g||m||f||"auto"!=s[t].getAttribute(r.sizesAttr)))&&(n=o[0]||s[t]);else Q(s[t]);n&&!a&&Q(n)}}),L=function(e){Z(e.target,r.loadedClass),J(e.target,r.loadingClass),ee(e.target,R)},R=function(e){e={target:e.target},q((function(){L(e)}))},M=function(e,t){try{e.contentWindow.location.replace(t)}catch(r){e.src=t}},F=function(e){var t,i,n=e.getAttribute(r.srcsetAttr);(t=r.customMedia[e.getAttribute("data-media")||e.getAttribute("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n),t&&((i=e.parentNode).insertBefore(e.cloneNode(),e),i.removeChild(e))},w=[],N={add:function(e){w.push(e),k||(k=!0,q(P))},run:P=function(){for(;w.length;)w.shift()();k=!1}},$=function e(){if(!c)if(Date.now()-d<999)H(e,999);else{var i,n=function(){r.loadMode=3,I()};c=!0,r.loadMode=3,t.hidden?(j(),N.run()):I(),z("scroll",(function(){3==r.loadMode&&(r.loadMode=2),clearTimeout(i),i=H(n,99)}),!0)}},{_:function(){d=Date.now(),s=t.getElementsByClassName(r.lazyClass),o=t.getElementsByClassName(r.lazyClass+" "+r.preloadClass),_=r.hFac,z("scroll",I,!0),z("resize",I,!0),e.MutationObserver?new MutationObserver(I).observe(U,{childList:!0,subtree:!0,attributes:!0}):(U.addEventListener("DOMNodeInserted",I,!0),U.addEventListener("DOMAttrModified",I,!0),setInterval(I,999)),z("hashchange",I,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach((function(e){t.addEventListener(e,I,!0)})),/d$|^c/.test(t.readyState)?$():(z("load",$),t.addEventListener("DOMContentLoaded",I),H($,2e4)),I(s.length>0)},checkElems:I,unveil:Q=function(e){var t,i,n,a,s,o,l,d=A.test(e.nodeName),h=d&&(e.getAttribute(r.sizesAttr)||e.getAttribute("sizes")),p="auto"==h;(!p&&c||!d||!e.src&&!e.srcset||e.complete||X(e,r.errorClass))&&(p&&(l=e.offsetWidth),e._lazyRace=!0,T++,r.rC&&(l=r.rC(e,l)||l),N.add((function(){(s=te(e,"lazybeforeunveil")).defaultPrevented||(h&&(p?(oe.updateElem(e,!0,l),Z(e,r.autosizesClass)):e.setAttribute("sizes",h)),i=e.getAttribute(r.srcsetAttr),t=e.getAttribute(r.srcAttr),d&&(n=e.parentNode,a=n&&G.test(n.nodeName||"")),o=s.detail.firesLoad||"src"in e&&(i||t||a),s={target:e},o&&(ee(e,D,!0),clearTimeout(u),u=H(D,2500),Z(e,r.loadingClass),ee(e,R,!0)),a&&Y.call(n.getElementsByTagName("source"),F),i?e.setAttribute("srcset",i):t&&!a&&(C.test(e.nodeName)?M(e,t):e.src=t),(i||a)&&re(e,{src:t})),q((function(){e._lazyRace&&delete e._lazyRace,J(e,r.lazyClass),o&&!e.complete||(o?D(s):T--,L(s))}))})))}}),oe=(n=function(e,t,r){var i,n,a,s,o=e.parentNode;if(o&&(r=ne(e,o,r),!(s=te(e,"lazybeforesizes",{width:r,dataAttr:!!t})).defaultPrevented&&(r=s.detail.width)&&r!==e._lazysizesWidth)){if(e._lazysizesWidth=r,r+="px",e.setAttribute("sizes",r),G.test(o.nodeName||""))for(n=0,a=(i=o.getElementsByTagName("source")).length;n<a;n++)i[n].setAttribute("sizes",r);s.detail.dataAttr||re(e,s.detail)}},{_:function(){i=t.getElementsByClassName(r.autosizesClass),z("resize",a)},checkElems:a=ae((function(){var e,t=i.length;if(t)for(e=0;e<t;e++)n(i[e])})),updateElem:n}),ce=function e(){e.i||(e.i=!0,oe._(),se._())};return function(){var t,i={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.7,hFac:.8,loadMode:2};for(t in r=e.lazySizesConfig||e.lazysizesConfig||{},i)t in r||(r[t]=i[t]);e.lazySizesConfig=r,H((function(){r.init&&ce()}))}(),{cfg:r,autoSizer:oe,loader:se,init:ce,uP:re,aC:Z,rC:J,hC:X,fire:te,gW:ne}}}(t,t.document);t.lazySizes=n,"object"==i(e)&&e.exports&&(e.exports=n)}(window)},833:function(e,t,r){var i,n,a,s,o;i=r(916),n=r(9370).utf8,a=r(1826),s=r(9370).bin,(o=function e(t,r){t.constructor==String?t=r&&"binary"===r.encoding?s.stringToBytes(t):n.stringToBytes(t):a(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var o=i.bytesToWords(t),c=8*t.length,u=1732584193,l=-271733879,d=-1732584194,h=271733878,p=0;p<o.length;p++)o[p]=16711935&(o[p]<<8|o[p]>>>24)|4278255360&(o[p]<<24|o[p]>>>8);o[c>>>5]|=128<<c%32,o[14+(c+64>>>9<<4)]=c;var f=e._ff,m=e._gg,g=e._hh,y=e._ii;for(p=0;p<o.length;p+=16){var v=u,b=l,_=d,k=h;u=f(u,l,d,h,o[p+0],7,-680876936),h=f(h,u,l,d,o[p+1],12,-389564586),d=f(d,h,u,l,o[p+2],17,606105819),l=f(l,d,h,u,o[p+3],22,-1044525330),u=f(u,l,d,h,o[p+4],7,-176418897),h=f(h,u,l,d,o[p+5],12,1200080426),d=f(d,h,u,l,o[p+6],17,-1473231341),l=f(l,d,h,u,o[p+7],22,-45705983),u=f(u,l,d,h,o[p+8],7,1770035416),h=f(h,u,l,d,o[p+9],12,-1958414417),d=f(d,h,u,l,o[p+10],17,-42063),l=f(l,d,h,u,o[p+11],22,-1990404162),u=f(u,l,d,h,o[p+12],7,1804603682),h=f(h,u,l,d,o[p+13],12,-40341101),d=f(d,h,u,l,o[p+14],17,-1502002290),u=m(u,l=f(l,d,h,u,o[p+15],22,1236535329),d,h,o[p+1],5,-165796510),h=m(h,u,l,d,o[p+6],9,-1069501632),d=m(d,h,u,l,o[p+11],14,643717713),l=m(l,d,h,u,o[p+0],20,-373897302),u=m(u,l,d,h,o[p+5],5,-701558691),h=m(h,u,l,d,o[p+10],9,38016083),d=m(d,h,u,l,o[p+15],14,-660478335),l=m(l,d,h,u,o[p+4],20,-405537848),u=m(u,l,d,h,o[p+9],5,568446438),h=m(h,u,l,d,o[p+14],9,-1019803690),d=m(d,h,u,l,o[p+3],14,-187363961),l=m(l,d,h,u,o[p+8],20,1163531501),u=m(u,l,d,h,o[p+13],5,-1444681467),h=m(h,u,l,d,o[p+2],9,-51403784),d=m(d,h,u,l,o[p+7],14,1735328473),u=g(u,l=m(l,d,h,u,o[p+12],20,-1926607734),d,h,o[p+5],4,-378558),h=g(h,u,l,d,o[p+8],11,-2022574463),d=g(d,h,u,l,o[p+11],16,1839030562),l=g(l,d,h,u,o[p+14],23,-35309556),u=g(u,l,d,h,o[p+1],4,-1530992060),h=g(h,u,l,d,o[p+4],11,1272893353),d=g(d,h,u,l,o[p+7],16,-155497632),l=g(l,d,h,u,o[p+10],23,-1094730640),u=g(u,l,d,h,o[p+13],4,681279174),h=g(h,u,l,d,o[p+0],11,-358537222),d=g(d,h,u,l,o[p+3],16,-722521979),l=g(l,d,h,u,o[p+6],23,76029189),u=g(u,l,d,h,o[p+9],4,-640364487),h=g(h,u,l,d,o[p+12],11,-421815835),d=g(d,h,u,l,o[p+15],16,530742520),u=y(u,l=g(l,d,h,u,o[p+2],23,-995338651),d,h,o[p+0],6,-198630844),h=y(h,u,l,d,o[p+7],10,1126891415),d=y(d,h,u,l,o[p+14],15,-1416354905),l=y(l,d,h,u,o[p+5],21,-57434055),u=y(u,l,d,h,o[p+12],6,1700485571),h=y(h,u,l,d,o[p+3],10,-1894986606),d=y(d,h,u,l,o[p+10],15,-1051523),l=y(l,d,h,u,o[p+1],21,-2054922799),u=y(u,l,d,h,o[p+8],6,1873313359),h=y(h,u,l,d,o[p+15],10,-30611744),d=y(d,h,u,l,o[p+6],15,-1560198380),l=y(l,d,h,u,o[p+13],21,1309151649),u=y(u,l,d,h,o[p+4],6,-145523070),h=y(h,u,l,d,o[p+11],10,-1120210379),d=y(d,h,u,l,o[p+2],15,718787259),l=y(l,d,h,u,o[p+9],21,-343485551),u=u+v>>>0,l=l+b>>>0,d=d+_>>>0,h=h+k>>>0}return i.endian([u,l,d,h])})._ff=function(e,t,r,i,n,a,s){var o=e+(t&r|~t&i)+(n>>>0)+s;return(o<<a|o>>>32-a)+t},o._gg=function(e,t,r,i,n,a,s){var o=e+(t&i|r&~i)+(n>>>0)+s;return(o<<a|o>>>32-a)+t},o._hh=function(e,t,r,i,n,a,s){var o=e+(t^r^i)+(n>>>0)+s;return(o<<a|o>>>32-a)+t},o._ii=function(e,t,r,i,n,a,s){var o=e+(r^(t|~i))+(n>>>0)+s;return(o<<a|o>>>32-a)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=i.wordsToBytes(o(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):i.bytesToHex(r)}},3998:function(e){e.exports=function(e,t,r){var i,n;function a(){var a=arguments,s=this;function o(){r||(n=e.apply(s,a)),i=null}return i?clearTimeout(i):r&&(n=e.apply(s,a)),i=setTimeout(o,t),n}return a.cancel=function(){clearTimeout(i)},a}},4263:function(e,t,r){var i,n,a=r(9220);function s(e,t,r,i){return e.call(i,t[r],r,t)}e.exports=function(e,t,r){var o,c=0;for(o in null==i&&function(){for(var e in n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=!0,{toString:null})i=!1}(),e)if(!1===s(t,e,o,r))break;if(i)for(var u=e.constructor,l=!!u&&e===u.prototype;(o=n[c++])&&("constructor"===o&&(l||!a(e,o))||e[o]===Object.prototype[o]||!1!==s(t,e,o,r)););}},998:function(e,t,r){var i=r(9220),n=r(4263);e.exports=function(e,t,r){n(e,(function(n,a){if(i(e,a))return t.call(r,e[a],a,e)}))}},9220:function(e){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},2702:function(e,t,r){var i=r(998);e.exports=function(e){var t=[];return i(e,(function(e,r){t.push(e)})),t}},4277:function(e,t){var r,i,n,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a=function(e){var t=Object.prototype.toString,r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"===s(e)&&t in e}var o=RegExp.prototype.test,c=/\S/;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},l=/\s*/,d=/\s+/,h=/\s*=/,p=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.cache={}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},m.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var n,s,o=this,c=!1;o;){if(e.indexOf(".")>0)for(t=o.view,n=e.split("."),s=0;null!=t&&s<n.length;)s===n.length-1&&(c=a(t,n[s])),t=t[n[s++]];else t=o.view[e],c=a(o.view,e);if(c)break;o=o.parent}r[e]=t}return i(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){this.cache={}},y.prototype.parse=function(t,i){var a=this.cache,s=a[t];return null==s&&(s=a[t]=function(t,i){if(!t)return[];var a,s,u,g,y=[],v=[],b=[],_=!1,k=!1;function w(){if(_&&!k)for(;b.length;)delete v[b.pop()];else b=[];_=!1,k=!1}function P(e){if("string"==typeof e&&(e=e.split(d,2)),!r(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(n(e[0])+"\\s*"),s=new RegExp("\\s*"+n(e[1])),u=new RegExp("\\s*"+n("}"+e[1]))}P(i||e.tags);for(var A,C,S,E,T,x,D=new m(t);!D.eos();){if(A=D.pos,S=D.scanUntil(a))for(var O=0,j=S.length;O<j;++O)g=E=S.charAt(O),function(e,t){return o.call(e,t)}(c,g)?k=!0:b.push(v.length),v.push(["text",E,A,A+1]),A+=1,"\n"===E&&w();if(!D.scan(a))break;if(_=!0,C=D.scan(f)||"name",D.scan(l),"="===C?(S=D.scanUntil(h),D.scan(h),D.scanUntil(s)):"{"===C?(S=D.scanUntil(u),D.scan(p),D.scanUntil(s),C="&"):S=D.scanUntil(s),!D.scan(s))throw new Error("Unclosed tag at "+D.pos);if(T=[C,S,A,D.pos],v.push(T),"#"===C||"^"===C)y.push(T);else if("/"===C){if(!(x=y.pop()))throw new Error('Unopened section "'+S+'" at '+A);if(x[1]!==S)throw new Error('Unclosed section "'+x[1]+'" at '+A)}else"name"===C||"{"===C||"&"===C?k=!0:"="===C&&P(S)}if(x=y.pop())throw new Error('Unclosed section "'+x[1]+'" at '+D.pos);return function(e){for(var t,r=[],i=r,n=[],a=0,s=e.length;a<s;++a)switch((t=e[a])[0]){case"#":case"^":i.push(t),n.push(t),i=t[4]=[];break;case"/":n.pop()[5]=t[2],i=n.length>0?n[n.length-1][4]:r;break;default:i.push(t)}return r}(function(e){for(var t,r,i=[],n=0,a=e.length;n<a;++n)(t=e[n])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(i.push(t),r=t));return i}(v))}(t,i)),s},y.prototype.render=function(e,t,r){var i=this.parse(e),n=t instanceof g?t:new g(t);return this.renderTokens(i,n,r,e)},y.prototype.renderTokens=function(e,t,r,i){for(var n,a,s,o="",c=0,u=e.length;c<u;++c)s=void 0,"#"===(a=(n=e[c])[0])?s=this.renderSection(n,t,r,i):"^"===a?s=this.renderInverted(n,t,r,i):">"===a?s=this.renderPartial(n,t,r,i):"&"===a?s=this.unescapedValue(n,t):"name"===a?s=this.escapedValue(n,t):"text"===a&&(s=this.rawValue(n)),void 0!==s&&(o+=s);return o},y.prototype.renderSection=function(e,t,n,a){var o=this,c="",u=t.lookup(e[1]);if(u){if(r(u))for(var l=0,d=u.length;l<d;++l)c+=this.renderTokens(e[4],t.push(u[l]),n,a);else if("object"===s(u)||"string"==typeof u||"number"==typeof u)c+=this.renderTokens(e[4],t.push(u),n,a);else if(i(u)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(t.view,a.slice(e[3],e[5]),(function(e){return o.render(e,t,n)})))&&(c+=u)}else c+=this.renderTokens(e[4],t,n,a);return c}},y.prototype.renderInverted=function(e,t,i,n){var a=t.lookup(e[1]);if(!a||r(a)&&0===a.length)return this.renderTokens(e[4],t,i,n)},y.prototype.renderPartial=function(e,t,r){if(r){var n=i(r)?r(e[1]):r[e[1]];return null!=n?this.renderTokens(this.parse(n),t,r,n):void 0}},y.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},y.prototype.escapedValue=function(t,r){var i=r.lookup(t[1]);if(null!=i)return e.escape(i)},y.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.1.3",e.tags=["{{","}}"];var v=new y;e.clearCache=function(){return v.clearCache()},e.parse=function(e,t){return v.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(r(n=e)?"array":s(n))+'" was given as the first argument for mustache#render(template, view, partials)');var n;return v.render(e,t,i)},e.to_html=function(t,r,n,a){var s=e.render(t,r,n);if(!i(a))return s;a(s)},e.escape=function(e){return String(e).replace(/[&<>"'\/]/g,(function(e){return u[e]}))},e.Scanner=m,e.Context=g,e.Writer=y},"object"===s(t)&&t&&"string"!=typeof t.nodeName?a(t):(i=[t],void 0===(n="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=n))},1894:function(e,t,r){var i;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}e=r.nmd(e),function(e){var t,r,i,n,a,s,o,c=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(c)&&c.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",(r=document.createElement("source"),i=function(e){var t,i,n=e.parentNode;"PICTURE"===n.nodeName.toUpperCase()?(t=r.cloneNode(),n.insertBefore(t,n.firstElementChild),setTimeout((function(){n.removeChild(t)}))):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,i=e.sizes,e.sizes+=",100vw",setTimeout((function(){e.sizes=i})))},n=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)i(t[e])},a=function(){clearTimeout(t),t=setTimeout(n,99)},s=e.matchMedia&&matchMedia("(orientation: landscape)"),o=function(){a(),s&&s.addListener&&s.addListener(a)},r.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?o():document.addEventListener("DOMContentLoaded",o),a))}(window),function(a,s,o){"use strict";var c,u,l;s.createElement("picture");var d={},h=!1,p=function(){},f=s.createElement("img"),m=f.getAttribute,g=f.setAttribute,y=f.removeAttribute,v=s.documentElement,b={},_={algorithm:""},k="data-pfsrc",w=k+"set",P=navigator.userAgent,A=/rident/.test(P)||/ecko/.test(P)&&P.match(/rv\:(\d+)/)&&RegExp.$1>35,C="currentSrc",S=/\s+\+?\d+(e\d+)?w/,E=/(\([^)]+\))?\s*(.+)/,T=a.picturefillCFG,x="font-size:100%!important;",D=!0,O={},j={},I=a.devicePixelRatio,L={px:1,in:96},R=s.createElement("a"),M=!1,F=/^[ \t\n\r\u000c]+/,N=/^[, \t\n\r\u000c]+/,Q=/^[^ \t\n\r\u000c]+/,$=/[,]+$/,U=/^\d+$/,B=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,V=function(e,t,r,i){e.addEventListener?e.addEventListener(t,r,i||!1):e.attachEvent&&e.attachEvent("on"+t,r)},z=function(e){var t={};return function(r){return r in t||(t[r]=e(r)),t[r]}};function H(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}var q,G,K,W,Y,X,Z,J,ee,te,re,ie,ne,ae,se,oe=(q=/^([\d\.]+)(em|vw|px)$/,G=z((function(e){return"return "+function(){for(var e=arguments,t=0,r=e[0];++t in e;)r=r.replace(e[t],e[++t]);return r}((e||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"})),function(e,t){var r;if(!(e in O))if(O[e]=!1,t&&(r=e.match(q)))O[e]=r[1]*L[r[2]];else try{O[e]=new Function("e",G(e))(L)}catch(e){}return O[e]}),ce=function(e,t){return e.w?(e.cWidth=d.calcListLength(t||"100vw"),e.res=e.w/e.cWidth):e.res=e.d,e},ue=function(e){if(h){var t,r,i,n=e||{};if(n.elements&&1===n.elements.nodeType&&("IMG"===n.elements.nodeName.toUpperCase()?n.elements=[n.elements]:(n.context=n.elements,n.elements=null)),i=(t=n.elements||d.qsa(n.context||s,n.reevaluate||n.reselect?d.sel:d.selShort)).length){for(d.setupRun(n),M=!0,r=0;r<i;r++)d.fillImg(t[r],n);d.teardownRun(n)}}};function le(e,t){return e.res-t.res}function de(e,t){var r,i,n;if(e&&t)for(n=d.parseSet(t),e=d.makeUrl(e),r=0;r<n.length;r++)if(e===d.makeUrl(n[r].url)){i=n[r];break}return i}a.console&&console.warn,C in f||(C="src"),b["image/jpeg"]=!0,b["image/gif"]=!0,b["image/png"]=!0,b["image/svg+xml"]=s.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),d.ns=("pf"+(new Date).getTime()).substr(0,9),d.supSrcset="srcset"in f,d.supSizes="sizes"in f,d.supPicture=!!a.HTMLPictureElement,d.supSrcset&&d.supPicture&&!d.supSizes&&(K=s.createElement("img"),f.srcset="data:,a",K.src="data:,a",d.supSrcset=f.complete===K.complete,d.supPicture=d.supSrcset&&d.supPicture),d.supSrcset&&!d.supSizes?(W="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",X=function(){2===Y.width&&(d.supSizes=!0),u=d.supSrcset&&!d.supSizes,h=!0,setTimeout(ue)},(Y=s.createElement("img")).onload=X,Y.onerror=X,Y.setAttribute("sizes","9px"),Y.srcset=W+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",Y.src=W):h=!0,d.selShort="picture>img,img[srcset]",d.sel=d.selShort,d.cfg=_,d.DPR=I||1,d.u=L,d.types=b,d.setSize=p,d.makeUrl=z((function(e){return R.href=e,R.href})),d.qsa=function(e,t){return"querySelector"in e?e.querySelectorAll(t):[]},d.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?d.matchesMedia=function(e){return!e||matchMedia(e).matches}:d.matchesMedia=d.mMQ,d.matchesMedia.apply(this,arguments)},d.mMQ=function(e){return!e||oe(e)},d.calcLength=function(e){var t=oe(e,!0)||!1;return t<0&&(t=!1),t},d.supportsType=function(e){return!e||b[e]},d.parseSize=z((function(e){var t=(e||"").match(E);return{media:t&&t[1],length:t&&t[2]}})),d.parseSet=function(e){return e.cands||(e.cands=function(e,t){function r(t){var r,i=t.exec(e.substring(u));if(i)return r=i[0],u+=r.length,r}var i,n,a,s,o,c=e.length,u=0,l=[];function d(){var e,r,a,s,o,c,u,d,h,p=!1,f={};for(s=0;s<n.length;s++)c=(o=n[s])[o.length-1],u=o.substring(0,o.length-1),d=parseInt(u,10),h=parseFloat(u),U.test(u)&&"w"===c?((e||r)&&(p=!0),0===d?p=!0:e=d):B.test(u)&&"x"===c?((e||r||a)&&(p=!0),h<0?p=!0:r=h):U.test(u)&&"h"===c?((a||r)&&(p=!0),0===d?p=!0:a=d):p=!0;p||(f.url=i,e&&(f.w=e),r&&(f.d=r),a&&(f.h=a),a||r||e||(f.d=1),1===f.d&&(t.has1x=!0),f.set=t,l.push(f))}function h(){for(r(F),a="",s="in descriptor";;){if(o=e.charAt(u),"in descriptor"===s)if(H(o))a&&(n.push(a),a="",s="after descriptor");else{if(","===o)return u+=1,a&&n.push(a),void d();if("("===o)a+=o,s="in parens";else{if(""===o)return a&&n.push(a),void d();a+=o}}else if("in parens"===s)if(")"===o)a+=o,s="in descriptor";else{if(""===o)return n.push(a),void d();a+=o}else if("after descriptor"===s)if(H(o));else{if(""===o)return void d();s="in descriptor",u-=1}u+=1}}for(;;){if(r(N),u>=c)return l;i=r(Q),n=[],","===i.slice(-1)?(i=i.replace($,""),d()):h()}}(e.srcset,e)),e.cands},d.getEmValue=function(){var e;if(!c&&(e=s.body)){var t=s.createElement("div"),r=v.style.cssText,i=e.style.cssText;t.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",v.style.cssText=x,e.style.cssText=x,e.appendChild(t),c=t.offsetWidth,e.removeChild(t),c=parseFloat(c,10),v.style.cssText=r,e.style.cssText=i}return c||16},d.calcListLength=function(e){if(!(e in j)||_.uT){var t=d.calcLength(function(e){var t,r,i,n,a,s,o,c=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,u=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(i=(r=function(e){var t,r="",i=[],n=[],a=0,s=0,o=!1;function c(){r&&(i.push(r),r="")}function u(){i[0]&&(n.push(i),i=[])}for(;;){if(""===(t=e.charAt(s)))return c(),u(),n;if(o){if("*"===t&&"/"===e[s+1]){o=!1,s+=2,c();continue}s+=1}else{if(H(t)){if(e.charAt(s-1)&&H(e.charAt(s-1))||!r){s+=1;continue}if(0===a){c(),s+=1;continue}t=" "}else if("("===t)a+=1;else if(")"===t)a-=1;else{if(","===t){c(),u(),s+=1;continue}if("/"===t&&"*"===e.charAt(s+1)){o=!0,s+=2;continue}}r+=t,s+=1}}}(e)).length,t=0;t<i;t++)if(o=a=(n=r[t])[n.length-1],c.test(o)&&parseFloat(o)>=0||u.test(o)||"0"===o||"-0"===o||"+0"===o){if(s=a,n.pop(),0===n.length)return s;if(n=n.join(" "),d.matchesMedia(n))return s}return"100vw"}(e));j[e]=t||L.width}return j[e]},d.setRes=function(e){var t;if(e)for(var r=0,i=(t=d.parseSet(e)).length;r<i;r++)ce(t[r],e.sizes);return t},d.setRes.res=ce,d.applySetCandidate=function(e,t){if(e.length){var r,i,n,a,s,o,c,u,l,h,p,f,m,g,y,v,b=t[d.ns],k=d.DPR;if(o=b.curSrc||t[C],c=b.curCan||function(e,t,r){var i;return!r&&t&&(r=(r=e[d.ns].sets)&&r[r.length-1]),(i=de(t,r))&&(t=d.makeUrl(t),e[d.ns].curSrc=t,e[d.ns].curCan=i,i.res||ce(i,i.set.sizes)),i}(t,o,e[0].set),c&&c.set===e[0].set&&((l=A&&!t.complete&&c.res-.1>k)||(c.cached=!0,c.res>=k&&(s=c))),!s)for(e.sort(le),s=e[(a=e.length)-1],i=0;i<a;i++)if((r=e[i]).res>=k){s=e[n=i-1]&&(l||o!==d.makeUrl(r.url))&&(h=e[n].res,p=r.res,f=k,m=e[n].cached,g=void 0,y=void 0,v=void 0,"saveData"===_.algorithm?h>2.7?v=f+1:(y=(p-f)*(g=Math.pow(h-.6,1.5)),m&&(y+=.1*g),v=h+y):v=f>1?Math.sqrt(h*p):h,v>f)?e[n]:r;break}s&&(u=d.makeUrl(s.url),b.curSrc=u,b.curCan=s,u!==o&&d.setSrc(t,s),d.setSize(t))}},d.setSrc=function(e,t){var r;e.src=t.url,"image/svg+xml"===t.set.type&&(r=e.style.width,e.style.width=e.offsetWidth+1+"px",e.offsetWidth+1&&(e.style.width=r))},d.getSet=function(e){var t,r,i,n=!1,a=e[d.ns].sets;for(t=0;t<a.length&&!n;t++)if((r=a[t]).srcset&&d.matchesMedia(r.media)&&(i=d.supportsType(r.type))){"pending"===i&&(r=i),n=r;break}return n},d.parseSets=function(e,t,r){var i,n,a,s,c=t&&"PICTURE"===t.nodeName.toUpperCase(),l=e[d.ns];(l.src===o||r.src)&&(l.src=m.call(e,"src"),l.src?g.call(e,k,l.src):y.call(e,k)),(l.srcset===o||r.srcset||!d.supSrcset||e.srcset)&&(i=m.call(e,"srcset"),l.srcset=i,s=!0),l.sets=[],c&&(l.pic=!0,function(e,t){var r,i,n,a,s=e.getElementsByTagName("source");for(r=0,i=s.length;r<i;r++)(n=s[r])[d.ns]=!0,(a=n.getAttribute("srcset"))&&t.push({srcset:a,media:n.getAttribute("media"),type:n.getAttribute("type"),sizes:n.getAttribute("sizes")})}(t,l.sets)),l.srcset?(n={srcset:l.srcset,sizes:m.call(e,"sizes")},l.sets.push(n),(a=(u||l.src)&&S.test(l.srcset||""))||!l.src||de(l.src,n)||n.has1x||(n.srcset+=", "+l.src,n.cands.push({url:l.src,d:1,set:n}))):l.src&&l.sets.push({srcset:l.src,sizes:null}),l.curCan=null,l.curSrc=o,l.supported=!(c||n&&!d.supSrcset||a&&!d.supSizes),s&&d.supSrcset&&!l.supported&&(i?(g.call(e,w,i),e.srcset=""):y.call(e,w)),l.supported&&!l.srcset&&(!l.src&&e.src||e.src!==d.makeUrl(l.src))&&(null===l.src?e.removeAttribute("src"):e.src=l.src),l.parsed=!0},d.fillImg=function(e,t){var r,i=t.reselect||t.reevaluate;e[d.ns]||(e[d.ns]={}),r=e[d.ns],(i||r.evaled!==l)&&(r.parsed&&!t.reevaluate||d.parseSets(e,e.parentNode,t),r.supported?r.evaled=l:function(e){var t,r=d.getSet(e),i=!1;"pending"!==r&&(i=l,r&&(t=d.setRes(r),d.applySetCandidate(t,e))),e[d.ns].evaled=i}(e))},d.setupRun=function(){M&&!D&&I===a.devicePixelRatio||(D=!1,I=a.devicePixelRatio,O={},j={},d.DPR=I||1,L.width=Math.max(a.innerWidth||0,v.clientWidth),L.height=Math.max(a.innerHeight||0,v.clientHeight),L.vw=L.width/100,L.vh=L.height/100,l=[L.height,L.width,I].join("-"),L.em=d.getEmValue(),L.rem=L.em)},d.supPicture?(ue=p,d.fillImg=p):(ie=a.attachEvent?/d$|^c/:/d$|^c|^i/,ne=function e(){var t=s.readyState||"";ae=setTimeout(e,"loading"===t?200:999),s.body&&(d.fillImgs(),(Z=Z||ie.test(t))&&clearTimeout(ae))},ae=setTimeout(ne,s.body?9:99),se=v.clientHeight,V(a,"resize",(J=function(){D=Math.max(a.innerWidth||0,v.clientWidth)!==L.width||v.clientHeight!==se,se=v.clientHeight,D&&d.fillImgs()},99,re=function e(){var t=new Date-te;t<99?ee=setTimeout(e,99-t):(ee=null,J())},function(){te=new Date,ee||(ee=setTimeout(re,99))})),V(s,"readystatechange",ne)),d.picturefill=ue,d.fillImgs=ue,d.teardownRun=p,ue._=d,a.picturefillCFG={pf:d,push:function(e){var t=e.shift();"function"==typeof d[t]?d[t].apply(d,e):(_[t]=e[0],M&&d.fillImgs({reselect:!0}))}};for(;T&&T.length;)a.picturefillCFG.push(T.shift());a.picturefill=ue,"object"===n(e)&&"object"===n(e.exports)?e.exports=ue:(i=function(){return ue}.call(t,r,t,e))===o||(e.exports=i),d.supPicture||(b["image/webp"]=function(e,t){var r=new a.Image;return r.onerror=function(){b[e]=!1,ue()},r.onload=function(){b[e]=1===r.width,ue()},r.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==","pending"}("image/webp"))}(window,document)},8096:function(e,t,r){var i;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}e=r.nmd(e),function(a,s){"use strict";var o={};a.PubSub=o,function(e){var t={},r=-1;function i(e,t,r){try{e(t,r)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function a(e,t,r){e(t,r)}function s(e,r,n,s){var o,c=t[r],u=s?a:i;if(Object.prototype.hasOwnProperty.call(t,r))for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&u(c[o],e,n)}function o(e){var r=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,r)&&function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}(t[r]))}function c(e,t,r,i){var a=function(e,t,r){return function(){var i=String(e),n=i.lastIndexOf(".");for(s(e,e,t,r);-1!==n;)n=(i=i.substr(0,n)).lastIndexOf("."),s(e,i,t,r);s(e,"*",t,r)}}(e="symbol"===n(e)?e.toString():e,t,i);return!!function(e){for(var t=String(e),r=o(t)||o("*"),i=t.lastIndexOf(".");!r&&-1!==i;)i=(t=t.substr(0,i)).lastIndexOf("."),r=o(t);return r}(e)&&(!0===r?a():setTimeout(a,0),!0)}e.publish=function(t,r){return c(t,r,!1,e.immediateExceptions)},e.publishSync=function(t,r){return c(t,r,!0,e.immediateExceptions)},e.subscribe=function(e,i){if("function"!=typeof i)return!1;e="symbol"===n(e)?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var a="uid_"+String(++r);return t[e][a]=i,a},e.subscribeAll=function(t){return e.subscribe("*",t)},e.subscribeOnce=function(t,r){var i=e.subscribe(t,(function(){e.unsubscribe(i),r.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)&&delete t[r]},e.countSubscriptions=function(e){var r,i,n=0;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)){for(i in t[r])n++;break}return n},e.getSubscriptions=function(e){var r,i=[];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)&&i.push(r);return i},e.unsubscribe=function(r){var i,n,a,s="string"==typeof r&&(Object.prototype.hasOwnProperty.call(t,r)||function(e){var r;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e))return!0;return!1}(r)),o=!s&&"string"==typeof r,c="function"==typeof r,u=!1;if(!s){for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(n=t[i],o&&n[r]){delete n[r],u=r;break}if(c)for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&n[a]===r&&(delete n[a],u=!0)}return u}e.clearSubscriptions(r)}}(o),"object"===n(t)?(void 0!==e&&e.exports&&(t=e.exports=o),t.PubSub=o,e.exports=t=o):void 0===(i=function(){return o}.call(t,r,t,e))||(e.exports=i)}("object"===("undefined"==typeof window?"undefined":n(window))&&window||this)},3821:function(){(function(){var e,t;e=this.jQuery||window.jQuery,t=e(window),e.fn.stick_in_parent=function(r){var i,n,a,s,o,c,u,l,d,h,p,f;for(null==r&&(r={}),d=r.sticky_class,a=r.inner_scrolling,l=r.recalc_every,u=r.parent,o=r.offset_top,s=r.spacer,n=r.bottoming,null==o&&(o=0),null==u&&(u=void 0),null==a&&(a=!0),null==d&&(d="is_stuck"),i=e(document),null==n&&(n=!0),c=function(e){var t;return window.getComputedStyle?(e=window.getComputedStyle(e[0]),t=parseFloat(e.getPropertyValue("width"))+parseFloat(e.getPropertyValue("margin-left"))+parseFloat(e.getPropertyValue("margin-right")),"border-box"!==e.getPropertyValue("box-sizing")&&(t+=parseFloat(e.getPropertyValue("border-left-width"))+parseFloat(e.getPropertyValue("border-right-width"))+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))),t):e.outerWidth(!0)},h=function(r,h,p,f,m,g,y,v){var b,_,k,w,P,A,C,S,E,T,x,D;if(!r.data("sticky_kit")){if(r.data("sticky_kit",!0),P=i.height(),C=r.parent(),null!=u&&(C=C.closest(u)),!C.length)throw"failed to find stick parent";if(b=k=!1,(x=null!=s?s&&r.closest(s):e("<div />"))&&x.css("position",r.css("position")),S=function(){var e,t,n;if(!v&&(P=i.height(),e=parseInt(C.css("border-top-width"),10),t=parseInt(C.css("padding-top"),10),h=parseInt(C.css("padding-bottom"),10),p=C.offset().top+e+t,f=C.height(),k&&(b=k=!1,null==s&&(r.insertAfter(x),x.detach()),r.css({position:"",top:"",width:"",bottom:""}).removeClass(d),n=!0),m=r.offset().top-(parseInt(r.css("margin-top"),10)||0)-o,g=r.outerHeight(!0),y=r.css("float"),x&&x.css({width:c(r),height:g,display:r.css("display"),"vertical-align":r.css("vertical-align"),float:y}),n))return D()},S(),g!==f)return w=void 0,A=o,T=l,D=function(){var e,c,u,_;if(!v&&(u=!1,null!=T&&0>=--T&&(T=l,S(),u=!0),u||i.height()===P||S(),u=t.scrollTop(),null!=w&&(c=u-w),w=u,k?(n&&(_=u+g+A>f+p,b&&!_&&(b=!1,r.css({position:"fixed",bottom:"",top:A}).trigger("sticky_kit:unbottom"))),u<m&&(k=!1,A=o,null==s&&("left"!==y&&"right"!==y||r.insertAfter(x),x.detach()),e={position:"",width:"",top:""},r.css(e).removeClass(d).trigger("sticky_kit:unstick")),a&&(e=t.height(),g+o>e&&!b&&(A-=c,A=Math.max(e-g,A),A=Math.min(o,A),k&&r.css({top:A+"px"})))):u>m&&(k=!0,(e={position:"fixed",top:A}).width="border-box"===r.css("box-sizing")?r.outerWidth()+"px":r.width()+"px",r.css(e).addClass(d),null==s&&(r.after(x),"left"!==y&&"right"!==y||x.append(r)),r.trigger("sticky_kit:stick")),k&&n&&(null==_&&(_=u+g+A>f+p),!b&&_)))return b=!0,"static"===C.css("position")&&C.css({position:"relative"}),r.css({position:"absolute",bottom:h,top:"auto"}).trigger("sticky_kit:bottom")},E=function(){return S(),D()},_=function(){if(v=!0,t.off("touchmove",D),t.off("scroll",D),t.off("resize",E),e(document.body).off("sticky_kit:recalc",E),r.off("sticky_kit:detach",_),r.removeData("sticky_kit"),r.css({position:"",bottom:"",top:"",width:""}),C.position("position",""),k)return null==s&&("left"!==y&&"right"!==y||r.insertAfter(x),x.remove()),r.removeClass(d)},t.on("touchmove",D),t.on("scroll",D),t.on("resize",E),e(document.body).on("sticky_kit:recalc",E),r.on("sticky_kit:detach",_),setTimeout(D,0)}},p=0,f=this.length;p<f;p++)r=this[p],h(e(r));return this}}).call(this)}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$cookieBannerContainer=jQuery(".cookie-banner-container"),this.cookieBannerName="cookiebanner",this.cookieBannerDurationInDays=365}var r,i;return r=t,(i=[{key:"init",value:function(){this.bannerIsPresent()&&this.bindEvents()}},{key:"bindEvents",value:function(){jQuery(".close-cookie-banner").on("click",this.closeCookieBannerHandler.bind(this)),jQuery(".cookie-banner a").on("click",this.clickOnCookieBannerLink.bind(this)),jQuery(window).bind("pageshow",this.onPageLoad.bind(this))}},{key:"closeCookieBannerHandler",value:function(e){e.preventDefault(),this.readCookie(this.cookieBannerName)||this.defineCookie(this.valueFormula()),this.closeCookieBanner()}},{key:"clickOnCookieBannerLink",value:function(){this.deleteCookie(this.cookieBannerName)}},{key:"onPageLoad",value:function(){this.checkCookieBanner()&&this.defineCookie(this.valueFormula())}},{key:"checkCookieBanner",value:function(){var e=this.readCookie(this.cookieBannerName),t=Drupal.settings.hermes_global.cookie_banner_timestamp;return Drupal.settings.show_drupal_cookie_banner&&(e<t||!e)?(this.openCookieBanner(),!0):(this.closeCookieBanner(),!1)}},{key:"defineCookie",value:function(e){this.createCookie(this.cookieBannerName,e,this.cookieBannerDurationInDays)}},{key:"closeCookieBanner",value:function(){this.$cookieBannerContainer.addClass("hide")}},{key:"openCookieBanner",value:function(){this.$cookieBannerContainer.removeClass("hide")}},{key:"deleteCookie",value:function(e){this.createCookie(e,"",-1)}},{key:"createCookie",value:function(e,t,r){var i;r&&(i=new Date).setTime(i.getTime()+24*r*60*60*1e3);var n=r?"; expires=".concat(i.toGMTString()):"";document.cookie="".concat(e,"=").concat(t).concat(n,"; path=/")}},{key:"readCookie",value:function(e){var t="".concat(e,"="),r=document.cookie.split(";"),i=new RegExp("^".concat(t)),n=r.map((function(e){return e.replace(/^\s*/,"")})).find((function(e){return i.test(e)}));return!!n&&n.replace(i,"")}},{key:"bannerIsPresent",value:function(){return!!this.$cookieBannerContainer.length}},{key:"valueFormula",value:function(){return Math.round((new Date).getTime()/1e3)}}])&&e(r.prototype,i),t}(),i=(r(1154),r(97),r(1819)),n=r.n(i),a=r(6608),s=r.n(a),o=(r(1696),r(3821),r(1894),r(8096)),c=r.n(o),u=(r(2097),r(3998)),l=r.n(u),d=function(e,t){if(!t)throw new Error("no namespace provided to broadcast events");return this.els={},this.$page=jQuery(e),this.data={delta:0,direction:"down",directionChanged:!1,pos:null},this.bind=function(){this.binded||(this.binded=!0,this.$page.on("scroll",this.scroll.bind(this)),window===e&&jQuery(window).on("resize",l()(this.resize.bind(this),150)))},this.dom=function(){this.data.width=window===e?window.innerWidth:e.clientWidth,this.data.height=window===e?window.innerHeight:e.clientHeight},this.init=function(){this.dom(),this.bind()},this.getPos=function(){return{direction:this.data.direction,pos:this.data.pos}},this.getSize=function(){return{height:this.data.height,width:this.data.width}},this.resize=function(){var t=window===e?window.innerWidth:e.clientWidth,r=window===e?window.innerHeight:e.clientHeight,i={height:!1,width:!1};t!==this.data.width&&(i.width=t),r!==this.data.height&&(i.height=r),APP.pubsub.publish("resize",i),this.data.height=r,this.data.width=t},this.scroll=function(){var e=this,r="down",i=document.documentElement.scrollTop||document.body.scrollTop;this.data.pos!==i&&(clearTimeout(this.scrollStopTimeout),this.scrollStopTimeout=setTimeout((function(){APP.pubsub.publish("scrollStop",e.data)}),200),this.data.pos>i&&(r="up"),r===this.data.direction?(this.data.delta+=Math.abs(this.data.pos-i),this.data.directionChanged=!1):(this.data.delta=0,this.data.directionChanged=!0),this.data.direction=r,this.data.pos=i,APP.pubsub.publishSync(["scroll",t].join("."),{direction:this.data.direction,directionChanged:this.data.directionChanged,pos:this.data.pos,delta:this.data.delta}))},this.unbind=function(){this.binded=!1,this.$page.off("scroll",this.scroll.bind(this))},this.init(),{getPos:this.getPos.bind(this),getSize:this.getSize.bind(this),start:this.bind.bind(this),stop:this.unbind.bind(this),data:this.data,sizeChanged:this.resize.bind(this)}};function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=Symbol(),f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[p]={}}var t,r;return t=e,(r=[{key:"dispatchEvent",value:function(e){return!!(e instanceof CustomEvent&&this[p][e.type])&&(this[p][e.type].forEach((function(t){t(e)})),!0)}},{key:"addEventListener",value:function(e,t){var r=this;if(!(e&&t&&t instanceof Function))return null;this[p][e]=this[p][e]||[];var i=this[p][e].push(t)-1;return{remove:function(){r[p][e].splice(i,1)}}}}])&&h(t.prototype,r),e}(),m={small:"(max-width: 767px)",medium:"(min-width: 768px) and (max-width: 1023px)",large:"(min-width: 1024px) and (max-width: 1279px)",xlarge:"(min-width: 1280px) and (max-width: 1679px)",xxlarge:"(min-width: 1680px)"};function g(e){if(e&&e.matches&&(e.point||e.currentTarget&&e.currentTarget.point)){var t=e.point||e.currentTarget.point;APP.pubsub.publish("mediaQuery."+t)}}function y(){return window.matchMedia(m.small).matches}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}var b={set:function(e,t){"object"===v(t)&&(t=JSON.stringify(t)),this.hasSessionStorage()?sessionStorage.setItem(e,t):this.setCookie(e,t)},get:function(e){var t=this.hasSessionStorage()?sessionStorage.getItem(e):this.getCookie(e);if(t)try{return JSON.parse(t)}catch(e){return t}},deleteItem:function(e){this.hasSessionStorage()?sessionStorage.removeItem(e):this.deleteCookie(e)},clear:function(){sessionStorage.clear()},hasSessionStorage:function(){var e="test";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}},getCookie:function(e){if(document.cookie){var t=document.cookie.split(";"),r=e.length+1,i=t.map((function(e){return jQuery.trim(e)})).find((function(t){return t.substring(0,r)==="".concat(e,"=")}));return i?decodeURIComponent(i.substring(r)):void 0}},setCookie:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.expires;if("number"==typeof i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),i=r.expires=n}i&&i.toUTCString&&(r.expires=i.toUTCString()),t=encodeURIComponent(t);var a="".concat(e,"=").concat(t);for(var s in r)if(r.hasOwnProperty(s)){a+="; ".concat(s);var o=r[s];!0!==o&&(a+="=".concat(o))}document.cookie=a},deleteCookie:function(e){this.setCookie(e,null,{expires:-1})}},_=b,k={COLOR_LESS:"SANSCOLORIS",SIZE_LESS:"SANS_TAILLE",CANADA:"ca",FRANCE:"fr",JAPAN:"jp",HK:"hk",MACAO:"mo",TAIWAN:"tw",KOREA:"kr",US:"us",CHINA:"cn",EMIRATES:"dh",SAUDI:"ri",NEED_YUNPIAN:["cn","hk","mo","tw","kr","th"],REGION_DISTRICT_FIELDS:["hk","mo","th"],CONDITIONAL_CITY_DISTRICT_FIELD:["tw"],PHONE_LOGIN:["cn"],DELIVER:"deliver",PICKUP:"pickup",COLOR_LESS_WITH_SPACE:"SANS_COLORIS",NB_ITEMS_GRID_FH:36,MIN_DAY:0,MAX_DAY:31,LENGTH_YEAR:4,LIMIT_AGE_USER:110,YEAR_LABEL:"year",SPECIAL_KEY:["Backspace","Del","Home","Tab","Left","Right","Up","Down","End","Spacebar","Shift"],TABLET_LANDSCAPE_WIDTH:1024,TABLET_PORTRAIT_WIDTH:768,REGION_DISABLED:-1,LOGIN_DELAY:4e3,HOSTNAME:["www.hermes.com","www.hermes.cn"],ERRORCODE:{inactivity:"401",emptyCart:"4100004",wrongEmailPassword:"2300001",oldPasswordIncorrect:"2310001",emailExist:"2400001",accountExist:"2400011",emailNewsletterInvalid:"2200000",emailInvalid:"2200001",outOfStock:"3300007",notInStock:"3400007",expiredHash:"2900005",hashNotFound:"2300005",smsBanned:"3100002",wechatbindingUserNotFound:"6000011",wechatbindingUserAlreadyBind:"6100011",wechatbindingUnionIdAlreadyUsed:"6200011",wechatbindingNeededParams:"6300011"},BRAND:"hermes",PRODUCTSIMPLEPAGELABEL:"SingleProductPage",PRODUCTDOUBLEPAGELABEL:"DoubleProductPage",LOOKPAGELABEL:"LooksProductPage",NONAPP:"N/A",MOTHERCAT:"1481",NONCONNECTED:"non-connected",FRONT_PAGE:"front page",FAQ_PAGE:"faq page",LEGAL_PAGE:"legal page",PAGE_404:"404 error page",LISTING_PAGE:"listing page",STORY_PAGE:"edito page",ACCOUNT_PROFIL_PAGE:"account",PRODUCT_PAGE:"product page",PRODUCT_PAGE_SINGLE:"single product page",PRODUCT_PAGE_DOUBLE:"double product page",PRODUCT_PAGE_LOOK:"look product page",PRODUCT_PAGE_SET:"set product page",FIND_STORE_PAGE:"store locator",VALIDATE_3DS_PAGE:"validate_3ds page",CHECKOUT_CONFIRMATION:"Checkout confirmation",PRODUCT_GRID:"product grid",MASTER_PAGE:"master page",SCROLL_PARAM:"positionsku",START_INDEX_PARAM:"fh_start_index",LIMIT_PRODUCTS_PARAM:108,SEARCH_RESULTS:"search results",MODULE_VIDEO:"Module_Video",VPURI_FINDYOURORDER:"/findyourorder/",VPURI_ORDERSTRAY:"/orderstray/",COUNTRY_USING_MILES:["US"],GENDERS:["Ms.","Mrs.","Mr.","Miss","Dr","Prof","Honorable"],EXTRA_URL_PARAM:["positionsku"],SECURITY_3DS_LOGOS:[{img:"visa",alt:"Verified by Visa"},{img:"mastercard",alt:"MasterCard SecureCode"},{img:"amex",alt:"American Express SafeKey"}],PAYMENT_OK:"payment_OK",PAYMENT_NOK:"payment_NOK",NOT_USED:"not_used",DURATION_SLIDE_TOGGLE:500,EXCHANGE:"exchange",REFUND:"refund",RETURN:"return",ENTER_KEY:"Enter",SPACE_KEY:"Space",BACKSPACE_KEY:"Backspace",ESCAPE_KEY:"Escape",ESCAPE_KEYCODE:27,DOWN_KEY:"ArrowDown",UP_KEY:"ArrowUp",TAB_KEY:"Tab",TAB_KEYCODE:9,SPACE_KEYCODE:32,END_KEYCODE:35,HOME_KEYCODE:36,LEFT_KEYCODE:37,UP_KEYCODE:38,RIGHT_KEYCODE:39,DOWN_KEYCODE:40,CHECKOUT:"Checkout",DATAGROUP:"data-group",INVALIDTYPES:[null,"file","image","submit","fieldset","reset","button","hidden"],FIELD_REF_SIZE:"field_ref_size",FIELD_COLOR_HERMES:"field_color_hermes",FIELD_MASS_VOLUME_INT:"field_mass_volume_int",FIELD_MASS_VOLUME_IMP:"field_mass_volume_imp",REQUIRED:"required",ERROR:"error",NO_SHIPPING_ADDRESS_MSG_COUNTRY_PREFIX:{US:"the"},SOAP_SET_COUNT:[3],PIPE_ENCODED:"%7C",REDIRECT_DELAY:3e3,NOTAX:"--",IS_IOS:/i(Phone|Pod|Pad)/.test(navigator.appVersion),KIT_APPLEWATCH:"KIT_APPLEWATCH",ACTIVATE_CAPTCHA_URL:"/is-captcha-activated",GET_LIST_CHINA_ADDRESS:"/address/china/infos",ADDRESS_DISTRICTS_URL:"/address/districts",PAYMENT_METHOD:{creditCard:"adyen_cc",adyenOneclick:"adyen_oneclick",paypal:"adyen_hpp_paypal",alipay:"alipay_payment",kcp:"adyen_hpp_kcp",kcp_payco:"adyen_hpp_kcp_payco",wechat:"wechatpay",hsbcCup:"hsbc_cup"},EZ_PUBLISH_COUNTRY_MAPPING:{ca:"Canada",fr:"France",us:"United States",gb:"Great Britain",cn:"China",de:"Germany",es:"Spain"},BIKINI:"BIKINI",PLAYER:{autoplay:"Autoplay",firstPlay:"FirstPlay",fullscreen:"Fullscreen",fw:"fw15",mute:"Mute",newPlay:"NewPlay",orgId:"88c3d9f3-ba13-4700-9f9f-a9030187bd5b",pause:"Pause",play:"Play",position:"Position",subscribe:"Subscribe to podcast",subscribe_close:"Close subscribe to podcast",rw:"rw15",start:"Start",stop:"Stop",unmute:"Unmute"},SAGAWA_CARRIER:"sagawa_standard",JAPAN_LASTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_LASTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_NO_NUMBERS_PATTERN:"\\d",FORGOT_PASSWORD_URL:"/forgot-password",CREATE_LIGHT_ACCOUNT_URL:"/customer/light",PRODUCT_LOCATOR_MSG_CONCESSIONARY_DISCLAIMER_COUNTRIES:["fr","us","it"],FORM_COUNTRY_DEFAULT_FIELDS_VALUES:{city:1,cityselect:-1,social_security_number:-1,day:-1,district:-1,district_bis_id:-1,email:1,firstname:1,firstname2:-1,gender:-1,lastname:1,lastname2:-1,month:-1,postcode:1,postcode_bis:-1,postcode_select:-1,prefix:1,region:-1,regiontext:-1,street1:1,street2:0,street3:-1,street_number:-1,subject_list:1,telephone2:-1,year:-1},CHECKOUT_CARD_TYPE:{visa:"Visa",amex:"American Express",mc:"Mastercard",jcb:"JCB",dinersclub:"Diners Club",discover:"Discover",maestro:"Maestro",cartebancaire:"Carte bancaire"}};function w(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"getCreditCardsData",value:function(e,t){var r={},i=!1;return Array.prototype.concat.apply([],Object.keys(e).filter((function(e){return t||!/adyen_hpp_|mercury_hpp_/.test(e)})).map((function(t){return Object.keys(e[t]).map((function(r){return e[t][r]}))}))).filter((function(e){return r[e.data]||-1!==e.data.indexOf("alipay")?e.data.indexOf("alipay")>-1?!i&&(i=!0,!0):void 0:(r[e.data]=e.data,!0)}))}},{key:"allowedAutocompleteCountries",value:function(){var e=[];for(var t in Drupal.settings.hermes_account.options_countries)Drupal.settings.hermes_account.options_countries[t]["autocomplete-address"]&&e.push(t);return e}},{key:"isAutocompleteAddressActive",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-address"]}},{key:"isPreventEditingReturnRegionInCountriesActive",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["prevent-editing-return-region"]}},{key:"getAutocompleteField",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-field"]}},{key:"getAutocompleteType",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-type-regions"]?"(regions)":"address"}},{key:"getGoogleRegionMapping",value:function(e){return Drupal.settings.hermes_account.options_countries[e.toUpperCase()]["region-mapping"]}},{key:"isChina",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(k.CHINA,"i"))}},{key:"isHK",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(k.HK,"i"))}},{key:"isMacao",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(k.MACAO,"i"))}},{key:"isTaiwan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(k.TAIWAN,"i"))}},{key:"isKorea",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(k.KOREA,"i"))}},{key:"needSmsProvider",value:function(){return k.NEED_YUNPIAN.includes(Drupal.settings.hermes_current_country)}},{key:"needPhoneLogin",value:function(){return k.PHONE_LOGIN.includes(Drupal.settings.hermes_current_country)}},{key:"needStateDistrictFields",value:function(e){return k.REGION_DISTRICT_FIELDS.includes(e.toLowerCase())}},{key:"hasConditionalCityDistrictFields",value:function(e){return k.CONDITIONAL_CITY_DISTRICT_FIELD.includes(e.toLowerCase())}},{key:"isJapan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(k.JAPAN,"i"))}},{key:"hasLoginPhoneNumber",value:function(e){return e.phoneCode&&e.loginphone}},{key:"urlTransform",value:function(e){var t=e;return e?(this.isChina()&&(t=e.replace(/hermes\.com/g,"hermes.cn")),t):t}},{key:"isWechatInApp",value:function(){return-1!==navigator.userAgent.indexOf("MicroMessenger")}},{key:"findGetParameter",value:function(e,t){t?t.split("?")&&(t="?"+t.split("?")[1]):t=window.location.search;var r=null,i=[];return t.substr(1).split("&").forEach((function(t){(i=t.split("="))[0]===e&&(r=decodeURIComponent(i[1]))})),r}},{key:"resizeCarousel",value:function(e){["afterChange","beforeChange"].forEach((function(t){jQuery(e).on(t,(function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];t.$slides.each((function(e,t){jQuery(t).height(i.includes(e)?"100%":"1px")}))}))}))}},{key:"generateReCaptcha",value:function(t,r){if(!e.isChina()){var i=t.success;parseInt(i,10)&&jQuery.when(jQuery.getScript("https://www.google.com/recaptcha/api.js?render=explicit")).then((function(){APP=APP||{},APP.recaptcha=APP.recaptcha||{};var t=r.replace("#","");APP.recaptcha[t]||0===APP.recaptcha[t]||(e.initReCaptcha(APP,t),jQuery('<p class="captcha-label" aria-hidden="true">'.concat(Drupal.settings.hermes_translations.validation.securityCheck,"</p>")).insertBefore("".concat(r,"-captcha")))}))}}},{key:"initReCaptcha",value:function(t,r){setTimeout(function(){"undefined"==typeof grecaptcha||void 0===grecaptcha.render?e.initReCaptcha(t,r):t.recaptcha[r]=grecaptcha.render("".concat(r,"-captcha"),{sitekey:Drupal.settings.hermes_global.google.apis.recaptcha.site_key,hl:"tw"===_.get("currentCountry")?_.get("currentLanguage").concat("-"+_.get("currentCountry")):_.get("currentLanguage")})}.bind(this),100)}},{key:"validateRecaptcha",value:function(t){var r=jQuery("#".concat(t,"-captcha"));return!(APP.recaptcha&&void 0!==APP.recaptcha[t]&&(APP.recaptcha[t]||0===APP.recaptcha[t]?window.grecaptcha.getResponse(APP.recaptcha[t])?(r.removeClass("validation-error"),0):(e.throwErrorReCaptcha(r),window.grecaptcha.reset(),1):(e.throwErrorReCaptcha(r),1)))}},{key:"throwErrorReCaptcha",value:function(e){e.hasClass("validation-error")||(e.addClass("validation-error"),jQuery('<p class="captcha-error-message error-message" aria-hidden="true">'.concat(Drupal.settings.hermes_translations.validation.required,"</p>")).insertAfter(e))}},{key:"ieAccordPlusToMinForIe",value:function(e,t){if(document.documentMode)return e.find(".accordion-icon-plus").attr("transform","rotate(".concat(t,")"))}},{key:"trapFocusInTray",value:function(e){setTimeout((function(){var t=e.find("a:visible, object:visible, :input:visible, iframe:visible, [tabindex]:visible").filter(":not(.invisible a)"),r=t.first()[0],i=t.last()[0];e.off("keydown").on("keydown",(function(e){(e.key===k.TAB_KEY||e.keyCode===k.TAB_KEYCODE)&&(e.shiftKey?document.activeElement===r&&(i.focus(),e.preventDefault()):document.activeElement===i&&(r.focus(),e.preventDefault()))}))}),10)}},{key:"isAngularMode",value:function(){return Drupal.settings.hermes_angular||!1}},{key:"is_touch_device",value:function(){var e,t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||(e=["(",t.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(e).matches)}},{key:"pwdStrengthScreenReader",value:function(e,t,r){var i=jQuery(t),n=jQuery(r),a=n.parents(".container-fieldset").find(".password-strength-label").attr("id");return new MutationObserver((function(t){t.map((function(e){return i.parent().attr("aria-hidden",!r.value.length),n.attr("aria-describedby",a),e})).filter((function(e){return"attributes"===e.type&&"class"===e.attributeName})).forEach((function(){i.text(""),e.classList.contains("weak")?i.text(": ".concat(Drupal.settings.hermes_translations.account.weak)):e.classList.contains("medium")?i.text(": ".concat(Drupal.settings.hermes_translations.account.medium)):e.classList.contains("strong")&&i.text(": ".concat(Drupal.settings.hermes_translations.account.strong))})),""===n.val()&&n.removeAttr("aria-describedby")}))}},{key:"secondsToHms",value:function(e){var t=Number(e),r=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%3600%60);return(r=r>0&&1===r.toString().length?"0".concat(r,":"):r.toString().length>1?"".concat(r,":"):"")+(i=i>0&&1===i.toString().length?"0".concat(i,":"):i.toString().length>1?"".concat(i,":"):"00:")+(n>0&&1===n.toString().length?"0".concat(n):n.toString().length>1?"".concat(n):"00")}},{key:"isInViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e?e.getBoundingClientRect():null,i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,a=i*(100-t)/100;if(r){if(100===t)return r.top>=0&&r.bottom<=i&&r.left>=0&&r.right<=n;var s=r.bottom>=0&&r.bottom<=a,o=r.top>=0&&r.top<=a,c=r.left>=0&&r.left<=n,u=r.right>=0&&r.right<=n;return(s||o)&&(c||u)}return!1}},{key:"isFirefox",value:function(){return-1!==navigator.userAgent.indexOf("Firefox")}},{key:"setFocusOnElement",value:function(e){var t=jQuery(e);t.length>0&&(t.attr("tabindex","0"),t.focus())}},{key:"getLineSeparator",value:function(e){return e&&!this.isTaiwan()?null:this.isJapan()||this.isMacao()||this.isHK()||this.isKorea()?"<br/>":this.isTaiwan()?" ":null}},{key:"setLatinCharOnly",value:function(e){jQuery(e).find('input[name="firstname"]').addClass("only-latin-char"),jQuery(e).find('input[name="lastname"]').addClass("only-latin-char"),jQuery(e).find('input[name="email"]').addClass("only-latin-char"),jQuery(e).find('input[name="company"]').addClass("only-latin-char"),jQuery(e).find('input[name="street1"]').addClass("only-latin-char"),jQuery(e).find('input[name="street2"]').addClass("only-latin-char"),jQuery(e).find('input[name="street3"]').addClass("only-latin-char"),jQuery(e).find('input[name="city"]').addClass("only-latin-char")}},{key:"setLatinCharOnlyForUaeSa",value:function(e){jQuery(e).find('input[name="firstname"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="lastname"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="email"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="street1"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="street2"]').addClass("only-latin-char-for-uae-sa"),jQuery(e).find('input[name="city"]').addClass("only-latin-char-for-uae-sa")}},{key:"assignValues",value:function(t,r,i){switch(t.country_id){case"CN":e.isChina()&&(t.city=t.cityselect);break;case"MO":e.isMacao()&&(t.district=r);break;case"TH":t.district=r,t.city=t.district,t.postcode=t.postcode_select,delete t.postcode_select;break;case"TW":t.district=r,t.city=i,t.city_bis_id=t.cityselect,t.cityselect=""}}}],null&&w(t.prototype,null),r&&w(t,r),e}(),A=r(4277),C=r.n(A);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var T=function(e){var t,r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Drupal.settings.hermes_locale,s="様",o=[];if(a){var c=a.split("_"),u=S(c,2);t=u[0],r=u[1]}else t=_.get("currentCountry"),r=_.get("currentLanguage");e.country_id&&e.country_id===k.JAPAN.toUpperCase()&&(t="jp");var l=" ";switch("-"===e.prefix&&(e.prefix=""),t){case"cn":o="zh"===r?[e.lastname,e.firstname,e.prefix]:[e.prefix,e.lastname,e.firstname];break;case"jp":o=n?[e.lastname2,e.firstname2,s]:[e.lastname,e.firstname,s];break;case"tw":o=[e.lastname+""+e.firstname,e.prefix];break;case"hk":case"mo":o=[e.prefix,e.firstname,e.lastname];break;case"kr":o=[e.lastname,e.firstname],l="";break;default:o=i?[e.prefix,e.firstname,e.middlename,e.lastname]:[e.firstname,e.middlename,e.lastname]}return o.filter((function(e){return e})).join(l)};function x(e,t,r){var i=jQuery("#".concat(e)),n=i.find(".tray-notification-message"),a=i.find(".continue-experience");i.find(".tray-content-container").hide(),function(e,t,r,i){var n={},a=!!P.isChina();switch(e){case"login":n.name=T(APP.NOTIFICATIONS.messages,!0),t.html(C().render(APP.templates.trayNotificationLogin,n));break;case"logout":n.name=function(e){var t=Drupal.settings.hermes_locale.split("_"),r=t[0],i=t[1],n=[],a=" ";switch(r){case"cn":return"zh"===i&&(n=[e.lastname,e.firstname,e.prefix]),n.filter((function(e){return e})).join("");case"tw":n=[e.lastname+""+e.firstname,e.prefix];break;case"hk":case"mo":n=[e.prefix,e.firstname,e.lastname];break;case"kr":n=[e.lastname,e.firstname],a="";break;default:return e.firstname}return n.filter((function(e){return e})).join(a)}(APP.NOTIFICATIONS.messages),t.html(C().render(APP.templates.trayNotificationLogout,n));break;case"wechat-binding":n.firstname=APP.NOTIFICATIONS.messages.firstname,n.lastname=APP.NOTIFICATIONS.messages.lastname,a&&(n.prefix=APP.NOTIFICATIONS.messages.prefix),t.html(C().render(APP.templates.trayNotificationWechatBinding,n));break;case"newsletter":"success"===r?(n.title=Drupal.settings.hermes_translations.notification.newsletter.subscribed.title,n.description=Drupal.settings.hermes_translations.notification.newsletter.subscribed.description):(n.title=Drupal.settings.hermes_translations.notification.account.errorMessage.title,n.description=Drupal.settings.hermes_translations.notification.account.errorMessage.description),t.html(C().render(APP.templates.trayNotificationNewsletter,n));break;case"contact-us":"success"===r?(n.titleContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.success.title,n.messageContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.success.description):(n.titleContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.error.title,n.messageContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.error.description),t.html(C().render(APP.templates.trayNotificationContactUs,n));break;case"change-password":n.title=APP.NOTIFICATIONS.messageChangePassword.messageTitle,n.message=APP.NOTIFICATIONS.messageChangePassword.messageDescription,n.removedPaymentCardsMessage=APP.NOTIFICATIONS.messageChangePassword.messageRemovedPaymentCardsDescription,t.html(C().render(APP.templates.trayNotificationChangePassword,n))}P.trapFocusInTray(i)}(t,n,r,i),i.attr({role:"alertdialog","aria-describedby":"notification-".concat(e)}),n.removeClass("hidden"),a.removeClass("hidden").focus()}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function O(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function I(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var R,M,F,N,Q,U,B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(s,e);var t,r,i,n,a=(i=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(i);if(n){var r=L(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return I(this,e)});function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=a.call(this);var r={overlay:document.querySelector("#tray-overlay"),duration:5e3,animationSpeed:.35,scrollSpeed:1,ease:window.Power2.easeInOut};return t.validate=e.validate,t.$wrapper=jQuery("#tray"),t.$el=e.$el,t.overlay=r.overlay,t.name=e.name,t.instanceId=e.instanceId||t.name,t.duration=e.duration||r.duration,t.animationSpeed=e.animationSpeed||r.animationSpeed,t.scrollSpeed=e.scrollSpeed||r.scrollSpeed,t.ease=e.ease||r.ease,t.showOverlay=e.showOverlay,t.isOpen=!1,t}return t=s,(r=[{key:"_bindDomEvents",value:function(){this.$el.on("click",".tray-close",this._onTrayBackNodeClick.bind(this))}},{key:"_unbindDomEvents",value:function(){this.$el.off("click",".tray-close",this._onTrayBackNodeClick.bind(this))}},{key:"open",value:function(){this.dispatchEvent(new CustomEvent("openOne",{detail:{name:this.name,instanceId:this.instanceId}}))}},{key:"doOpen",value:function(){var e,t,r;this.$wrapper.removeClass("large-tray"),this.dispatchEvent(new CustomEvent("open",{detail:{name:this.name,instanceId:this.instanceId}})),this.$el.removeClass("invisible").trigger("visibleChange"),this.ariaHiddenTray(this.$el,!0),this.modalDialogTray(this.$el,!0),this.updateErrorFormMessageTitle(this.$el),this.ariaHiddenElementsBehindTray(!0),TweenLite.to(this.$wrapper,this.animationSpeed,{autoAlpha:1,x:0,force3D:!0,ease:this.ease,onComplete:this._onOpenComplete.bind(this)}),t=(e=jQuery("#tray")).find(".tray-notification-message"),r=e.find(".continue-experience"),t.addClass("hidden"),t.empty(),r.addClass("hidden"),e.find(".tray-content-container").show(),P.trapFocusInTray(this.$el),this.focusOnButton(this.$el),this.showBackground()}},{key:"close",value:function(){this.dispatchEvent(new CustomEvent("closeAll",{detail:{name:this.name,instanceId:this.instanceId}}))}},{key:"doClose",value:function(){this.ariaHiddenTray(this.$el,!1),this.$el.attr("aria-live","assertive"),this.$el.hasClass("tray-nav")?(this.$wrapper.css({right:"auto",left:"0"}),TweenLite.to(this.$wrapper,this.animationSpeed,{x:-1*this.$wrapper.outerWidth(),force3D:!0,ease:this.ease,onComplete:this._onCloseComplete.bind(this)})):(this.$wrapper.css({left:"auto",right:"0"}),TweenLite.to(this.$wrapper,this.animationSpeed,{x:this.$wrapper.outerWidth(),force3D:!0,ease:this.ease,onComplete:this._onCloseComplete.bind(this)})),this.hideBackground(),this.dispatchEvent(new CustomEvent("close",null))}},{key:"back",value:function(){var e=this;this.validate?this.validate().then((function(t){t&&e.dispatchEvent(new CustomEvent("backButtonClick",{detail:{name:e.name,instanceId:e.instanceId}}))})):this.dispatchEvent(new CustomEvent("backButtonClick",{detail:{name:this.name,instanceId:this.instanceId}}))}},{key:"animateIntoStack",value:function(e){var t=25*e.to;this.$el.removeClass("invisible"),this.ariaHiddenTray(this.$el,!0),this.modalDialogTray(this.$el,!0),this.$el.addClass("opening-tray"),this.dispatchEvent(new CustomEvent("open",{detail:{name:this.name,instanceId:this.instanceId}})),TweenLite.fromTo(this.$el,.4,{autoAlpha:0,xPercent:t},{autoAlpha:1,xPercent:0,delay:.1,force3D:!0,ease:window.Power2.easeInOut,onComplete:this._onTrayAnimateIntoStackComplete.bind(this)})}},{key:"animateOutOfStack",value:function(e){var t=25*e.from;this.$el.removeClass("invisible"),this.ariaHiddenTray(this.$el,!0),this.modalDialogTray(this.$el,!0),this.$el.addClass("closing-tray"),TweenLite.to(this.$wrapper,.15,{scrollTo:{x:0,y:0},delay:.2,force3D:!0,ease:window.Power2.easeInOut}),TweenLite.fromTo(this.$el,.5,{autoAlpha:1,xPercent:0},{autoAlpha:0,xPercent:t,force3D:!0,ease:window.Power2.easeInOut,onComplete:this._onTrayAnimateOutOfStackComplete.bind(this)})}},{key:"showBackground",value:function(){null!==this.overlay&&(this.showOverlay||y())&&this.overlay.classList.add("visible")}},{key:"hideBackground",value:function(){null!==this.overlay&&this.overlay.classList.contains("visible")&&this.overlay.classList.remove("visible")}},{key:"hide",value:function(){this.$el.addClass("invisible"),this.ariaHiddenTray(this.$el,!1),this.$el.removeAttr("style")}},{key:"scrollTo",value:function(e){TweenLite.to(this.$wrapper,this.scrollSpeed,{scrollTo:{y:e.top},ease:this.ease})}},{key:"_onTrayAnimateIntoStackComplete",value:function(){this.isOpen=!0,this.$el.removeClass("opening-tray"),this._bindDomEvents(),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}})),P.trapFocusInTray(this.$el),this.focusOnButton(this.$el),this.updateErrorFormMessageTitle(this.$el)}},{key:"_onTrayAnimateOutOfStackComplete",value:function(){this.isOpen=!1,this.$el.removeClass("closing-tray"),this._unbindDomEvents(),this.hide(),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}})),P.trapFocusInTray(this.$el),this.focusOnButton(this.$el)}},{key:"_onOpenComplete",value:function(){this.isOpen=!0,this._bindDomEvents(),this.dispatchEvent(new CustomEvent("animateLastTrayFromStackComplete",{detail:{name:this.name,instanceId:this.instanceId}})),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}}))}},{key:"_onCloseComplete",value:function(){this.isOpen=!1,this._unbindDomEvents(),this.hide(),this.dispatchEvent(new CustomEvent("animateLastTrayFromStackComplete",{detail:{name:this.name,instanceId:this.instanceId}})),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}})),this.$wrapper.removeAttr("style"),TweenLite.set(this.$wrapper,{clearProps:"transform"}),jQuery("#variant-info").removeAttr("tray-trigger-origin-position"),this.ariaHiddenElementsBehindTray(!1),this.updateErrorFormMessageTitle()}},{key:"_onTrayBackNodeClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.back()}},{key:"focusOnButton",value:function(e){e.find("button")[0].focus()}},{key:"ariaHiddenTray",value:function(e,t){e.attr("aria-hidden",!t)}},{key:"modalDialogTray",value:function(e,t){t&&e.attr({"aria-labelledBy":"title-".concat(e.attr("id")),"aria-atomic":!1,role:"dialog"})}},{key:"ariaHiddenElementsBehindTray",value:function(e){var t=jQuery("#tray-scroll-wrap"),r=jQuery("#header-meta, #page-header, #page-footer, .cookie-banner-container, .scroll-nav-container");t.nextAll().attr("aria-hidden",e),t.prevAll().attr("aria-hidden",e),r.attr("aria-hidden",e)}},{key:"updateErrorFormMessageTitle",value:function(e){var t=jQuery("head title"),r=jQuery("body"),i=Drupal.settings.hermes_translations.validation.errorOnForm,n=t.text().replace(i,"");e?e.hasClass("error-on-form")?t.html(i+n):t.html(n):r.hasClass("error-on-form")?t.html(i+n):t.html(n)}}])&&O(t.prototype,r),s}(f);function V(){M||(R=APP.templates.notification,M=document.querySelector(".notification"),N=M.querySelector(".loading-animation"),Q=M.querySelector(".message-wrapper"),F=!1,jQuery(document).off("click keydown",".notification-overlay",Z).on("click keydown",".notification-overlay",Z),jQuery(document).off("click",".js-try-again",X).on("click",".js-try-again",X))}function z(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(U),ie(!0),M&&(ee(),G(),K(e))}function H(e){jQuery(".".concat(e)).addClass("loader-animation"),jQuery(".".concat(e)).addClass("visible-loader-button")}function q(e){jQuery(".".concat(e)).removeClass("loader-animation"),jQuery(".".concat(e)).removeClass("visible-loader-button")}function G(){TweenLite.to(M,.2,{autoAlpha:1,ease:window.Power2.easeInOut})}function K(e){var t;jQuery(M).addClass("loader"),t=Drupal.settings.pathTheme?Drupal.settings.pathTheme+"/img/loader":document.querySelector(".login-block-wrapper").getAttribute("data-loaderpath");var r=Math.floor(6*Math.random());N.style.backgroundImage="url("+t+"-"+r+".gif)",TweenLite.set(N,{opacity:1}),e&&ne()}function W(){jQuery(M).removeClass("loader"),TweenLite.to(N,.2,{opacity:0,ease:window.Power2.easeInOut})}function Y(e){if(e.type&&M.setAttribute("data-type",e.type),e.extraclass&&jQuery(M).addClass(e.extraclass),clearTimeout(U),!e.message)throw new Error("showMessage: Cant show notification without content.");if(ne(),e.inject)setTimeout((function(){Q.innerHTML=e.message,G()}),150);else{var t=C().render(R,e.message);e.messageVariables&&(t=C().render(t,e.messageVariables),t=C().render(t,{locale:Drupal.settings.hermes_url_locale})),e.showSpinner||W(),ee(),Q.innerHTML=t,G(),e.afterRender&&e.afterRender(),"critical"!==e.type&&"super-critical"!==e.type&&(r=e.callback,clearTimeout(U),U=setTimeout((function(){W(),J(),r&&"function"==typeof r&&r()}),4e3))}var r}function X(e){e.preventDefault(),J()}function Z(e){e&&"super-critical"!==M.getAttribute("data-type")&&jQuery(".message-wrapper").html().length&&("click"===e.type||27===e.keyCode)&&J()}function J(){clearTimeout(U),M&&(TweenLite.to(M,.2,{autoAlpha:0,ease:window.Power2.easeInOut,onComplete:ee}),document.body.classList.remove("body-noscroll"),setTimeout((function(){ie(!1)}),200))}function ee(){Q&&(Q.innerHTML="",N.style.backgroundImage="")}function te(e){var t={message:Drupal.settings.hermes_translations.notification.account.errorMessage,messageVariables:{},type:"critical",afterRender:function(){e&&jQuery(".notification").find(".js-try-again").off("click.notification").on("click.notification",(function(t){e(t)}))}};jQuery.extend(t.messageVariables,Drupal.settings.hermes_translations.notification.account.errorMessage.variables),Y(t);var r=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:r,message:t.message.description})}function re(){return F}function ie(e){F=e}function ne(){document.body.classList.add("body-noscroll")}function ae(e,t){var r=Drupal.settings.hermes_account.options_countries[e];if(r&&t){var i=r["zip-separator"],n=r["zip-pattern"],a=r["zip-maxlength"]?parseInt(r["zip-maxlength"],10):5;if(i){t.length>=a&&!t.includes(i)&&(t=t.slice(0,-1));var s=t.replace(i,""),o=n.indexOf("{")+1,c=parseInt(n.substring(o,o+1),10),u=n.replace("([".concat(i,"]{1})"),"");c>=0&&s.length>c&&!s.includes(i)&&(t="GB"===e?s.replace(new RegExp(u),"$1".concat(i,"$2")):s.replace(new RegExp("([a-zA-Z0-9]{".concat(c,"})([a-zA-Z0-9]*)")),"$1".concat(i,"$2")))}return t}}function se(e,t){var r=Drupal.settings.hermes_account.options_countries[e];if(r&&t){var i=r["zip-separator"];return i&&(t=t.replace(i,"")),t}}jQuery("#cart-notification"),window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||c(),APP.pubsub.subscribe("app.start",V);var oe=function(){var e=/^.*@.*(\.|::).*$/;this.checkEmailInput=function(t){var r="blur"===t.type?jQuery(t.currentTarget):jQuery(t.target.querySelector("input[type=email]")),i=!r.val()||e.test(r.val());return i?r.removeClass("error"):r.addClass("error"),i},this.checkPhoneInput=function(e){var t="blur"===e.type?jQuery(e.currentTarget):jQuery(e.target.querySelector("input[name=loginphone]")),r=new RegExp(t.attr("pattern")),i=t.val()&&r.test(t.val());return i?t.removeClass("error"):t.addClass("error"),i},this.reCheckErrorEmailInput=function(t){var r=jQuery(t.currentTarget);jQuery(t.target).hasClass(k.ERROR)&&e.test(r.val())&&r.removeClass(k.ERROR)},this.showPasswordMask=function(e){var t=jQuery(e.currentTarget),r=t.closest("div").find('input[name*="password"]'),i=r.length?r.prop("type"):"";r.length&&("text"===i?(r.prop("type","password"),t.text(t.attr("data-show")),t.attr("aria-label",Drupal.settings.hermes_translations.account.show)):(r.prop("type","text"),t.text(t.attr("data-hide")),t.attr("aria-label",Drupal.settings.hermes_translations.account.hide)))},this.populateForm=function(e,t){var r=this;Object.keys(e).map((function(t){return{key:t,value:e[t]}})).forEach((function(e){var i="postcode"===e.key?'.form-item [name*="'.concat(e.key,'"]:not([name*="bis"])'):'.form-item [name*="'.concat(e.key,'"]'),n=t.find(i),a="region"===e.key&&n.prop("disabled")?t.find('.form-item [name*="regiontext"]:enabled'):n;if(a.length)if("select-one"===a.prop("type"))r.updateSelect(a,e.value);else{if("postcode"===e.key){var s=a.parents("form").find('[name*="country_id"]').val();e.value=ae(s,e.value)}a.val(e.value)}}))},this.clearForm=function(e){var t=e.find('.form-item [name]:not([id^="edit-country"]):not([id^="edit-phonecode"]):not([id^="edit-registredphonecode"]):not([id^="edit-send-sms-button"])');t.map((function(e){return jQuery(t.get(e))})).each((function(){"select-one"===this.prop("type")?(this.prop("selectedIndex",0),this.trigger("change")):this.val("")}))},this.updateSelect=function(e,t){if(e.length&&t){var r=!!e.find("option").toArray().find((function(e){return jQuery(e).val()===t.toString()}));if(!r){var i=jQuery("<option>",{value:t.toString(),text:t});e.append(i)}e.val(t.toString()),e.trigger("change")}},this.displayError=function(e,t){var r=t.find(".error-message");r.length>0?r.innerHTML=e:t.prepend('<p class="error-message">'.concat(e,"</p>"))},this.showFormatedCpf=function(e){var t=e;return 11===t.length?t=t.substring(0,3)+"."+t.substring(3,6)+"."+t.substring(6,9)+"-"+t.substring(9,11):14===t.length&&(t=t.substring(0,2)+"."+t.substring(2,5)+"."+t.substring(5,8)+"/"+t.substring(8,12)+"-"+t.substring(12,14)),t}};function ce(e,t,r){var i;if(r&&r.match(/^(POST|GET)$/)||(r="POST"),t||(t={}),e){t.country||(t.country=_.get("currentCountry")),t.locale||(t.locale=_.get("currentStore"));var n=!!t.async,a=t.cache?t.cache:void 0;return n&&delete t.async,a&&delete t.cache,"POST"===r?(i={method:r,url:"".concat(Drupal.settings.hermes_global.url_ecp).concat(e),data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}},n&&(i.async=n)):i={method:r,url:"".concat(Drupal.settings.hermes_global.url_ecp).concat(e),data:t,xhrFields:{withCredentials:!0}},a&&(i.headers={"Cache-Control":"public, max-age="+a}),jQuery.ajax(i)}}var ue=function(e,t,r,i){var n;return i=i||window.csrfEnabled,r&&r.match(/^(POST|GET)$/)||(r="POST"),i?n=ce(e,t,r):(n=jQuery.Deferred(),APP.pubsub.subscribe("csrfToken.headerAdded",(function(){ce(e,t,r).done((function(){var e;(e=n).resolve.apply(e,arguments)})).fail((function(){var e;(e=n).reject.apply(e,arguments)}))}))),n},le=r(3184),de=r.n(le),he=r(4687),pe=r.n(he),fe=r(6252),me=r.n(fe);function ge(e){this.dobArray=["day","month","year"],this.fields=[],this.errorMessageObject=Drupal.settings.hermes_translations.validation,this.patterns={required:/\S/,email:/.+@.+\..+/},this.postcodesId=null,this.oldValue=null,this.newValue=null,this.validationErrorClass="validation-error",this.validationErrorSelector=".".concat(this.validationErrorClass),this.errorTimeout=0,this.messageBag=[];for(var t=0;t<e.inputs.length;t++){var r=jQuery(e.inputs[t]),i=r.attr("type"),n=k.INVALIDTYPES.includes(i);"true"===r.attr("data-password-criteria")&&r.attr("pattern","^(?!.*(\\s))(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*(\\W)).{10,}$"),"select"!==r.get(0).nodeName.toLowerCase()&&n||(this.fields.push(r.get(0)),r.on("blur change",this.changeHandler.bind(this)))}this.toggleGroupRequired(e.inputs),this.getFormatPostcode()}function ye(e,t){return e.indexOf(t)>-1}function ve(e){var t=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"updateTitleOnError",trayData:{errorOnForm:e}}});window.parent.dispatchEvent(t)}function be(){return window.parent!==window.self}ge.prototype.changeHandler=function(e){var t=e&&e.currentTarget;t&&(this.removeError(t),"edit-expire-date-month-year"===t.id||!this.dobArray.includes(t.name)&&"change"===e.type||"kr"===Drupal.settings.hermes_current_country&&"month"===t.name||this.testField(t))},ge.prototype.toggleGroupRequired=function(e){var t="";this.group={};for(var r=0;r<e.length;r++){var i=e[r];i.hasAttribute(k.DATAGROUP)&&(t=i.getAttribute(k.DATAGROUP),this.group[t]?this.group[t].push(i):this.group[t]=[i],i.onblur=this.checkDate.bind(this))}},ge.prototype.checkPipa=function(e){var t=e.closest("form"),r=!0;return t.find(".pipa-checkbox").each((function(){jQuery(this).prop("checked")||(r=!1)})),r},ge.prototype.pipaErrorForm=function(e){var t=this,r=C().render(t.errorMessageObject.pipa_consent_checkbox),i=".pipa-fieldset";return jQuery(".pipa-payment-fieldset").length>0&&(i=".pipa-payment-fieldset",r=C().render(t.errorMessageObject.gtc_checkbox)),t.throwError({input:e.closest(i)[0],error:r,child:e[0]}),r},ge.prototype.getDateDob=function(e){var t=this.getInputDate("day")||e[0],r=this.getInputDate("month")||e[1],i=this.getInputDate("year")||e[2],n={day:parseInt(t.value,10),month:parseInt(r.value,10),year:parseInt(i.value,10)};return{inputs:[t,r,i],values:n,hasValueDate:function(){return!!Object.keys(n).find((function(e){return n[e]}))}}},ge.prototype.calcAge=function(e){return me()(new Date,e)},ge.prototype.checkDate=function(e){var t=this,r=this,i=e.target.getAttribute(k.DATAGROUP),n=this.group[i];if(n&&"date"===i){var a=this.getDateDob(n),s=a.inputs,o=a.values,c=a.hasValueDate,u={validity:!1,day:!1,month:!1,year:!1,majority_kr:!1};if(s.forEach((function(e){r.removeError(e)})),jQuery(s[0]).closest("fieldset").removeClass(this.validationErrorClass),!c())return this.testField(s[0]),this.testField(s[1]),void this.testField(s[2]);var l=e.relatedTarget&&e.relatedTarget.name;if(!s.find((function(e){return e.name===l}))){var d=jQuery(s[0]).parents(".dob-wrapper");Object.keys(o).filter((function(e){return!o[e]})).forEach((function(e){return u[e]=!0}));var h=new Date(o.year,o.month-1,o.day);if(de()(h)&&pe()(h)){if(h.getDate()!==o.day&&(u.day=!0),h.getMonth()+1!==o.month&&(u.month=!0),(h.getFullYear()!==o.year||h.getFullYear()<(new Date).getFullYear()-k.LIMIT_AGE_USER||h>new Date)&&(u.year=!0),"kr"===Drupal.settings.hermes_current_country){var p=this.calcAge(h);p>=0&&p<19&&(u.majority_kr=!0)}}else u.validity=!0;Object.keys(u).forEach((function(e){var r=n.find((function(t){return t.name.includes(e)}));if(u[e]){var i="";i="jp_ja"===Drupal.settings.hermes_locale&&"month"===e?t.errorMessageObject.dob_month_required:t.errorMessageObject.dob_format,u.majority_kr&&(i=t.errorMessageObject.dob_majority_kr),t.throwError({input:d[0],error:i,child:r})}else Object.values(u).includes(!0)||void 0===r||t.removeError(r)}))}}},ge.prototype.getInputDate=function(e){var t=null;return this.group.date.find((function(r){jQuery('[name*="'.concat(e,'"]')).each((function(){r.id===this.id&&(t=this)}))})),t},ge.prototype.updateRequired=function(e){var t=jQuery(e.elements[0]).closest("div.container-fieldset");0===t.length&&(t=jQuery(e.elements[0]).closest("fieldset"));for(var r=0;r<e.elements.length;r++){var i=e.elements[r];e.required?i.setAttribute(k.REQUIRED,k.REQUIRED):i.removeAttribute(k.REQUIRED)}e.required||(jQuery(this.validationErrorSelector,t).removeClass(this.validationErrorClass),jQuery(".error-message",t).removeClass("error-message"))},ge.prototype.runTests=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.messageBag=[],e&&e.preventDefault();for(var r=0,i=this.fields.length;r<i;r++)this.testField(this.fields[r]);t&&this.scrollToError(),this.focusOnTheFirstElement(e)},ge.prototype.scrollToError=function(){var e=document.querySelector(this.validationErrorSelector);if(e){var t=jQuery(e).offset().top,r=jQuery(".tray-content").offset().top,i=!!jQuery("#tray-overlay.visible").length||jQuery("#tray").attr("class").indexOf("visible"),n=i?jQuery("#tray"):jQuery("html, body"),a=jQuery("#header-actions"),s=i?t-r:t-a.height();n.animate({scrollTop:s},600)}},ge.prototype.scrollToErrorAdyen=function(){var e=document.querySelector(".adyen-checkout__field--error,.adyen-checkout__input--invalid");if(e){var t=jQuery(e).offset().top,r=jQuery("html, body"),i=t-jQuery("#header-actions").height();r.animate({scrollTop:i},600)}},ge.prototype.japanErrorForm=function(e){var t=jQuery(e.input),r=t.attr("requirements");if(r){r=r.split(",");var i="";for(var n in r){var a=r[n];if(k[a]){var s=new RegExp(k[a]).test(t.val());if(s=-1===a.indexOf("_NO_")?!s:s){var o=r[n].toLowerCase().replace(/(\b|_)\w/g,(function(e){return e.toUpperCase().replace(/_/,"")}));i=o.charAt(0).toLowerCase()+o.slice(1);break}}}if(""!==i){var c=this.errorMessageObject[i]||this.errorMessageObject.format,u={field_label:e.label},l=C().render(c,u);e.errors.push(l)}}},ge.prototype.getAriaPwdCriterias=function(e){var t="";return jQuery(".account-password-criteria li").each((function(){if(e[0].closest("form").id===jQuery(this).closest("form")[0].id){var r=Drupal.settings.hermes_translations.account.accessibility.passwordCriteriasChecked,i=Drupal.settings.hermes_translations.account.accessibility.passwordCriteriasNotChecked;t+=jQuery(this).text(),t+="criteria-valid"===jQuery(this).attr("class")?" "+r+", ":" "+i+", "}})),t},ge.prototype.testField=function(e){var t,r,i=jQuery(e),n=i.attr("type")||"select",a=i.prop(k.REQUIRED),s=this.dobArray.includes(i.data("validationLabel"))?"dob":i.data("validationLabel"),o="edit-creditcard"===i.attr("id"),c=i.hasClass("required-chinese"),u=[];if(("month"===i.prop("name")||"day"===i.prop("name")||i.prop("name")===k.YEAR_LABEL)&&this.getDateDob().hasValueDate())return u;if(i.hasClass("pipa-checkbox")&&!this.checkPipa(i)){var l=this.pipaErrorForm(i);return u.push(l),u}if("true"===i.attr("data-password-criteria")&&ye(["edit-password","edit-new-password","create-new-password"],i.attr("id"))){var d,h=new RegExp(i.attr("pattern")),p=!0,f="";if(i.removeAttr("aria-describedby"),i.attr("aria-invalid",!1),i[0].value&&""!==i[0].value){if(!h.test(i[0].value)){d=this.errorMessageObject.password_criteria,p=!1,f="account-password-notice";var m=jQuery("#account-password-notice span.sr-only");jQuery(m).html(this.getAriaPwdCriterias(i)),jQuery("#account-password-notice").hide()}}else d=this.errorMessageObject.required_on_input,f=i.closest("form").attr("id")+"-error-password account-password-notice",jQuery("#account-password-notice").show();return d&&(t=C().render(d,{field_label:s}),u.push(t),this.throwError({input:e,error:t,icon:p,ariaDescribedBy:f}),jQuery(i).attr("aria-invalid",!0)),u}switch(n){case"radio":if(!a)break;if(i.closest("form").find("[name]").filter((function(){var e=jQuery(this);return e.attr("name")===i.attr("name")&&e.prop("checked")})))break;case"checkbox":if(a&&!i.prop("checked")){switch(i.prop("name")){case"terms_conditions_checkbox":t=C().render(this.errorMessageObject.gtc_checkbox);break;case"pre_order_checkbox":t=C().render(this.errorMessageObject.pre_order_checkbox);break;default:t=C().render(this.errorMessageObject.checkbox,{field_label:s})}u.push(t)}break;case"select":if(!a||i.prop("disabled"))break;i.val()||(t="month"===i.prop("name")?C().render(this.errorMessageObject.dob_required,{field_label:s}):C().render(this.errorMessageObject.required_on_input,{field_label:s}),u.push(t));break;case"password":if(!a||i.prop("disabled"))break;"edit-confirm-password"!==i.attr("id")&&(i[0].value&&""!==i[0].value||(t=C().render(this.errorMessageObject.required_on_input,{field_label:s}),u.push(t)),!/^[^-\s]{8,}$/.test(i[0].value)&&ye(["edit-password","edit-new-password","create-new-password","create-profile-create-password"],i.attr("id"))&&(t=C().render(this.errorMessageObject.password_not_long_enough,{field_label:s}),u.push(t)));break;case"email":i[0].value&&""!==i[0].value||(t=C().render(this.errorMessageObject.required_on_input,{field_label:s}),u.push(t)),/.+@.+\..+/.test(i[0].value)||(t=C().render(this.errorMessageObject.email,{field_label:s}),u.push(t)),(i.hasClass("only-latin-char")||i.hasClass("only-latin-char-for-uae-sa"))&&i.val()&&(new RegExp(/^([A-Za-z\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff\s\0-9\@\_]*)$/g).test(i.val())||(t=C().render(this.errorMessageObject.latin_char_only,{field_label:s}),u.push(t)));break;default:var g,y,v,b,_,w,P=i.prop("pattern"),A=i.parents("form").find('[name*="country_id"]').val(),S=Drupal.settings.hermes_account.options_countries[A];i.prop("name").includes("postcode")?b=!0:i.prop("name").includes("street1")?_=!0:i.val()&&i.val(i.val().trim()),i.val()&&(b&&(this.testPostCodeField(e),P=i.prop("name").includes("_bis")?S["zipbis-pattern"]:S["zip-pattern"]),P?((P="^(?:".concat(P,")$"))in this.patterns?g=this.patterns[P]:(g=new RegExp(P),this.patterns[P]=g),r=this.dobArray.includes(e.name)?"dob_format":i.attr("name")||"format"):(g=this.patterns[n],r=n)),a&&!g&&(g=this.patterns.required,r="required_on_input","day"!==i.prop("name")&&i.prop("name")!==k.YEAR_LABEL||(r="dob_required")),o&&!this.validateCreditcard(i.val())&&(r="creditcardType",y=!0),"edit-create-profile-telephone"===i.prop("id")&&(r="telephone"),_&&i.val().length>35&&(t=C().render(this.errorMessageObject.AddressLengthError),u.push(t)),c&&!this.validateChineseRequired(i.val())&&(r="chineseRequired",v=!0);var E={};if((i.hasClass("only-latin-char")||i.hasClass("only-latin-char-for-uae-sa"))&&i.val()&&(new RegExp(/^([A-Za-z\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff\s\0-9]*)$/g).test(i.val())||(w=this.errorMessageObject.latin_char_only,E.field_label=s,t=C().render(w,E),u.push(t))),!i.prop("disabled")&&g&&!g.test(i.val())||y||v){var T=i.prop("name").includes("postcode_bis");if(String(i.val()).length>0)if(b){var x=S["zip-delta"]?parseInt(S["zip-delta"],10):0;if(T)E.max=S["zipbis-maxlength"],w=this.errorMessageObject.postcode_digitsonly.max;else{var D=S["zip-maxlength"]?S["zip-maxlength"]:5;E.max=S["zip-separator"]?D-1:D,E.min=E.max-x,w=this.getPostcodeErrorMessage(S)}}else w=this.errorMessageObject[r]||this.errorMessageObject.format;else w=this.errorMessageObject[r]||this.errorMessageObject.format;if(E.field_label=s,t=C().render(w,E),"kr"===Drupal.settings.hermes_current_country&&"dob_required"===r){var O=i.parent();O.is(":visible")&&O.addClass(this.validationErrorClass);break}u.push(t)}else{var j={input:e,label:s,errors:u};this.japanErrorForm(j)}}return u.length&&(this.messageBag=u,this.throwError({input:"dob_format"===r?jQuery(e).parents('[class*="wrapper"]').get(0):e,error:u[0],child:"dob_format"===r?e:void 0})),u},ge.prototype.getPostcodeErrorMessage=function(e){return(e["zip-digitsonly"]?this.errorMessageObject.postcode_digitsonly:this.errorMessageObject.postcode)[e["zip-message"]?e["zip-message"]:"max"]},ge.prototype.testPostCodeField=function(e){var t=jQuery(e).closest("form").find('[name*="country_id"]').val(),r=Drupal.settings.hermes_account.options_countries[t],i=e.name.includes("bis"),n=r["zip-maxlength"]?parseInt(r["zip-maxlength"],10):5;i&&(n=parseInt(r["zipbis-maxlength"],10)),n&&e.setAttribute("maxlength",n)},ge.prototype.validateCreditcard=function(e){if(/[^0-9-\s]+/.test(e))return!1;for(var t=0,r=0,i=!1,n=(e=e.replace(/\D/g,"")).length-1;n>=0;n--)r=parseInt(e.charAt(n),10),i&&(r*=2)>9&&(r-=9),t+=r,i=!i;return t%10==0},ge.prototype.throwError=function(e){var t,r,i=e.input,n=jQuery(i),a=n.closest("form").attr("id"),s=i.name?"error-".concat(i.name):"error-".concat(i.className.substring(0,i.className.indexOf("-"))),o="".concat(s," clearfix"),c=i.parentNode,u=n.closest("div.container-fieldset");0===u.length&&(u=n.closest("fieldset"));var l=null===(t=e.icon)||void 0===t||t,d=e.input.dataset.validationLabel?"<span class='sr-only'>".concat(e.input.dataset.validationLabel,"</span>"):"",h='<svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n                              <use xlink:href="#exclamation-mark"></use>\n                            </svg>\n                            <span class="sr-only">'.concat(Drupal.settings.hermes_translations.validation.error_on_input_icon,"</span>"),p=l?"<span>".concat(h," ").concat(e.error,"</span>"):'<span class="password">'.concat(e.error,"</span>"),f=u.find(".".concat(s)),m=n.attr("aria-describedby"),g=null!==(r=e.ariaDescribedBy)&&void 0!==r?r:"",y="".concat(a,"-").concat(s);if(""!==g?n.attr("aria-describedby",g):m?m.indexOf(y)<0&&n.attr("aria-describedby","".concat(y," ").concat(m)):n.attr("aria-describedby",y),f.length)f.html(p),f.append(d);else{f=jQuery("<div>").attr("id","".concat(a,"-").concat(s)).addClass(o).html(p+d);var v=jQuery(c),b=v;if(v.hasClass("form-item-select")){var _=b.closest(".dob-wrapper");b=_.length>0&&u.is("fieldset")?u:b.parent()}var k=jQuery(".form-item-postcode");"postcode"===n.attr("name")&&"undefined"!==jQuery("#edit-postcode-autocomplete-list")&&"undefined"!==k&&(k.css("margin-bottom","0px"),f.addClass("form-item error-message"),b=k.parent()),b.append(f)}f.attr("aria-hidden",!1),this.showErrorMessageInPageTitle(i),e.child&&(c=e.child.parentNode),c?jQuery(c).is(":visible")&&c.classList.add(this.validationErrorClass):e.child.parent().addClass(this.validationErrorClass),this.errorTimeout=setTimeout((function(){f.addClass("error-message")}),50)},ge.prototype.removeError=function(e){var t=jQuery(e),r=e.parentNode,i=jQuery(r),n=t.closest("form").attr("id"),a=t.closest("div.container-fieldset");0===a.length&&(a=t.closest("fieldset"));var s=this.dobArray.includes(e.name)||!e.name?"dob":e.name;"month"!==t.prop("name")&&"day"!==t.prop("name")&&t.prop("name")!==k.YEAR_LABEL||a.find(".error-message").remove(),(t.hasClass("pipa-checkbox")||"pipa_consent"===t.prop("name"))&&this.checkPipa(t)&&a.find(".error-message").remove(),r.classList.remove(this.validationErrorClass);var o=t.attr("aria-describedby"),c="".concat(n,"-error-").concat(s);if(o)if(o===c)t.removeAttr("aria-describedby");else{var u=o.replace("".concat(c," "),"");t.attr("aria-describedby",u)}a.length?(a.find(".error-".concat(s)).removeClass("error-message"),a.find(".error-".concat(s)).attr("aria-hidden",!0)):i.find(".error-".concat(s)).remove(),jQuery("#hermes-account-login-form-error-loginphone").length&&jQuery("#hermes-account-login-form-error-loginphone").removeClass("hidden"),jQuery("#hermes-account-login-form-error-email").length&&jQuery("#hermes-account-login-form-error-email").removeClass("hidden"),this.removeErrorMessageInPageTitle(e),this.errorTimeout&&clearTimeout(this.errorTimeout)},ge.prototype.resetErrors=function(e){var t=jQuery("head title"),r=t.text().replace(this.errorMessageObject.errorOnForm,""),i=jQuery("body"),n=null;e&&(n=e.parents().filter("#tray").find(".tray-content").not(".invisible")),e?(e.find(this.validationErrorSelector).removeClass(this.validationErrorClass),e.find(".error-message").removeClass("error-message")):(jQuery(this.validationErrorSelector).removeClass(this.validationErrorClass),jQuery(".error-message").removeClass("error-message")),n&&n.length?(n.removeClass("error-on-form"),t.html(r)):n&&!n.length?(i.removeClass("error-on-form"),t.html(r)):(t.html(r),jQuery(".error-on-form").removeClass("error-on-form")),be()&&ve(!1)},ge.prototype.validateChineseRequired=function(e){return/[\u4e00-\u9fa5]+/.test(e)},ge.prototype.formatPostcode=function(e){var t=e?e.target:"",r=e.data&&e.data.oldValue?e.data.oldValue:"",i=e.data&&e.data.newValue?e.data.newValue:"",n=jQuery(t).parents("form").find('[name*="country_id"]').val(),a=this.difference(r,i),s=/\w|\d/i.test(a)&&1===a.length,o="paste"===e.type;if(s){var c=ae(n,e.target.value);c!==e.target.value&&(e.target.value=c)}else o&&setTimeout((function(){return e.target.value=ae(n,e.target.value)}),100)},ge.prototype.focusOnTheFirstElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var r=e.currentTarget.form?jQuery("#".concat(e.currentTarget.form.id)).find(this.validationErrorSelector):jQuery("#".concat(e.currentTarget.id)).find(this.validationErrorSelector),i=jQuery(r[0]).find("input, select, textarea");t&&(i=jQuery(".adyen-checkout__input--invalid,.adyen-checkout__input--error iframe")),e.stopPropagation(),e.preventDefault(),jQuery(i[0]).focus()}},ge.prototype.showErrorMessageInPageTitle=function(e){var t=this.errorMessageObject.errorOnForm,r=jQuery("head title"),i=r.text(),n=jQuery("body"),a=jQuery(e).parents().filter("#tray").find(".tray-content").not(".invisible");a.length&&!a.hasClass("error-on-form")?(r.html(t+" "+i),a.addClass("error-on-form")):a.length||n.hasClass("error-on-form")||(r.html(t+" "+i),n.addClass("error-on-form")),be()&&ve(!0)},ge.prototype.removeErrorMessageInPageTitle=function(e){var t=this.errorMessageObject.errorOnForm,r=jQuery("head title"),i=jQuery("body"),n=r.text().replace(t,""),a=jQuery(e).parents().filter("#tray").find(".tray-content").not(".invisible"),s=a.find("".concat(this.validationErrorSelector,":visible")),o=jQuery("".concat(this.validationErrorSelector,":visible")).not(s);a.length&&a.hasClass("error-on-form")&&0===s.length?(a.removeClass("error-on-form"),r.html(n)):!a.length&&i.hasClass("error-on-form")&&0===o.length&&(i.removeClass("error-on-form"),r.html(n)),be()&&0===s.length&&ve(!1)},ge.prototype.difference=function(e,t){return jQuery.map(t.split(""),(function(r,i){if(e[i]!==t[i])return r})).join("")},ge.prototype.keyDownHandler=function(e){var t=e.data.postcodesId?e.data.postcodesId.filter('[id="'.concat(e.currentTarget.id,'"]')):null;e.data.oldValue=t&&t[0]?t[0].value:null},ge.prototype.inputHandler=function(e){var t=e.data.postcodesId?e.data.postcodesId.filter('[id="'.concat(e.currentTarget.id,'"]')):null;e.data.newValue=t&&t[0]?t[0].value:null,e.data.formatPostcode(e)},ge.prototype.getFormatPostcode=function(){this.postcodesId=jQuery('[id*="postcode"]').not('[id*="bis"]'),this.postcodesId.keydown(this,this.keyDownHandler),this.postcodesId.bind("input",this,this.inputHandler),this.postcodesId.bind("paste",this,this.formatPostcode.bind(this))},ge.prototype.addFieldToValidator=function(e){this.fields.push(e.get(0)),e.on("blur change",this.changeHandler.bind(this))};var _e=ge;function ke(){}ke.prototype.init=function(e){this.notPostCodeBis="[name*=postcode]:not([name*=postcode_bis])",this.$form=jQuery(e.form),this.$form.find(".form-required").length>0&&(this.requiredHTML=this.$form.find(".form-required")[0].outerHTML),this.$countryInput=this.$form.find('[name*="country_id"]'),this.$countryInput.length>0&&this.$countryInput.on("change",this.changeHandler.bind(this))},ke.prototype.changeHandler=function(e){var t,r=-1===e.target.selectedIndex?0:e.target.selectedIndex;t=r>0?e.target.options[r].value:_.get("currentCountry").toUpperCase();var i=Drupal.settings.hermes_account.options_countries[t].fields||{};this.localiseFields(i,t),this.localisePostcode(t),t&&this.setPostcodeMaxLength(t),this.fetchShippingRules(t,e.target)},ke.prototype.localiseFields=function(e,t){var r=["day","month","year"],i=Object.assign({},k.FORM_COUNTRY_DEFAULT_FIELDS_VALUES,e);for(var n in i)if(i.hasOwnProperty(n)){var a=this.$form.find('[name*="'.concat(n,'"]'));if(!a.length)continue;var s=a.parents("fieldset");i[n]>=0?(i[n]?(a[0].setAttribute(k.REQUIRED,k.REQUIRED),"MO"!==t&&"HK"!==t||"street2"!==n||jQuery(this.$form).find('[name="street3"]').length&&!jQuery(this.$form).find('[name="street3"]').prop("disabled")||(a[0].removeAttribute(k.REQUIRED),jQuery(a[0]).parent().find("span.form-required").remove())):a[0].removeAttribute(k.REQUIRED),"region"===n&&(this.updateRegionField(a,t),a.trigger("change")),r.includes(n)&&s.hasClass("form-disabled")&&s.removeClass("form-disabled"),"regiontext"===n&&(this.updateRegionField(a,t),a.prev().find("span").remove()),a.prop("disabled")&&(a.prop("disabled",!1),a.closest(".form-item").removeClass("form-disabled"),"MO"!==t&&"HK"!==t||"street3"!==n||jQuery(this.$form).find('[name="street2"]').prop("required")||(a.prop("disabled",!0),a.closest(".form-item").addClass("form-disabled")))):(a.prop(k.REQUIRED,!1),a.prop("disabled",!0),a.closest(".form-item").addClass("form-disabled"),r.includes(n)&&!s.hasClass("form-disabled")&&s.addClass("form-disabled"))}},ke.prototype.localisePostcode=function(e){var t=Drupal.settings.hermes_account.options_countries[e],r=t["zip-pattern"],i=Object.assign({},k.FORM_COUNTRY_DEFAULT_FIELDS_VALUES,t.fields||{}),n=t["zip-label"]?t["zip-label"]:"postcode",a=Drupal.settings.hermes_translations.ui.formLabel[n],s=this.$form.find(this.notPostCodeBis),o=1===i.postcode;void 0===r?s.removeAttr("pattern"):s.attr("pattern",r),s.siblings("label").html("".concat(a," ").concat(o?this.requiredHTML:""))},ke.prototype.setPostcodeMaxLength=function(e){var t=Drupal.settings.hermes_account.options_countries[e],r=t["zip-maxlength"]?parseInt(t["zip-maxlength"],10):5,i=this.$form.find(this.notPostCodeBis);r?i.attr("maxlength",r):i.removeAttr("maxlength")},ke.prototype.updateRegionField=function(e,t){var r,i=window.APP.templates.regionOptions,n=Drupal.settings.hermes_account.states[t],a=Drupal.settings.hermes_account.regions_label[t],s=Drupal.settings.hermes_translations.ui.formLabel[a];if(n){var o=jQuery.map(n,(function(e){return e}));r=C().render(i,{options:o})}e.html(r).closest(".container-fieldset").find("label").html("".concat(s," ").concat(this.requiredHTML))},ke.prototype.fetchShippingRules=function(e,t){var r=_.get("availableCountries"),i=jQuery(t).parents(".form-item"),n=i.find(".shipping-note"),a=jQuery(t).parents("form").first().find('input[name="is_shipping_type_address"]').val();if(r&&!r.includes(e)&&"true"===a){var s=_.get("currentCountry").toUpperCase(),o=C().render(Drupal.settings.hermes_translations.ui.shipping.no_shipping,{country:Drupal.settings.hermes_translations.countries[e],current_store:s});if(n.length)n.text(o);else{var c='<p class="shipping-note"><svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n                            <use xlink:href="#exclamation-mark"></use>\n                            </svg>\n                            <span class="sr-only">'.concat(Drupal.settings.hermes_translations.validation.error_on_input_icon,"</span>").concat(o,"</p>");i.find("label").after(c)}}else n.length&&n.remove()};var we=ke;function Pe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"bind",value:function(){var e=this;APP.pubsub.subscribe("newsletter.submit.error",this.trackNewsletterError.bind(this)),APP.pubsub.subscribe("newsletter.submit.success",this.trackNewsletterWithStore.bind(this)),APP.pubsub.subscribe("newsletter.show.tray.overlay",this.trackNewsletterWithStore.bind(this)),APP.pubsub.subscribe("newsletter.exit.policy",this.trackNewsletterGeneric.bind(this)),APP.pubsub.subscribe("newsletter.show.tray.footer",this.trackNewsletterGeneric.bind(this)),APP.pubsub.subscribe("newsletter.submit.form",this.trackNewsletterGeneric.bind(this)),APP.pubsub.subscribe("analytics-open-tray-subscribe",(function(){e.trackNewsletterWithStore.bind(e)}))}},{key:"trackNewsletterError",value:function(e,t){var r=this;t.forEach((function(e){r.pushNewsletterEvent({eventaction:"subscriptionKO",eventlabel:"Email-"+e})}))}},{key:"trackNewsletterWithStore",value:function(e,t){if(void 0!==t){var r={pagetype:"newsletter",virtualpageuri:"/"+t.get("currentCountry")+"/"+t.get("currentLanguage")+"/newsletter/"};switch(e){case"newsletter.submit.success":r.eventaction="subscriptionOK",r.virtualpageuri+="subscription_confirmation";break;case"newsletter.show.tray.overlay":r.eventaction="newsletter_overlay",r.virtualpageuri+="subscribe";break;default:return}this.pushNewsletterEvent(r)}}},{key:"trackNewsletterGeneric",value:function(e){var t={};switch(e){case"newsletter.show.tray.footer":t={eventaction:"subscription",eventlabel:"subscribe_button"};break;case"newsletter.submit.form":t={eventaction:"newsletter_overlay",eventlabel:"subscribe_button"};break;case"newsletter.exit.policy":t={eventaction:"newsletter_overlay",eventlabel:"privacy_policy"};break;default:return}this.pushNewsletterEvent(t)}},{key:"pushNewsletterEvent",value:function(e){e.event="uaevent",e.eventcategory="newsletter",dataLayer.push(e)}}])&&Pe(t.prototype,r),e}();function Ce(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Se="#hermes-account-subscribe-form-captcha",Ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SUBSCRIBE_URL="/newsletter",this.FORM_ID="#hermes-account-subscribe-form",this.$notification=jQuery(".notification"),this.$newsletterFormProfile=jQuery(".newsletter-block"),this.form=jQuery(this.FORM_ID),this.formHelpers=new oe,this.init()}var t,r;return t=e,(r=[{key:"init",value:function(){this.$el=jQuery("#tray-subscribe"),this.newsletterTrayForm=jQuery("#hermes-account-subscribe-form"),(new we).init({form:this.$el.find("form").get(0)}),this.tray=new B({$el:this.$el,name:"tray-subscribe",showOverlay:!0}),this.newsletterBlockValidator=new _e({inputs:this.$newsletterFormProfile.find("input")}),this.validator=new _e({inputs:this.newsletterTrayForm[0].querySelectorAll("[name]")}),this.analyticsNewsletter=new Ae,this.analyticsNewsletter.bind(),this.currentUser=_.get("user"),this.userAccountEmailValue=null,this.currentUser&&(this.userAccountEmailValue=this.currentUser.email),this.bind()}},{key:"bind",value:function(){this.$notification.on("click",".subscribe-again",this.notificationSubscribeAgain.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.form.on("submit",this.submitNewsLetterTrayForm.bind(this)),APP.pubsub.subscribe("newsletter.hide",this.hideBlock.bind(this)),APP.pubsub.subscribe("newsletter.init",this.initProfileNewsletterForm.bind(this)),APP.pubsub.subscribe("newsletter.profile.load.email",this.prefillEmail.bind(this)),APP.pubsub.subscribe("imNotARobotNewsletter",this.validator.removeErrorMessageInPageTitle.bind(this.validator,Se)),APP.pubsub.subscribe("imNotARobotNewsletterExpired",P.throwErrorReCaptcha.bind(this,jQuery(Se))),APP.pubsub.subscribe("imNotARobotNewsletterExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,Se)),this.analyticsBind()}},{key:"analyticsBind",value:function(){jQuery("#page-footer").find("[data-track-newsletter-footer]").on("click",(function(){APP.pubsub.publish("newsletter.show.tray.footer")})),this.$el.find("[data-track-newsletter-privacy-policy]").on("click",(function(){APP.pubsub.publish("newsletter.exit.policy")}))}},{key:"_onTrayOpen",value:function(){APP.pubsub.publish("newsletter.show.tray.overlay",_),q("loader-newsletter-tray"),void 0!==APP.recaptcha&&void 0!==APP.recaptcha["hermes-account-subscribe-form"]&&window.grecaptcha.reset(),this.form.find("input[type=radio][name=subject_list]").removeAttr("checked");var e={formId:this.FORM_ID};ue(k.ACTIVATE_CAPTCHA_URL,e,"GET").done((function(t){t.error?te():(P.generateReCaptcha(t,e.formId),J())})).fail((function(){return te()})),this.catchRecaptchaPopup()}},{key:"catchRecaptchaPopup",value:function(){new MutationObserver((function(e,t){if(jQuery(".g-recaptcha-bubble-arrow").length)return jQuery(".g-recaptcha-bubble-arrow").parent().addClass("captcha-popup"),void t.disconnect()})).observe(document.body,{childList:!0})}},{key:"initProfileNewsletterForm",value:function(){var e=this;this.mainBlockWrapper=jQuery(".block-profile"),this.newsletterBlock=jQuery(".newsletter-block"),this.newsletterForm=this.newsletterBlock.find("form"),this.emailField=this.newsletterForm.find("input.newsletter-email"),this.prefillEmail(),0!==this.newsletterBlock.length&&(this.newsletterForm.on("submit",this.submitNewsletterRequestLoggedin.bind(this)),this.newsletterBlock.on("blur","input",(function(t){e.testNewsletterField(e.newsletterBlockValidator,t)})))}},{key:"testNewsletterField",value:function(e,t){e.updateRequired({elements:[t.currentTarget],required:!0}),e.changeHandler(t)}},{key:"submitNewsLetterTrayForm",value:function(e){if(e.preventDefault(),H("loader-newsletter-tray"),APP.pubsub.publish("newsletter.submit.form"),this.honeypot=this.newsletterTrayForm.find("input#passwordNewsletter"),this.honeypot&&this.honeypot.val())return Y({message:Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError,messageVariables:Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError.variables}),void q("loader-newsletter-tray");P.validateRecaptcha(this.form.attr("id"))||(jQuery("#".concat(this.form.attr("id"),"-captcha")).addClass("validation-error"),this.validator.showErrorMessageInPageTitle(jQuery("#".concat(this.form.attr("id"),"-captcha")))),this.newsletterTrayForm[0].checkValidity()&&P.validateRecaptcha(this.form.attr("id"))?(this.postData=this.newsletterTrayForm.serializeObject(),this.postData.country_id=_.get("currentCountry"),ue(this.SUBSCRIBE_URL,this.postData).done(this.handleSuccessResponse.bind(this,"tray")).fail(this.handleErrorResponse.bind(this))):(this.validator.runTests(e),q("loader-newsletter-tray"),APP.pubsub.publish("newsletter.submit.error",this.validator.messageBag))}},{key:"submitNewsletterRequestLoggedin",value:function(e){e.preventDefault(),H("loader-newsletter-tray"),this.newsletterBlockValidator.updateRequired({elements:this.newsletterBlock.find("input"),required:!0}),this.newsletterBlockValidator.runTests(),this.newsletterBlock.find(".error-newsletter").length||(this.emailField.val()!==this.userAccountEmailValue?this.postData={country_id:this.currentUser.country_id,email:this.emailField.val()}:this.postData={country_id:this.currentUser.country_id,email:this.currentUser.email,firstname:this.currentUser.firstname,lastname:this.currentUser.lastname,postcode:this.currentUser.postcode,prefix:this.currentUser.prefix},ue(this.SUBSCRIBE_URL,this.postData).done(this.handleSuccessResponse.bind(this,"profile")).fail(this.handleErrorResponse.bind(this)))}},{key:"handleSuccessResponse",value:function(e,t){var r=_.get("user");t.error?this.handleErrorResponse(t):(APP.pubsub.publish("newsletter.submit.success",_),x("tray-subscribe","newsletter","success")),this.userAccountEmailValue===this.postData.email?(this.$newsletterFormProfile.find(".form-email").val(""),jQuery("[id*=edit-newsletter]").prop("checked",!0),"profile"===e&&document.querySelector(".block-profile").classList.remove("not-subscribed"),r.newsletter_subscription=_.get("currentStore"),_.set("user",r),_.set("newsletterStatus","subscribed"),APP.pubsub.publish("profile.update.message.newsletter")):this.$newsletterFormProfile.find(".form-email").val("")}},{key:"handleErrorResponse",value:function(e){var t=e.error?e.error.internal_code:void 0,r=Drupal.settings.hermes_translations.notification.account.createAccountCodes;if(t===k.ERRORCODE.emailNewsletterInvalid){var i={message:r[k.ERRORCODE.emailInvalid],messageVariables:{email:this.postData.email},type:"critical"};jQuery.extend(i.messageVariables,r[k.ERRORCODE.emailInvalid].variables)}x("tray-subscribe","newsletter")}},{key:"toggleTray",value:function(){this.tray.isOpen?this.tray.close():this.tray.open()}},{key:"hideBlock",value:function(){this.mainBlockWrapper&&this.mainBlockWrapper.removeClass("not-subscribed")}},{key:"prefillEmail",value:function(){(this.userAccountEmailValue||this.emailField&&!this.userAccountEmailValue)&&this.emailField.val(this.userAccountEmailValue)}},{key:"notificationSubscribeAgain",value:function(e){e.preventDefault(),J(),this.emailField.focus()}}])&&Ce(t.prototype,r),e}(),Te=function(){this.init=function(e){this.formID=e,this.bind()},this.setSpecificRedirectUrl=function(e){return this.specificUrlRedirect=e,this},this.bind=function(){jQuery(this.formID).find(".wechat-social-login a").on("click",this.connectWithWechat.bind(this))};var e=function(e){if(J(),e.authorize_url)return _.set("social_login",1),_.set("registerSocialContextUrl",window.location.href),void(window.location.href=e.authorize_url)},t=function(){te()};this.connectWithWechat=function(){var r=jQuery("#tray-account-pipl-checkbox");(0===r.length||!0===r.prop("checked"))&&(_.set("social_login_from_checkout","#hermes-account-checkout-email-form"===this.formID),z(),ue("/wechat-social-union",this.specificUrlRedirect?{specific_url:this.specificUrlRedirect}:{},"GET").done(e).fail(t))}},xe=function(e,t){var r;this.init=function(){r=jQuery("#hermes-account-login-form"),this.$emailField=t.find("#login-email"),this.$phoneCodeField=t.find("input[name=phonecode]"),this.$phoneNumberField=t.find("input[name=loginphone]"),this.$passwordField=t.find("#login-password"),this.$signInLink=t.find(".sign-in-cta"),this.$wechatSocialLogin=t.find(".wechat-social-login"),this.$createAccountCta=jQuery(".js-create-account"),this.formHelpers=new oe,P.isWechatInApp()?(jQuery('[data-track="data-track-account-create-button"]').on("click",(function(){_.deleteItem("user_sms_bp")})),this.wechatSocialHelpers=new Te,this.wechatSocialHelpers.init("#tray-account")):this.$wechatSocialLogin.hide(),this.validator=new _e({inputs:r[0].querySelectorAll("[name]")}),this.bind()},this.bind=function(){r.length>0&&(P.needPhoneLogin()?(t.find("input[type=tel]").on("keypress",this.checkInputNumberBeforeSubmitYunpian.bind(this)),r.on("submit",this.submitLoginFormYunpian.bind(this))):r.on("submit",this.submitLoginForm.bind(this))),this.$signInLink.on("click",this.focusEmailInput.bind(this)),r.find(".show-password").on("click",this.formHelpers.showPasswordMask.bind(this)),jQuery(document).on("click.tray-account.data-api",(function(){APP.pubsub.publish("account.passwordField.hide")})).on("click.tray-account.data-api","#hermes-account-login-form",(function(e){e.stopPropagation(),APP.pubsub.publish("account.passwordField.show")})).on("focus",".login-tray-email",(function(e){e.stopPropagation(),APP.pubsub.publish("account.passwordField.show")})),this.$emailField.on("blur",this.formHelpers.checkEmailInput.bind(this)).on("keypress",this.formHelpers.reCheckErrorEmailInput.bind(this)),this.$createAccountCta.on("click",this.setRegistrationContent.bind(this))},this.focusEmailInput=function(e){void 0!==e&&"click"===e.type&&e.preventDefault(),this.$emailField.focus()},this.setRegistrationContent=function(e){jQuery(e.currentTarget).parents(".tray-content").hasClass("loggedout-checkout")&&_.set("registerContext","checkout")},this.submitLoginForm=function(e){var t;if(e.preventDefault(),r[0].checkValidity())if(this.$emailField.val())if(this.$passwordField.val()){APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),H("loader-sign-in-tray");var i={locale:_.get("currentStore"),email:this.$emailField.val(),pass:this.$passwordField.val()};jQuery(e.currentTarget).parents(".tray-content").hasClass("loggedout-checkout")&&(t="checkout"),APP.pubsub.publish("account.login.call",{serverReqData:i,$loginForm:r,$emailField:this.$emailField,$passwordField:this.$passwordField,source:t})}else this.$passwordField.addClass("error");else this.$emailField.addClass("error"),this.focusEmailInput();else this.validator.runTests(e)},this.checkInputNumberBeforeSubmitYunpian=function(e){return e.metaKey||e.which<=0||8===e.which||/[0-9]/.test(String.fromCharCode(e.which))},this.submitLoginFormYunpian=function(e){var t;if(e.preventDefault(),r[0].checkValidity())if(this.$phoneCodeField.val())if(this.$phoneNumberField.val())if(this.$passwordField.val()){APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),H("loader-sign-in-tray");var i={locale:_.get("currentStore"),phonecode:this.$phoneCodeField.val(),phonenumber:this.$phoneNumberField.val(),pass:this.$passwordField.val()};jQuery(e.currentTarget).parents(".tray-content").hasClass("loggedout-checkout")&&(t="checkout"),APP.pubsub.publish("account.login.call",{serverReqData:i,$loginForm:r,$phoneCodeField:this.$phoneCodeField,$phoneNumberField:this.$phoneNumberField,$passwordField:this.$passwordField,source:t})}else this.$passwordField.addClass("error");else this.$phoneNumberField.addClass("error");else this.$phoneCodeField.addClass("error");else this.validator.runTests(e)},this.init()},De=function(){var e,t,r;this.init=function(e){this.formID=e,this.bind()},this.bind=function(){jQuery(this.formID).find("input[name=phonecode], input[name=registredphonecode]").on("keyup",this.checkPhoneCode),jQuery(this.formID).find("input[name=loginphone], input[name=registredloginphone]").on("keyup",this.checkPhoneNumber)};var i=function(e){var t=e,i=setInterval((function(){r.val(--t+" "+window.Drupal.settings.hermes_translations.notification.account.sms.sec),t<=0&&(r.val(window.Drupal.settings.hermes_translations.notification.account.sms.sendcode).removeAttr("disabled").removeClass("disabled-input"),clearInterval(i))}),1e3);APP.pubsub.subscribe("account.sms.banned",(function(){r.val(window.Drupal.settings.hermes_translations.notification.account.sms.sendcode).attr("disabled","disabled").addClass("disabled-input"),clearInterval(i)}))},n=function(e){if(e.error){var t={messageVariables:{}},n="";switch(!0){case void 0!==e.error.internal_code:jQuery.extend(t.messageVariables,{time_to_wait:"60"}),n="2200001"===e.error.internal_code?{description:window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[e.error.internal_code]}:{description:e.error.message};break;case 3100005===e.error:case 3100004===e.error:r.attr("disabled","disabled").addClass("disabled-input"),i(e.time_to_wait),jQuery.extend(t.messageVariables,{time_to_wait:e.time_to_wait/60}),n=window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[e.error];break;case 3100002===e.error:r.attr("disabled","disabled").addClass("disabled-input"),setTimeout((function(){r.removeAttr("disabled").removeClass("disabled-input")}),36e5),n=window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[3100004],jQuery.extend(t.messageVariables,{time_to_wait:"60"});break;default:n=window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[e.error]}jQuery.extend(t,{message:n}),J(),Y(t)}else r.attr("disabled","disabled").addClass("disabled-input"),i(e.time_to_wait),J()},a=function(){te()};this.checkPhoneCode=function(e){var t=jQuery(this).val();jQuery(this).val(t.split(" ").join("")),-1===t.indexOf("+")&&jQuery(this).val("+".concat(t))},this.checkPhoneNumber=function(e){var t=jQuery(this).val();jQuery(this).val(t.split(" ").join("")),t&&"0"===t[0]&&jQuery(this).val(t.substring(1))},this.sendSmsCode=function(){var i,s=jQuery(this.form);r=s.find(".edit-send-sms-button"),(e=s.find("input[name=phonecode]")).val(e.val().split(" ").join("")),(t=s.find("input[name=loginphone]")).val(t.val().split(" ").join(""));var o=new RegExp(e.attr("pattern")),c=new RegExp(t.attr("pattern"));o.test(e.val())&&c.test(t.val())&&(i={phone_code:e.val(),phone_number:t.val()},z(),ue("/send-sms-code",i).done(n.bind(this)).fail(a))}};function Oe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"hideScrollbar",value:function(){var e=document.getElementById("tray-scroll-wrap"),t=document.querySelector("html");e&&t&&(e.style.overflow="hidden",t.style.overflow="hidden")}}],null&&Oe(t.prototype,null),r&&Oe(t,r),e}(),Ie=function(){var e=document.querySelector(".tray-account-content-wrapper");this.init=function(){this.$el=jQuery("#tray-account"),this.login=new xe(jQuery,this.$el),this.formHelper=new oe,P.needSmsProvider()&&(this.smsHelpers=new De,this.smsHelpers.init("#tray-account")),this.toggleTrayState(),this.tray=new B({$el:this.$el,name:"tray-account",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.account.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.account.refresh",this.refreshTray.bind(this)),this.tray.addEventListener("openOne",this.toggleTrayState.bind(this)),this.tray.addEventListener("open",this.toggleTrayState.bind(this)),jQuery(".notification").on("click",".js-notification-signin-hash",(function(){APP.pubsub.publish("account.notification.signInReload")})),jQuery(".account-signed-out").on("click",".js-forgot-password",this.initForgotPassword.bind(this)),jQuery(".notification").on("click",".js-forgot-password",this.initForgotPassword.bind(this)),this.$el.on("click",".logout-user",(function(e){e.preventDefault(),APP.pubsub.publish("account.logout","tray-account")})),jQuery("input#tray-account-pipl-checkbox").click((function(){APP.pubsub.publish("pipl.checkbox.trayAccount")}))},this.initForgotPassword=function(e){e.preventDefault();var t={name:"tray-forgotpassword"};P.needPhoneLogin()?(t.phoneCode=jQuery("#edit-phonecode--2").val(),t.loginPhone=jQuery("#edit-loginphone--3").val()):t.email=jQuery("#login-email").val(),APP.trayController.triggerTray(t)},jQuery(".alert-link").on("click",(function(){je.hideScrollbar();var e=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-help",trayData:void 0}});window.parent.dispatchEvent(e)})),this.toggleTrayState=function(){this.$el.hasClass("loggedout-checkout")&&this.$el.removeClass("loggedout-checkout"),_.get("checkUserSessionToken")?(e.classList.add("account-signed-in"),e.classList.remove("account-signed-out")):(e.classList.remove("account-signed-in"),e.classList.add("account-signed-out"),_.get("returningUser")?e.classList.add("returning-user"):e.classList.remove("returning-user"),this.formHelper.clearForm(jQuery("#hermes-account-login-form")))},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.refreshTray=function(){this.openTray()},this.openTray=function(){this.toggleTrayState(),this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.init()},Le=function(){this.init=function(){this.$el=jQuery("#tray-cart"),this.tray=new B({$el:this.$el,name:"tray-cart",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("cart.update",this.updateCart.bind(this))},this.updateCart=function(){this.render()},this.render=function(){var e,t,r=_.get("user")||{};switch(t=r.basket?r.basket.total_items||0:this.cartData&&this.cartData.total_items||0){case 0:e=Drupal.settings.hermes_translations.ui.cart.accessibility.cartEmpty;break;case 1:e=" "+Drupal.settings.hermes_translations.ui.cart.accessibility.cartSingle;break;default:e=" "+Drupal.settings.hermes_translations.ui.cart.accessibility.cartPlural}jQuery("#open-cart .header-count").text(t||""),jQuery("#accessibility-header-cart-count").text(e),_.set("total_items",t)},this.init()};function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Qe='select[name="region"]',$e='[name="country_id"]',Ue='select[name="district_bis_id"]',Be="option:not(:first)",Ve='select[name="postcode_select"]',ze=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),APP.pubsub.subscribe("app.start",(function(){P.needStateDistrictFields(Drupal.settings.hermes_current_country)&&!_.get(t.getAreasStorageNameVariable())&&ue(k.ADDRESS_DISTRICTS_URL,{country:Drupal.settings.hermes_current_country,locale:Drupal.settings.hermes_locale},"GET").done(t.updateAreas.bind(t)).fail(t.fail.bind(t))}))}var t,r;return t=e,r=[{key:"getAreasStorageNameVariableByCountrySelector",value:function(e){var t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();return"areas".concat(t)}},{key:"getAreasStorageNameVariable",value:function(){var e=Drupal.settings.hermes_current_country.charAt(0).toUpperCase()+Drupal.settings.hermes_current_country.slice(1);return"areas".concat(e)}},{key:"updateAreas",value:function(e){_.set("required_area",e.required_for),_.set(this.getAreasStorageNameVariable(),e.districts)}},{key:"updateAreasByCountrySelector",value:function(e,t){_.set(this.getAreasStorageNameVariableByCountrySelector(e),t.districts)}},{key:"fail",value:function(){te(),_.deleteItem(this.getAreasStorageNameVariable())}},{key:"failBySelectCountry",value:function(e){te(),_.deleteItem(this.getAreasStorageNameVariableByCountrySelector(e))}},{key:"populateSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=jQuery(e).find($e),i=r.val();if(void 0===i&&(i=Drupal.settings.hermes_current_country),P.needStateDistrictFields(i)){var n=jQuery(e).find(Qe),a=jQuery(e).find(Ue),s=Me({},Drupal.settings.hermes_account.states[i.toUpperCase()]),o=n.val(),c=a.val();if(n.children(Be).remove(),Object.keys(s).length>0&&Object.values(s).forEach((function(e){var t=new Option(e.name,e.region_id);t.setAttribute("data-cs-mask",""),n.append(t)})),o){var u=_.get(this.getAreasStorageNameVariableByCountrySelector(i))||[],l=u[o]||[];a.children(Be).remove(),l&&l.length>0&&l.forEach((function(e){var t=new Option(e.name,e.district_bis_id);t.setAttribute("data-cs-mask",""),a.append(t)})),Object.keys(s).length>0&&"unknown"!==o&&this.setSelectValue(n,o,s[o].name),c&&(null!=t&&void 0!==t.district_bis_id&&null!==t.district_bis_id&&(c=t.district_bis_id),this.setSelectValue(a,c,l.filter((function(e){return e.district_bis_id===c}))[0].name)),a.parent().find(".label").text(a.find("option:selected").text())}o||this.initSelect(null,null,e),this.bindChange(e)}}},{key:"setSelectDefault",value:function(e){if(0!=e.length){e.attr("data-old-value",null),e.prop("selectedIndex",0);var t=jQuery(e).next()[0];(e.attr("id").includes("edit-district-bis-id")||e.attr("id").includes("edit-region")||e.attr("id").includes("edit-postcode-select"))&&(t.innerText=Drupal.settings.hermes_translations.ui.formLabel.select)}}},{key:"setSelectValue",value:function(e,t,r){e.find("option").filter((function(e,r){return jQuery(r).val()===t})).prop("selected",!0),e.attr("data-old-value",t),e.parent().find(".label").text(r)}},{key:"changeDistrictEvent",value:function(e,t,r){if(this.isPostCodeSelectAvailable()){var i=jQuery(r).find(Ve);if(i.length>0&&e!==t){var n=jQuery(r).find(Ue),a=jQuery(r).find(Qe),s=_.get(this.getAreasStorageNameVariableByCountrySelector(jQuery(r).find($e).val()))||[],o=a.val()||"unknown",c=s[o].map((function(e){return e.district_bis_id})).indexOf(t),u=s[o].name;i.prop("disabled",!1);var l=s[o][c].postcodes||[];i.children(Be).remove(),l.forEach((function(e){var t=new Option(e.code,e.code);t.setAttribute("data-cs-mask",""),i.append(t)})),this.setSelectValue(n,t,u),this.setSelectDefault(i)}}}},{key:"getAllDistricts",value:function(){var e=this;k.REGION_DISTRICT_FIELDS.forEach((function(t){return e.getDistricts(t)}))}},{key:"changeProvinceEvent",value:function(e,t,r){if(e!==t){var i=jQuery(r).find(Qe),n=jQuery(r).find(Ue),a=Me({},Drupal.settings.hermes_account.states[jQuery(r).find($e).val()]),s=i.val()||"unknown",o="unknown"!==s?a[s].name:"unknown";n.prop("disabled",!1);var c=(_.get(this.getAreasStorageNameVariableByCountrySelector(jQuery(r).find($e).val()))||[])[s];n.children(Be).remove(),c&&c.forEach((function(e){var t=new Option(e.name,e.district_bis_id);t.setAttribute("data-cs-mask",""),n.append(t)})),this.setSelectValue(i,t,o),this.setSelectDefault(n),this.resetPostCodeSelectDefault(r)}}},{key:"initSelect",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=jQuery(r).find($e);if(P.needStateDistrictFields(i.val())&&"cn"!==Drupal.settings.hermes_current_country){this.getAllDistricts();var n=jQuery(r).find(Qe),a=jQuery(r).find(Ue);if(e!==t||!e||!t){var s=Drupal.settings.hermes_account.states,o=i.val().toUpperCase(),c={unknown:{name:null,region_id:null}};if(n.children(Be).remove(),Drupal.settings.hermes_global.lockListsAddress&&"hermes-account-address-book-form"!==jQuery(r).attr("id")){o in s&&(c=Me({},Drupal.settings.hermes_account.states[i.val().toUpperCase()]),Object.values(c).forEach((function(e){var t=new Option(e.name,e.region_id);t.setAttribute("data-cs-mask",""),n.append(t)})));var u=n[0].getAttribute("data-old-value"),l=n.find("option[value="+u+"]");l.length>0&&this.setSelectValue(n,u,l[0].text);var d=a[0].getAttribute("data-old-value");(l=a.find("option[value="+d+"]")).length>0&&this.setSelectValue(a,d,l[0].text);var h=n.val()||"unknown",p=_.get(this.getAreasStorageNameVariableByCountrySelector(o))||[],f=p[h]||[];this.populatePostCodeSelect(f,r),Drupal.settings.hermes_global.lockListsAddress=!1}else o in s?(c=Me({},Drupal.settings.hermes_account.states[i.val().toUpperCase()]),Object.values(c).forEach((function(e){var t=new Option(e.name,e.region_id);t.setAttribute("data-cs-mask",""),n.append(t)})),this.setSelectDefault(n),this.setSelectDefault(a),this.resetPostCodeSelectDefault(r)):(this.changeProvinceEvent(null,"unknown",r),this.changeDistrictEvent(null,"unknown",r)),a.prop("disabled",o in s);this.bindChange(r)}}}},{key:"checkForm",value:function(e){"hermes-account-create-form"!==jQuery(e).attr("id")&&"hermes-account-edit-profile-form"!==jQuery(e).attr("id")&&"hermes-account-create-profile-form"!==jQuery(e).attr("id")&&"hermes-account-address-book-form"!==jQuery(e).attr("id")||this.initSelect(null,null,e)}},{key:"bindChange",value:function(e){var t=this,r=jQuery(e).find(Qe),i=jQuery(e).find(Ue);r.on("change",(function(i){if(void 0!==i.originalEvent){var n=r.attr("data-old-value"),a=r.val();t.changeProvinceEvent(n,a,e)}})),this.isPostCodeSelectAvailable()&&i.on("change",(function(r){if(void 0!==r.originalEvent){var n=i.attr("data-old-value"),a=i.val();t.changeDistrictEvent(n,a,e)}}))}},{key:"getDistricts",value:function(e){var t=this;P.needStateDistrictFields(e)&&!_.get(this.getAreasStorageNameVariableByCountrySelector(e))&&ue(k.ADDRESS_DISTRICTS_URL,{country:e.toLowerCase(),locale:Drupal.settings.hermes_locale},"GET").done((function(r){t.updateAreasByCountrySelector(e,r)})).fail((function(){t.failBySelectCountry(e)}))}},{key:"isPostCodeSelectAvailable",value:function(){try{return-1!==_.get("required_area").indexOf(Drupal.settings.hermes_current_country.toUpperCase())}catch(e){return!1}}},{key:"populatePostCodeSelect",value:function(e,t){if(this.isPostCodeSelectAvailable()&&e&&e.length>0){var r=jQuery(t).find(Ve);this.resetPostCodeSelectDefault(t);var i=jQuery(t).find(Qe),n=jQuery(t).find(Ue),a=_.get(this.getAreasStorageNameVariableByCountrySelector(jQuery(t).find($e).val()))||[],s=i.val()||"unknown",o=a[s].map((function(e){return e.district_bis_id})).indexOf(n.val());r.prop("disabled",!1);var c=a[s][o].postcodes||[];r.children(Be).remove(),c.forEach((function(e){var t=new Option(e.code,e.code);t.setAttribute("data-cs-mask",""),r.append(t)}))}}},{key:"resetPostCodeSelectDefault",value:function(e){if(this.isPostCodeSelectAvailable()){var t=jQuery(e).find(Ve);t.children.length>0&&t.children(Be).remove(),this.setSelectDefault(t)}}}],r&&Ne(t.prototype,r),e}();function He(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stateDistrictFields=new ze,jQuery(document).ready(function(){P.isChina()&&!_.get(this.getChineseAreasStorageNameVariable())&&this.getChinesAreasStorageDatas()}.bind(this))}var t,r;return t=e,r=[{key:"getChineseAreasStorageNameVariable",value:function(){var e="CnEn";return"cn_zh"===Drupal.settings.hermes_locale&&(e="CnZh"),"chineseAreas".concat(e)}},{key:"getChinesAreasStorageDatas",value:function(){var e=this;return void 0===_.get(this.getChineseAreasStorageNameVariable())&&(_.set(this.getChineseAreasStorageNameVariable(),!0),k.REGION_DISTRICT_FIELDS.forEach((function(t){return e.stateDistrictFields.getDistricts(t)})),ue(k.GET_LIST_CHINA_ADDRESS,{country:Drupal.settings.hermes_current_country,locale:Drupal.settings.hermes_locale},"GET").done(this.updateChineseAreas.bind(this)).fail(this.fail.bind(this))),_.get(this.getChineseAreasStorageNameVariable())}},{key:"updateChineseAreas",value:function(e){if(!e.district)return this.fail();_.set(this.getChineseAreasStorageNameVariable(),e.district)}},{key:"fail",value:function(){te(),_.deleteItem(this.getChineseAreasStorageNameVariable())}},{key:"populateChineseSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=jQuery(e).find('select[name="country_id"]');if("CN"===t.val()&&P.isChina()){var r=jQuery(e).find('select[name="region"]'),i=jQuery(e).find('select[name="cityselect"]'),n=jQuery(e).find('select[name="district"]'),a=this.getChinesAreasStorageDatas(),s=r.val(),o=i.val(),c=n.val();if(r.children("option:not(:first)").remove(),Object.keys(a).forEach((function(e){var t=new Option(e,e);t.setAttribute("data-cs-mask",""),r.append(t)})),s){var u=Object.keys(a[s]);i.children("option:not(:first)").remove(),u.forEach((function(e){var t=new Option(e,e);t.setAttribute("data-cs-mask",""),i.append(t)})),this.setSelectValue(r,s)}if(s&&o){var l=Object.values(a[s][o]);n.children("option:not(:first)").remove(),l.forEach((function(e){var t=new Option(e,e);t.setAttribute("data-cs-mask",""),n.append(t)})),this.setSelectValue(i,o)}n.parent().find(".label").text(n.find("option:selected").text()),s&&o&&c&&this.setSelectValue(n,c),s||this.initChineseSelect(null,null,e),this.bindChange(e)}}},{key:"setSelectDefault",value:function(e){e.attr("data-old-value",""),e.prop("selectedIndex",0),e.attr("id").includes("edit-cityselect")&&e.parent().find(".label").text(Drupal.settings.hermes_translations.ui.formLabel.select),e.attr("id").includes("edit-district")&&e.parent().find(".label").text(Drupal.settings.hermes_translations.ui.formLabel.select),e.attr("id").includes("edit-region")&&e.parent().find(".label").text(Drupal.settings.hermes_translations.ui.formLabel.select)}},{key:"setSelectValue",value:function(e,t){e.val(t),e.attr("data-old-value",t),e.parent().find(".label").text(t)}},{key:"changeProvinceEvent",value:function(e,t,r){var i=jQuery(r).find('select[name="region"]'),n=jQuery(r).find('select[name="cityselect"]'),a=jQuery(r).find('select[name="district"]');if(e!==t){this.setSelectDefault(a),a.prop("disabled",!0);var s=Object.keys(this.getChinesAreasStorageDatas()[i.val()]);n.children("option:not(:first)").remove(),s.forEach((function(e){var t=new Option(e,e);t.setAttribute("data-cs-mask",""),n.append(t)})),this.setSelectDefault(n),n.prop("disabled",!1),this.setSelectValue(i,t)}}},{key:"changeCityEvent",value:function(e,t,r){var i=jQuery(r).find('select[name="region"]'),n=jQuery(r).find('select[name="cityselect"]'),a=jQuery(r).find('select[name="district"]');if(e!==t){var s=Object.values(this.getChinesAreasStorageDatas()[i.val()][n.val()]);a.children("option:not(:first)").remove(),s.forEach((function(e){var t=new Option(e,e);t.setAttribute("data-cs-mask",""),a.append(t)})),this.setSelectDefault(a),a.prop("disabled",!1),this.setSelectValue(n,t)}}},{key:"changeCountryEvent",value:function(e){var t=jQuery(e).find('select[name="region"]'),r=jQuery(e).find('select[name="cityselect"]'),i=jQuery(e).find('select[name="district"]');t.attr("data-old-value")&&this.setSelectValue(t,t.attr("data-old-value")),r.attr("data-old-value")&&this.setSelectValue(r,r.attr("data-old-value")),i.attr("data-old-value")&&this.setSelectValue(i,i.attr("data-old-value"))}},{key:"initChineseSelect",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=jQuery(r).find('select[name="country_id"]');if("CN"===i.val()){var n=jQuery(r).find('select[name="region"]'),a=jQuery(r).find('select[name="cityselect"]'),s=jQuery(r).find('select[name="district"]');if(e!==t||!e||!t){var o=Object.keys(this.getChinesAreasStorageDatas());n.children("option:not(:first)").remove(),o.forEach((function(e){var t=new Option(e,e);t.setAttribute("data-cs-mask",""),n.append(t)})),this.setSelectDefault(n),this.setSelectDefault(a),a.prop("disabled",!0),this.setSelectDefault(s),s.prop("disabled",!0),this.bindChange(r)}}}},{key:"checkChineseForm",value:function(e){"CN"===jQuery(e).find('select[name="country_id"]').val()&&"hermes-account-create-form"===jQuery(e).attr("id")&&this.initChineseSelect(null,null,e)}},{key:"bindChange",value:function(e){var t=this,r=jQuery(e).find('select[name="region"]'),i=jQuery(e).find('select[name="cityselect"]'),n=jQuery(e).find('select[name="country_id"]');r.on("change",(function(i){if("CN"===n.val()&&void 0!==i.originalEvent){var a=r.attr("data-old-value"),s=r.val();t.changeProvinceEvent(a,s,e)}})),i.on("change",(function(r){if("CN"===n.val()&&void 0!==r.originalEvent){var a=i.attr("data-old-value"),s=i.val();t.changeCityEvent(a,s,e)}})),n.on("change",(function(r){"CN"===n.val()&&void 0!==r.originalEvent&&t.changeCountryEvent(e)}))}}],r&&He(t.prototype,r),e}(),Ge="#tray-create-profile";function Ke(){APP.pubsub.subscribe("analytics-tray-forgot-password",(function(){Ke.pushEvent("Account","SigninKO","ForgotPassword",null,null)})),jQuery(".account-signed-out > button.button-tray.tray-close").on("click",Ke.closeLoginNotification),jQuery(".account-signed-in > button.button-tray.tray-close").on("click",Ke.closeAccountOverlay),jQuery(".account-signed-out > button.continue-experience").on("click",Ke.continueShoppingAccount),jQuery('[data-tray-trigger="tray-forgotpassword"]').on("click",Ke.openForgotPasswordTray),jQuery('[data-track="data-track-account-create-button"]').on("click",Ke.openCreateAccountPage),jQuery('[id="edit-send-sms-button-creation"]').on("click",Ke.createAccountGetCode),jQuery('[data-track="data-track-general-terms-and-conditions"]').on("click",Ke.createAccountConditionsPrivacyLinks),jQuery('[data-track="data-track-privacy"]').on("click",Ke.createAccountConditionsPrivacyLinks),jQuery("#tray-account").find(".wechat-social-login a").on("click",Ke.socialLoginWechat),jQuery(".account-tray-links-list a.list-orders").on("click",Ke.viewProfile),APP.pubsub.subscribe("pipl.wechat.link.clicked.createAccount",(function(){Ke.pushEvent("account","create_account","wechat pipl",null,null)})),APP.pubsub.subscribe("account.logout",(function(e,t){"tray-edit-profile"===t&&Ke.pushEvent("account","create_account","optout pipl",null,null)}))}Ke.pushEvent=function(e,t,r,i,n){var a={event:"uaevent"};e&&(a.eventcategory=e),t&&(a.eventaction=t),r&&(a.eventlabel=r),i&&(a.virtualPageUri=i),n&&(a.pageType=n),dataLayer.push(a)},Ke.formFail=function(e,t,r,i){var n,a,s,o,c=document.querySelector("div.validation-error");null!==c?(null!==c.querySelector("select")?(s=c.querySelector("select").dataset.validationLabel,a=c.querySelector("select").getAttribute("aria-describedby")):null!==c.querySelector("input")?(s=c.querySelector("input").dataset.validationLabel,a=c.querySelector("input").getAttribute("aria-describedby")):s="Captcha",o=null!==a&&null!==jQuery(a).find("span").html()?jQuery(a).find("span").html():"Required information",n="".concat(s," - ").concat(o)):n="Error - Required information",Ke.pushEvent(e,t,n,r,i)},Ke.loginFormSuccess=function(e,t,r){jQuery(document).ajaxComplete((function(i,n,a){-1!==a.url.search("login")&&(n.responseJSON.hasOwnProperty("error")?Ke.pushEvent(e,t,r,null,null):P.isWechatInApp()?Ke.pushEvent(e,t,"SocialLogin","WeChat"):Ke.pushEvent(e,t))}))},Ke.createAccountFormSuccess=function(e,t,r,i,n){jQuery(document).ajaxComplete((function(a,s,o){-1!==o.url.search("customer")&&(s.responseJSON.hasOwnProperty("error")?Ke.pushEvent("error message",window.location.pathname,Drupal.settings.hermes_translations.notification.account.createAccountCodes[2400001].title):P.isWechatInApp()?Ke.pushEvent(e,t,"wechat",null,null):(Ke.pushEvent(e,t,Ke.eventLabelForNewsletterChecked(r),null,null),i&&Ke.pushEvent("account",t,"optin pipl",null,null),n&&Ke.pushEvent("account",t,"optin_communications",null,null)))}))},Ke.eventLabelForNewsletterChecked=function(e){return null==e?null:e?"newsletter_optin_YES":"newsletter_optin_NO"},Ke.closeAccountOverlay=function(){Ke.pushEvent("Account","my_account","close")},Ke.closeLoginNotification=function(){Ke.pushEvent("Account","login_notification","close")},Ke.continueShoppingAccount=function(){Ke.pushEvent("Account","login_notification","continue")},Ke.viewProfile=function(){Ke.pushEvent("Account","my_account","my_profile")},Ke.openCreateAccountPage=function(e){var t;"data-track-account-create-button"===e.target.dataset.track&&(t="ClickButton"),Ke.pushEvent("Account","1_CreateAccount",t,null,null)},Ke.openSignInTray=function(){Ke.pushEvent("Account","Click_Signin_link",null,null,null)},Ke.openForgotPasswordTray=function(){var e=document.querySelector(Ge);e&&"false"===e.getAttribute("aria-hidden")?Ke.pushEvent("Checkout_login","PasswordKO","ForgotPassword",null,null):Ke.pushEvent("Account","SigninKO","ForgotPassword",null,null)},Ke.createAccountGetCode=function(){var e=document.querySelector(Ge);e&&"false"===e.getAttribute("aria-hidden")?Ke.pushEvent("Checkout_CreateAccount","1_CreateAccount_getcode","ClickButton",null,null):Ke.pushEvent("account","create_account","get_code",null,null)},Ke.createAccountConditionsPrivacyLinks=function(e){var t=document.querySelector(Ge);t&&"false"===t.getAttribute("aria-hidden")&&("data-track-general-terms-and-conditions"===e.target.dataset.track&&Ke.pushEvent("Checkout_CreateAccount","1_CreateAccount","ClickLink_conditions",null,null),"data-track-privacy"===e.target.dataset.track&&Ke.pushEvent("Checkout_CreateAccount","1_CreateAccount","ClickLink_privacy_policy",null,null))},Ke.socialLoginWechat=function(){Ke.pushEvent("Account","SocialLogin","Wechat",null,null)},Ke.ereservationLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?Ke.pushEvent("Account","Signin_eresaKO",e,null,null):Ke.pushEvent("Account","Signin_eresa","Continue_button",null,null)},Ke.ereservationSignup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?Ke.pushEvent("Account","2_Light_AccountCreatedKO_Eresa",e,null,null):Ke.pushEvent("Account","1_Create_Light_Account_Eresa","Continue_button",null,null)},Ke.ereservationAccountOverlay=function(){var e="/".concat(Drupal.settings.pathPrefix,"eresa_light_account/");Ke.pushEvent("Account","EresaAccountOverlay",null,e,"account")};var We,Ye=Ke,Xe=new qe,Ze=new ze,Je=function(e){var t=jQuery("select#edit-district-bis-id--2").children("option:selected").text(),r=jQuery("select#edit-cityselect").children("option:selected").text(),i="#hermes-account-edit-profile-form",n="#hermes-account-create-form",a="#update-account-pipl-checkbox",s={},o=!1;this.init=function(){if(this.page=e.page,this.form=document.querySelector(e.form),this.$form=jQuery(this.form),this.$form.trigger("reset"),We="register"===Drupal.settings.hermes_global.pageType?"#hermes-account-create-form-captcha":"#hermes-account-edit-form-captcha",e.secondaryForm&&(this.$secondaryForm=jQuery(e.secondaryForm),this.validatorSecondForm=new _e({inputs:this.$secondaryForm.find("[name]")})),this.$notification=jQuery(".notification"),this._namePrefix=e.namePrefix,this._idPrefix=e.idPrefix||"edit",!this.form)throw new Error("Profile update form cant be found");this.$form.find(a).attr("checked",!0),this.validator=new _e({inputs:this.form.querySelectorAll("[name]")}),(new we).init({form:this.form}),this.bind(),"mo"!==Drupal.settings.hermes_current_country&&"hk"!==Drupal.settings.hermes_current_country||""!==jQuery(n).find('input[name="city"]').val()||jQuery(n).find('input[name="city"]').val({mo:"Macau",hk:"Hong Kong"}[Drupal.settings.hermes_current_country])},this.bind=function(){this.$form.find('[name*="country_id"]').on("change",this.validator.resetErrors.bind(this.validator),(function(){P.isChina()&&Xe.checkChineseForm(this.form),P.needStateDistrictFields(this.value)&&Ze.checkForm(this.form)})),this.$form.on("submit",this.submitForm.bind(this)),jQuery("#create-account-pipl-checkbox").click((function(){APP.pubsub.publish("pipl.checkbox.checked")})),jQuery(".create-account-wechat-description-link").click((function(){APP.pubsub.publish("pipl.wechat.link.clicked.createAccount")})),this.$notification.on("click",".notification-signin",this.notificationSignIn.bind(this)),this.$notification.on("click",".notification-createaccount",this.notificationCreateAccount.bind(this)),this.$notification.on("click",".notification-createaccount-form",this.notificationCreateAccountForm.bind(this)),this.$notification.on("click",".link-create-account-profile",this.notificationViewProfile),APP.pubsub.subscribe("account.sms.banned",this.disabledSmsButton),APP.pubsub.subscribe("imNotARobotProfile",this.validator.removeErrorMessageInPageTitle.bind(this.validator,We)),APP.pubsub.subscribe("imNotARobotProfileExpired",P.throwErrorReCaptcha.bind(this,jQuery(We))),APP.pubsub.subscribe("imNotARobotProfileExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,We))},this.submitForm=function(e){var o=this;e.preventDefault();var c=new _e({inputs:this.form.querySelectorAll("input, select, textarea")}),u=jQuery(".form-email"),l=jQuery(".form-item-loginphone-input"),d=jQuery(this.$form).find('[name="social_security_number"]');d.length>0&&d.val(d.val().replace(/[.-]/g,"")),u[0]&&c.removeError(u[0]),l[0]&&c.removeError(l[0]),s={};var h=["#".concat(this._idPrefix,"-newsletter"),"#".concat(this._idPrefix,"newsletter"),"#edit-newsletter--2","#edit-newsletter--3"].find((function(e){return o.$form.find(e).prop("checked")}))?Drupal.settings.hermes_locale:null;if(!P.validateRecaptcha(this.$form.attr("id"))){var p=jQuery(We);p.addClass("validation-error"),this.validator.showErrorMessageInPageTitle(p)}var f=this.$form.find(".validation-error").length>0;this.$secondaryForm&&(this.$secondaryForm.find(".error-message").remove(),this.validatorSecondForm.runTests(e),f=f||this.$secondaryForm.find(".validation-error:visible").length>0);var m=this.$form.get(0).querySelector("input[name=street1]");if(this.validator.testField(m).length&&(f=!0),this.form.checkValidity()&&P.validateRecaptcha(this.$form.attr("id"))&&!f){var g=this.$form.serializeObject(),y=g.confirm_password;if(y&&""!==y)return void Y({message:window.Drupal.settings.hermes_translations.notification.account.honeyPotError,messageVariables:window.Drupal.settings.hermes_translations.notification.account.honeyPotError.variables});var v=g.year&&g.month&&g.day?{year:g.year,month:g.month,day:g.day}:null;if(v){this.validator.checkDate(e);var b=jQuery(".tray-edit-profile-visible"),_=jQuery(".dob-wrapper"),w=new Date(v.year,v.month,v.day),A=new Date;if(b.length>0&&"1900"===v.year&&c.throwError({input:_[0],error:Drupal.settings.hermes_translations.validation.dob_format}),w>A||w.getFullYear()<A.getFullYear()-k.LIMIT_AGE_USER)return void this.validator.runTests(e)}if(this.$secondaryForm){var C=this.$secondaryForm.serializeObject();jQuery.extend(g,C)}P.needSmsProvider()&&g.phonecode&&g.loginphone&&(g.phonecode=g.phonecode.split(" ").join(""),g.loginphone=g.loginphone.split(" ").join("")),Object.keys(g).filter((function(e){return e.includes(o._namePrefix)})).forEach((function(e){g[e.replace(o._namePrefix,"")]=g[e],delete g[e]})),jQuery.extend(s,g,{dob:v,newsletter_subscription:h,action:"create"===this.page?"create":"edit"}),H("loader-button-create-address");var S=jQuery(this.$form).find('[name="communication_consent"]');S.length>0&&(s.communication_consent=S.prop("checked")),s.postcode=se(g.country_id,s.postcode),s.formId="#".concat(jQuery(e.currentTarget).attr("id")),jQuery(i).length>0&&(t=jQuery(i).find('select[name="district_bis_id"]').find(":selected").text(),r=jQuery(i).find('select[name="cityselect"]').find(":selected").text()),jQuery(n).length>0&&(t=jQuery(n).find('select[name="district_bis_id"]').find(":selected").text(),r=jQuery(n).find('select[name="cityselect"]').find(":selected").text()),P.assignValues(s,t,r),this.$form.find(a).is(":checked")||(s.piplOptin=!1),ue("/customer",s).done(this.success.bind(this)).fail(this.handleErrorResponse.bind(this)),void 0!==APP.recaptcha&&void 0!==APP.recaptcha["hermes-account-create-form"]&&window.grecaptcha.reset(),this.$secondaryForm&&"hermes-account-checkout-email-form"===this.$secondaryForm.attr("id")?Ye.createAccountFormSuccess("Checkout_CreateAccount","2_AccountCreatedOK",Boolean(s.newsletter_subscription),!1,Boolean(s.communication_consent)):(Ye.createAccountFormSuccess("account","create"===this.page?"create_account":"edit_account",Boolean(g.newsletter),Boolean(g.pipl_checkbox),Boolean(s.communication_consent)),jQuery("#create-account-pipl-checkbox").length>0&&APP.pubsub.publish("pipl.checkbox.createAccount"))}else this.$secondaryForm&&"hermes-account-checkout-email-form"===this.$secondaryForm.attr("id")?(Ye.formFail("Checkout_CreateAccount","2_AccountCreatedKO",null,null),this.$secondaryForm.each((function(e){"create-profile-create-password"===jQuery(e).attr("id")&&(o.validator.fields[o.validator.fields.length]=e)}))):Ye.pushEvent("account","create"===this.page?"create_account":"edit_account","error::required_infos",null,null),this.validator.runTests(e)},this.success=function(t){var r=_.get("registerContext"),i=_.get("registerContextUrl");if(t.error)this.handleErrorResponse(t);else{q("loader-button-create-address");var n=t.user,o=_.get("user");if(n.basket=t.basket,n.shipping_addresses=o&&o.shipping_addresses?o.shipping_addresses:void 0,_.set("user",n),_.set("isConnected",!0),_.set("checkUserSessionToken",!0),"create"===this.page)this.handleSuccessCreation(t,r,i),jQuery("#edit-submit-button").prop("disabled",!0).addClass("disabled-button");else if("profile"===this.page)if(this.$form.find(a).length>0&&!this.$form.find(a).is(":checked"))APP.pubsub.publish("account.logout","tray-edit-profile");else{e={message:Drupal.settings.hermes_translations.notification.editProfileSuccess,messageVariables:{firstname:s.firstname,lastname:s.lastname}},APP.pubsub.publish("profile.update.success",t);var c=jQuery(".block-profile"),u=jQuery(".newsletter-block").parent();null!==t.user.newsletter_subscription?(_.set("newsletterStatus","subscribed"),c.removeClass("not-subscribed"),u.removeClass("colored-background")):(_.deleteItem("newsletterStatus"),c.addClass("not-subscribed"),u.addClass("colored-background")),Y(e),APP.pubsub.publish("profile.update.profile")}}},this.createError=function(e,t,r){var i=new _e({inputs:this.form.querySelectorAll("input, select, textarea")}),n=jQuery(".form-email"),a=jQuery(".form-item-loginphone-input"),s=jQuery("#hermes-account-create-form-error-email"),o=jQuery("#hermes-account-create-form-error-loginphone"),c=!1;t&&(i.throwError({input:a[0],error:r}),a[0].focus(),i.scrollToError(),o.attr({role:"alert","aria-live":"polite"}),c=!0),e&&(i.throwError({input:n[0],error:r}),c||(n[0].focus(),i.scrollToError()),s.attr({role:"alert","aria-live":"polite"}))},this.handleErrorResponse=function(t){var r=t.error?t.error.internal_code:void 0,i=Drupal.settings.hermes_translations.notification.account.createAccountCodes,n={cn:{isEmail:!1,isPhone:!0,message:i[2400001].descriptionPhone},hk:{isEmail:!0,isPhone:!0,message:i[2400001].descriptionHkMo},jp:{isEmail:!0,isPhone:!1,message:i[2400001].descriptionJapan},kr:{isEmail:!0,isPhone:!0,message:i[2400001].descriptionKr},mo:{isEmail:!0,isPhone:!0,message:i[2400001].descriptionHkMo},tw:{isEmail:!0,isPhone:!0,message:i[2400001].descriptionPhone},th:{isEmail:!0,isPhone:!0,message:i[2400001].descriptionHkMo},default:{isEmail:!0,isPhone:!1,message:i[2400001].description}};if(APP.pubsub.publish("profile.update.profile"),q("loader-button-create-address"),t.error&&t.error.smsErrorNumber)return Y({message:window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[t.error.smsErrorNumber]}),void(t.error.smsErrorNumber.toString()===k.ERRORCODE.smsBanned&&APP.pubsub.publish("account.sms.banned"));var a=t.responseJSON.error.internal_code,o=n[Drupal.settings.hermes_current_country]||n.default;switch(a){case k.ERRORCODE.emailExist:this.createError(o.isEmail,o.isPhone,o.message);break;case k.ERRORCODE.emailInvalid:e={message:i[r],messageVariables:{email:s.email},type:"critical"},jQuery.extend(e.messageVariables,i[r].variables),Y(e);break;case k.ERRORCODE.accountExist:Y(e={message:i[r],type:"critical"});break;case k.ERRORCODE.inactivity:APP.pubsub.publish("account.httpsession.expired");break;default:["mo","hk"].includes(Drupal.settings.hermes_current_country)?function(){var e={message:Drupal.settings.hermes_translations.notification.account.technicalErrorSpecific,messageVariables:{},type:"critical"};jQuery.extend(e.messageVariables,Drupal.settings.hermes_translations.notification.account.technicalErrorSpecific.variables),Y(e);var t=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:t,message:e.message.description})}():te()}},this.handleSuccessCreation=function(t,r,i){var n=this;if("checkout"===r)return t.user.social&&t.user.device&&"WeChat"===t.user.device.device&&t.user.social.authorize_url?(_.set("social_login_from_checkout",!0),_.set("registerSocialContextUrl",window.location.href),void(window.location.href=t.user.social.authorize_url)):(_.deleteItem("registerContext"),void(window.location.href="/".concat(Drupal.settings.hermes_url_locale,"/").concat(Drupal.settings.hermes_translations.url.checkout,"/")));e={message:!0===_.get("user_sms_bp")?Drupal.settings.hermes_translations.notification.createProfileSuccessWechat:Drupal.settings.hermes_translations.notification.createProfileSuccess,messageVariables:{firstname:s.firstname,lastname:s.lastname,prefix:s.prefix}},jQuery.extend(e.messageVariables,Drupal.settings.hermes_translations.notification.createProfileSuccess.variables);var a=P.findGetParameter("code",i)?"wechat":"create";"wechat"===a&&(_.deleteItem("user_sms_bp"),delete t.user.social,_.set("accountCreatedByWechat",!0)),t.user&&(t.user.new_account=1),APP.pubsub.publish("account.login.done",{jqXHR:t,source:a}),window.location.pathname.includes("/".concat(Drupal.settings.hermes_translations.url.account_create))&&setTimeout((function(){i&&!o&&(_.set("show-info-banner",!0),_.set("accountCreated",!0),window.location.href=n.removeParam("code",i)),_.deleteItem("registerContextUrl")}),2e3)},this.removeParam=function(e,t){var r=t.split("?")[0],i=[],n=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==n){for(var a=(i=n.split("&")).length-1;a>=0;a-=1)i[a].split("=")[0]===e&&i.splice(a,1);r="".concat(r,"?").concat(i.join("&"))}return r},this.notificationSignIn=function(e){e.preventDefault(),J(),APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),APP.pubsub.publish("tray.account.toggle")},this.notificationCreateAccount=function(e){e.preventDefault(),J(),APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),APP.pubsub.publish("tray.account.toggle")},this.notificationCreateAccountForm=function(e){e.preventDefault(),J()},this.createRedirect=function(){window.location.href="/".concat(Drupal.settings.hermes_url_locale)},this.notificationViewProfile=function(){o=!0,z()},this.updateChineseAreas=function(e){e&&_.set(Xe.getChineseAreasStorageNameVariable(),e.district)},this.updateAreas=function(e){e&&_.set(Ze.getAreasStorageNameVariable(),e.districts)},this.disabledSmsButton=function(){var e=jQuery("#edit-send-sms-button-creation");e.addClass("disabled-input").attr("disabled","disabled"),setTimeout((function(){e.removeAttr("disabled").removeClass("disabled-input")}),36e5)},this.init()};function et(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r(4342);var tt=window&&void 0===window.document?0:window.document,rt={map:{API_KEY:"gme-hermesinternational",URL:"https://maps.googleapis.com/maps/api/js?client=gme-hermesinternational&libraries=places",pins:{store:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6IzQ0NDQ0NDt9LnN0MXtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuMiwwQzUsMCwwLDUsMCwxMS4yYzAsMi42LDAuOCw1LDIuNCw3bDcuMiw5bDEuNiwybDEuNi0ybDUuOC03LjRsMS4yLTEuNmMxLjYtMiwyLjQtNC40LDIuNC03QzIyLjIsNSwxNy4yLDAsMTEuMiwweiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4NCjwvc3ZnPg0KDQo=",size:{x:22,y:29},anchor:{x:11,y:29}},clickedStore:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojOWE5YTlhO30uc3Qxe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExLjIsMEM1LDAsMCw1LDAsMTEuMmMwLDIuNiwwLjgsNSwyLjQsN2w3LjIsOWwxLjYsMmwxLjYtMmw1LjgtNy40bDEuMi0xLjZjMS42LTIsMi40LTQuNCwyLjQtN0MyMi4yLDUsMTcuMiwwLDExLjIsMHoiLz4KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4KPC9zdmc+",size:{x:22,y:29},anchor:{x:11,y:29}},user:{data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAABQCAMAAABVumeJAAAAYFBMVEVMaXHpj4fibWTojYXaTEHeWU7rnpfso53vsa3eX1TURDjicmjkeG/kfnXmhHvXPzHYQjbdTUHSOCvZRTjfUEXdSD7hVEjbRzrhV0xuNC/FRjyCODK2QjhyNjFqMi6UPDSgygjXAAAAD3RSTlMAXLV37+JEKhHN+p6MhaGQa3UDAAACi0lEQVR4AY3Th46sMAyFYVPS6IQ6/f3f8lqxljmKGG7+LWqfjswUijNZkzulXN5khi4zrdvnMbQs46ga85vW+zyv6xwauW1bcn1KbbOvkmCZH5bansy6dd2Fz6CZKx1brZie4mUqs8iWu3SCt2lATUbtF3ibRrjEuvWwZ3gbSnPgbt6vlrk+/7PZChZeOsBTX8ARl1cw/jukmL92/4Wnvg7DKh4+xTKdzUBhOMJydT6v0jHM/0bmYANWlgybPfyEmI7Pz+PxeY4zDHPDZEjPog57f9xCjydiuaMdkbJ93V6h2+0p9sA55SMLkdxaiRV9h2HGjhxjKQx/xIbeHxyeBkVqxsYXdHvdF7BDGeH7C3s/r/B6v8HuTfAEeIQjYJk1YraM3TJ+myvY5e443CvKtxH18WowfX/AMnbUAubkdWYbhhc4Yuhr0ngG92Qtu+HiCXBGtgS9cPfHO/SI7WCI8okFtsmnrlqEBisnE2WAD78t8AoL9gVjq1AHJEXD8o0thsOJRCqW8zVxMo0stjDM0/12QSXfkGTVEFO0MmxJogwwSLC+oKO8R4lW8o6+mXIAE8/yjyao6E+p4D48HeT6iKJVFikeElNOo5RDUKL1HbDjEHCHHOAIyGwRDa8DD+MRcEg0G/I1nWUda6BycGnpNN33IGXbZ/Sj3AMU6+hXugJ5MSx1ngHanH5nKqScpotymb68GF+QpIslB9PyGl+UIW7pOouPaK6tPCI+XuIdvvgvtuUfrviKlDsSrpAKH6j3bQI2lZc0JeTEKkqpEVwnYS04S8K29Jy8cIlHK0qrlZPT0uknyyvdG0pMefncJ5V7n1NqhXwwkp8wS8bGe5OMbVXZdFyW6Zico7P+AbjAlYsTQvYhAAAAAElFTkSuQmCC",size:{x:44,y:80},scaled:{x:22,y:40},anchor:{x:11,y:40}},HERMES_PIN:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgLTEgMjcgMzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI2LjkyMiAxMy42MThDMjYuOTIyIDYuMDk4IDIwLjg5NSAwIDEzLjQ2MiAwIDYuMDI3IDAgMCA2LjEgMCAxMy42MThjMCAzLjIxOCAxLjEwMyA2LjE3NCAyLjk1IDguNTA1aC0uMDA0YzMuNDc3IDQuMzkyIDguMzg4IDEwLjYwMiA5Ljk4NSAxMi42MjMuMTM1LjE2LjMyNi4yNTQuNTMyLjI1NC4yMDQgMCAuMzk1LS4wOTMuNTMtLjI1NGw5Ljk4LTEyLjYxN2MuMDAzIDAgLjAwMy0uMDA0LjAwMy0uMDA0bC0uMDAzLS4wMDNjMS44NDUtMi4zMyAyLjk1LTUuMjg3IDIuOTUtOC41MDUiIGZpbGw9IiM0NDQiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkgMTBoNC4wMDZ2MS40MjJoLTEuMjZ2Mi40MzJoNC41MDZ2LTIuNDMyaC0xLjI2OFYxMEgxOXYxLjQyMmgtMS4yOHY3LjE2SDE5VjIwaC00LjAxNnYtMS40MTdoMS4yNjh2LTMuMzJsLTQuNTA2LS4wMDJ2My4zMjNoMS4yNlYyMEg5di0xLjQxN2gxLjI3N3YtNy4xNkg5Ii8+PC9zdmc+",cluster:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyOSI+PHN0eWxlPi5zdDB7ZmlsbDojNDQ0NDQ0O308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMS4yIDBDNSAwIDAgNSAwIDExLjJjMCAyLjYuOCA1IDIuNCA3bDcuMiA5IDEuNiAyIDEuNi0yIDUuOC03LjQgMS4yLTEuNmMxLjYtMiAyLjQtNC40IDIuNC03IDAtNi4yLTUtMTEuMi0xMS0xMS4yeiIvPjwvc3ZnPg=="}}}},it={baidu:{map:{pins:rt.map.pins,API_KEY:"",URL:""}},google:rt,hermes:{store:{languages:{fr:"fre-FR",en:"eng-GB",de:"ger-DE",es:"esl-ES",zh:function(){if(Drupal.settings.hermes_locale){var e=Drupal.settings.hermes_locale,t="";return"tw_zh"===e?t="chi-TW":"cn_zh"===e&&(t="chi-CN"),t}}(),it:"ita-IT",ja:"jpn-JP",ko:"kor-KR",pt:"por-BR",ru:"rus-RU"},language:function(){if(!tt)return"en";var e=tt.location.pathname.match("/[a-z]{2}/([a-z]{2})/");if(e&&e[1])return e[1];if(tt.location.search&&window.URLSearchParams){var t=new window.URLSearchParams(tt.location.search).get("locale");if(!t)return"en";if((t=t.split("_"))[1])return t[1]}return"en"}(),URL:"/sites/all/modules/custom/hermes_store_locator/includes/stores.json",ACCESS_TOKEN:"$/+8KDDU334$4a<C2M(6/<bhGyneX.e8i:6?&[57#n3h8=}z?*5Kc4W62;$BMLS#?P2Q7_PD~zxLK4x4_nPa8^HQ5H@4yMBLWev7y9iw754/k,biG6VxT33;tvg=}bcV"},paging:{pagesize:8,productLocatorPageSize:5}},iplocator:{url:"https://freegeoip.net/json/1.1.16.23"},locations:{initial:{location:{lat:0,lng:0},zoom:1}},hermesPath:{customThemeJs:tt.location.origin+"/sites/all/themes/custom/hermes/js"}},nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"currentMapEngine",value:function(){return tt&&new RegExp(/(hermes)*cn\//).test(tt.location.href)?e.mapenginetype.BAIDU:e.mapenginetype.GOOGLE}},{key:"mapenginetype",get:function(){return{GOOGLE:"mapengine-google",BAIDU:"mapengine-baidu"}}},{key:"google",get:function(){return it.google}},{key:"baidu",get:function(){return it.baidu.map.API_KEY=Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,it.baidu.map.URL="https://api.map.baidu.com/api?v=2.0&ak="+Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,it.baidu}},{key:"mapengine",get:function(){return e.currentMapEngine()===e.mapenginetype.GOOGLE?e.google:e.currentMapEngine()===e.mapenginetype.BAIDU?e.baidu:void 0}},{key:"hermes",get:function(){return it.hermes}},{key:"locations",get:function(){return it.locations}},{key:"hermesPath",get:function(){return it.hermesPath}}],null&&et(t.prototype,null),r&&et(t,r),e}();function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function st(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"forceClearList",value:function(){var e=document.getElementById("no-store-close-msg"),t=document.getElementById("stores-found-msg"),r=document.getElementById("product-locator-map-error-msg"),i=document.getElementById("list-store"),n=document.getElementById("pl-concessionary-disclaimer-msg");e&&(e.style.display="none"),t&&(t.innerHTML=""),r&&(r.innerHTML=""),i&&i.hasChildNodes()&&i.removeAllChildren(),n&&(n.innerHTML="")}},{key:"enableDisablePLButton",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=jQuery("#tray-product-locator input#btfind");t&&t.length>0&&(e?(t.attr("disabled","disabled"),t.addClass("disabled")):(t.removeAttr("disabled"),t.removeClass("disabled")))}},{key:"productLocatorScript",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.enableDisableFindInStoreLoader(),!0===APP.productLocatorMapLoaded?r(t,i):jQuery.getScript(nt.hermesPath.customThemeJs+"/page-product-store-locator.js").done((function(){var e=0,n=setInterval((function(){e++,!0===APP.productLocatorMapLoaded?(r(t,i),clearInterval(n)):15===e&&clearInterval(n)}),200)}))}},{key:"initTrayConfigurator",value:function(){var e=Drupal.settings.hermes_products.data;return APP.trayController.triggerTray({name:"tray-configurator",dontAdd:!0,products:e?e.products:void 0,sku:e&&e.default_variant?e.default_variant.sku:void 0,attributes:e&&e.attributes?e.attributes:void 0,isAppleWatchKit:e&&e.products&&e.products.length&&e.products[0].set_type===k.KIT_APPLEWATCH})}},{key:"refreshStockHComAvailability",value:function(e){if(e)for(var t in null===Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts=e),Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts)e.hasOwnProperty(t)&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[t]=e[t]),Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[t].hasOwnProperty("in_stock")&&Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[t].in_stock&&(Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock=!0)}},{key:"setProductAttributes",value:function(){if((!Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes")||null===Drupal.settings.hermes_products.data.products_attributes||!Drupal.settings.hermes_products.data.products_attributes)&&Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")){Drupal.settings.hermes_products.data.products_attributes={};for(var e=0;e<Drupal.settings.hermes_products.data.products.length;e++)Drupal.settings.hermes_products.data.products[e]&&Drupal.settings.hermes_products.data.products[e].hasOwnProperty("sku")&&Drupal.settings.hermes_products.data.products[e].hasOwnProperty("attributes")&&(Drupal.settings.hermes_products.data.products_attributes[Drupal.settings.hermes_products.data.products[e].sku]=Drupal.settings.hermes_products.data.products[e].attributes)}}},{key:"getCurrentProductVariation",value:function(){var e,t=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(this.getAllProducts());try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.sku&&r.sku===this.getSelectedSku())return r}}catch(e){t.e(e)}finally{t.f()}return{}}},{key:"setAllProducts",value:function(){Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")&&!Drupal.settings.hermes_products.data.hasOwnProperty("all_products")&&(Drupal.settings.hermes_products.data.all_products=Drupal.settings.hermes_products.data.products)}},{key:"getAllProducts",value:function(){return Drupal.settings.hermes_products.data.hasOwnProperty("all_products")?Drupal.settings.hermes_products.data.all_products:Drupal.settings.hermes_products.data.products}},{key:"refreshStockRetailPresentability",value:function(e,t){if(e&&e.hasOwnProperty("data")&&e.data.hasOwnProperty("presentabilities")){var r=e.data.presentabilities;Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts={};for(var i=0;i<t.length;i++){for(var n=!1,a=0;a<r.length;a++)if(r[a].hasOwnProperty("sku")&&r[a].hasOwnProperty("presentability")&&r[a].sku===t[i]){n=r[a].presentability;break}n&&(Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock=!0),Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts[t[i]]={has_stock_retail:n}}}}},{key:"getSelectedSku",value:function(){return Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null}},{key:"checkIfAllSizeAreDisabled",value:function(){var e=null,t=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(t&&t.length>0){e=!0;for(var r=0;r<t.length;r++)if(t[r]&&!t[r].disabled){e=!1;break}}return e}},{key:"typeOfListedSize",value:function(){var e=null,t=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(t&&t.length>0){e=[];for(var r=0;r<t.length;r++)if(t[r]){if(t[r].checked)return null;var i=t[r].getAttribute("stock-type");switch(!0){case i===this.noStockKey&&!e.includes(this.noStockKey):e.push(this.noStockKey);break;case i===this.retailOnlyKey&&!e.includes(this.retailOnlyKey):e.push(this.retailOnlyKey);break;case i===this.hComOnlyKey&&!e.includes(this.hComOnlyKey):e.push(this.hComOnlyKey);break;case i===this.hComAndRetailKey&&!e.includes(this.hComAndRetailKey):e.push(this.hComAndRetailKey)}}}return this.sizeTypes(e)}},{key:"sizeTypes",value:function(e){return e&&0!==e.length?e.includes(this.hComAndRetailKey)||e.includes(this.hComOnlyKey)&&e.includes(this.retailOnlyKey)?this.hComAndRetailKey:e.includes(this.retailOnlyKey)?this.retailOnlyKey:e.includes(this.hComOnlyKey)?this.hComOnlyKey:1===e.length&&e.includes(this.noStockKey)?this.noStockKey:null:null}},{key:"enableDisableFindInStoreLoader",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e)return J(),void q("loader-button-find-in-store");var t=document.querySelectorAll(".product-locator-container-button.fis-as-a-button .loader-button-find-in-store");if(t.length)H("loader-button-find-in-store");else{var r=document.querySelectorAll(".product-locator-container-button.fis-as-a-link .loader-button-find-in-store");r.length&&z()}}},{key:"refreshAllButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getSelectedSku();if(t&&!e){var r=this.isAvailableStockHCom(t),i=this.isAvailableStockRetail(t),n=document.getElementsByClassName("product-locator-container-button"),a=document.querySelectorAll(".product-locator-container-button button"),s=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.enableAllAttributesButtons();var o=this,c=null;setTimeout((function(){switch(c=o.typeOfListedSize(),!0){case!r&&!i&&null===c||c===o.noStockKey:o.hasNotHcomNotStockRetail(n,a,s);break;case r&&i||c===o.hComAndRetailKey:o.hasHcomStockRetail(n,a,s);break;case!r&&i||c===o.retailOnlyKey:o.hasNotHcomStockRetail(n,a,s);break;case r&&!i||c===o.hComOnlyKey:o.hasHcomNotStockRetail(n,a,s)}}),50)}}},{key:"disableAllButtons",value:function(){var e=document.getElementsByClassName("product-locator-container-button"),t=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.addClassToMultiElements(e,"add",["hidden"]),this.addClassToMultiElements(e,"remove",["fis-as-a-link","fis-as-a-button"]),this.addClassToMultiElements(t,"add",["show","button-full-opacity"]),this.addClassToMultiElements(t,"remove",["hidden"]),H("loader-button-add-to-cart")}},{key:"enableDisableCartButtons",value:function(e,t){if(e){switch(t){case!0:document.body.classList.add("in-stock");break;case!1:document.body.classList.remove("in-stock")}for(var r=0;r<e.length;r++)e[r].setAttribute("aria-disabled",(!!t).toString())}}},{key:"hasNotHcomNotStockRetail",value:function(e,t,r){this.setAccessibilityMessageToSelectedAttribute(this.noStockKey),this.showHideStockOnlyMessage(),this.enableDisableCartButtons(r,!1),q("loader-button-add-to-cart"),this.addClassToMultiElements(r,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(e,"add",["hidden"])}},{key:"hasNotHcomStockRetail",value:function(e,t,r){this.setAccessibilityMessageToSelectedAttribute(this.retailOnlyKey),this.showHideStockOnlyMessage("show"),this.addClassToMultiElements(e,"add",["fis-as-a-button","show"]),this.addClassToMultiElements(e,"remove",["fis-as-a-link","hidden"]),this.addClassToMultiElements(t,"add",["button"]),this.addClassToMultiElements(t,"remove",["product-attribute-item"]),this.addClassToMultiElements(r,"add",["hidden"]),this.addClassToMultiElements(r,"remove",["button-full-opacity"]),H("loader-button-add-to-cart"),this.enableDisableCartButtons(r,!1)}},{key:"hasHcomNotStockRetail",value:function(e,t,r){this.setAccessibilityMessageToSelectedAttribute(this.hComOnlyKey),this.showHideStockOnlyMessage(),q("loader-button-add-to-cart"),this.addClassToMultiElements(r,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(e,"add",["hidden"]),this.enableDisableCartButtons(r,!0)}},{key:"hasHcomStockRetail",value:function(e,t,r){this.setAccessibilityMessageToSelectedAttribute(this.hComAndRetailKey),this.showHideStockOnlyMessage(),this.addClassToMultiElements(t,"remove",["button"]),this.addClassToMultiElements(t,"add",["product-attribute-item"]),this.addClassToMultiElements(e,"remove",["fis-as-a-button","hidden"]),this.addClassToMultiElements(r,"remove",["hidden","button-full-opacity"]),q("loader-button-add-to-cart"),this.addClassToMultiElements(e,"add",["fis-as-a-link","show"]),this.enableDisableCartButtons(r,!0)}},{key:"isSizeVariationIsSelected",value:function(){var e=null,t=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(t&&t.length>0){e=!1;for(var r=0;r<t.length;r++)if(t[r].checked){e=!0;break}}return e}},{key:"setAccessibilityMessageToSelectedAttribute",value:function(e){if(!1!==this.isSizeVariationIsSelected()){var t=document.querySelectorAll('.product-attributes button.tray-trigger[aria-controls="panel-configurator"]'),r="aria-label",i=",";if(t&&t.length>0)for(var n=0;n<t.length;n++){var a=this.removePresentabilityAccessibilityMessage(t[n].getAttribute(r),i);switch(e){case this.hComOnlyKey:t[n].setAttribute(r,a+i+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case this.retailOnlyKey:t[n].setAttribute(r,a+i+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case this.hComAndRetailKey:t[n].setAttribute(r,a+i+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}}},{key:"removePresentabilityAccessibilityMessage",value:function(e,t){return"string"!=typeof e||","!==t?e:e=(e=(e=e.replace(this.stringRegularExpression(t+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly),"")).replace(this.stringRegularExpression(t+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly),"")).replace(this.stringRegularExpression(t+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail),"")}},{key:"stringRegularExpression",value:function(e){return"string"!=typeof e?null:new RegExp(e,"g")}},{key:"setAccessibilityMessageToVariation",value:function(e,t,r){if(e&&e.length>0&&2===this.productLocatorVersion())for(var i=0;i<e.length;i++)if(e[i]){var n=e[i].parent("li").find("span.accessibility-availability-type-message");switch(!0){case!t&&!r:n.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.noStock);break;case!t&&r:n.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case t&&!r:n.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case t&&r:n.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}},{key:"showHideStockOnlyMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hide",t=document.querySelectorAll(".product-locator-container-button .only-retail-stock-message");0!==t.length&&t.forEach((function(t){t&&(t.innerHTML="show"===e?Drupal.settings.hermes_translations.storeLocator.productLocator.stockRetailOnlyMessage:"")}))}},{key:"addClassToMultiElements",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e&&("add"===t||"remove"===t))for(var i=0;i<e.length;i++)for(var n=0;n<r.length;n++)e[i].classList[t](r[n])}},{key:"enableAllAttributesButtons",value:function(){for(var e=document.querySelectorAll(".product-attributes button"),t=0;t<e.length;t++)e[t].removeAttribute("disabled"),e[t].classList.remove("disabled")}},{key:"isProductLocatorActive",value:function(){return!!Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("active")&&!!Drupal.settings.product_locator_configuration.active}},{key:"productLocatorVersion",value:function(){return this.isProductLocatorActive()&&Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("version")?Drupal.settings.product_locator_configuration.version:null}},{key:"productLocatorStockRetailWS",value:function(){return Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("stockRetailWebservice")?Drupal.settings.product_locator_configuration.stockRetailWebservice:null}},{key:"forceActivatingPL",value:function(){Drupal.settings.product_locator_configuration.active=!0}},{key:"isProductExcluded",value:function(){if(Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("excludedDeptCodes")){var e="";return Drupal.settings.hermes_products.data.products&&Drupal.settings.hermes_products.data.products.hasOwnProperty(0)&&Drupal.settings.hermes_products.data.products[0].department_code&&(e=Drupal.settings.hermes_products.data.products[0].department_code),!(-1===Drupal.settings.product_locator_configuration.excludedDeptCodes.split(/[ ,]+/).filter(Boolean).indexOf(e))}return!1}},{key:"isAvailableStockRetail",value:function(e){if(Drupal.settings.hermes_products&&Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.retailPresentability&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock){var t=Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts;for(var r in t)if(r.replace(/\s/g,"")===e.replace(/\s/g,"")&&t[r].has_stock_retail)return!0}return!1}},{key:"isAvailableStockHCom",value:function(e){if(Drupal.settings.hermes_products.stock_status.hComAvailability&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock){var t=Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts;for(var r in t)if(r.replace(/\s/g,"")===e.replace(/\s/g,"")&&t[r].in_stock)return!0}return!1}},{key:"hasRetailStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("retailPresentability")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock}},{key:"hasHcomStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("hComAvailability")&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock}},{key:"hasStockRetailOnly",value:function(t){var r=this,i=0;return t.forEach((function(t){t&&r.isAvailableStockRetail(t)&&!e.isAvailableStockHCom(t)&&i++})),i===t.length&&t.length>0}},{key:"enableSlashedSize",value:function(e){e&&(e.attr("disabled",!1),e.parent("li").find("span.name").addClass("slashed-size"))}},{key:"disableSlashedSize",value:function(e){e&&e.parent("li").find("span.name").removeClass("slashed-size")}},{key:"setStockTypeAttr",value:function(e,t,r,i){if(r&&i&&1!==this.productLocatorVersion())switch(!0){case!e&&!t:r.attr(this.stockTypeKey,this.noStockKey),i.attr(this.stockTypeKey,this.noStockKey);break;case!!e&&!t:r.attr(this.stockTypeKey,this.hComOnlyKey),i.attr(this.stockTypeKey,this.hComOnlyKey);break;case!e&&!!t:r.attr(this.stockTypeKey,this.retailOnlyKey),i.attr(this.stockTypeKey,this.retailOnlyKey);break;case!!e&&!!t:r.attr(this.stockTypeKey,this.hComAndRetailKey),i.attr(this.stockTypeKey,this.hComAndRetailKey)}}},{key:"removeSlashInAllSize",value:function(e){if(e)for(var t=0;t<e.length;t++)this.disableSlashedSize(jQuery(e[t]))}},{key:"hasAnyStock",value:function(e){return this.isAvailableStockHCom(e)||this.isAvailableStockRetail(e)}},{key:"setSelectedSku",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null;t=e||t?e:Drupal.settings.hermes_products.data.default_variant.sku?Drupal.settings.hermes_products.data.default_variant.sku:null,Drupal.settings.hermes_products.data.selected_sku=t}},{key:"productColorId",value:function(e){if(Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes"))for(var t in Drupal.settings.hermes_products.data.products_attributes){var r=Drupal.settings.hermes_products.data.products_attributes;if(e===t&&r[t].hasOwnProperty("field_color_hermes")&&r[t].field_color_hermes.hasOwnProperty("id"))return r[t].field_color_hermes.id}return null}},{key:"isProductLocatorConfigurationInitialized",value:function(){return!!Drupal.settings.product_locator_configuration}},{key:"isConfiguratorIsLoaded",value:function(){return!!Drupal.settings.product_locator_configuration&&!!Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded}},{key:"setConfiguratorIsLoaded",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded=e}},{key:"stringBase64Encode",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"stringBase64Decode",value:function(e){return decodeURIComponent(escape(window.atob(e)))}},{key:"checkIfRetailPresentabilityIsNull",value:function(){return!!Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("stock_status")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasOwnProperty("stockProducts")&&null===Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts}},{key:"formatProductPrice",value:function(t){if(!t||!t.price)return null;var r=t.price;if(t.hasOwnProperty("price_without_currency")&&Drupal.settings.hasOwnProperty("hermes_locale")&&Drupal.settings.hasOwnProperty("currency_parameters")&&e.countryListForcedToInverseCurrency.includes(Drupal.settings.hermes_locale)){var i=Drupal.settings.currency_parameters;r=i.hasOwnProperty("symbol_after")?i.symbol_after:"",r+=i.hasOwnProperty("code_spacer")?i.code_spacer:"",r+=i.hasOwnProperty("code_after")?i.code_after:"",r+=i.hasOwnProperty("symbol_spacer")?i.symbol_spacer:"",r+=t.price_without_currency,r+=i.hasOwnProperty("symbol_spacer")?i.symbol_spacer:"",r+=i.hasOwnProperty("code_before")?i.code_before:"",r+=i.hasOwnProperty("code_spacer")?i.code_spacer:"",r+=i.hasOwnProperty("negative")?i.negative:"",r=(r+=i.hasOwnProperty("symbol_before")?i.symbol_before:"").replace(/  +/g," ")}return r}},{key:"countryListForcedToInverseCurrency",get:function(){return["it_it","fi_en","ie_en","lu_fr","at_de","nl_en"]}},{key:"hComOnlyKey",get:function(){return"hComOnly"}},{key:"retailOnlyKey",get:function(){return"retailOnly"}},{key:"hComAndRetailKey",get:function(){return"hComAndRetail"}},{key:"noStockKey",get:function(){return"noStock"}},{key:"stockTypeKey",get:function(){return"stock-type"}}],null&&st(t.prototype,null),r&&st(t,r),e}();function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}function ht(e,t){return ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ht(e,t)}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=mt(e);if(t){var n=mt(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return ft(this,r)}}function ft(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(e)}function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vt(e,t,r){return t&&yt(e.prototype,t),r&&yt(e,r),e}var bt=function(){function e(){gt(this,e)}return vt(e,null,[{key:"create",value:function(e){var t=null;return e===nt.mapenginetype.GOOGLE&&(t=new _t),e===nt.mapenginetype.BAIDU&&(t=new kt),t}},{key:"findLocationByAddress",value:function(t,r,i,n,a){e.create(t).findLocationByAdress(r,i,n,a)}},{key:"findAddressByLocation",value:function(t,r,i,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.create(t).findAddressByLocation(r,i,n,a)}}]),e}(),_t=function(e){dt(r,e);var t=pt(r);function r(){var e;return gt(this,r),(e=t.call(this)).geocoder=new google.maps.Geocoder,APP.hasOwnProperty("mapSearchResults")||(APP.mapSearchResults={}),e}return vt(r,[{key:"findLocationByAdress",value:function(e,t,r,i){var n={address:e};t&&""!==e&&(n={address:e,componentRestrictions:{country:t}});var a=ot.stringBase64Encode(e+t);t&&APP.hasOwnProperty("mapSearchResults")&&APP.mapSearchResults.hasOwnProperty(a)?r(APP.mapSearchResults[a]):this.geocoder.geocode(n,(function(n,s){var o=!0,c=ut(n,1)[0];if(null!==t&&c){var u=c.address_components&&c.address_components.length>0?c.address_components[0]:null,l=null!==u&&u.short_name?u.short_name:null,d=null!==u&&u.long_name?u.long_name:null,h=c.formatted_address?c.formatted_address:null;null!==l&&t===l&&h===d&&(o=h&&e&&e.toLowerCase().trim()===h.toLowerCase().trim())}if(s===google.maps.GeocoderStatus.OK&&o){var p=c.geometry.location.lat(),f=c.geometry.location.lng();return APP.mapSearchResults[a]={lat:p,lng:f,result:c},void r(APP.mapSearchResults[a])}i(new Error)}))}},{key:"findAddressByLocation",value:function(e,t,r,i){e={lat:parseFloat(e.lat),lng:parseFloat(e.lng)},this.geocoder.geocode({location:e},(function(e,n){if("OK"!==n)r();else{var a;if(i)a=ut(e,1)[0];else{a=(a=e.filter((function(e){return!("locality"!==e.types[0]&&"political"!==e.types[0]&&"country"!==e.types[0]||"locality"!==e.types[1]&&"political"!==e.types[1]&&"country"!==e.types[1])})))[0];var s=e.filter((function(e){return"postal_code"===e.types[0]&&1===e.types.length}));if(s.length&&a){var o=s[0].address_components.filter((function(e){return"postal_code"===e.types[0]}));a&&a.address_components.push(o[0])}}a?t(a):r(new Error)}}))}}]),r}(bt),kt=function(e){dt(r,e);var t=pt(r);function r(){var e;return gt(this,r),(e=t.call(this)).geocoder=new BMap.Geocoder,e}return vt(r,[{key:"findLocationByAdress",value:function(e,t,r,i){this.geocoder.getPoint(e,(function(t){t?r({lat:t.lat,lng:t.lng,result:e}):i(new Error)}))}},{key:"findAddressByLocation",value:function(e,t,r){this.geocoder.getLocation(new BMap.Point(e.lng,e.lat),(function(e){if(e){var i=e.addressComponents;t(i)}else r(new Error)}))}}]),r}(bt),wt=r(6831),Pt=r.n(wt);function At(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"pushEvent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s={event:"uaevent"};e&&(s.eventcategory=e),t&&(s.eventaction=t),r&&(s.eventlabel=r),i&&(s.eventvalue=i),n&&(s.virtualpageuri=n),a&&(s.pagetype=a),dataLayer.push(s)}},{key:"trackReserveInStoreClick",value:function(t,r,i){t&&r&&i&&e.pushEvent("Product_locator","Reserve in store","".concat(i,"_").concat(t),r)}},{key:"trackContinueExperienceClick",value:function(t){t&&e.pushEvent("Eresa","Eresa_confirmation_experience_button",t)}},{key:"getAvailabilityHitLabel",value:function(e){return ot.isAvailableStockHCom(e)&&ot.isAvailableStockRetail(e)?"ecom_store":ot.isAvailableStockHCom(e)?"ecom":ot.isAvailableStockRetail(e)?"store":"unavailable"}},{key:"trackConfirmEreservationClick",value:function(t){t&&e.pushEvent("Eresa","Eresa_confirm_button",t)}},{key:"trackEreservationCreated",value:function(t){if(t){var r="/".concat(Drupal.settings.pathPrefix,"eresa_confirmation");e.pushEvent("Eresa","Eresa_confirmation",t,null,r,"eresa")}}}],null&&At(t.prototype,null),r&&At(t,r),e}();function St(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"getProductType",value:function(e){return e.hasOwnProperty("set_items")?"complex":"simple"}},{key:"mapProducts",value:function(e){var t=[],r=this;return e.map((function(e,i){switch(r.getProductType(e)){case"simple":t[i]=r.mapProductSimpleOrComplex(e,!1);break;case"complex":t[i]=r.mapProductSimpleOrComplex(e,!0)}})),t}},{key:"mapProductSimpleOrComplex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this,i={};return i=r.getCommonAttributes(0,i,e,t),i=t?r.getComplexProduct(i,e):r.getSimpleProduct(i,e),r.getCommonAttributes(1,i,e,t)}},{key:"getCommonAttributes",value:function(e,t,r){switch(e){case 0:r.name&&(t.name=r.name),r.unit_price&&(t.price=parseFloat(r.unit_price).toFixed(2)),t.brand=k.BRAND,r.qty&&(t.quantity=r.qty);break;case 1:t.dimension37=r.stock,t.dimension52=r.dku?"yes":"no",t.in_store_only=String(ot.hasStockRetailOnly([r.sku]))}return t}},{key:"getComplexProduct",value:function(e,t){var r=!(!t.options||!t.options.perso_info);return r?e.id=t.options.container_sku:t.sku&&(e.id=t.sku.replace(/-/g,"|")),t&&t.set_items&&(t.display_single_line?(e.category="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code,"/").concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.variant=t.set_items[0].color||t.set_items[1].color?"".concat(t.set_items[0].color,"|").concat(t.set_items[1].color):"N/V",e.dimension5=""!==t.size?t.size:"N/A",e.dimension6="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code),e.dimension7="".concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.dimension8="".concat(t.set_items[0].product_code,"|").concat(t.set_items[1].product_code),e.dimension9="".concat(t.set_items[0].division_code,"|").concat(t.set_items[1].division_code)):t.options&&t.options.container_type&&t.options.container_type.includes("BELTKIT")?(e.category="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code,"/").concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.variant=t.set_items[0].color||t.set_items[1].color?"".concat(t.set_items[1].color,"|").concat(t.set_items[0].color):"N/A",e.dimension5="".concat(t.set_items[1].size),e.dimension6="".concat(t.set_items[0].department_code,"|").concat(t.set_items[1].department_code),e.dimension7="".concat(t.set_items[0].family_code,"|").concat(t.set_items[1].family_code),e.dimension8="".concat(t.set_items[1].product_code,"|").concat(t.set_items[0].product_code),e.dimension9="".concat(t.set_items[0].division_code,"|").concat(t.set_items[1].division_code)):r?(e.category="".concat(t.departmentCode,"/").concat(t.familyCode),e.variant=t.sku||"N/A",e.dimension5=""!==t.size?t.size:"N/A",e.dimension6=t.departmentCode,e.dimension7=t.familyCode,e.dimension8=t.productCode,e.dimension9=t.divisionCode):(e.category="".concat(t.set_items[0].department_code,"/").concat(t.set_items[0].family_code),e.variant=t.set_items.map((function(e){return e.sku})).join("|"),e.dimension5=t.set_items.length.toString(),e.dimension6=t.set_items[0].department_code,e.dimension7=t.set_items[0].family_code,e.dimension8=t.set_items.map((function(e){return e.product_code})).join("|"),e.dimension9=t.set_items.map((function(e){return e.division_code})).join("|"),e.dimension10=t.set_items.map((function(e){return e.sku})).join("|"))),e}},{key:"getSimpleProduct",value:function(e,t){return t.sku&&(e.id=t.sku),t.department_code&&t.family_code&&(e.category="".concat(t.department_code,"/").concat(t.family_code)),t.color_code?e.variant=t.color_code:t.color?e.variant=t.color:e.variant=k.NONAPP,e.dimension5=t.size?t.size:k.NONAPP,t.department_code&&(e.dimension6=t.department_code),t.family_code&&(e.dimension7=t.family_code),t.product_code&&(e.dimension8=t.product_code),t.division_code&&(e.dimension9=t.division_code),e}}],null&&St(t.prototype,null),r&&St(t,r),e}();function Tt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var xt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"helpLink",value:function(t,r,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=n||jQuery(t.currentTarget).text().trim();e.pushEvent(r,i,a)}},{key:"pushEvent",value:function(e,t,r){dataLayer.push({event:"uaevent",eventcategory:e,eventaction:t,eventlabel:r})}}],null&&Tt(t.prototype,null),r&&Tt(t,r),e}();function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Ot(){var e,t,r,i,n,a,s,o,c,u,l,d,h,p,f,m=0,g=0,y=0,v=_.get("user"),b=[],w="/"+Drupal.settings.hermes_url_locale,P=["color","size"];function A(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=[],h=Drupal.settings.products_grid_analytics,p=Drupal.settings.hermes_products,f="object"===Dt(p)?p.data:void 0,g=Ot.getEnglishOrFrenchUrl(),y=r?"404 error cat | Hermès":document.title;i=Ot.getPageType(),o=Ot.getDeviceType(),l=Ot.getBuildVersion();var b={event:0===m?"pageview":"impressions",pagename:y,pagetype:i,languagecode:_.get("currentLanguage"),countrycode:_.get("currentCountry"),mainstepindicator:c,mainstepname:u,buildVersion:l,devicetype:o,userId:s,clienttype:n,clientgender:a,pageTranslate:g};if(Ot.getUser(v,b),Ot.getUserAgent(b),Ot.getCategories(b,i),t=Ot.isSearchResult(b,i),p&&f)d=Ot.ProductPage(f,b),b.ecommerce={detail:{products:d}};else if(Drupal.settings.hermes_products){var w=Ot.ProductsGrid(t,b,h);if(b.category="ecommerce",b.action="impressions",b.ecommerce={impressions:w},Ot.getProductsAttribute(h,"department_code"))for(var P=0;P<dataLayer.length;P++)if("pageview"===dataLayer[P].event){dataLayer[P].departmentcode=Ot.getProductsAttribute(h,"department_code");break}}else b.pagetype=i;var A=_.get("analytics_payment_dsecure"),C=b.pagetype.includes(k.VALIDATE_3DS_PAGE);A&&C&&(b.d_secure=A),m++,dataLayer.push(b)}function C(){dataLayer.push({event:"uaevent",eventcategory:"Header",eventaction:"TopNavigationHead",eventlabel:"Account",virtualpageuri:w+"/account",pagetype:"account"})}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";dataLayer.push({event:"uaevent",eventcategory:e,eventaction:t||"",eventlabel:r,eventvalue:i})}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";dataLayer.push({event:"uaevent",eventcategory:e,eventaction:t||"",eventlabel:r})}function T(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";dataLayer.push({event:e,eventcategory:t,eventaction:r,eventlabel:i})}function x(e,t,r){var i={step:t.step||0,list:t.list||e.list};r&&delete i.step,e.department_code&&e.family_code?e.category="".concat(e.department_code,"/").concat(e.family_code):e.dimension6&&e.dimension7?e.category="".concat(e.dimension6,"/").concat(e.dimension7):e.category="unknown",dataLayer.push({event:"productClick",ecommerce:{currencyCode:APP.CURRENCY_MAP[_.get("currentStore")].code,click:{products:[e],actionField:i}}})}function D(e){var t=Et.mapProducts(e);Ot.getUser(v,dataLayer),o=Ot.getDeviceType(),l=Ot.getBuildVersion(),c="1",u="cart","mobile"===o||"tablet"===o?d=w+"/mobilecheckout/cart/":"desktop"===o&&(d=w+"/checkout/cart/"),dataLayer.push({event:k.CHECKOUT.toLowerCase(),pagename:"".concat(k.CHECKOUT," | Hermès"),pagetype:"".concat(k.CHECKOUT," cart"),mainstepindicator:c,mainstepname:u,virtualpageuri:d,userId:s,clienttype:n,clientgender:a,devicetype:o,buildVersion:l,languagecode:_.get("currentLanguage"),countrycode:_.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[_.get("currentStore")].code,checkout:{actionField:{step:1,option:"Cart",action:"checkout"},products:t}}})}function O(e){if(e)return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}function j(){S("Account","my_account","my_orders")}function I(e,t){S("Account","my_orders",e,t)}function L(e,t,r){S("Account",e,t,r)}function R(){var e=jQuery(this).parent().siblings().attr("data-order-id");e&&I("status_".concat(e))}function M(e){I("detail_".concat(e.return_type,"_").concat(e.order_id))}function F(e,t,r){switch(Drupal.settings.hermes_products.data.configurator_type){case"LOOK_SET":S(k.LOOKPAGELABEL,e,t);break;case"BIKINI_SET":"configurator-field_ref_size_top"===r.delegateTarget.id&&S(k.PRODUCTDOUBLEPAGELABEL,"".concat(e,"_Top"),t),"configurator-field_ref_size_bot1"===r.delegateTarget.id&&S(k.PRODUCTDOUBLEPAGELABEL,"".concat(e,"_Bottom"),t);break;case"DOUBLE_PRODUCT":S(k.PRODUCTDOUBLEPAGELABEL,e,t);break;default:S(k.PRODUCTSIMPLEPAGELABEL,e,t)}}function N(e){S("Cart","ComplimentaryServices",e.currentTarget.getAttribute("href"))}function Q(e,t){var r=t.id_;switch(e){case"Autoplay":T("nonintuaevent",k.MODULE_VIDEO,e,r);break;case"Progress":T("uaevent",k.MODULE_VIDEO,t.currentPercent,r);break;default:T("uaevent",k.MODULE_VIDEO,e,r)}}function $(e,t){var r,i,n;switch(e){case"geoFilteringBanner.view":r="nonintuaevent",i="View",n=t;break;case"geoFilteringBanner.stayCountry":r="uaevent",i="Click",n="Stay".concat(t);break;case"geoFilteringBanner.switchCountry":r="uaevent",i="Click",n="SwitchCountry";break;case"geoFilteringBanner.close":r="uaevent",i="Click",n="Close";break;default:return}dataLayer.push({event:r,eventcategory:"Geobanner",eventaction:i,eventlabel:n})}function U(e){dataLayer.push({event:"uaevent",eventcategory:"Footer",eventaction:"Prefooter",eventlabel:e})}jQuery("body"),jQuery(document).ready((function(){var e=Ot.getPageType();if(e&&e.includes(k.PRODUCT_PAGE)){var t={stock:!1},r=!1,i=!1;jQuery(document).ajaxComplete((function(e,n,a){var s=-1!==a.url.search("stock");s&&Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&(Drupal.settings.hermes_products.data.belts=n.responseJSON),t.stock=s&&("PERFUME_SET"!==Drupal.settings.hermes_products.data.configurator_type||r)||t.stock,r=s&&"PERFUME_SET"===Drupal.settings.hermes_products.data.configurator_type,jQuery("button").click((function(){jQuery(this).is("[data-bind]")&&(i=!0)})),t.stock&&!i&&0===y&&(y++,jQuery(document).ready(A))}))}!e||e.includes(k.VALIDATE_3DS_PAGE)||e.includes(k.PRODUCT_PAGE)||jQuery(document).ready(A)})),APP.pubsub.subscribe("configurator.change",(function(e,t){t&&A()})),APP.pubsub.subscribe("geoFilteringBanner.view",$),APP.pubsub.subscribe("geoFilteringBanner.stayCountry",$),APP.pubsub.subscribe("geoFilteringBanner.switchCountry",$),APP.pubsub.subscribe("geoFilteringBanner.close",$),APP.pubsub.subscribe("analytics.payment.dsecure",(function(){jQuery(document).ready(A)})),APP.pubsub.subscribe("gtm.basket",(function(e,r){r.basket&&(t=r.basket.items)})),APP.pubsub.subscribe("gtm.openCart",(function(e){e.basket&&e.basket.items&&D(e.basket.items)})),APP.pubsub.subscribe("analytics.grid",(function(e,t){A(e,t)})),APP.pubsub.subscribe("analytics.delivery",(function(e,r){var h=Et.mapProducts(r.items),p=Ot.getEnglishOrFrenchUrl();(t=h)&&(Ot.getUser(v,dataLayer),n=n?"":dataLayer.clienttype,a=a?"":dataLayer.clientgender,i="Checkout delivery",o=Ot.getDeviceType(),l=Ot.getBuildVersion(),u="delivery",c="2","mobile"===o||"tablet"===o?d=w+"/mobilecheckout/multipage/shipping/":"desktop"===o&&(d=w+"/checkout/multipage/shipping/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:i,mainstepindicator:c,mainstepname:u,virtualpageuri:d,userId:s,clienttype:n,clientgender:a,pageTranslate:p,devicetype:o,buildVersion:l,languagecode:_.get("currentLanguage"),countrycode:_.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[_.get("currentStore")].code,checkout:{actionField:{step:2,option:"Delivery",action:"checkout"},products:h}}}))})),APP.pubsub.subscribe("cart.update",(function(e,t){t.basket&&t.basket.shipping_method&&_.set("shipping_method",t.basket.shipping_method)})),APP.pubsub.subscribe("analytics.payment",(function(){if(t){var e=Ot.getEnglishOrFrenchUrl();Ot.getUser(v,dataLayer),o=Ot.getDeviceType(),l=Ot.getBuildVersion(),c="3",u="payment",i="Checkout payment",_.get("shipping_method")&&(p=_.get("shipping_method"));var r=function(){var e=document.getElementById("hermes-checkout-delivery-form");return{date:e.querySelector("select#edit-sagawa-select-a-date"),time:e.querySelector("select#edit-sagawa-select-a-time")}}();f=r.date&&r.time?"none"===r.date.value&&"none"===r.time.value?"no":"yes":"no",_.set("shipping_preference",f),_.get("shipping_choice")?h=_.get("shipping_choice"):(h="Deliver",_.set("shipping_choice",h)),"mobile"===o||"tablet"===o?d=w+"/mobilecheckout/multipage/payment/":"desktop"===o&&(d=w+"/checkout/multipage/payment/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:i,mainstepindicator:c,mainstepname:u,virtualpageuri:d,userId:s,clienttype:n,clientgender:a,pageTranslate:e,shipping_choice:h,shipping_method:p,shipping_preference:f,devicetype:o,buildVersion:l,languagecode:_.get("currentLanguage"),countrycode:_.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[_.get("currentStore")].code,checkout:{actionField:{step:3,option:"Payment",action:"checkout"},products:t}}})}})),APP.pubsub.subscribe("analytics.confirmation",(function(e,t){var r=Et.mapProducts(t.items),m=Ot.getEnglishOrFrenchUrl();r.forEach((function(e){return e.dimension58=t.apple_pay_widget?"yes":"no"})),i=k.CHECKOUT_CONFIRMATION,o=Ot.getDeviceType(),l=Ot.getBuildVersion(),c=4,u="confirmation";var g="NO";t.subscribed&&(g="YES"),"mobile"===o||"tablet"===o?d=w+"/mobilecheckout/multipage/review/":"desktop"===o&&(d=w+"/checkout/multipage/review/"),h=_.get("shipping_choice"),p=_.get("shipping_method"),f=_.get("shipping_preference");var y=Ot.getPaymentMethod(),b={event:"transaction",newsletter_optin:g,pagename:document.title,pagetype:i,mainstepindicator:c,mainstepname:u,virtualpageuri:d,userId:s,clienttype:n,clientgender:a,pageTranslate:m,shipping_choice:h,shipping_method:p,shipping_preference:f,devicetype:o,paymentMethod:y,d_secure:_.get("analytics_payment_dsecure"),buildVersion:l,languagecode:_.get("currentLanguage"),countrycode:_.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[_.get("currentStore")].code,purchase:{actionField:{id:t.increment_id,revenue:t.subtotal,tax:t.tax_amount,shipping:t.shipping_amount},products:r}}};Ot.getUser(v,b),(""===b.clienttype||void 0===b.clientgender&&void 0===b.userId)&&(b.userId=t.customer_id,b.clientgender=t.prefix,b.clienttype=Ot.getUserType(t.user_type)),t.fapiao_invoice&&(b.fapiao_invoice=t.fapiao_invoice),dataLayer.push(b)})),APP.pubsub.subscribe("tray.checkout",(function(){dataLayer.push({event:"virtualpage",virtualpageuri:w+"/checkoutlogin/",pagetype:"Log in"})})),APP.pubsub.subscribe("timeslot.selected",(function(e,t){var r;"object"===Dt(t)&&(r=t.day+" "+t.time),I("PickUp_"+r,"ExchangeReturn")})),APP.pubsub.subscribe("analytics.exchange.submit",(function(){I("SubmitExchangeButton","ExchangeReturn")})),APP.pubsub.subscribe("analytics.exchange.success",(function(){dataLayer.push({event:"virtualpage",virtualpageuri:w+"/exchangereturn/submissionsuccess/",pagetype:"Manage Order"})})),APP.pubsub.subscribe("Pause",Q),APP.pubsub.subscribe("FirstPlay",Q),APP.pubsub.subscribe("NewPlay",Q),APP.pubsub.subscribe("Stop",Q),APP.pubsub.subscribe("Mute",Q),APP.pubsub.subscribe("Fullscreen",Q),APP.pubsub.subscribe("Autoplay",Q),APP.pubsub.subscribe("Progress",Q),APP.pubsub.subscribe("analytics.payment.fapiao",(function(e,t){E("Checkout_Payment","Fapiao_invoice",t)})),APP.pubsub.subscribe("analytics.generate.fapiao",(function(){dataLayer.push({event:"uaevent",eventcategory:"Order_Account",eventaction:"Efapiao"})})),APP.pubsub.subscribe("analytics.accordion.openOrCloseFilter",(function(e,t){var r,i,n=jQuery(t),a=n.attr("data-event-id")?n.attr("data-event-id"):n.text().trim(),s="true"===n.attr("aria-expanded"),o=Ot.getPageType();o&&(o.includes(k.FAQ_PAGE)?(i="Faq_content",r=s?"Open_content":"Close_content"):(r=s?"openFilter":"closeFilter",o.includes(k.PRODUCT_PAGE)?i="SingleProductPage":o.includes(k.PRODUCT_GRID)&&(i="Product_Grid"))),S(i,r,a)})),APP.pubsub.subscribe("analytics.filter.checked",(function(e,t){var r,i=jQuery(t),n=i.parents(".section").find("span:first").text(),a=r=(r=i.attr("id").split("-"))[r.length-1];b.includes(a)?b.includes(a)&&!0===i.prop("checked")&&S("Product_Grid","Filters",n+"_"+a):(S("Product_Grid","Filters",n+"_"+a),b.push(a))})),APP.pubsub.subscribe("analytics.product.locator.button.click",(function(e,t){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Product Locator",eventlabel:t.sku})})),APP.pubsub.subscribe("analytics.oops.error",(function(e,t){dataLayer.push({event:"uaevent",eventcategory:"error message",eventaction:t.path,eventlabel:t.message})})),APP.pubsub.subscribe("analytics.store-locator.pin.click",(function(e,t){dataLayer.push({event:"uaevent",eventcategory:"Store Locator",eventaction:"Map view click marker",eventlabel:t})})),APP.pubsub.subscribe("analytics.size_guide.open",(function(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Size_Guide"})})),APP.pubsub.subscribe("analytics.pushCounter.incremented",(function(e,t){g=t})),APP.pubsub.subscribe("analytics.viewCartFromNotification",(function(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"ViewCartButton"})})),APP.pubsub.subscribe("analytics.closeAddtoCartNotification",(function(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"Close"})})),APP.pubsub.subscribe("analytics.cart-event",(function(e,i){i.basket&&i.basket.items&&function(e){var i,n="empty";void 0!==e?e.length>=1&&(i=r,n="full"):void 0!==t&&t.length>=1&&(i=t,n="full"),i&&i.length&&(dataLayer.push({event:"virtualpage",virtualpageuri:w+"/cart/",pagetype:"cart",cartstatus:n}),D(i))}(r=i.basket.items)})),jQuery("[data-track-logo]").on("click",(function(){S("Header","Logo")})),jQuery("[data-track-menu]").on("click",(function(){S("Header","TopNavigationHead","MenuBurger")})),jQuery("[data-track-account]").on("click",C),jQuery("[data-track-cart]").on("click",(function(){S("Header","TopNavigationHead","ShoppingCart")})),APP.pubsub.subscribe("analytics-open-tray-account",(function(){C()})),APP.pubsub.subscribe("analytics-open-tray-order-list",(function(){j(),R()})),APP.pubsub.subscribe("analytics-open-exchange-return-details",(function(e,t){M(t)})),APP.pubsub.subscribe("analytics-open-exchange-return-request",(function(e,t){!function(e){I("".concat(e.mode,"_").concat(e.order_id),"".concat(w,"/account/").concat(e.mode))}(t)})),APP.pubsub.subscribe("analytics-enable-exchange-return",(function(e,t){!function(e){L(e.mode,"checkbox")}(t)})),APP.pubsub.subscribe("analytics-continue-exchange-return",(function(e,t){!function(e){L(e.mode,"continue")}(t)})),APP.pubsub.subscribe("analytics-order-details-exchange-return",(function(e,t){!function(e){L(e.mode,"order_details","".concat(w,"/account/").concat(e.mode,"/order_details"))}(t)})),APP.pubsub.subscribe("analytics-choice-delivery-exchange-return",(function(e,t){!function(e){L(e.mode,"choice_delivery_".concat(e.delivery_type))}(t)})),APP.pubsub.subscribe("analytics-proceed-exchange-return",(function(e,t){!function(e){L(e.mode,"proceed_".concat(e.id),"".concat(w,"/account/return_order_instuctions"))}(t)})),APP.pubsub.subscribe("analytics-return-print-exchange-return",(function(e,t){!function(e){L(e.mode,"return_print")}(t)})),APP.pubsub.subscribe("analytics-refund-details-exchange-return",(function(e,t){!function(e){L(e.mode,"order_details","".concat(w,"/account/").concat(e.mode,"/").concat(e.mode,"_details"))}(t)})),APP.pubsub.subscribe("analytics-print-invoice",(function(e,t){!function(e){L(e.mode,"invoice_print")}(t)})),jQuery("body").on("click",'[data-track-prefooter="help-faq"] a',(function(){U("FAQs")})),jQuery("body").on("click",'[data-track-prefooter="call-us"] a',(function(){U("Call-us")})),jQuery("body").on("click",'[data-track-prefooter="find-store"] a',(function(){U("Find-store")})),jQuery("body").on("click",'[data-tray-trigger="tray-order-list"]',j),jQuery("body").on("click","button.js-to-order-details",R),jQuery("body").on("click",".js-show-all-orders",(function(){I("more")})),jQuery("body").on("click",".order-track-cta a",R),jQuery("body").on("click",'[data-bind="exchange-return-details"]',M),jQuery("[data-order-id]").on("click",M),jQuery("body").on("click",".search-suggestion > dd ul li",(function(e){var t=jQuery(e.currentTarget).parents(".search-suggestion").find("span").not(".sr-only").toArray().map((function(e,t){return{el:e,id:t}})),r=t.find((function(t){return t.el===e.currentTarget.children[0]}));if(_.set("nav","search"),r){var i=r.id,n=jQuery(".field-search").val(),a=e.currentTarget.innerText.split("\n")[0];S("Search","Search suggest list","".concat(n,":").concat(a),i)}else console.warn("Suggestion link clicked not found!")})),jQuery("[data-track-store]").on("click",(function(){S("Header","FindAStore")})),jQuery('[data-tray-trigger="tray-help"]').on("click",(function(){var e=jQuery(this).parent().parent().parent().parent()[0].className.split("-")[0];"header"===e&&xt.pushEvent("Header","Help"),"footer"===e&&xt.pushEvent("Services","Contact Us","Footer")})),jQuery(".js-locale-tray").on("click",(function(t){e=jQuery(t.currentTarget).closest("ul.header-links").length>0?"header":"footer"})),jQuery("[data-track-language]").on("click","ul li a",(function(t){var r=jQuery(t.currentTarget).attr("href").split("/"),i=t.currentTarget.dataset,n=r.length<2?"".concat(i.trackCountry,"/").concat(i.trackLanguage):"".concat(r[r.length-3],"/").concat(r[r.length-2]);switch(e){case"header":S("Navigation","Country selector",n);break;case"footer":S("Footer",n)}})),jQuery("[data-track-social]").on("click","a, button",(function(e){S("Footer","SocialNetworksIcons",e.currentTarget.querySelector("span").innerHTML)})),jQuery("[data-track-footer]").on("click","ul li a",(function(e){S("Footer",jQuery(e.currentTarget).closest("ul").prev().html(),e.currentTarget.innerHTML.trim())})),jQuery("[data-track-zoom]").on("click","img",(function(){S(k.PRODUCTSIMPLEPAGELABEL,"Zoom")})),jQuery("[data-track-info]").on("click","a",(function(){F("ContactUs",null)})),jQuery("[data-track-banner-buy]").on("click",(function(){S(k.PRODUCTSIMPLEPAGELABEL,"Sticky_Header","Buy")})),jQuery("[data-track-thumbs]").on("click","li button",(function(e){F("Alternative_View",parseInt(e.currentTarget.dataset.index,10)+1)})),jQuery("[data-track-back]").on("click",(function(){Drupal.settings.hermes_products&&Drupal.settings.hermes_products.data&&"LOOK_SET"===Drupal.settings.hermes_products.data.configurator_type?S(k.LOOKPAGELABEL,"Menu_Burger"):S(k.PRODUCTSIMPLEPAGELABEL,"Menu_Burger")})),jQuery("[data-track-configurator]").on("click","label",(function(e){var t=e.currentTarget.querySelector(".name span")||e.currentTarget.querySelector(".name"),r=t.getAttribute("data-event-id")?O(t.getAttribute("data-event-id")):O(t.innerHTML);m=0,function(e){switch(Drupal.settings.hermes_products.data.configurator_type){case"VARIANT_PRODUCT":Drupal.settings.hermes_products.data.default_variant.sku=e.currentTarget.dataset.sku;break;default:break;case"BIKINI_SET":"configurator-field_ref_size_top"===e.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[0]=e.currentTarget.dataset.sku),"configurator-field_ref_size_bot1"===e.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[1]=e.currentTarget.dataset.sku);break;case"LOOK_SET":var t=e.delegateTarget.id.replace(/^\D+/g,"")?e.delegateTarget.id.replace(/^\D+/g,""):"0";Drupal.settings.hermes_products.data.default_variant.sku[t]=e.currentTarget.dataset.sku}}(e);for(var i=0;i<P.length;i++){var n=jQuery(e.currentTarget).closest("fieldset").attr("id");n&&n.indexOf(P[i])>-1&&F(O(P[i])+"_Selector",r,e)}})),jQuery("[data-track-cross-sales]").on("click",".product-grid-list li a",(function(e){var t,r,i,n=jQuery(e.currentTarget).closest("[data-track-cross-sales]").data("track-cross-sales"),a=e.currentTarget.dataset.product,s=Drupal.settings.hermes_cross_sales_products[n].filter((function(e){return e.sku===a}))[0];if(s){var o=s.attributes&&s.attributes.field_color_hermes&&s.attributes.field_color_hermes.name?s.attributes.field_color_hermes.name:k.NONAPP,c=s.real_price?Pt().unformat(s.real_price).toFixed(2):k.NONAPP,u={};u.name=s.name||s.title,u.id=a,u.price=c,u.category=s.department_code+"/"+s.family_code,u.variant=o,u.dimension5=s.ref_size?s.ref_size:k.SIZE_LESS,u.dimension6=s.department_code,u.dimension7=s.family_code,u.dimension8=s.product_code,u.dimension9=s.division_code,u.url=s.url,r=n,i=(t=u).url,delete t.url,dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:r},products:[t]}},eventCallback:function(){document.location=i}})}})),jQuery("[data-track-continue-checkout]").on("click",(function(){S("Cart","ContinueToCheckout")})),jQuery("[data-track-complimentary]").on("click","a",N),jQuery("[data-track-cart-shopping]").on("click","a",(function(){S("Cart","ContinueShopping")})),jQuery("[data-track-cart-services]").on("click",N),jQuery("[data-track-products]").on("click",".product-item > a, .product-history-item > a",(function(e){var t=jQuery(e.currentTarget).closest("[data-track-list]"),r=t.find("[data-product]"),i=e.currentTarget.dataset.product,n=_.get("nav");if(Drupal.settings.hermes_products){"undefined"===n&&(n="direct");var a=jQuery.grep(Drupal.settings.hermes_products,(function(e){return e.sku===i}))[0];a&&(jQuery.extend(a,{list:t.data("track-list"),position:r.index(jQuery('[data-product="'.concat(i,'"]')))+1,name:a.name||a.title,id:i,price:"",category:n}),delete a.title,delete a.sku,delete a.avg_color,delete a.raw_price,delete a.image,delete a.url,x(a,{step:1},!1))}})),jQuery("[data-track-categories]").on("click",".filter-cat-subcat",(function(e){var t=jQuery(e.currentTarget);S("Product_Grid","Collections",t.find("span span").length?t.find("span span").text().trim():t.text().trim())})),jQuery("[data-track-sort]").on("change",(function(e){S("Product_Grid","SortBy",jQuery(e.currentTarget).find("option:selected").text())})),jQuery("body").on("click",".filter-button-clear",(function(){S("Product_Grid","Filters","Clear",null)})),jQuery(".form-item-gift input").on("change",(function(){S("Checkout_Delivery","Gifting","GiftBoxTicked")})),jQuery(".form-item-hide-price input").on("change",(function(){S("Checkout_Delivery","Gifting","PriceLess")})),jQuery('[data-bind="add-message-link"]').on("click",(function(){S("Checkout_Delivery","Gifting","MessageAdded")})),jQuery(".checkout-addresses-choices").on("change",'input[type="radio"]',(function(e){"deliver"===e.currentTarget.value?_.set("shipping_choice","Deliver"):"pickup"===e.currentTarget.value&&_.set("shipping_choice","Collect in store")})),jQuery(".shipping-method-list").on("change",'input[type="radio"]',(function(e){S("Checkout_Delivery","shipping_method",e.currentTarget.value)})),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-date",(function(e){E("Checkout_Delivery","DeliveryPreference",function(e){if("none"===e)return"AnyDate";var t=new Date;return"Day"+(new Date(e).getDate()-t.getDate())}(e.currentTarget.value))})),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-time",(function(e){E("Checkout_Delivery","DeliverySchedule",{none:"All_Day","01":"morning",12:"12pm_2pm",14:"2pm_4pm",16:"4pm_6pm",18:"6pm_8pm",19:"7pm_9pm"}[e.currentTarget.value])})),jQuery("[data-track-editorial-cta]").on("click",(function(){!function(e){dataLayer.push({event:"uaevent",eventcategory:"EditoPage",eventaction:"edito push link",eventlabel:e.innerText})}(this)})),jQuery("[data-track-products-push-merch]").on("click",".product-item > a, .product-history-item > a",(function(e){var t=jQuery(e.currentTarget).closest("[data-track-list]"),r=e.currentTarget.dataset.product,i=Drupal.settings.hermes_merchandising_pushes_products.data;if(i){var n=i.filter((function(e){return e})).find((function(e){return e.sku===r}));if(n){var a={list:"".concat(t.data("track-list"),"_").concat(g)};x({name:n.name||n.title,id:r,price:n.price,brand:k.BRAND,category:"".concat(n.department_code,"/").concat(n.family_code),variant:k.NONAPP,dimension5:k.NONAPP,dimension6:n.department_code,dimension7:n.family_code,dimension8:n.product_code,dimension9:n.division_code},a,!0)}}})),jQuery("[data-track-previous-step]").on("click",(function(){S("Checkout_Payment","Breadcrumb","PreviousStep")})),jQuery("[data-track-payment-method]").on("click",(function(){!function(e){S("Checkout_Payment","PaymentMethod",jQuery(e).hasClass("paypal")?"payWithPayPal":"payWithCard")}(this)})),jQuery("[data-track-category-highlight-position]").on("click",".category-highlight-link",(function(e){var t,r,i,n,a,s;t=jQuery(e.currentTarget),r=jQuery(e.delegateTarget),i=r.attr("data-track-category-highlight-position"),n=t.find(".category-highlight-title").text(),a=jQuery.trim(n),s="Module_CategoryHighlight",Drupal.settings.hermes_master_page&&(s="Module_Masterpage"),dataLayer.push({event:"uaevent",eventcategory:s,eventaction:"".concat(i," | ").concat(a),eventlabel:t.attr("href")})}))}function jt(e,t){t&&t.sku&&(APP.selectedSku=t.sku)}Ot.getGender=function(e){var t;switch(e){case"Ms.":case"Mrs.":case"Mme":case"Mlle":case"Miss":case"女士":case"Sig.na":case"Sig.ra":case"Frau":case"Srta.":case"Sra.":case"F":t="W";break;case"Mr.":case"M.":case"先生":case"Sig.":case"Herr":case"Sr.":case"M":t="M";break;case"Dr":case"Prof":case"Honorable":case"Dr.":t="U";break;default:t=e}return t},Ot.getUserType=function(e){var t;switch(e){case"0":t="newclient";break;case"1":t="buyer";break;default:t=""}return t},Ot.getDeviceType=function(){return window.screen.width<991?"mobile":window.screen.width<1199?"tablet":"desktop"},Ot.getBuildVersion=function(){return k.HOSTNAME.indexOf(window.location.hostname)>-1?"Production version":"Development version"},Ot.getProductsAttribute=function(e,t){var r=null;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];r=n[t]&&!r?n[t]:r}return r},Ot.getPageType=function(){var e={".front":k.FRONT_PAGE,".faq-dispatch":k.FAQ_PAGE,".node-type-faq-theme":k.FAQ_PAGE,".node-type-terms-and-conditions":k.LEGAL_PAGE,".node-type-text-only-page":k.PAGE_404,".section-product-category":k.LISTING_PAGE,".node-type-story":k.STORY_PAGE,".node-type-hermes-product-display":k.PRODUCT_PAGE,".pane-hermes-grid":k.PRODUCT_GRID,".grid-wrapper":k.PRODUCT_GRID,"#store-locator":k.FIND_STORE_PAGE,".successful-order":k.CHECKOUT_CONFIRMATION,".page-validate3ds":k.VALIDATE_3DS_PAGE,".page-account-create":k.ACCOUNT_PROFIL_PAGE,".page-profil":k.ACCOUNT_PROFIL_PAGE},t=Object.keys(e).map((function(t){if(jQuery(t).length>0)return e[t]})).find((function(e){return e}));if(t===k.PRODUCT_PAGE)switch(Drupal.settings.hermes_products.data.configurator_type){case"VARIANT_PRODUCT":t=k.PRODUCT_PAGE_SINGLE;break;case"DOUBLE_PRODUCT":case"BIKINI_SET":t=k.PRODUCT_PAGE_DOUBLE;break;case"LOOK_SET":t=k.PRODUCT_PAGE_LOOK;break;case"PERFUME_SET":t=k.PRODUCT_PAGE_SET}return Drupal.settings.hermes_master_page&&(t=k.MASTER_PAGE),t},Ot.getEnglishOrFrenchUrl=function(){var e,t,r=document.getElementsByTagName("link"),i=_.get("currentLanguage"),n=_.get("currentCountry");if("en"!==i)e=Ot.getUrlEquivalent(e,r,"en-".concat(n));else for(var a=0;a<r.length;a++)"canonical"===r[a].rel&&(e=r[a].href);return e=Ot.getUrlEquivalent(e,r,"en-us"),e=Ot.getUrlEquivalent(e,r,"en-gb"),e=Ot.getUrlEquivalent(e,r,"fr-".concat(n)),void 0===(e=Ot.getUrlEquivalent(e,r,"fr-fr"))&&(e="no english nor french equivalent found"),t=-1!==e.indexOf("hermes.cn")&&-1!==Drupal.settings.baseUrl.indexOf("hermes.com")?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+1:-1!==e.indexOf("hermes.com")&&-1!==Drupal.settings.baseUrl.indexOf("hermes.cn")?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+3:Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+2,e.substr(t)},Ot.getUrlEquivalent=function(e,t,r){if(void 0===e)for(var i=0;i<t.length;i++)t[i].hreflang===r&&(e=t[i].href);return e},Ot.getUserAgent=function(e){var t=window.navigator.userAgent.toLowerCase();/micromessenger/.test(t)&&(e.user_agent=window.navigator.userAgent)},Ot.ProductPage=function(e,t){var r=[],i=Ot.setProductArray(e),n=Ot.setSkuArray(e);if(t.productname=Ot.getProductName(e),t.productsku=Ot.getProductSku(e),t.departmentcode=Ot.getProductDepartmentCode(e),t.productlocator=ot.isProductLocatorActive()&&!ot.isProductExcluded()?"yes":"no",t.in_store_only=String(ot.hasStockRetailOnly(n)),APP.pubsub.subscribe("configurator.change",jt),APP.selectedSku&&e&&e.productsWithStock){var a=e.productsWithStock.find((function(e){return e.sku===APP.selectedSku}));a&&(t.productsku=a.sku)}if(ot.isProductLocatorActive()&&(t.availability_hit=Ct.getAvailabilityHitLabel(t.productsku)),Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&n.length>0){var s={name:"buckle",sku:n[0],brand:k.BRAND,stock:Drupal.settings.hermes_products.data.belts[n[0]].in_stock?"in stock":"out of stock"};i.push(s)}if(i.length>0)for(var o in i)for(var c in n)if(n[c].replace(/\s/g,"")===i[o].sku.replace(/\s/g,"")){var u=i[o],l=Pt().unformat(u.price).toFixed(2),d=Ot.getColor(u),h=u.department_code?u.department_code:p.departmentcode,p={name:u.title,id:u.sku,price:l,brand:k.BRAND,category:"".concat(h,"/").concat(u.family_code),variant:d,dimension5:u.ref_size,dimension6:u.department_code,dimension7:u.family_code,dimension8:u.product_code,dimension9:u.division_code,dimension37:u.stock,in_store_only:String(ot.hasStockRetailOnly([u.sku]))};ot.isProductLocatorActive()&&(p.dimension53=Ct.getAvailabilityHitLabel(u.sku)),r.push(p)}return r},Ot.getProductDepartmentCode=function(e){var t;switch(e.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":case"PERFUME_SET":e&&e.productsWithStock&&e.productsWithStock.length&&(t=e.productsWithStock[0].department_code?e.productsWithStock[0].department_code:"unavailable");break;case"LOOK_SET":case"BIKINI_SET":e&&e.productsWithStock&&e.productsWithStock.length&&e.productsWithStock[0]&&e.productsWithStock[0].length&&(t=e.productsWithStock[0][0].department_code?e.productsWithStock[0][0].department_code:"unavailable");break;default:t="error"}return t},Ot.getProductSku=function(e){var t;switch(e.configurator_type){case"VARIANT_PRODUCT":t=e.targeted_variant.sku;break;case"DOUBLE_PRODUCT":t=e.default_variant.set_sku;break;case"LOOK_SET":case"PERFUME_SET":case"BIKINI_SET":t=e.set.sku;break;default:t=null}return t},Ot.getProductName=function(e){var t;switch(e.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":t=e.targeted_variant.title;break;case"BIKINI_SET":case"PERFUME_SET":case"LOOK_SET":t=e.set.title;break;default:t=null}return t},Ot.setProductArray=function(e){var t=[];if(e.productsWithStock)switch(e.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":t=e.productsWithStock.slice(0);break;case"PERFUME_SET":for(var r=e.set.selection,i=0;i<r.length;i++)for(var n=0;n<e.productsWithStock.length;n++)r[i].sku===e.productsWithStock[n].sku&&t.push(e.productsWithStock[n]);break;case"LOOK_SET":case"BIKINI_SET":for(var a=0;a<e.productsWithStock.length;a++)for(var s=0;s<e.productsWithStock[a].length;s++)t.push(e.productsWithStock[a][s])}return t},Ot.setSkuArray=function(e){var t=Ot.setProductArray(e),r=t&&t[0]?t[0].sku_list:null;APP.selectedSku&&(r=APP.selectedSku);var i=[];switch(e.configurator_type){case"VARIANT_PRODUCT":i.push(e.selected_sku);break;case"DOUBLE_PRODUCT":i=r?r.split(", "):[];break;case"BIKINI_SET":case"LOOK_SET":i=e.default_variant.sku;break;case"PERFUME_SET":for(var n=0;n<t.length;n++)i.push(t[n].sku);break;default:i=[]}return i},Ot.ProductsGrid=function(e,t,r){var i=[];for(var n in t.departmentcode=Ot.getProductsAttribute(r,"department_code"),Drupal.settings.hermes_products)if(Drupal.settings.hermes_products.hasOwnProperty(n)){var a=e?k.SEARCH_RESULTS:k.PRODUCT_GRID,s=Drupal.settings.hermes_products[n],o=Pt().unformat(s.price).toFixed(2),c=s.department_code&&!t.departmentcode?s.department_code:t.departmentcode;i.push({name:s.title,id:s.sku,price:o,brand:k.BRAND,category:"".concat(c,"/").concat(s.family_code),dimension5:s.ref_size,dimension6:s.department_code,dimension7:s.family_code,dimension8:s.product_code,dimension9:s.division_code,position:parseInt(n,10)+1,list:a})}return i},Ot.getUser=function(e,t){if(e){e.customer_id&&(t.userId=e.customer_id);var r=e.gender?e.gender:e.prefix;t.clienttype=Ot.getUserType(e.user_type),t.clientgender=Ot.getGender(r)}else t.clientgender=null,t.clienttype=k.NONCONNECTED},Ot.getMenuLvl=function(e){var t=_.get("nav");if(t){var r=t.split("/");void 0!==r[0]&&(e.menu_lv1=r[0]),void 0!==r[1]?e.menu_lv2=r[1]:e.menu_lv2=null,void 0!==r[2]?e.menu_lv3=r[2]:e.menu_lv3=null}},Ot.isSearchResult=function(e,t){var r=!1;return t!==k.FRONT_PAGE&&t!==k.STORY_PAGE?(window.location.pathname.indexOf("search")>-1&&(r=!0,_.set("nav","direct")),Ot.getMenuLvl(e)):t===k.MASTER_PAGE?(_.get("nav")||_.set("nav","direct"),Ot.getMenuLvl(e)):_.set("nav","direct"),r},Ot.getCategories=function(e,t){t!==k.MASTER_PAGE&&t!==k.STORY_PAGE&&t!==k.FRONT_PAGE||(e.editorialcategory=Drupal.settings.theme&&Drupal.settings.theme.editorial_category?Drupal.settings.theme.editorial_category:k.NONAPP,e.editorialtypology=Drupal.settings.theme&&Drupal.settings.theme.editorial_typology?Drupal.settings.theme.editorial_typology:k.NONAPP,e.editorialitem=Drupal.settings.theme&&Drupal.settings.theme.editorial_item?Drupal.settings.theme.editorial_item:k.NONAPP)},Ot.getColor=function(e){return e.attributes&&e.attributes.field_color_hermes&&e.attributes.field_color_hermes.name?e.attributes.field_color_hermes.name:k.NONAPP},Ot.getPaymentMethod=function(){var e,t=_.get("paymentMethod"),r=_.get("ccType");if(t===k.PAYMENT_METHOD.creditCard||t===k.PAYMENT_METHOD.adyenOneclick)switch(r){case"VI":e="1";break;case"MC":e="2";break;case"AE":e="3";break;case"SM":e="4";break;case"DC":e="5";break;case"DI":e="6";break;case"JCB":e="7";break;case"CUP":e="8";break;case"cartebancaire":case void 0:e="9";break;default:e="unknown"}else e=t===k.PAYMENT_METHOD.paypal?"10":t===k.PAYMENT_METHOD.alipay?"11":t===k.PAYMENT_METHOD.wechat?"12":t===k.PAYMENT_METHOD.hsbcCup?"13":"unknown";return e};var It=Ot;function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mt(e,t,r){return t&&Rt(e.prototype,t),r&&Rt(e,r),e}var Ft=function(){function e(t){Lt(this,e),this.ident="",0===t.value&&(t.value="0"),this.thereIsNoResult=!1,this.name=t.name||"",this.action=t.action||"",this.categ=t.categ||"",this.label=t.label||"",this.value=t.value||""}return Mt(e,[{key:"mergeDatas",value:function(e){0===e.value&&(e.value="0"),this.name=e.name||this.name,this.action=e.thereIsNoResult?"Get directions_0 results":e.action||this.action,this.categ=e.categ||this.categ,this.label=e.label||this.label,this.value=e.value||this.value,this.thereIsNoResult=e.thereIsNoResult||!1}},{key:"flush",value:function(){var e={event:"uaevent"};this.categ&&(e.eventcategory=this.categ),this.action&&(e.eventaction=this.action),this.label&&(e.eventlabel=this.label),this.value&&(e.eventvalue=this.value),window.dataLayer||(window.dataLayer=[]),window.dataLayer.push(e)}}]),e}(),Nt=function(){function e(t){Lt(this,e),this.pagetype=t}return Mt(e,[{key:"flush",value:function(){var e=_.get("user"),t={event:"pageview",pagename:document.title,pagetype:this.pagetype,buildVersion:It.getBuildVersion(),devicetype:It.getDeviceType(),languagecode:_.get("currentLanguage"),countrycode:_.get("currentCountry")};e&&(t.userId=e.customer_id,t.clientgender=It.getGender(e.prefix),t.clienttype=It.getUserType(e.user_type)),window.dataLayer||(window.dataLayer=[])}}]),e}(),Qt=function(){function e(){Lt(this,e)}return Mt(e,null,[{key:"newOneWithDatas",value:function(t){var r=new Ft(t);return e.currentTracker=r,r}},{key:"newOneGeneric",value:function(t){var r=new Nt(t);return e.currentTracker=r,r}},{key:"setDatas",value:function(t){var r=e.currentTracker;return r?r.mergeDatas(t):r=new Ft(t),r}},{key:"flush",value:function(){var t=e.currentTracker;t&&(t.flush(),e.currentTracker=null)}},{key:"categs",get:function(){return{STORE_LOCATOR:"Store Locator",PRODUCT_LOCATOR:"Product Locator"}}}]),e}();function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Ut(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}function Bt(e,t){return Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bt(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=qt(e);if(t){var n=qt(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return zt(this,r)}}function zt(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?Ht(e):t}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wt(e,t,r){return t&&Kt(e.prototype,t),r&&Kt(e,r),e}var Yt=function(){function e(t,r){Gt(this,e)}return Wt(e,null,[{key:"create",value:function(e,t,r,i,n,a){return e===nt.mapenginetype.GOOGLE?new Xt(t,r,i,n,a):new Zt(t,i)}}]),Wt(e,[{key:"getPlace",value:function(){}},{key:"hideAutocomplete",value:function(){}},{key:"checkIfCanRunSearchWithEnterClick",value:function(){}}]),e}(),Xt=function(e){Ut(r,e);var t=Vt(r);function r(e,i,n,a,s){var o;return Gt(this,r),(o=t.call(this,e,n)).keyDown=40,o.keyUp=38,o.keyEscape=27,o.keyEnter=13,o.input=e,o.formId=a,o.inputLabelId=o.input.id+"-label",o.listboxid=o.input.id+"-autocomplete-list",jQuery("label[for=".concat(o.input.id,"]")).attr("id",o.inputLabelId),o.inputHtml=jQuery(o.input),o.options=i,o.type=s,o.service=new google.maps.places.AutocompleteService,o.servicePlaces=new google.maps.places.PlacesService(document.createElement("div")),o.callback="function"==typeof n?n:function(e){o.defaultCallbackAction(e)},o.createAutocompleteListHtml(),o.isActive=!0,o}return Wt(r,[{key:"customAutocomplete",value:function(){var e=this,t=[];this.input.addEventListener("input",(function(){setTimeout((function(){if(e.isActive){var r=e.input.value;if(!r||""===r.trim())return e.closeAllLists(),!1;var i={input:e.input.value};e.options&&(i.componentRestrictions=e.options),e.type&&(i.types=e.type),e.service.getPlacePredictions(i,(function(r,i){t=e.autoCompletePredictions(r,i),e.closeAllLists(),e.currentFocus=-1,e.createAutocompleteHtml(t)}));var n=new Event("change");e.input.dispatchEvent(n)}}),50)})),this.input.addEventListener("keydown",(function(t){if(e.isActive){var r=document.getElementById(e.input.id+"-autocomplete-list");r&&(r=r.getElementsByTagName("li")),t.keyCode===e.keyDown?(e.currentFocus++,e.addActive(r)):t.keyCode===e.keyUp?(e.currentFocus--,e.addActive(r)):t.keyCode===e.keyEnter?r.length>0&&(t.preventDefault(),e.currentFocus>-1&&r&&r[e.currentFocus].click()):t.keyCode===e.keyEscape&&(e.input.value="",e.input.focus(),e.closeAllLists(!0))}})),document.addEventListener("click",(function(t){e.isActive&&e.closeAllLists(t.target)}))}},{key:"createAutocompleteListHtml",value:function(){if(!document.getElementById(this.listboxid)){var e=document.createElement("ul");e.setAttribute("id",this.listboxid),e.setAttribute("class","autocomplete-items"),e.setAttribute("role","listbox"),e.setAttribute("aria-labelledby",this.inputLabelId),e.setAttribute("data-cs-mask",""),e.style.display="none",this.input.parentNode.appendChild(e)}}},{key:"createAutocompleteHtml",value:function(e){var t=this,r=document.getElementById(this.listboxid);r.style.display="block";for(var i=function(i){var n=document.createElement("li");n.setAttribute("id","result-item-"+i),n.setAttribute("role","option"),n.setAttribute("data-cs-mask",""),n.innerHTML='<img src="'+nt.mapengine.map.pins.store.data+'">',n.innerHTML+=e[i].innerHTML,n.innerHTML+='<input type="hidden" value="'+e[i].innerText+'">',n.addEventListener("click",(function(){t.callback(e[i].innerText,e[i].placeId),t.clickAutoCompleteAnalytics(e[i],e.length),t.closeAllLists()})),r.appendChild(n)},n=0;n<e.length;n++)i(n);this.setAriaAttribute("custom-autocomplete","aria-expanded","true"),APP.pubsub.publish("search.suggestions_list.state",!0)}},{key:"clickAutoCompleteAnalytics",value:function(e,t){"store-locator"===this.formId&&(this.analyticsCateg=this.getAnalyticsCateg(),Qt.newOneWithDatas({categ:this.analyticsCateg,action:"Click Search Autocomplete",label:e.innerText,value:t}),Qt.flush())}},{key:"getAnalyticsCateg",value:function(){return Qt.categs.STORE_LOCATOR}},{key:"autoCompletePredictions",value:function(e,t){var r=this,i=[];return t===google.maps.places.PlacesServiceStatus.OK&&e.forEach((function(e){var t=r.suggestionHtmlCreator(e);t&&i.push(t)})),i}},{key:"suggestionHtmlCreator",value:function(e){var t=null;if(e.structured_formatting){t=document.createElement("span");var r=this.createHtmlFromSuggestionElement(e.structured_formatting.main_text,e.structured_formatting.main_text_matched_substrings,"main-text"," ");r&&t.appendChild(r);var i=e.terms[e.terms.length-1].value;this.chinaWhitelist(i)&&(e.structured_formatting.secondary_text=this.concatWithChina(i,e.structured_formatting.secondary_text));var n=this.createHtmlFromSuggestionElement(e.structured_formatting.secondary_text,e.structured_formatting.secondary_text_matched_substrings,"secondary-text");n&&t.appendChild(n),t.placeId=e.place_id}return t}},{key:"chinaWhitelist",value:function(e){return["Hong Kong","Hongkong","香港","Macau","Macau","澳门","Taiwan","Taïwan","台湾"].includes(e)}},{key:"concatWithChina",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="China",i=Drupal.settings.hermes_locale.split("_")[1];return"fr"===i?r="Chine":"zh"===i&&(r="中国"),"".concat(t,", ").concat(r)}},{key:"createHtmlFromSuggestionElement",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=null;if(e){var a=t&&t.length>0?t[0].length:0;(n=document.createElement("span")).setAttribute("class",r),n.innerHTML="<strong>"+e.substr(0,a)+"</strong>"+e.substr(a)+i}return n}},{key:"addActive",value:function(e){if(!e)return!1;this.removeActive(e),this.currentFocus>=e.length&&(this.currentFocus=0),this.currentFocus<0&&(this.currentFocus=e.length-1),e[this.currentFocus].classList.add("autocomplete-active"),this.setAriaAttribute(e[this.currentFocus].id,"aria-selected",!0),this.setAriaAttribute(this.input.id,"aria-activedescendant",e[this.currentFocus].id)}},{key:"removeActive",value:function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active"),e[t].removeAttribute("aria-selected")}},{key:"closeAllLists",value:function(e){for(var t=document.getElementsByClassName("autocomplete-items"),r=0;r<t.length;r++)t[r].innerHTML="",t[r].style.display="none";this.setAriaAttribute("custom-autocomplete","aria-expanded","false"),this.inputHtml.removeAttr("aria-activedescendant")}},{key:"setAriaAttribute",value:function(e,t,r){var i=document.getElementById(e);i&&i.setAttribute(t,r)}},{key:"getAddressComponentsByPlaceId",value:function(e){var t=this;return new Promise((function(r,i){var n={placeId:e,fields:["address_component"]};t.servicePlaces.getDetails(n,(function(e,t){t===google.maps.places.PlacesServiceStatus.OK?r(e.address_components):i()}))}))}},{key:"checkIfCanRunSearchWithEnterClick",value:function(){var e=!0,t=document.getElementById("searchfield-autocomplete-list");if(t)for(var r=0;r<t.childNodes.length;r++)if(t.childNodes[r].classList.contains("autocomplete-active")){e=!1;break}return e}},{key:"setOptions",value:function(e){this.options=e}},{key:"setType",value:function(e){this.type=e}},{key:"setActive",value:function(e){this.isActive=e;var t=this.inputHtml.parent().attr("role");"combobox"!==t||e||(this.inputHtml.unwrap(),this.inputHtml.removeAttr("aria-autocomplete").removeAttr("aria-controls").removeAttr("aria-activedescendant"),document.getElementById(this.listboxid).remove()),"combobox"!==t&&e&&(this.inputHtml.wrap('<div id="custom-autocomplete" role="combobox" aria-expanded="false" aria-owns="'.concat(this.listboxid,'" aria-haspopup="listbox" ></div>')),this.inputHtml.attr("aria-autocomplete","list"),this.inputHtml.attr("aria-controls",this.listboxid),this.createAutocompleteListHtml())}},{key:"defaultCallbackAction",value:function(e){this.input.value=e}}]),r}(Yt),Zt=function(e){Ut(r,e);var t=Vt(r);function r(e,i){var n;Gt(this,r);var a=Ht(n=t.call(this,e,i));return a.place=null,a.autocomplete=new BMap.Autocomplete({input:e}),a.autocomplete.addEventListener("onconfirm",(function(e){var t=e.item.value;a.place=t.province+t.city+t.district+t.street+t.business,i()})),n}return Wt(r,[{key:"getPlace",value:function(e,t){(new kt).findLocationByAdress(this.place,null,(function(e){t(e)}),(function(){t(null)}))}},{key:"hideAutocomplete",value:function(){this.autocomplete.hide()}}]),r}(Yt);function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tr=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"street1";Jt(this,e),this.isAutoCompleteActive=P.isAutocompleteAddressActive(),this.autocompleteField=P.getAutocompleteField(),this.allowedAutocompleteCountries=P.allowedAutocompleteCountries(),this.autocompleteField&&(r=this.autocompleteField),this.formId=t,this.searchInput=jQuery(this.formId+" [name="+r+"]"),this.countrySelector=this.formId+' [name="country_id"]',this.autoCompleteApiLoaded=!1,this.autocompleteType=P.getAutocompleteType()}var t,r;return t=e,(r=[{key:"init",value:function(){this.isAutoCompleteActive&&this.loadGoogleApi(nt.google.map.URL,"initPlacesAutocomplete"),this.fieldMapping=this.getFieldsMapping(Drupal.settings.hermes_current_country),this.events()}},{key:"loadGoogleApi",value:function(e,t){var r=this;window.google?this[t]():jQuery.getScript(e,(function(){r[t]()}))}},{key:"initPlacesAutocomplete",value:function(){var e=this;this.autoCompleteApiLoaded=!0,this.autoComplete=Yt.create(nt.currentMapEngine(),this.searchInput[0],{country:[Drupal.settings.hermes_current_country]},(function(t,r){e.autoComplete.getAddressComponentsByPlaceId(r).then((function(t){e.fillInAddress(t)}))}),[this.autocompleteType]),this.autoComplete.customAutocomplete(),this.searchInput[0].parentNode.style.position="relative"}},{key:"fillInAddress",value:function(e){this.clearAddressFields();for(var t=0;t<e.length;t++){var r=e[t].types[0];if(this.fieldMapping[r]){var i=e[t][this.fieldMapping[r].apiValueType],n=e[t][this.fieldMapping[r].apiValueTypeAlternate];this.fillField(this.fieldMapping[r],i,n)}}}},{key:"fillField",value:function(e,t,r){var i=e.type,n=e.fieldName,a=e.mappingValues;switch(i){case"input":""!==jQuery(this.formId+" [name="+n+"]").val()?jQuery(this.formId+" [name="+n+"]").val((function(e,r){return r+" "+t})):jQuery(this.formId+" [name="+n+"]").val(t);break;case"select":this.fillSelectField(n,t,r,a)}jQuery(this.formId+" [name="+n+"]").trigger("change")}},{key:"fillSelectField",value:function(e,t,r,i){var n=jQuery(this.formId+" [name="+e+"]");i?n.val(i[t]):n.val(t);var a=jQuery(this.formId+" [name="+e+"] option:selected");n.next().text(a.text())}},{key:"clearAddressFields",value:function(){for(var e in this.fieldMapping)this.fieldMapping.hasOwnProperty(e)&&jQuery(this.formId+" [name="+this.fieldMapping[e].fieldName+"]").val("")}},{key:"getFieldsMapping",value:function(e){var t={},r={street_number:{type:"input",fieldName:"street1",apiValueType:"short_name"},route:{type:"input",fieldName:"street1",apiValueType:"long_name"},postal_code:{type:"input",fieldName:"postcode",apiValueType:"short_name"}},i={administrative_area_level_1:{type:"select",fieldName:"region",apiValueType:"short_name",apiValueTypeAlternate:"long_name",mappingValues:!1}},n={mappingValues:P.getGoogleRegionMapping(e)};return-1!==["br"].indexOf(e)&&(r.street_number.fieldName="street_number"),-1!==["fr","be","cz","es","ie","fi","lu","nl","no","at","pt","ch","se","us","ca","au","dk","my","sg","nz","br","tw"].indexOf(e)&&(t=r),-1!==["my"].indexOf(e)&&Object.assign(i.administrative_area_level_1,n),-1!==["us","ca","au","my","nz","br"].indexOf(e)&&(t=Object.assign(r,i)),-1!==["us","ca","au","fr","be","es","ie","fi","lu","nl","at","pt","ch","cz","dk","my","sg","nz"].indexOf(e)&&(t=Object.assign(r,{locality:{type:"input",fieldName:"city",apiValueType:"long_name"},sublocality_level_1:{type:"input",fieldName:"city",apiValueType:"long_name"}})),-1!==["br"].indexOf(e)&&(t=Object.assign(r,{administrative_area_level_2:{type:"input",fieldName:"city",apiValueType:"long_name"}})),-1!==["no","se","ie"].indexOf(e)&&(t=Object.assign(r,{postal_town:{type:"input",fieldName:"city",apiValueType:"long_name"}})),-1!==["cz"].indexOf(e)&&(t=Object.assign(r,{neighborhood:{type:"input",fieldName:"city",apiValueType:"long_name"}})),-1!==["br"].indexOf(e)&&(t=Object.assign(r,{locality:{type:"input",fieldName:"district",apiValueType:"long_name"},sublocality_level_1:{type:"input",fieldName:"district",apiValueType:"long_name"}})),t}},{key:"changeAutoCompleteCountryRestriction",value:function(){!0===this.autoCompleteApiLoaded&&(this.clearAddressFields(),this.allowedAutocompleteCountries.includes(jQuery(this.countrySelector).val())?(this.autoComplete||this.initPlacesAutocomplete(),this.autoComplete.setActive(!0),this.autoComplete.setOptions({country:jQuery(this.countrySelector).val()}),this.autoComplete.setType([this.autocompleteType]),this.fieldMapping=this.getFieldsMapping(jQuery(this.countrySelector).val().toLowerCase())):this.autoComplete.setActive(!1))}},{key:"events",value:function(){jQuery(document).on("change",this.countrySelector,this.changeAutoCompleteCountryRestriction.bind(this))}}])&&er(t.prototype,r),e}(),rr=tr,ir=function(e,t){this.initForm=function(){this.$formSubmitButton.prop("disabled",!0).addClass("disabled-input")},this.changePipaCheckbox=function(r){var i=r.data.submitButton,n=!0;t.find(".pipa-checkbox").each((function(){e(this).prop("checked")||(n=!1)})),n?i.prop("disabled",!1).removeClass("disabled-input"):i.prop("disabled",!0).addClass("disabled-input"),t.find(".pipa-all-checkbox").prop("checked",n)},this.init=function(){this.$formSubmitButton=t.find('button.button.form-submit[type="submit"]'),this.changeAllPipaCheckbox=function(r){var i=r.target;t.find(".pipa-checkbox").prop("checked",e(i).prop("checked")).trigger("change")},this.initForm(),t.find(".pipa-checkbox").on("change",{submitButton:this.$formSubmitButton},this.changePipaCheckbox),t.find(".pipa-all-checkbox").on("change",this.changeAllPipaCheckbox)}};function nr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ar="#hermes-account-create-profile-form-captcha",sr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formID="#hermes-account-create-profile-form";var t="#hermes-account-checkout-email-form";if(this._isInitialised=!1,this.$el=jQuery("#tray-create-profile"),this.$trayTitle=jQuery("#tray-create-profile .button-tray"),this.form=this.$el.find("form"),this._emailCheckInput=jQuery("#account-checkout-email"),this._loginPasswordField=jQuery("#account-checkout-password"),this._emailCheckCreate=jQuery("#create-profile-email"),this._passwordCreateProfileField=jQuery("#create-profile-create-password"),this._phoneCodeCheckInput=this.$el.find("input[name=registredphonecode]"),this._phoneNumberCheckInput=this.$el.find("input[name=registredloginphone]"),this._createButton=jQuery("#create-profile-continue"),this._emailHolderNodes=jQuery('[data-bind="accountEmail"]'),this._wechatSocialLogin=this.$el.find(".wechat-social-login"),this._phoneHolderNodes=jQuery('[data-bind="accountPhone"]'),this.returnToEmailInput=jQuery('[data-bind="returnToEmailInput"]'),this._accountCreationForm=jQuery(this.formID),this._loginTitle=this.$el.find(".title-login"),this._requiredInformationTray=this.$el.find(".title-tray-hidden-account"),this._createAccountTitle=this.$el.find(".title-create"),this._secondaryForm=jQuery(t),this._showPassword=this._secondaryForm.find(".show-password"),this._emailCollectionFieldset=this.$el.find(".email_collection"),this._emailRegisteredFieldset=this.$el.find(".email_registered"),this._emailNotRegisteredFieldset=this.$el.find(".email_not_registered"),this.$countrySelect=this.$el.find('[name="country_id"]'),this.$formHelpers=new oe,jQuery(".pipa-checkbox").length>0&&new ir(jQuery,this._accountCreationForm).init(),P.needSmsProvider()&&(this.smsHelpers=new De,this.smsHelpers.init("#tray-create-profile"),this.smsHelpers.init(t)),P.isWechatInApp()?(this.wechatSocialHelpers=new Te,this.wechatSocialHelpers.init(t)):this._wechatSocialLogin.hide(),this.chineseAreas=new qe,this.stateDistrictFields=new ze,new Je({form:this.formID,secondaryForm:t,page:"create",idPrefix:"edit-create-profile-",namePrefix:"create_profile_"}),this.validator=new _e({inputs:this._secondaryForm.find("[name]")}),this.tray=new B({$el:this.$el,name:"tray-create-profile",showOverlay:!0}),new rr(this.formID).init(),"mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country){var r=jQuery("#tray-create-profile");P.setLatinCharOnly(r)}if("sa"===Drupal.settings.hermes_current_country||"ae"===Drupal.settings.hermes_current_country){var i=jQuery("#tray-create-profile");P.setLatinCharOnlyForUaeSa(i)}jQuery('select[musthide="yes"]').parents(".form-item").hide(),this.bind();var n=document.getElementById("strength-level-tray-create-profile"),a=document.getElementById("strength-level-tray-create-profile-span"),s=document.getElementById("create-profile-create-password");P.pwdStrengthScreenReader(n,a,s).observe(n,{attributes:!0})}var t,r;return t=e,r=[{key:"bind",value:function(){var e=this;this._accountCreationForm.on("submit",this._onSubmitAccountCreationForm.bind(this)),this._secondaryForm.on("submit",this._onSubmitAccountLoginForm.bind(this)),this._showPassword.on("click",this.$formHelpers.showPasswordMask.bind(this)),this._createButton.on("keypress click",this._onCreateButtonClick.bind(this)),this.returnToEmailInput.on("click",this.prepareTray.bind(this)),this._emailCheckCreate.on("blur",this.$formHelpers.checkEmailInput.bind(this)).on("blur",this.propagateEmailValue.bind(this)).on("keypress",this.$formHelpers.reCheckErrorEmailInput.bind(this)),jQuery(this._loginPasswordField,this._emailCheckCreate).on("keyup change",(function(){e._loginPasswordField.removeClass("error"),e._emailCheckCreate.removeClass("error")})),this._emailCheckInput.on("blur",this.$formHelpers.checkEmailInput.bind(this)).on("blur",this.propagateEmailValue.bind(this)).on("keypress",this.$formHelpers.reCheckErrorEmailInput.bind(this)),jQuery(this._loginPasswordField,this._emailCheckInput).on("keyup change",(function(){e._loginPasswordField.removeClass("error"),e._emailCheckInput.removeClass("error")})),P.needSmsProvider()&&(this._phoneNumberCheckInput.on("blur",this.$formHelpers.checkPhoneInput.bind(this)).on("blur",this.propagatePhoneValue.bind(this)),this._phoneCodeCheckInput.on("blur",this.$formHelpers.checkPhoneInput.bind(this)),this._secondaryForm.find(".edit-send-sms-button").on("click",this.smsHelpers.sendSmsCode).bind(this)),this.$countrySelect.on("change",this.manageDistricts.bind(this)),APP.pubsub.subscribe("tray.create-account.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.create-account.prepare",this.prepareTray.bind(this)),APP.pubsub.subscribe("imNotARobotProfileTray",this.validator.removeErrorMessageInPageTitle.bind(this.validator,ar)),APP.pubsub.subscribe("imNotARobotProfileTrayExpired",P.throwErrorReCaptcha.bind(this,jQuery(ar))),APP.pubsub.subscribe("imNotARobotProfileTrayExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,ar))}},{key:"manageDistricts",value:function(e){e.preventDefault(),this.stateDistrictFields.getDistricts(this.$countrySelect.val()),P.isChina()&&this.chineseAreas.checkChineseForm(this._accountCreationForm),P.needStateDistrictFields(this.$countrySelect.val())&&this.stateDistrictFields.checkForm(this._accountCreationForm)}},{key:"updateDom",value:function(e){var t=this;if(e.error)te();else{_.set("availableCountries",e.available_countries);var r={formId:this.formID};ue(k.ACTIVATE_CAPTCHA_URL,r,"GET").done((function(e){e.error?te():(P.generateReCaptcha(e,t.formID),J())})).fail((function(){return te()})),this._accountCreationForm.find("select").trigger("change")}}},{key:"propagateEmailValue",value:function(){this._emailHolderNodes.html(this._emailCheckInput.val())}},{key:"propagatePhoneValue",value:function(){this._phoneHolderNodes.html(this._phoneCodeCheckInput.val()+this._phoneNumberCheckInput.val())}},{key:"performLogin",value:function(){var e={locale:Drupal.settings.hermes_locale};ue("/login",e).done(this._loginDone.bind(this)).fail(this._loginError.bind(this))}},{key:"_onCreateButtonClick",value:function(e){e.preventDefault(),e.stopPropagation(),P.isChina()&&this.chineseAreas.initChineseSelect(null,null,this.form),P.needStateDistrictFields(this.form.find('[name*="country_id"]').val())&&this.stateDistrictFields.initSelect(null,null,this.form),this._emailCollectionFieldset.addClass("hidden"),this._emailRegisteredFieldset.addClass("hidden"),this._emailNotRegisteredFieldset.removeClass("hidden"),this._accountCreationForm.removeClass("hidden"),this._loginTitle.addClass("hidden"),this._requiredInformationTray.removeClass("hidden"),this._createAccountTitle.removeClass("hidden"),this.$el.attr("aria-labelledBy","title-tray-create-profile-create"),this.updateDisabledFields("create"),jQuery(".tray-close").focus(),jQuery(".validation-error").removeClass("validation-error"),jQuery(".error-message").removeClass("error-message"),jQuery(".error-create_profile_email").remove(),jQuery(".error-loginphone").find("span").empty(),jQuery(".error-message-copy").remove();var t="".concat(Drupal.settings.pathPrefix,"checkout_create_account");Ye.pushEvent("Checkout_CreateAccount","CreateAccountOverlay",null,t,"account")}},{key:"_onSubmitAccountCreationForm",value:function(e){e.preventDefault(),e.stopPropagation(),_.set("registerContext","checkout")}},{key:"_onSubmitAccountLoginForm",value:function(e){e.preventDefault(),e.stopPropagation();var t="checkout",r=""!==this._loginPasswordField.val(),i=!1,n=!1;if(P.needPhoneLogin()?(n=1===this._phoneNumberCheckInput.length&&this._phoneNumberCheckInput.val(),i=!0):(i=1===this._emailCheckInput.length&&this._emailCheckInput.val(),n=!0),r&&i&&n)if(z(),P.needPhoneLogin()){var a={locale:Drupal.settings.hermes_locale,phonecode:this._phoneCodeCheckInput.val(),phonenumber:this._phoneNumberCheckInput.val(),pass:this._loginPasswordField.val()};APP.pubsub.publish("account.login.call",{serverReqData:a,$loginForm:this._secondaryForm,$phoneCodeField:this._phoneCodeCheckInput,$phoneNumberField:this._phoneNumberCheckInput,$passwordField:this._loginPasswordField,source:t})}else{var s={locale:Drupal.settings.hermes_locale,email:this._emailCheckInput.val(),pass:this._loginPasswordField.val()};APP.pubsub.publish("account.login.call",{serverReqData:s,$loginForm:this._secondaryForm,$emailField:this._emailCheckInput,$passwordField:this._loginPasswordField,source:t})}else this.validator.runTests(e),this.updateErrorFormMessageTitle(this.$el)}},{key:"fail",value:function(){te()}},{key:"toggleTray",value:function(e,t){this.$errorMessage&&(this.$errorMessage.remove(),this.$errorMessage=!1),this.tray.isOpen?this.tray.close():t&&t.source!==k.CHECKOUT.toLowerCase()?this.prepareTray():(this.tray.open(),this.displayInlineMessage(t.errorMessage))}},{key:"_initialiseTray",value:function(){this._isInitialised=!0,this.passStrengthMeter(),this.getAvailableCountries()}},{key:"prepareTray",value:function(){this._isInitialised||this._initialiseTray(),this.$formHelpers.clearForm(this._accountCreationForm),this.$formHelpers.clearForm(this._secondaryForm),this._emailCollectionFieldset.removeClass("hidden"),this._emailRegisteredFieldset.addClass("hidden"),this._emailNotRegisteredFieldset.addClass("hidden"),this._accountCreationForm.addClass("hidden"),this._createAccountTitle.addClass("hidden"),this._loginTitle.removeClass("hidden"),this._requiredInformationTray.addClass("hidden"),this.$trayTitle.attr("aria-describedBy","title-tray-create-profile-login"),this.$el.attr("aria-labelledBy","title-tray-create-profile-login"),this.updateDisabledFields("collection"),"mo"!==Drupal.settings.hermes_current_country&&"hk"!==Drupal.settings.hermes_current_country||""!==jQuery("#hermes-account-create-profile-form").find('input[name="city"]').val()||jQuery("#hermes-account-create-profile-form").find('input[name="city"]').val({mo:"Macau",hk:"Hong Kong"}[Drupal.settings.hermes_current_country])}},{key:"getAvailableCountries",value:function(){ue("/available-countries",{},"GET").done(this.updateDom.bind(this)).fail(this.fail)}},{key:"passStrengthMeter",value:function(){jQuery("#create-profile-create-password").pwdMeter({minLength:8})}},{key:"displayInlineMessage",value:function(e){this.$errorMessage=this.$el.find(".error-message, .error-message-copy"),this.$errorMessage.remove(),this._secondaryForm.before('\n      <p class="error-message-copy">\n        <svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n          <use xlink:href="#exclamation-mark"></use>\n        </svg>\n        <span class="sr-only">'.concat(Drupal.settings.hermes_translations.validation.error_on_input_icon,"</span>\n        ").concat(e,"\n      </p>\n    "))}},{key:"updateErrorFormMessageTitle",value:function(e){var t=jQuery("head title"),r=Drupal.settings.hermes_translations.validation.errorOnForm,i=t.text().replace(r,"");e.find(".validation-error:visible").length?(t.html(r+i),e.addClass("error-on-form")):(t.html(i),e.removeClass("error-on-form"))}},{key:"updateDisabledFields",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"collection";"collection"===e&&(this._emailCheckInput.prop("disabled",!1),this._loginPasswordField.prop("disabled",!1),this._emailCheckCreate.prop("disabled",!0),this._passwordCreateProfileField.prop("disabled",!0)),"create"===e&&(this._emailCheckInput.prop("disabled",!0),this._loginPasswordField.prop("disabled",!0),this._emailCheckCreate.prop("disabled",!1),this._passwordCreateProfileField.prop("disabled",!1))}}],r&&nr(t.prototype,r),e}();function or(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var cr='select[name="district_bis_id"]',ur='select[name="cityselect"]',lr="option:not(:first)",dr=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),APP.pubsub.subscribe("app.start",(function(){P.hasConditionalCityDistrictFields(Drupal.settings.hermes_current_country)&&void 0===_.get(t.getAreasStorageNameVariable())&&ue(k.ADDRESS_DISTRICTS_URL,{country:Drupal.settings.hermes_current_country.toLowerCase(),locale:""},"GET").done((function(e){t.updateDistrictsData(e)})).fail((function(){t.fail()}))}))}var t,r;return t=e,r=[{key:"fail",value:function(){te(),_.deleteItem(this.getAreasStorageNameVariable())}},{key:"updateDistrictsData",value:function(e){_.set("required_area",e.required_for),_.set(this.getAreasStorageNameVariable(),e.districts)}},{key:"initCityAndDistrictField",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(P.hasConditionalCityDistrictFields(Drupal.settings.hermes_current_country))if(void 0!==_.get(this.getAreasStorageNameVariable())){var n=e.find(ur),a=_.get(this.getAreasStorageNameVariable())||[],s=Object.keys(a);n.children(lr).remove(),s.forEach((function(e){var t=new Option(e,a[e][0].city_id);t.setAttribute("data-cs-mask",""),n.append(t)})),r&&jQuery(ur+" option:contains("+r+")").attr("selected","selected").change(),r&&i&&this.updateDistrictField(e,r,i),this.bind(e)}else ue(k.ADDRESS_DISTRICTS_URL,{country:Drupal.settings.hermes_current_country.toLowerCase(),locale:""},"GET").done((function(n){t.updateDistrictsData(n),t.initCityAndDistrictField(e,r,i)})).fail((function(){t.fail()}))}},{key:"bind",value:function(e){var t=this,r=e.find(ur),i=e.find(cr);r.on("change",(function(r){if(void 0!==r.originalEvent){var i=e.find(ur+" option:selected").text();t.updateDistrictField(e,i)}})),i.on("focus",(function(e){void 0===e.originalEvent||r.val()||(e.stopPropagation(),i.prop("disabled",!0))}))}},{key:"updateDistrictField",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.find(cr),n=_.get(this.getAreasStorageNameVariable())||[],a=n[t]||[];i.children(lr).remove(),a.forEach((function(e){var t=new Option(e.name,e.district_bis_id);t.setAttribute("data-cs-mask",""),i.append(t)})),r?jQuery('select[name="district_bis_id"] option:contains('+r+")").attr("selected","selected").change():this.selectDefaultDistrict(e),i.prop("disabled",!1)}},{key:"selectDefaultDistrict",value:function(e){var t=e.find(cr);t&&(t.prop("selectedIndex",0),jQuery(t).next()[0].innerText=Drupal.settings.hermes_translations.ui.formLabel.select)}},{key:"getAreasStorageNameVariable",value:function(){var e=Drupal.settings.hermes_current_country,t=e.toUpperCase().charAt(0)+e.toLowerCase().slice(1);return"areas".concat(t)}}],r&&or(t.prototype,r),e}(),hr="smallleathergoods",pr="beltkits",fr=[hr,pr];function mr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=r&&r.store_code?r.store_code:_.get("currentStore"),n=jQuery.extend(!0,{},APP.CURRENCY_MAP[i]);return r&&"plold_en"===r.store_code&&(n.symbol="€"),void 0===n.precision&&void 0!==t&&(n.precision=t),"string"==typeof e&&e.includes(n.symbol)?e:Pt().formatMoney(e,n)}function gr(e,t){"plold_en"===e.store_code&&(t.symbol="€")}function yr(e){if(e&&e.items&&e.items.length)for(var t=0;t<e.items.length;t++){var r=e.items[t],i=r.excluded_material?Drupal.settings.hermes_translations.ui.cart.excludedMaterial[r.excluded_material]:"",n=r.sku.replace(/\s/g,"");(n.indexOf("/")>=0||n.indexOf("|")>=0)&&(n=n.replace(/(\/|\|)/g,"\\$1")),jQuery("#".concat(n)+" .cart-product-excluded-material").html(i);var a=r.excluded_material?Drupal.settings.hermes_translations.ui.cart.accessibility.warning:"";jQuery("#cart-product-excluded-material-warning").html(a)}}var vr=function(){var e=new qe,t=new ze,r=new dr,i=jQuery("select#edit-district-bis-id").children("option:selected").text();this.init=function(){var e=jQuery(".form-item-country-id");if(this.$el=jQuery("#tray-edit-address"),this.$form=this.$el.find("form"),this.tray=new B({$el:this.$el,name:"tray-edit-address",showOverlay:!0}),this.$form.get(0)&&(this.validator=new _e({inputs:this.$form.get(0).querySelectorAll("[name]")})),this.formHelpers=new oe,(new we).init({form:this.$form[0]}),e.show(),jQuery('select[musthide="yes"]').parents(".form-item").hide(),new rr("#".concat(this.$form.attr("id"))).init(),"mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country){var t=jQuery("#tray-edit-address");P.setLatinCharOnly(t),e.hide()}if("sa"===Drupal.settings.hermes_current_country||"ae"===Drupal.settings.hermes_current_country){var r=jQuery("#tray-edit-address");P.setLatinCharOnlyForUaeSa(r)}P.isTaiwan()&&jQuery("#edit-country-id option").not('[value="TW"]').remove(),this.bind()},this.bind=function(){var e=this;APP.pubsub.subscribe("tray.editAddress.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.editAddress.state",this.setTrayState.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.clearForm.bind(this)),APP.pubsub.subscribe("profile.set.address",this.setCurrentAddress.bind(this)),this.$el.find(".js-create-address").on("click",this.handleNewAddress.bind(this)),this.$el.find(".js-update-address").on("click",this.updateAddress.bind(this)),this.$el.find(".js-remove-address").on("click",this.removeAddress.bind(this)),this.$el.find('[name="country_id"]').on("change",this.manageDistricts.bind(this)),jQuery(document).on("click",".js-address-undo",this.undoRemoveAddress.bind(this)).on("click",".js-notification-close",this.finishRemoveAddress.bind(this)).on("change",'[id^="edit-region--"]',this.updateRegionText.bind(this)),this.$form.find("select, input").on("blur",(function(){e.$form.focus()}))},this.manageDistricts=function(r){r.preventDefault(),t.getDistricts(r.target.value),P.isChina()&&e.checkChineseForm(this.$form),P.needStateDistrictFields(r.target.value)&&t.checkForm(this.$form)},this.updateRegionText=function(e){var t=e.target.value;t&&jQuery('[id^="edit-regiontext"]').each((function(){this.value=t}))},this.toggleTray=function(e,t){if(this.currentAddress=t[0]||t,this.addressType=t.currentTarget&&t.currentTarget.dataset&&t.currentTarget.dataset.type,!this.tray.isOpen){Drupal.settings.hermes_global.lockListsAddress=!0,this.tray.$el[0].className="tray-content",this.tray.open();var r=jQuery.extend({},this.currentAddress);delete r.name,this.formHelpers.populateForm(r,this.$el),this.validator.resetErrors(this.$form)}},this.closeTray=function(){this.tray.isOpen&&this.tray.back()},this.setTrayState=function(i,n){this.tray.$el.addClass("tray-".concat(n));var a=jQuery("#tray-edit-address .button-tray"),s=jQuery("#title-tray-edit-address-add"),o=jQuery("#title-tray-edit-address-modify");if("address-new"===n){this.tray.$el.find("#address-edit-button").insertAfter("#address-create-button"),a.attr("aria-describedBy",s),s.show(),o.hide();var c=jQuery(".tray-".concat(n));this.formHelpers.clearForm(c);var u=_.get("user");if(u.is_light_account&&this.$el.find('.form-item [name="telephone"]').val(u.telephone),"jp"!==_.get("currentCountry")){var l=c.find('select[name="prefix"]');if(l.find("option").length>0){var d=l.find("option")[0].text;l.parent().find(".label").html(d)}c.find('[name="country_id"]').trigger("change")}if(P.isPreventEditingReturnRegionInCountriesActive()){var h='.form-item [name="region"]',p=APP.trayController.getTray({name:"tray-request-return"}).wrapper._state.data.api.order.shipping_address;this.$el.find(h).find("option").filter((function(e,t){return jQuery(t).val()===p.region})).prop("selected",!0),this.$el.find(h).parent().find(".label").text(p.region_label),this.$el.find(h).prop("disabled",!0)}this.validator.resetErrors()}else this.tray.$el.find("#address-create-button").insertAfter("#address-edit-button"),a.attr("aria-describedBy",o),s.hide(),o.show(),this.validator.runTests();if(e.populateChineseSelect(this.$form),t.populateSelect(this.$form),null!=this.currentAddress&&r.initCityAndDistrictField(this.$form,this.currentAddress.city,this.currentAddress.district),("mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country)&&""===jQuery("#hermes-account-address-book-form").find('input[name="city"]').val()){var f={mo:"Macau",hk:"Hong Kong"};jQuery("#edit-city").val(f[Drupal.settings.hermes_current_country]),jQuery("#hermes-account-address-book-form").find('input[name="city"]').val(f[Drupal.settings.hermes_current_country])}},this.renderAddressList=function(e,t){APP.pubsub.publish("profile.update.address",{response:e,source:t}),this.clearForm(),this.closeTray(),!0===_.get("delivery_step")&&jQuery(".js-delivery-mode #web2shop-address").trigger("click");var r=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"update:profile.update.address",trayData:{response:e,source:t}}});window.parent.dispatchEvent(r)},this.updateBillingAddress=function(e){var t=e.addresses.find((function(e){return e.is_default_billing}));APP.pubsub.publish("profile.update.billingAddress",t)},this.handleNewAddress=function(e){var t=this.$el.find("[name]"),r={};e.preventDefault(),t.each((function(){r[this.name]=this.value})),r.is_default_billing="true"===r.is_default_billing,r.is_default_shipping="true"===r.is_default_shipping;var i=this.$form.find(".validation-error").length>0;this.$form[0].checkValidity()&&!i?this.createAddress(r):this.validator.runTests(e)},this.createAddress=function(e){var t=document.querySelector("#edit-street1"),r=this.validator.testField(t);if(!document.querySelector(".address-form.hidden")&&r.length)return t.focus(),void this.validator.scrollToError();var n=Drupal.settings.currentPath===Drupal.settings.hermes_translations.url.checkout?"/delivery/address/add":"/address/add";i=jQuery("select#edit-district-bis-id").children("option:selected").text();var a=jQuery("select#edit-cityselect").children("option:selected").text();P.assignValues(e,i,a),H("loader-button-create-address"),e.locale=_.get("currentStore"),e.postcode=se(e.country_id,e.postcode),ue(n,e).done(this.createDone.bind(this)).fail((function(){q("loader-button-create-address"),te()}))},this.createDone=function(e){q("loader-button-create-address"),e.error?this.handleError(e.error):("billing"===this.addressType?APP.addresses=e.shipping_addresses:APP.addresses=e.address,e.shipping_addresses&&e.shipping_addresses[0]&&_.set("shippingAddressId",e.shipping_addresses[0].address_id),APP.pubsub.publish("tray.update.user.info",e),APP.pubsub.publish("cart.update",e),Y({message:Drupal.settings.hermes_translations.notification.editAddressSuccess,callback:function(){var e=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"close"}});window.parent.dispatchEvent(e)}}),this.$form.find(".error-message").remove(),this.renderAddressList(e,"create"))},this.updateAddress=function(e){var t=jQuery(".tray-trigger-origin").attr("data-address");0!==t&&jQuery(".address-list").attr("tray-trigger-origin-data",t);var r=this.$el.find("[name]"),i={};e.preventDefault();for(var n=0;n<r.length;n++)i[r[n].name]=r[n].value;i.address_id=this.currentAddress.address_id,i.locale=_.get("currentStore");var a=this.$form.find(".validation-error").length>0,s=document.querySelector("#edit-street1"),o=document.querySelector(".address-form.hidden"),c=this.validator.testField(s);!o&&c.length&&(a=!0),this.$form[0].checkValidity()&&!a?this.sendUpdateAddress(i,!0):this.validator.runTests(e)},this.sendUpdateAddress=function(e,t){var r=this;this.tempNotification=t,t&&H("loader-button-update-address");var n=jQuery("#is_default_shipping").val(),a=!!n&&JSON.parse(n);jQuery.extend(e,{is_default_shipping:a}),e.postcode=se(e.country_id,e.postcode),i=jQuery("select#edit-district-bis-id").children("option:selected").text();var s=jQuery("select#edit-cityselect").children("option:selected").text();P.assignValues(e,i,s),ue("/address/edit",e).done(this.updateDone.bind(this)).fail((function(){r.tray.close(),q("loader-button-update-address"),te()}))},this.updateDone=function(e){this.tray.close(),J(),q("loader-button-update-address"),e.error?this.handleError(e.error):(e.shipping_addresses=e.addresses,APP.pubsub.publish("tray.update.user.info",e),this.tempNotification&&Y({message:Drupal.settings.hermes_translations.notification.editAddressSuccess}),this.$form.find(".error-message").remove(),this.renderAddressList(e,"update"),this.updateBillingAddress(e)),yr(e.basket)},this.removeAddress=function(e){var t=this;e.preventDefault(),H("loader-button-remove-address");var r={locale:_.get("currentStore"),address_id:this.currentAddress.address_id,is_default_billing:this.currentAddress.is_default_billing};ue("/address/delete",r).done(this.removeDone.bind(this)).fail((function(){t.tray.close(),q("loader-button-remove-address"),te()}))},this.removeDone=function(e){var t={message:Drupal.settings.hermes_translations.notification.removeAddressSuccess,messageVariables:Drupal.settings.hermes_translations.notification.removeAddressSuccess.variables};this.tray.close(),q("loader-button-remove-address"),e.error?this.handleError(e.error):(this.$form.find(".error-message").remove(),Y(t),this.renderAddressList(e,"remove"))},this.undoRemoveAddress=function(e){e.preventDefault(),this.createAddress(this.currentAddress)},this.finishRemoveAddress=function(e){e.preventDefault(),J()},this.handleError=function(e){if(e&&e.internal_code){var t=e.internal_code;if(t===k.ERRORCODE.inactivity)return void APP.pubsub.publish("account.httpsession.expired");J(),this.tray.open();var r=t?Drupal.settings.hermes_translations.inline_notification.address[t]:Drupal.settings.hermes_translations.inline_notification.address.genericError;this.formHelpers.displayError(r.text,this.$form)}else te()},this.setCurrentAddress=function(e,t){if(t&&t.hasOwnProperty("address_id")&&t.hasOwnProperty("notification")){var r=APP.addresses.find((function(e){return e.address_id===t.address_id}));this.sendUpdateAddress(r,t.notification)}},this.clearForm=function(){this.formHelpers.clearForm(this.$el),this.$form.find(".error-message").remove()},this.init()};jQuery.fn.pwdCriteria=function(e){return e=jQuery.extend({minLength:10,minUpper:1,minLower:1,minDigit:1,minSpecial:1},e),this.each((function(){var t=jQuery("#account-password-notice");this.validator=new _e({inputs:jQuery(this)}),jQuery(this).keyup((function(){var r,i,n,a=jQuery(".pwdCriteria"),s=jQuery(this).val();void 0!==jQuery(this).find("div.error-password")&&s.length>0&&(this.validator.removeError(this),t.show()),Object.keys(e).forEach((function(t){switch(t){case"minLength":i="min-char",n="^(?!.*(\\s)).{#,}$";break;case"minUpper":i="upper-char",n="^(?=.*[A-Z]).{#,}$";break;case"minLower":i="lower-char",n="^(?=.*[a-z]).{#,}$";break;case"minDigit":i="digit-char",n="^(?=.*[0-9]).{#,}$";break;case"minSpecial":i="special-char",n="^(?=.*(\\W)).{#,}$"}r=a.find('[data-criteria="'+i+'"]'),new RegExp(n.replace("#",e[t]),"g").test(s)?(r.addClass("criteria-valid"),r.removeClass("criteria-invalid")):(r.addClass("criteria-invalid"),r.removeClass("criteria-valid"))}))})),jQuery(this).focus((function(){jQuery(this).val()&&""!==jQuery(this).val()||void 0!==jQuery(this).attr("aria-describedby")||(jQuery(this).attr("aria-invalid",!0),jQuery(this).attr("aria-describedby","account-password-notice"),t.html(t.html()+'<span class="sr-only">'+this.validator.getAriaPwdCriterias(jQuery(this))+"</span>"))}))}))};var br=function(){this.init=function(){this.$el=jQuery("#tray-edit-password"),this.$notification=jQuery(".notification"),this.form=this.$el[0].querySelector("form"),this.formHelpers=new oe,this.validator=new _e({inputs:this.form.querySelectorAll("[name]")}),this.tray=new B({$el:this.$el,name:"tray-edit-password",showOverlay:!0}),this.bind()};var e=document.getElementById("strength-level-tray-edit-password");if(e){jQuery("#edit-new-password").pwdMeter({minLength:8});var t=document.getElementById("strength-level-tray-edit-password-span"),r=document.getElementById("edit-new-password");P.pwdStrengthScreenReader(e,t,r).observe(e,{attributes:!0})}else jQuery("#edit-new-password").pwdCriteria();function i(e){var t;if(e.success)this.formHelpers.clearForm(this.$el.find("form")),t=Drupal.settings.hermes_translations.notification.account.changedPasswordSuccess;else{var r=e.error&&e.error.internal_code;switch(r){case k.ERRORCODE.wrongEmailPassword:t=Drupal.settings.hermes_translations.notification.account.loginCodes[r],Drupal.settings.hermes_translations.notification.account.loginCodes[r].variables;break;case k.ERRORCODE.oldPasswordIncorrect:t=Drupal.settings.hermes_translations.notification.account.passwordCases[r],Drupal.settings.hermes_translations.notification.account.passwordCases[r].variables;break;default:te()}}t&&(window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:t.title,messageDescription:t.description,messageRemovedPaymentCardsDescription:void 0!==t.removedPaymentCardsDescription?t.removedPaymentCardsDescription:""},x("tray-edit-password","change-password")),q("loader-forgot-password-tray")}function n(){te(),q("loader-forgot-password-tray")}this.bind=function(){this.$el.unbind(),this.$el.on("click",".show-password",this.formHelpers.showPasswordMask.bind(this)),this.$el.on("submit",this.saveEditPassword.bind(this)),this.$el.on("click",".js-try-again",this.notificationTryAgain.bind(this)),APP.pubsub.subscribe("reset-password",this.resetPassword.bind(this))},this.saveEditPassword=function(e){if(e.preventDefault(),H("loader-forgot-password-tray"),this.form.checkValidity()){var t=jQuery(this.form).serializeObject();ue("/change-password",t).done(i.bind(this)).fail(n)}else this.validator.runTests(e),q("loader-forgot-password-tray")},this.notificationTryAgain=function(e){e.preventDefault(),this.$el.find(".tray-notification-message").addClass("hidden"),this.$el.find(".continue-experience").addClass("hidden"),this.$el.find(".tray-content-container").show(),this.tray.back()},this.resetPassword=function(){jQuery("#edit-old-password, #edit-new-password").val(""),jQuery(".pwdMeter").removeClass("weak medium strong")},this.init()},_r=function(){var e=new qe,t=new ze,r=new dr;this.init=function(){if(this.$el=jQuery("#tray-edit-profile"),this.$form=this.$el.find("form"),this.$wechatBinding=this.$el.find("#wechat_bind"),this.$notification=jQuery(".notification"),this.tray=new B({$el:this.$el,name:"tray-edit-profile",showOverlay:!0}),this.$form.get(0)&&(this.validator=new _e({inputs:this.$form.get(0).querySelectorAll("[name]")})),this.$formHelpers=new oe,new rr("#".concat(this.$form.attr("id"))).init(),P.isChina()&&P.isWechatInApp()&&(this.wechatSocialHelpers=new Te),"mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country){var e=jQuery("#tray-edit-profile");P.setLatinCharOnly(e)}if("sa"===Drupal.settings.hermes_current_country||"ae"===Drupal.settings.hermes_current_country){var t=jQuery("#tray-edit-profile");P.setLatinCharOnlyForUaeSa(t)}this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.editProfile.toggle",this.toggleTray.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.$wechatBinding.find(".is_linked").on("click",this.unlinkWechatAccount.bind(this)),this.$wechatBinding.find(".is_not_linked").on("click",this.linkWechatAccount.bind(this)),this.$notification.on("click",".js-customer-profile",this.toggleTray.bind(this)),this.$notification.on("click",".js-customer-edit-tray",this.toggleTray.bind(this)),this.$notification.on("click",".js-customer-service",this.openHelpTray.bind(this)),P.isChina()&&this.$el.find(".form-item-newsletter input").on("click",(function(){var e=jQuery("#tray-edit-profile");e.find(".form-item-newsletter input").prop("checked")?e.find(".form-item-email input").prop("required","required"):e.find(".form-item-email input").prop("required",!1)}))},this.toggleWechatLink=function(){!0===_.get("user").is_binded_wechat?(this.$wechatBinding.find(".is_not_linked").hide(),this.$wechatBinding.find(".is_linked").show()):P.isWechatInApp()?(this.$wechatBinding.find(".is_linked").hide(),this.$wechatBinding.find(".is_not_linked").show()):this.$wechatBinding.hide()},this._onTrayOpen=function(){this.validator.resetErrors(this.$form),Drupal.settings.hermes_global.lockListsAddress=!0;var i=_.get("user"),n=_.get("newsletterStatus");if(this.$formHelpers.populateForm(i,this.$el),e.populateChineseSelect(this.$form),t.populateSelect(this.$form,i),r.initCityAndDistrictField(this.$form,i.city,i.district),i.phone_login){var a=i.phone_code,s=i.phone_number,o=jQuery(this.$form).find('[name="phonecode"]'),c=jQuery(this.$form).find('[name="loginphone"]');o.val(a),o.attr("disabled",!0),o.attr("style","background-color:#F8F8F8"),c.val(s),c.attr("disabled",!0),c.attr("style","background-color:#F8F8F8"),this.toggleWechatLink()}if(i.district){var u=jQuery(this.$form).find('[name="district"]');"text"===u.attr("type")&&u.val(i.district)}if(n&&this.$el.find(".form-item-newsletter input").prop("checked",!0),i.social_security_number){var l=jQuery(this.$form).find('[name="social_security_number"]');if(l.val(this.$formHelpers.showFormatedCpf(i.social_security_number)),i.social_security_number.length>11){var d=jQuery(this.$form).find('[name="company"]');l.attr("data-mask","00.000.000/0000-00"),l.attr("disabled",!0),l.attr("style","background-color:#F8F8F8"),l.attr("pattern",""),l.attr("maxlength",""),l.prev("label").html("CNPJ"),d.attr("disabled",!0),d.attr("style","background-color:#F8F8F8")}}i.communication_consent&&jQuery(this.$form).find('[name="communication_consent"]').prop("checked",!0),"mo"!==Drupal.settings.hermes_current_country&&"hk"!==Drupal.settings.hermes_current_country||this.validator.runTests()},this.openHelpTray=function(){APP.trayController.getTray({name:"tray-help"}).open()},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.unlinkWechatAccount=function(){ue("/wechat/unlink",{},"GET").done(this.unbindSuccessWechat.bind(this)).fail(this.errorHandling)},this.linkWechatAccount=function(){this.wechatSocialHelpers.setSpecificRedirectUrl("profil").connectWithWechat()},this.unbindSuccessWechat=function(e){var t=_.get("user");t.is_binded_wechat=e.is_binded_wechat,_.set("user",t),!1===e.is_binded_wechat&&(jQuery("#profile-content").html(C().render(APP.templates.userProfileAsia,t)),Y({message:window.Drupal.settings.hermes_translations.notification.account.unlinkWechat,messageVariables:window.Drupal.settings.hermes_translations.notification.account.unlinkWechat.variables}),this.toggleWechatLink())},this.errorHandling=function(e){if(e&&e.error){var t=e.error.internal_code,r=Drupal.settings.hermes_translations.notification.order[t];r?Y({message:r,messageVariables:r.variables,type:"critical"}):te()}else te()},this.init()};function kr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var wr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"pushEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;dataLayer.push({event:"uaevent",eventcategory:"Email-Us",eventaction:e,eventlabel:t})}}],null&&kr(t.prototype,null),r&&kr(t,r),e}(),Pr=function(){var e,t,r,i,n,a,s,o,c,u,l,d,h,p="#hermes-account-email-us-form",f="#hermes-account-email-us-form-captcha",m=null;function g(c){if(c.preventDefault(),this.validator.runTests(c),H("loader-email-us-tray"),l.val())return Y({message:window.Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError,messageVariables:window.Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError.variables}),void q("loader-email-us-tray");if(!P.validateRecaptcha(this.form[0].id)){var d=jQuery(f);d.addClass("validation-error"),this.validator.showErrorMessageInPageTitle(d),q("loader-email-us-tray")}if(this.form[0].checkValidity()&&P.validateRecaptcha(this.form[0].id)){var g=function(c){var u={subject:h.val(),message:e.val(),firstname:t.val(),lastname:i.val(),firstname2:r.val(),lastname2:n.val(),sender_email:a.val(),telephone:s.val(),region:o.children(":selected").val(),recaptchaResponse:c.form.find("textarea[name=g-recaptcha-response]").val(),confirm_password:l.val(),formId:p};return window.APP.currentSetSKU&&window.APP.updatedProductSKU?u.sku=window.APP.updatedProductSKU:window.APP.currentSKU?u.sku=window.APP.currentSKU:u.sku="",u}(this);u.removeClass("validation-error"),wr.pushEvent("Send",this.eventLabel),ue("/contact/email",g).then(y.bind(this),v)}else e.val()||m.throwError({input:e[0],error:window.Drupal.settings.hermes_translations.validation.emailUsInvalidMessage}),"-1"===jQuery("#edit-subject-list option:selected").val()&&(h.addClass("validation-error"),m.throwError({input:h[0],error:window.Drupal.settings.hermes_translations.validation.emailUsSubjectList})),q("loader-email-us-tray")}function y(e){d.find(".content-tray-email").addClass("hidden"),e.error?x("tray-email","contact-us"):(x("tray-email","contact-us","success"),h.children("option:first").attr("selected","selected").change()),q("loader-email-us-tray")}function v(){d.find(".content-tray-email").addClass("hidden"),x("tray-email","contact-us"),q("loader-email-us-tray")}this.init=function(){d=jQuery("#tray-email"),this.form=jQuery("#hermes-account-email-us-form"),e=this.form.find("textarea[name=message_text]"),t=this.form.find("input[name=firstname]"),r=this.form.find("input[name=firstname2]"),i=this.form.find("input[name=lastname]"),n=this.form.find("input[name=lastname2]"),a=this.form.find("input[name=email]"),o=this.form.find("select[name=region]"),c=this.form.find("input[name=prefecture]"),u=this.form.find(".g-recaptcha.hermes-account-email-us-form"),l=this.form.find("input[name=confirm_password]"),h=this.form.find("#edit-subject-list"),s=this.form.find("input[name=telephone]"),o.attr("type","hidden"),this.tray=new B({$el:d,name:"tray-email",showOverlay:!0}),this.validator=new _e({inputs:this.form.find("[data-encrypted-name], [name]")}),this.bind()},this.bind=function(){var e=this;this.tray.addEventListener("open",this._onTrayOpen.bind(this)),document.getElementById("edit-subject-list").addEventListener("change",(function(t){e.eventLabel=t.currentTarget.value,wr.pushEvent("Subject Select",e.eventLabel)})),this.form.on("submit",g.bind(this)),APP.pubsub.subscribe("imNotARobotEmail",this.validator.removeErrorMessageInPageTitle.bind(this.validator,f)),APP.pubsub.subscribe("imNotARobotEmailExpired",P.throwErrorReCaptcha.bind(this,jQuery(f))),APP.pubsub.subscribe("imNotARobotEmailExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,f))},this.setParams=function(e){if(e.contactUsPreselectedReason){var t=e.contactUsPreselectedReason,r=jQuery("#tray-email").find('select[name="subject_list"]');jQuery(r).val(t),jQuery(r).trigger("change")}},this._onTrayOpen=function(){d.find(".content-tray-email").removeClass("hidden"),q("loader-email-us-tray"),void 0!==APP.recaptcha&&void 0!==APP.recaptcha["hermes-account-email-us-form"]&&window.grecaptcha.reset(),this.form.find("input[type=radio][name=subject_list]").removeAttr("checked"),e.val("");var u={formId:p};ue(k.ACTIVATE_CAPTCHA_URL,u,"GET").done((function(e){if(e.error)te();else{P.generateReCaptcha(e,p);var u=_.get("user"),d={firstname:t,firstname2:r,lastname:i,lastname2:n,email:a,telephone:s,prefecture:c,confirm_password:l};if(u?Object.entries(d).forEach((function(e){var t=e[0];e[1].val(u[t])})):Object.values(d).forEach((function(e){return e.val("")})),o.children("option").removeAttr("selected"),u&&u.region&&o.children('option:contains("'.concat(u.region,'")')).attr("selected","selected").change(),"JP"!==_.get("currentCountry").toUpperCase()){var h=jQuery(".form-item-region");h.length>0&&h.hide()}J()}})).fail((function(){return te()})),m=new _e({inputs:this.form.find("[data-encrypted-name], [name]")})},this.init()};function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var Cr=function(){function e(e){var t=null;return e.attributes&&e.attributes.field_color_hermes&&e.attributes.field_color_hermes.attr_display&&(t=e.attributes.field_color_hermes.attr_display),t}function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display",r=null;return e.ref_size&&"SANS_TAILLE"!==e.ref_size&&e.attributes&&e.attributes.field_ref_size&&e.attributes.field_ref_size.attr_display&&(r="field"===t?e.attributes.field_ref_size.id:e.attributes.field_ref_size.attr_display),r}function r(e){var t,r=null;return null!==(t=e&&e.thumbs&&e.thumbs.length>0?e.thumbs[0]:e&&e.images&&e.images.length>0?e.images[0]:null)&&t.isImage&&1===t.isImage&&t.uri&&(r=t.uri+"-100-100_n.jpg"),r}function i(){var i={},n=Drupal.settings.hasOwnProperty("hermes_products")&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")?2===ot.productLocatorVersion()&&Drupal.settings.hermes_products.data.hasOwnProperty("all_products")?Drupal.settings.hermes_products.data.all_products:Drupal.settings.hermes_products.data.products:null;return n&&(i=function(i){var n,a={},s=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(i);try{for(s.s();!(n=s.n()).done;){var o=n.value;if(o.sku&&o.sku===(ot.getSelectedSku()||APP.currentSKU)){a.currentSku=o.sku,a.media=r(o),a.title=o.display_name?o.display_name:null,a.size=t(o),a.sizeId=t(o,"field"),a.color=e(o),a.price=ot.formatProductPrice(o);break}}}catch(e){s.e(e)}finally{s.f()}return a}(n)),i}function n(){var e=jQuery("#tray-product-locator").height()-jQuery("#product-tray-header-area").outerHeight();jQuery("#product-locator-content-wrapper-scrollbar").height(e)}this.init=function(){this.$el=jQuery("#tray-product-locator"),this.$globalTray=jQuery("#tray"),this.$productLocatorInfos=this.$el.find("#tray-product-locator-content"),this.$productLocatorSearch=this.$el.find("#product-locator-search"),this.tray=new B({$el:this.$el,name:"tray-product-locator",showOverlay:!0}),this.bind(),this.render()},this.bind=function(){APP.pubsub.subscribe("tray.product.locator.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("product.locator.configurator.before.change",this.productLocatorConfiguratorBefore.bind(this)),APP.pubsub.subscribe("product.locator.configurator.after.change",this.productLocatorConfiguratorAfter.bind(this)),this.$el.on("click",".tray-close",this.handlePanel.bind(this))},this.productLocatorConfiguratorBefore=function(){ot.forceClearList(),ot.enableDisablePLButton(!0);var e=document.getElementById("product-locator-configurator");e&&(e.style.display="none")},this.productLocatorConfiguratorAfter=function(){var e=document.querySelectorAll('input[name="product-locator-field_ref_size"]'),t=document.getElementById("display-product-locator-configurator"),r=0;e.length>0&&([].forEach.call(e,(function(e){e.hasAttribute("disabled")&&"disabled"===e.getAttribute("disabled")&&r++})),t&&r===e.length&&(t.classList.add("disabled"),t.setAttribute("disabled","disabled"))),ot.enableDisablePLButton(!1);var i=ot.getSelectedSku();if(i){var n=new CustomEvent("refresh-angular-product-from-product-locator",{detail:{sku:i}});document.dispatchEvent(n)}},this.render=function(){var e=i();if(e&&e.currentSku){var t=C().render(APP.templates.trayProductLocator,e);this.$productLocatorInfos.html(t),function(e){var t=document.getElementById("product-locator-"+e.sizeId);t&&(t.checked=!0);var r=document.getElementById("display-product-locator-configurator");r&&!r.classList.contains("disabled")&&r.addEventListener("click",(function(){var e=document.getElementById("product-locator-configurator");!e||"none"!==e.style.display&&""!==e.style.display?(e.style.display="none",r.setAttribute("aria-expanded","false")):(e.style.display="block",r.setAttribute("aria-expanded","true"))}),!1)}(e),n(),jQuery(window).on("resize",n)}},this.toggleTray=function(e,t){this.tray.isOpen||(this.tray.open(),jQuery("#tray-product-locator store-product-locator-display-map #map").children().length>0&&(this.$globalTray.addClass("large-tray"),t.mapActive||this.$globalTray.addClass("map-hidden")),this.render())},this.handlePanel=function(){APP.pubsub.publish("zoom.out")},this.init()};function Sr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Er=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"openTraySignupSignin",value:function(){APP.trayController.triggerTray({name:"tray-ereservation-signup-signin",dontAdd:!0}),APP.pubsub.publish("tray.ereservation.signupsignin.open",null)}},{key:"openTrayRequestValidation",value:function(){APP.trayController.triggerTray({name:"tray-ereservation-request-validation",dontAdd:!0}),APP.pubsub.publish("tray.ereservation.request.validation.open")}},{key:"openTrayRequestConfirm",value:function(){APP.trayController.triggerTray({name:"tray-ereservation-request-confirm"}),APP.pubsub.publish("tray.ereservation-request-confirm.render")}},{key:"saveEreservationData",value:function(t){Drupal.settings.hasOwnProperty("hermes_ereservation")||(Drupal.settings.hermes_ereservation={}),t&&(t.store&&(t.store.street1=e.removeEndingComma(t.store.street1),t.store.street2=e.removeEndingComma(t.store.street2),t.store.street3=e.removeEndingComma(t.store.street3)),Drupal.settings.hermes_ereservation.store=t.store,Drupal.settings.hermes_ereservation.sku=t.sku)}},{key:"getEreservationStore",value:function(){return Drupal.settings.hermes_ereservation.hasOwnProperty("store")&&null!==Drupal.settings.hermes_ereservation.store&&Drupal.settings.hermes_ereservation.store?Drupal.settings.hermes_ereservation.store:null}},{key:"getEreservationSku",value:function(){return Drupal.settings.hermes_ereservation.sku}},{key:"removeEndingComma",value:function(e){return e?e.trim().replace(/,*$/,""):e}}],null&&Sr(t.prototype,null),r&&Sr(t,r),e}();function Tr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var xr="loader-request-confirm-tray",Dr=["ca_en","ca_fr","us_en"],Or=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=jQuery("#tray-ereservation-request-confirm"),this.$confirm=this.$el.find("#button-confirm"),this.$errorCall=this.$el.find("#tray-ereservation-request-confirm-error-call"),this.tray=new B({$el:this.$el,name:"tray-ereservation-request-confirm",showOverlay:!0}),this.$customerInfos=this.$el.find("#tray-ereservation-customer-infos"),this.$productInfos=this.$el.find("#tray-ereservation-product-infos"),this.$storeInfos=this.$el.find("#tray-ereservation-store-infos"),this.bind()}var t,r;return t=e,(r=[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation-request-confirm.render",this.render.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.$confirm.on("click",this.confirmEreservation.bind(this))}},{key:"_onTrayOpen",value:function(){this.hideErrorCall()}},{key:"render",value:function(){APP.trayController.popFromStack("tray-ereservation-signup-signin");var e=this.getCustomerData(),t=C().render(APP.templates.trayEreservationRequestConfirmCustomerInfos,e);this.$customerInfos.html(t);var r=this.getProductData(),i=C().render(APP.templates.trayEreservationRequestConfirmProductInfos,r);this.$productInfos.html(i);var n=this.getStoreData(),a=C().render(APP.templates.trayEreservationRequestConfirmStoreInfos,n);this.$storeInfos.html(a)}},{key:"getProductData",value:function(){var e,t=ot.getCurrentProductVariation();e=t.thumbs&&Array.isArray(t.thumbs)&&t.thumbs.length>0&&t.thumbs[0].uri?t.thumbs[0].uri+"-300-300_n.jpg":t.images&&Array.isArray(t.images)&&t.images.length>0&&t.images[0].uri?t.images[0].uri+"-300-300_n.jpg":null;var r="SANS_TAILLE"!==t.ref_size&&t.attributes&&t.attributes.field_ref_size&&t.attributes.field_ref_size.attr_display?t.attributes.field_ref_size.attr_display:null,i=t.attributes&&t.attributes.field_color_hermes&&t.attributes.field_color_hermes.attr_display&&""!==t.attributes.field_color_hermes.attr_display.trim()?t.attributes.field_color_hermes.attr_display:null;return{media:e,title:t.display_name||null,price:ot.formatProductPrice(t),size:r,color:i,showTaxesDiv:Dr.includes(Drupal.settings.hermes_locale)}}},{key:"getStoreData",value:function(){var e=Er.getEreservationStore(),t=e.phone?e.phone.replace("/s/g","-"):null;return{name:e.name.toUpperCase()||null,city:e.city||null,postal_code:e.postalCode||null,country:e.country||null,distance:e.distance||null,phone_number:e.phone||null,phone_number_link_format:t,street_address1:e.street1||null,street_address2:e.street2||null,street_address3:e.street3||null}}},{key:"getCustomerData",value:function(){if(!_.get("isConnected"))return{};var e=_.get("user");return{civility:e.prefix,firstname:e.firstname,lastname:e.lastname,email:e.email,confirm_text:"You are about to confirm e-reservation request"}}},{key:"showErrorCall",value:function(){this.$errorCall.removeClass("invisible"),this.$errorCall.attr("aria-hidden","false"),this.$confirm.attr("aria-describedby","tray-ereservation-request-confirm-error-call")}},{key:"hideErrorCall",value:function(){this.$errorCall.addClass("invisible"),this.$errorCall.attr("aria-hidden","true"),this.$confirm.removeAttr("aria-describedby")}},{key:"confirmEreservation",value:function(){this.hideErrorCall(),H(xr),Ct.trackConfirmEreservationClick(Er.getEreservationStore().name),function(e,t,r,i){if(e&&t){var n=Drupal.settings.hermes_global.url_backjs,a={locale:Drupal.settings.hermes_locale,productsku:t.replace(/\s+/g,"-"),storeid:e};jQuery.ajax({type:"POST",url:n+"/ereservation",headers:{"Content-Type":"application/json"},crossDomain:!0,xhrFields:{withCredentials:!0},data:JSON.stringify(a),async:!0,success:function(){r()},error:function(){i("WS error")}})}else i("Query parameters error")}(Er.getEreservationStore().id,Er.getEreservationSku(),this._createEreservationSuccess.bind(this),this._createEreservationError.bind(this))}},{key:"_createEreservationSuccess",value:function(){Ct.trackEreservationCreated(Er.getEreservationStore().name),q(xr),Er.openTrayRequestValidation()}},{key:"_createEreservationError",value:function(){q(xr),this.showErrorCall()}}])&&Tr(t.prototype,r),e}();function jr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"getAddress",value:function(e,t,r){var i="{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcode}}; {{country_id}}",n={default:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}, {{region}}, {{{city}}}; {{country_id}}",AT:i,AU:i,CA:i,FI:i,FR:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{postcode}}; {{country_id}}",JP:"{{postcode}}; {{region_label}}{{{city}}}{{{street1}}} {{{street2}}}; {{country_id}}",NZ:i,SE:i,UK:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}, {{{city}}}, {{region}}; {{country_id}}",US:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcodewithzip}}; {{country_id}}",CN:"{{{region}}}, {{{city}}}, {{{district}}}, {{street1}}, {{country_id}}",DE:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}, {{region_label}}, {{{city}}}; {{country_id}}",SG:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}; {{postcode}}, {{country_id}}",MY:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}; {{{city}}}; {{region_label}}; {{country_id}}",HK:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{street3}}}; {{region_label}}, {{district_bis_label}}, {{{city}}}",MO:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{street3}}}; {{district_bis_label}}, {{{city}}}",TW:"{{{postcode}}};{{{city}}};{{district_bis_label}};{{{street1}}};{{{street2}}}",KR:"{{{street2}}}; {{{street1}}}; {{{city}}}; {{postcode}}; {{country_id}}",RI:"{{{street1}}}; {{{street2}}}; {{postcode}}; {{{city}}}; {{country_id}}",DH:"{{{street1}}}; {{{street2}}}; {{{city}}}; {{country_id}}",TH:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{region_label}}; {{district_bis_label}}; {{postcode}}; {{{country_id}}}",BR:"{{{company}}}; {{{street1}}}; {{{street_number}}}; {{{street2}}}; {{{district}}}; {{{city}}}; {{{region}}}; {{postcode}}; {{{country_id}}}"};if(e){t=t||", ";var a=n[e.country_id?e.country_id:Drupal.settings.hermes_current_country.toUpperCase()]||n.default;r===k.REGION_DISABLED&&(a=(a=(a=a.replace("{{region}}, ","")).replace("{{region_label}}, ","")).replace("{{region_label}}","")),e.district_bis_label=e.district_bis_name,e.postcode=ae(e.country_id,e.postcode),e.country_label=this.getCountryName(e.country_id),e.postcodewithzip=e.postcode,e.postcode_bis&&(e.postcodewithzip+="-".concat(e.postcode_bis));var s=C().render(a,e);return s=(s=(s=(s=(s=(s=s.split("&#x2F;").join("/")).split("&#39;").join("'")).replace(/( ,)|( ;)/g,"")).split(";").join(t)).replace(/^,/,"")).replace(/^ +/,""),e.isChinaZH&&(s=s.replace(/,/g,"")),P.isTaiwan()&&(s="".concat(s.replace(/ +$/,"").replace(/,$/,""),", ").concat(e.country_id)),s}}},{key:"getAreasStorageNameVariable",value:function(){var e=Drupal.settings.hermes_current_country.charAt(0).toUpperCase()+Drupal.settings.hermes_current_country.slice(1);return"areas".concat(e)}},{key:"getCountryName",value:function(e){var t={default:"",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",BE:"Belgium",BW:"Botswana",BR:"Brazil",BG:"Bulgaria",CA:"Canada",CL:"Chile",CN:"China",CO:"Colombia",CR:"Costa Rica",HR:"Croatia",CZ:"Czech Republic",DK:"Denmark",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",GT:"Guatemala",HN:"Honduras",HK:"Hong Kong SAR China",HU:"Hungary",IN:"India",ID:"Indonesia",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakstan",KE:"Kenya",KR:"South Korea",KW:"Kuwait",LV:"Latvia",LB:"Lebanon",LT:"Lithuania",LU:"Luxembourg",MO:"Macau SAR China",MK:"Macedonia",MG:"Madagascar",MY:"Malaysia",ML:"Mali",MT:"Malta",MU:"Mauritius",MX:"Mexico",MD:"Moldova",NL:"Netherlands",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NO:"Norway",PK:"Pakistan",PA:"Panama",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PT:"Portugal",QA:"Qatar",RO:"Romania",RU:"Russia",SA:"Saudi Arabia",SN:"Senegal",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",ZA:"South Africa",ES:"Spain",LK:"Sri Lanka",SE:"Sweden",CH:"Switzerland",TW:"Taiwan",TH:"Thailand",TN:"Tunisia",TR:"Turkey",UG:"Uganda",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",VE:"Venezuela",VN:"Vietnam"};return t[e]||t.default}}])&&jr(t.prototype,r),e}(),Lr=function(e){if(e){var t,r={},i=[];if(e.year)r={monthIndex:e.month,day:e.day,year:e.year};else{if(!((i=e.split(/[^0-9]/).filter((function(e){return e}))).length>5))return e;r={monthIndex:(t=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])).getMonth()+1,day:t.getDate(),year:t.getFullYear()}}return r.month_name=Drupal.settings.hermes_translations.months[r.monthIndex],window.Drupal.settings.hermes_locale.substr(0,2)===k.JAPAN&&(r.year+=Drupal.settings.hermes_translations.year_symbol,r.day+=Drupal.settings.hermes_translations.day_symbol),C().render(Drupal.settings.hermes_translations.date_format,r)}};function Rr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=APP.CURRENCY_MAP[_.get("currentStore")];return r&&(i=APP.CURRENCY_MAP[r]),void 0===i.precision&&void 0!==t&&(i.precision=t),Pt().formatMoney(e,i)}function Mr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Fr,Nr={exchange:"refund",refund:"exchange"},Qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fr=new Ir,this._$el=jQuery("#tray-exchange-return-details"),this.tray=new B({$el:this._$el,name:"tray-exchange-return-details",showOverlay:!0}),this._$content=this._$el.find(".exchange-return-details-content"),this._bind(),APP.pubsub.publish("exchangeReturnDetails.newTrayDataFinish",{})}var t,r;return t=e,(r=[{key:"_bind",value:function(){APP.pubsub.subscribe("exchangeReturnDetails.newTrayData",this._handleNewTrayData.bind(this))}},{key:"_populateData",value:function(e){var t=Object.assign({},e.exchange,e.return,e);t.created_at=Lr(t.created_at),t.exchange_return_date=Lr(t.return_date),t.pickup_date=Lr(t.pickup_date);var r="".concat(Drupal.settings.hermes_global.url_ecp,"/proforma?"),i=["locale="+_.get("currentStore"),"hash="+e.exchange.return_hash];if(t.proformaDownloadLink=r+i.join("&"),t.cartItems=function(e){if(e&&e.items){var t=jQuery.extend({},e,Drupal.settings.hermes_translations.ui.cart);return t.locale=Drupal.settings.hermes_url_locale,t.items=e.items.map((function(t){t.qty&&(t.qty=parseInt(t.qty,10)),t.final_price=Rr(t.row_incl_tax,2,e.store_code);var r=e.return_type===k.EXCHANGE,i=Drupal.settings.hermes_translations.ui.cart,n=r?i.exchange_reason:i.return_reason;return t.return_reason=t.return_reason?n+i.reason[t.return_reason]:"",t})),C().render(APP.templates.exchangeReturnItems,t)}}(t),t.summary=function(e){if(e){var t="";t=e.shipping_address&&e.shipping_address.country_id?e.shipping_address.country_id:_.get("currentCountry")?_.get("currentCountry"):"";var r=e.show_tax_message&&e.show_tax_message[t.toLowerCase()],i=e.items.reduce((function(e,t){return e+parseInt(t.qty,10)}),0),n=0;void 0!==e.adjustement_negative&&(n=e.adjustement_negative);var a={isExchange:e.return_type===k.EXCHANGE,isRefund:e.return_type===k.REFUND,totalItems:i,totalTax:Rr(e.tax_amount,2,e.store_code),totalShipping:Rr(e.shipping_amount,2,e.store_code),adjustementNegative:Rr(n,2,e.store_code),adjustementNegativeDisplay:n,totalPrice:Rr(e.grand_total,2,e.store_code),show_tax:e.show_tax[Drupal.settings.hermes_locale],taxMessage:Drupal.settings.hermes_translations.ui.checkout[r]};return C().render(APP.templates.exchangeRequestDetailSummary,a)}}(t),t.pickup_address){var n=T(t.pickup_address),a=Fr.getAddress(t.pickup_address);P.isChina()?(t.pickup_address_name=n,t.pickup_address_label=a):t.pickup_address=n+", "+a}this._$content.html(C().render(APP.templates.exchangeReturnDetails,t))}},{key:"_handleNewTrayData",value:function(e,t){this._setupDomFromConfig(t),this._populateData(t)}},{key:"_setupDomFromConfig",value:function(e){var t=jQuery(this._$el),r=jQuery("#tray-exchange-return-details .button-tray"),i=e.return_type||e.exchange.return_type||e.return.return_type,n="[data-mode=".concat(Nr[i],"]"),a="[data-mode=".concat(i,"]"),s=t.find(jQuery(n)),o=t.find(jQuery(a));s.each((function(){jQuery(this).addClass("hidden")})),o.each((function(){var e=jQuery(this).attr("id");t.attr("aria-labelledBy",e),e&&r.attr("aria-describedBy",e),jQuery(this).removeClass("hidden")}))}}])&&Mr(t.prototype,r),e}();function $r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ur={exchange:"refund",refund:"exchange"},Br={office:"pickup",pickup:"office"},Vr="/exchange-return/request/print-label?",zr="/proforma?",Hr="pickup-slot-labels",qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._$el=jQuery("#tray-exchange-return-instructions"),this._$summaryHolderNode=jQuery("#return-summary-content"),this._$pickupTimeNode=jQuery("#return-pickup-datetime"),this._currencyFormat=APP.CURRENCY_MAP[_.get("currentStore")],this._currencyFormat.precision=2,this.tray=new B({$el:this._$el,name:"tray-exchange-return-instructions",showOverlay:!0}),this._bind()}var t,r;return t=e,(r=[{key:"_bind",value:function(){APP.pubsub.subscribe("exchangeReturnInstructions.newTrayData",this._handleNewTrayData.bind(this)),APP.pubsub.subscribe("exchangeReturnDetails.newTrayDataFinish",this._gotoReturnExchangeDetailsTray.bind(this)),this._$el.on("click",'[data-bind="exchange-return-label-url"]',this._onPrintReturnLabelClick.bind(this)),this._$el.on("click",'[data-bind="exchange-return-proforma-url"]',this._onPrintReturnProformaClick.bind(this)),this._$el.on("click",'[data-bind="view-order"]',this._onExchangeRefundOrderNodeClick.bind(this))}},{key:"_populateData",value:function(e){e.pickup_time&&(this._populatePickup(_.get(Hr)),_.deleteItem(Hr)),this._populateSummary(e),this._setupDomFromData(e)}},{key:"_populatePickup",value:function(e){this._$pickupTimeNode.html(C().render(this._$pickupTimeNode.html(),e))}},{key:"_setupDomFromData",value:function(e){var t=jQuery(this._$el),r="[data-mode=".concat(Ur[e.return_type],"]"),i="[data-mode=".concat(e.return_type,"]"),n=t.find(jQuery(r)),a=t.find(jQuery(i));n.each((function(){jQuery(this).addClass("hidden")})),a.each((function(){var e=jQuery(this).attr("id");t.attr("aria-labelledBy",e),jQuery(this).removeClass("hidden")}))}},{key:"_populateSummary",value:function(e){var t=this._generateSummaryData(e);this._$summaryHolderNode.html(C().render(APP.templates.exchangeRequestSummary,t)),APP.pubsub.publish("exchange-return-instructions-summary-renderer")}},{key:"_generateSummaryData",value:function(e){var t=e.items.reduce((function(e,t){return e+parseInt(t.qty,10)}),0),r="";r=e.shipping_address&&e.shipping_address.country_id?e.shipping_address.country_id:Drupal.settings.hermes_locale?Drupal.settings.hermes_locale:"";var i=Object.keys(e.show_tax).find((function(e){return e.match(new RegExp("^".concat(r),"i"))})),n=e.show_tax_message&&e.show_tax_message[r.toLowerCase()],a=0;void 0!==e.adjustement_negative&&(a=e.adjustement_negative);var s=e.show_tax[i]?e.shipping_amount:e.shipping_incl_tax;return{isExchange:e.return_type===k.EXCHANGE,isRefund:e.return_type===k.REFUND,orderDate:Lr(e.return_date)||"date format unsupported",returnId:e.return_id,totalItems:t,totalPrice:Pt().formatMoney(e.grand_total,this._currencyFormat),subtotal:Pt().formatMoney(e.subtotal,this._currencyFormat),totalTax:Pt().formatMoney(e.tax_amount,this._currencyFormat),subtotalInclTax:Pt().formatMoney(e.subtotal_incl_tax,this._currencyFormat),shippingAmount:Pt().formatMoney(s,this._currencyFormat),adjustementNegative:Pt().formatMoney(a,this._currencyFormat),adjustementNegativeDisplay:a,totalShipping:Pt().formatMoney(s,this._currencyFormat),show_tax:e.show_tax[i],taxMessage:Drupal.settings.hermes_translations.ui.checkout[n]}}},{key:"_handleNewTrayData",value:function(e,t){this._data=t,this._$el.find('[data-return-method="'.concat(t.returnMethod,'"]')).show(),this._$el.find('[data-return-method="'.concat(Br[t.returnMethod],'"]')).hide();var r=t.exchange.return_carrier;if(r.includes("fedex")){this._$el.find('[data-carrier="ups"]').hide();var i=t.exchange.is_paperless_proforma_enabled?"off":"on";this._$el.find('[data-paperless-proforma="'+i+'"]').hide()}else r.includes("ups")&&this._$el.find('[data-carrier="fedex"]').hide();this._populateData(this._data.exchange)}},{key:"_onExchangeRefundOrderNodeClick",value:function(e){e.preventDefault(),e.stopPropagation(),APP.pubsub.publish("analytics-refund-details-exchange-return",{mode:this._data.exchange.return_type}),APP.trayController.triggerTray({name:"tray-exchange-return-details"})}},{key:"_gotoReturnExchangeDetailsTray",value:function(){APP.pubsub.publish("exchangeReturnDetails.newTrayData",this._data)}},{key:"_onPrintReturnLabelClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this._generateDownloadUrl(Vr);APP.pubsub.publish("analytics-return-print-exchange-return",{mode:this._data.exchange.return_type}),ue(t,{},"GET").done(function(e){e.error?this._errorHandling(e.internal_code):(t=this._generateDownloadUrl(Vr,_.get("currentStore")),this._downloadDocument("".concat(Drupal.settings.hermes_global.url_ecp).concat(t)))}.bind(this)).fail(this._errorHandling)}},{key:"_onPrintReturnProformaClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this._generateDownloadUrl(zr);ue(t,{},"GET").done(function(e){e.error?this._errorHandling(e.internal_code):(t=this._generateDownloadUrl(zr,_.get("currentStore")),this._downloadDocument("".concat(Drupal.settings.hermes_global.url_ecp).concat(t)))}.bind(this)).fail(this._errorHandling)}},{key:"_downloadDocument",value:function(e){var t=document.createElement("a");t.href=e,t.target="_self",document.body.appendChild(t),t.click()}},{key:"_errorHandling",value:function(e){Y({message:Drupal.settings.hermes_translations.order[e]||Drupal.settings.hermes_translations.order.genericNoInvoiceGeneratedError,type:"critical"})}},{key:"_generateDownloadUrl",value:function(e,t){return e+[t?"locale="+t:"","hash="+this._data.exchange.return_hash].join("&")}}])&&$r(t.prototype,r),e}();function Gr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Kr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"getReturnTotals",value:function(t,r){var i=t.returns_amount_fees,n=0;return null!==i&&Object.keys(i).length>0&&(r-=n=e._retrieveAdjustmentNegative(r,i)),{totalPrice:r,adjustementNegative:n}}},{key:"_retrieveAdjustmentNegative",value:function(t,r){var i=0;return Object.values(r).forEach((function(r){void 0!==r.max_price&&void 0!==r.min_price&&void 0!==r.fixed_price&&void 0!==r.percent_price&&t>=r.min_price&&(""===r.max_price||t<=r.max_price)&&(i=e._getFeesAmount(t,r.percent_price,r.fixed_price))})),i}},{key:"_getFeesAmount",value:function(e,t,r){return 0===t?r:r/100*e}}],null&&Gr(t.prototype,null),r&&Gr(t,r),e}();function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(r),!0).forEach((function(t){Xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Jr(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ei,ti="/exchange-return/request/return-method",ri="pickup-slot-labels",ii="2200105",ni="pickup",ai={exchange:"refund",refund:"exchange"},si="office",oi="pickup",ci=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._$el=jQuery("#tray-exchange-return-method"),this._$pickupFields=jQuery("#pick-up-fields"),this._$pickupTimeTitle=jQuery("#pick-up-time-title"),this._$dropOffFields=jQuery("#drop-off-fields"),this._$dropOffOnlyFields=jQuery("#drop-off-only-fields"),this._$summaryHolderNode=jQuery("#exchange-return-method-order-summary"),this._$submitButtonNode=this._$el.find(".button-request-exchange-return"),this._$carrierLocation=jQuery("#find-carrier-location-url"),this._$instructionsTrayContainer=jQuery("#tray-exchange-return-instructions"),this._$returnMethodAddressList=jQuery("#return-method-address-list"),this._$returnMethodPickUpTimesInstructions=jQuery("#return-method-pick-up-times-instructions"),this.$returnMethodPickUpTimesInstructionsUps=jQuery("#return-method-pick-up-times-instructions-ups"),this._$returnMethodPickUpTimesList=jQuery("#return-method-pick-up-times-list"),this._returnMethodPickUpTimesInstructionsHtml=this._$returnMethodPickUpTimesInstructions.html(),this._returnMethodPickUpTimesUnavailableHtml=C().render(Drupal.settings.hermes_translations.ui.exchange_pickup_options.no_pickup_options,{urlopen:'<button data-tray-trigger="tray-help" class="link-to-button-inside-trays" type="button"aria-controls="tray-help" aria-expanded="false" aria-haspopup="dialog">',urlclose:"</button>"}),this._currencyFormat=APP.CURRENCY_MAP[_.get("currentStore")],this._currencyFormat.precision=2,this.carrier=null,this.returnMethod="office",this.tray=new B({$el:this._$el,name:"tray-exchange-return-method",showOverlay:!0}),this._setupState(),this._bind(),APP.pubsub.subscribe("order-details-angular",this.sendOrderDataToAngular.bind(this))}var t,r;return t=e,(r=[{key:"_setupState",value:function(){this._config={data:{}},this._state={data:{}}}},{key:"_bind",value:function(){var e=this;this._$submitButtonNode.on("click",this._onSubmitButtonNodeClick.bind(this)),this._$el.on("click","#add-new-pickup-address",this._onAddAddressNodeClick.bind(this)),this._$el.on("change",'[name="return_method"]',this._onReturnMethodSelectChange.bind(this)),this._$el.on("change",'[name="request-address"]',this._onRequestAddressSelectChange.bind(this)),this._$el.on("change",'[name="request-timeslot"]',this._onRequestTimeslotSelectChange.bind(this)),this.tray.addEventListener("lockRelease",(function(e){1===ei.length&&ei.includes(oi)&&e.detail.isOpen&&jQuery("#edit-return-method-pickup").trigger("change")})),APP.pubsub.subscribe("profile.update.address",this._handleAddAddress.bind(this)),APP.pubsub.subscribe("instructions-return-angular",(function(){e._$submitButtonNode.click()}))}},{key:"setNewTrayData",value:function(e){this._handleNewTrayData(e)}},{key:"_changeReturnRequestShipmentMethod",value:function(e){_.deleteItem(ri);var t={order_id:this._config.data.increment_id,request_id:this._state.data.request.request_id,selected_return_method:e,pickup_address:e!==si?this._state.data.local.pickup_address:void 0};return this.returnMethod=e,z(),ue(ti,t).fail((function(){te()}))}},{key:"_changeReturnAddress",value:function(e){return z(),ue(ti,{order_id:this._config.data.increment_id,request_id:this._state.data.request.request_id,selected_return_method:this._state.data.local.selected_return_method,pickup_address:e},"POST").fail((function(e){te(),console.warn("Return/Exchange address chould not be changed"),console.warn(e)}))}},{key:"_submitRequestFinalisation",value:function(){var e=this._assembleRequestPayload(),t=!0===this._$el.data("unformatpostcode"),r=e.pickup_address;return r&&(r.postcode&&r.postcode.length>0||t)&&(r.postcode=se(r.country_id,r.postcode)),z(),ue("/exchange-return/request/finalise",e).done((function(){APP.pubsub.publish("return.finalisation.completed")})).fail((function(){te()}))}},{key:"_dispatchConfigMutation",value:function(){this._handleStateSet(this._state,"data",{})}},{key:"_dispatchStateMutation",value:function(e,t){if(t.data.local||t.data.request){this._resetTimeSlots(),this._setupDomFromState(t.data),this._populateSummary({state:t.data,config:this._config.data});var r=t.data.request;r.selected_return_method===ni&&(r.available_pickup_slots&&this._populateTimeslots(r),r.addresses&&this._populateAddresses(r))}}},{key:"_setupDomFromState",value:function(e){var t=this;ei=e.request.available_prepaid_shipping_mode,this.carrier=e.request.order_shipping_carrier,"UPS"===this.carrier?(this.$returnMethodPickUpTimesInstructionsUps.removeClass("hidden"),this._$returnMethodPickUpTimesInstructions.addClass("hidden")):"TNT"===this.carrier?(this._$returnMethodPickUpTimesInstructions.addClass("hidden"),this.$returnMethodPickUpTimesInstructionsUps.addClass("hidden")):(this._$returnMethodPickUpTimesInstructions.removeClass("hidden"),this.$returnMethodPickUpTimesInstructionsUps.addClass("hidden")),this._carrierLocationUrl(),ei.forEach((function(e){var r=C().render(Drupal.settings.hermes_translations.exchangeReturn["return_label_".concat(e)],{carrier:t.carrier});jQuery("#edit-return-method-".concat(e)).next().html(r)}));var r=C().render(this._$carrierLocation.html(),{carrier:t.carrier});this._$carrierLocation.html(r);var i=e.local.selected_return_method,n=e.request.return_type;ei&&1===ei.length?ei[0]===oi?(this._setupDomFromDatas(n,oi),this._$dropOffFields.addClass("hidden"),this._$dropOffOnlyFields.hide(),jQuery("#edit-return-method-office").parent().addClass("hidden")):(this._setupDomFromDatas(n,si),this._$pickupFields.addClass("hidden"),jQuery("#edit-return-method-pickup").parent().addClass("hidden")):(this._$dropOffFields.removeClass("hidden"),this._$pickupFields.removeClass("hidden"),this._$dropOffOnlyFields.show(),jQuery("#edit-return-method-pickup").parent().addClass("hidden"),jQuery("#edit-return-method-office").parent().removeClass("hidden"),this._setupDomFromDatas(n,i))}},{key:"_setupDomFromDatas",value:function(e,t){var r=jQuery(this._$el),i=jQuery("#tray-exchange-return-method .button-tray"),n=jQuery("[data-mode=".concat(ai[e],"]")),a=jQuery("[data-mode=".concat(e,"]")),s=r.find(n),o=r.find(a);s.each((function(){jQuery(this).addClass("hidden")})),o.each((function(){var e=jQuery(this).attr("id");r.attr("aria-labelledBy",e),e&&i.attr("aria-describedBy",e),jQuery(this).removeClass("hidden")})),this._$dropOffOnlyFields.addClass("hidden"),this._$pickupFields.toggleClass("hidden",t===si),this._$dropOffFields.toggleClass("hidden",t===oi),jQuery("#edit-return-method-pickup").parent().removeClass("hidden"),this._$el.find('[name="return_method"][value="'.concat(t,'"]')).prop("checked",!0)}},{key:"_populateSummary",value:function(e){var t=this;this._totalItems=0;var r=0,i=0;e.state.request.items.forEach((function(n){t._totalItems+=parseInt(n.qty,10);var a=e.config.items.find((function(e){return e.sku===n.sku}));r+=a.price_incl_tax*n.qty,i+=(a.price_incl_tax-a.unit_price)*n.qty})),this._totalItemsInOrder=e.config.items.reduce((function(e,t){return e+t.qty}),0);var n=e.config.shipping_address.country_id||Drupal.settings.hermes_locale,a=Object.keys(e.config.show_tax).find((function(e){return e.match(new RegExp("^".concat(n),"i"))})),s=e.config.show_tax_message&&e.config.show_tax_message[n.toLowerCase()],o=e.state.request.return_type===k.EXCHANGE,c=e.state.request.return_type===k.REFUND,u=c&&e.config.is_display_shipping_refund,l=o&&e.config.is_display_shipping_exchange,d=u||l?e.config.shipping_amount:0,h=0,p=Kr.getReturnTotals(e.config,r);void 0!==p&&(void 0!==p.totalPrice&&(r=p.totalPrice,d>0&&this._totalItemsInOrder===this._totalItems?(i=e.config.tax_amount,r=e.config.grand_total):d=0),void 0!==p.adjustementNegative&&(h=p.adjustementNegative));var f={isExchange:o,isRefund:c,orderDate:Lr(e.config.created_at),orderId:e.config.increment_id,totalItems:this._totalItems,totalPrice:Pt().formatMoney(r,this._currencyFormat),totalTax:Pt().formatMoney(i,this._currencyFormat),totalShipping:Pt().formatMoney(d,this._currencyFormat),adjustementNegative:Pt().formatMoney(h,this._currencyFormat),adjustementNegativeDisplay:h,show_tax:e.config.show_tax[a],taxMessage:Drupal.settings.hermes_translations.ui.checkout[s]};this._$summaryHolderNode.html(C().render(APP.templates.exchangeRequestSummary,f)),APP.pubsub.publish("exchange-return-method-summary-renderer")}},{key:"_populateAddresses",value:function(e){var t=this._prepareAddressData(e);if(P.isPreventEditingReturnRegionInCountriesActive()){var r=this._config.data.shipping_address.region_label,i=[];jQuery.each(t,(function(e,t){t.state!==r&&i.push(e)})),jQuery.each(i,(function(e,r){t.splice(r,1)}))}this._$returnMethodAddressList.html(C().render(APP.templates.exchangeRequestAddresses,{addresses:t})),this._preventIneligiblePrecheck(),APP.pubsub.publish("exchange-return-method-addresses-renderer")}},{key:"_populateTimeslots",value:function(e){var t=this._prepareTimeslotData(e);this._$returnMethodPickUpTimesList.html(C().render(APP.templates.exchangeRequestTimeslots,{timeslots:t}))}},{key:"_gotoReturnInstructionsTray",value:function(e){this.trayExchangeReturnInstructions||(this.trayExchangeReturnInstructions=APP.trayController.triggerTray({name:"tray-exchange-return-instructions",dontAdd:!0})),APP.pubsub.publish("exchangeReturnInstructions.newTrayData",e),setTimeout((function(){APP.trayController._trayStack=["tray-exchange-return-instructions"]}),500),this._pushNextTray("tray-exchange-return-instructions")}},{key:"_gotoAddAddressTray",value:function(){APP.trayController.triggerTray({name:"tray-edit-address"}),APP.pubsub.publish("tray.editAddress.state","address-new")}},{key:"_pushNextTray",value:function(e){APP.trayController.triggerTray({name:e})}},{key:"_carrierLocationUrl",value:function(){var e;switch(!0){case/dhl/i.test(this.carrier):e=Drupal.settings.hermes_checkout.exchange_and_return.dhl_locator_url;break;case/colissimo/i.test(this.carrier):e=Drupal.settings.hermes_checkout.exchange_and_return.colissimo_locator_url;break;case/chronopost/i.test(this.carrier):e=Drupal.settings.hermes_checkout.exchange_and_return.chronopost_locator_url;break;case/ups/i.test(this.carrier):e=Drupal.settings.hermes_checkout.exchange_and_return.ups_locator_url;break;default:e=Drupal.settings.hermes_checkout.exchange_and_return.fedex_locator_url}var t=_.get("currentStore");e&&t in e&&this._$carrierLocation.prop("href",e[t])}},{key:"_isIdenticalAddress",value:function(e,t){var r=!0;return(r=(r=(r=(r=(r=(r=r&&e.firstname===t.firstname)&&e.lastname===t.lastname)&&e.postcode===t.postcode)&&e.prefix===t.prefix)&&e.region===t.region)&&e.street1===t.street1)&&e.telephone===t.telephone}},{key:"_prepareAddressData",value:function(e){var t=this,r=e.addresses.find((function(e){return e.is_default_billing})),i=e.addresses.filter((function(e){return!e.is_default_billing})),n=!1;if(r)for(var a in i)if(this._isIdenticalAddress(i[a],r)){n=!0;break}return e.addresses.filter((function(e){return!n&&e.address_id||n&&e.address_id!==r.address_id})).map((function(e){var r,i,n,a=t._isIdenticalAddress(t._state.data.local.pickup_address,e),s=Drupal.settings.hermes_locale,o=" ";if(s){var c=(i=s.split("_"),n=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(i,n)||function(e,t){if(e){if("string"==typeof e)return Zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zr(e,t):void 0}}(i,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());r=c[0],c[1]}else r=_.get("currentCountry"),_.get("currentLanguage");"kr"===r&&(o="");var u=e.firstname+o+e.lastname;return{address_id:e.address_id,is_selected:a,full_name:u,address:e.street1,zipcode:e.postcode,state:e.region_label,city:e.city,country:e.country_id,telephone:e.telephone,ineligible_return:!e.is_eligible_return,value_payload:JSON.stringify(e)}}))}},{key:"_prepareTimeslotData",value:function(e){var t=this,r=[];return _.deleteItem(ri),e.available_pickup_slots.days&&e.available_pickup_slots.days.length>0?e.available_pickup_slots.days.forEach((function(i,n){e.available_pickup_slots.time[i.value].forEach((function(e,a){var s,o=!0;s=t._state.data.local.pickup_date&&t._state.data.local.pickup_time?i.value===t._state.data.local.pickup_date&&e.value===t._state.data.local.pickup_time:0===n&&0===a,"Fedex"===t._state.data.request.order_shipping_carrier&&Drupal.settings.in_europe&&e.value.startsWith("fedex")&&e.value.substring(6,8)>0&&e.value.substring(6,8)<12&&(o=!1),o&&(r.push({day:i.value,time:e.value,is_selected:s,dayString:i.format,timeString:e.format,value_payload:JSON.stringify({day:i.value,time:e.value})}),s&&_.set(ri,{date:i.format,timeslot:e.format}))}))})):(this._$pickupTimeTitle.addClass("hidden"),this._$returnMethodPickUpTimesInstructions.addClass("hidden")),r}},{key:"_assembleRequestPayload",value:function(){var e=this._state.data.local,t=e.selected_return_method===oi;return{items:this._config.data.items,order_id:this._config.data.increment_id,return_type:this._state.data.request.return_type,request_notes:this._state.data.request.request_notes,selected_return_method:e.selected_return_method,request_id:this._state.data.request.request_id,pickup_date:t?e.pickup_date:void 0,pickup_time:t?e.pickup_time:void 0,pickup_address:t?e.pickup_address:void 0}}},{key:"_handleNewTrayData",value:function(e){this._handleConfigSet(this._config,"data",e.orderData),e.type&&this._handleConfigSet(this._config,"type",e.type),this._handleStateSet(this._state,"data",{request:e.requestData,local:{selected_return_method:e.requestData.selected_return_method,pickup_address:e.requestData.address,pickup_date:e.requestData.pickup_date,pickup_time:e.requestData.pickup_time}})}},{key:"_handleConfigSet",value:function(e,t,r){return e[t]=r,this._dispatchConfigMutation(),!0}},{key:"_handleStateSet",value:function(e,t,r){var i=jQuery.extend(!0,{},e);return e[t]=r,this._dispatchStateMutation(i,e),!0}},{key:"_handleShipmentMethodChange",value:function(e){var t=jQuery.extend(!0,{},this._state.data);if(t.local.selected_return_method=e.selected_return_method,e.pickup_address?t.local.pickup_address=e.pickup_address:t.local.pickup_address=null,e.available_pickup_slots&&e.available_pickup_slots.days){var r=this._prepareTimeslotData(e);t.local.pickup_date=r[0]?r[0].day:null,t.local.pickup_time=r[0]?r[0].time:null}else t.local.pickup_date=null,t.local.pickup_time=null;t.request=e,this._handleStateSet(this._state,"data",t)}},{key:"_handleAddAddress",value:function(e,t){var r=this,i=jQuery.extend(!0,{},this._state.data),n=t.response.shipping_addresses||t.shipping_addresses;this.tray.back(),i.local.pickup_address=n[0],i.request.addresses.push(n[0]),this._handleStateSet(this._state,"data",i),this._changeReturnRequestShipmentMethod(this._state.data.local.selected_return_method).then((function(e){e.error?r._handleTimeSlotDataError(e):r._handleShipmentMethodChange(e),J()}))}},{key:"_handleRequestAddressChange",value:function(e){var t=jQuery.extend(!0,{},this._state.data);if(t.local.pickup_address=e.pickup_address,e.available_pickup_slots&&e.available_pickup_slots.days){var r=this._prepareTimeslotData(e);t.local.pickup_date=r[0].day,t.local.pickup_time=r[0].time}else t.local.pickup_date=null,t.local.pickup_time=null;t.request=e,this._handleStateSet(this._state,"data",t)}},{key:"_handleRequestTimeslotChange",value:function(e){var t=jQuery.extend(!0,{},this._state.data);t.local.pickup_date=e.day,t.local.pickup_time=e.time,this._handleStateSet(this._state,"data",t)}},{key:"_onSubmitButtonNodeClick",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),re()||this._submitRequestFinalisation().then((function(e){if(J(),e.error){var r=e.error.message;"4800012"===e.error.internal_code&&(r=Drupal.settings.hermes_translations.notification.exchangeReturnError.message),Y({message:{description:r},messageVariables:!1})}else{"angular"!==t._config.type&&Y({message:Drupal.settings.hermes_translations.notification.exchangeReturnSuccess,messageVariables:{operationType:Drupal.settings.hermes_translations.notification.exchangeReturnSuccess.translations[t._state.data.request.return_type],email:_.get("user").email},type:"critical"}),APP.pubsub.publish("analytics-proceed-exchange-return",{mode:t._state.data.request.return_type,id:e.exchange.return_id});var i=_.get("total-orders");_.deleteItem("total-orders"),i>3&&setTimeout((function(){APP.pubsub.publish("get.orders.call")}),4e3),setTimeout((function(){"angular"===t._config.type?t.sendMethodDataToAngular(Yr(Yr({},e),{},{returnMethod:t.returnMethod})):t._gotoReturnInstructionsTray(Yr(Yr({},e),{},{returnMethod:t.returnMethod}))}),200)}}))}},{key:"sendMethodDataToAngular",value:function(e){je.hideScrollbar();var t=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-exchange-return-instructions",trayData:e}});window.parent.dispatchEvent(t)}},{key:"_onReturnMethodSelectChange",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var r=e.currentTarget.value;re()||(APP.pubsub.publish("analytics-choice-delivery-exchange-return",{mode:this._state.data.request.return_type,delivery_type:r}),this._changeReturnRequestShipmentMethod(r).then((function(e){J(),e.error||t._handleShipmentMethodChange(e),e.available_pickup_slots||r!==ni||(e.error={internal_code:ii}),e.error&&t._handleTimeSlotDataError(e)})))}},{key:"_onRequestAddressSelectChange",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var r=JSON.parse(e.currentTarget.value);r.is_eligible_return?this._changeReturnAddress(r).then((function(e){J(),e.error||t._handleRequestAddressChange(e),e.available_pickup_slots||(e.error={internal_code:ii}),e.error&&t._handleTimeSlotDataError(e)})):this._showIneligibleAddress(e.currentTarget.id)}},{key:"_handleTimeSlotDataError",value:function(e){this._showNoTimeSlots(),e.error.internal_code===ii?Y({message:Drupal.settings.hermes_translations.notification.exchangeNoPickupTimes}):Y({message:{description:e.error.message}})}},{key:"_showNoTimeSlots",value:function(){this._setupDomFromDatas(this._state.data.request.return_type,oi),this._$returnMethodPickUpTimesList.addClass("hidden"),this._$submitButtonNode.addClass("disabled"),this._$submitButtonNode.attr("disabled",!0),this._$returnMethodPickUpTimesInstructions.html(this._returnMethodPickUpTimesUnavailableHtml)}},{key:"_resetTimeSlots",value:function(){this._$submitButtonNode.attr("disabled",!1),this._$submitButtonNode.removeClass("disabled"),this._$returnMethodPickUpTimesList.removeClass("hidden"),this._$returnMethodPickUpTimesInstructions.html(this._returnMethodPickUpTimesInstructionsHtml)}},{key:"_onRequestTimeslotSelectChange",value:function(e){e.preventDefault(),e.stopPropagation();var t=JSON.parse(e.currentTarget.value);this._handleRequestTimeslotChange(t),APP.pubsub.publish("timeslot.selected",t)}},{key:"_onAddAddressNodeClick",value:function(e){e.preventDefault(),e.stopPropagation(),this._gotoAddAddressTray()}},{key:"sendOrderDataToAngular",value:function(){var e={mode:this._state.data.request.return_type},t=JSON.parse(window.localStorage.getItem("tray-request-exchange-return-data")).order;APP.pubsub.publish("analytics-order-details-exchange-return",e),je.hideScrollbar();var r=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-order",trayData:Object.assign(e,t)}});window.parent.dispatchEvent(r)}},{key:"_showIneligibleAddress",value:function(e){var t=jQuery("#"+e).parent();this._$submitButtonNode.addClass("disabled"),this._$submitButtonNode.attr("disabled",!0),jQuery(".ineligible-border").removeClass("ineligible-border"),jQuery(".ineligible-return-hint").hide(),t.addClass("ineligible-border"),t.next(".ineligible-return-hint").show(),this._showNoTimeSlots()}},{key:"_preventIneligiblePrecheck",value:function(){var e=jQuery('input[name="request-address"]:checked');if(e){if(e.val()&&!JSON.parse(e.val()).is_eligible_return){var t="request-address-"+JSON.parse(e.val()).address_id;this._showIneligibleAddress(t)}}else this._$submitButtonNode.addClass("disabled"),this._$submitButtonNode.attr("disabled",!0)}}])&&Jr(t.prototype,r),e}();function ui(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var li={exchange:"refund",refund:"exchange"},di=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._$el=jQuery("#tray-request-exchange-return"),this._$itemListHolder=jQuery("#exchange-return-order-items"),this._$summaryHolder=jQuery("#exchange-return-order-summary"),this._$form=jQuery("#hermes-checkout-request-exchange-return-form"),this._$formSubmitError=jQuery("#missing-exchange-return-items-error"),this._$formTextBox=jQuery("#edit-exchange-additional-requests"),this._totalItems=0,this._currencyFormat=APP.CURRENCY_MAP[_.get("currentStore")],this._currencyFormat.precision=2,this.tray=new B({$el:this._$el,name:"tray-request-return",showOverlay:!0}),this._$form.attr("novalidate","novalidate"),this._$formSubmitError.addClass("hidden"),this._setupState(),this._bind()}var t,r;return t=e,(r=[{key:"_setupState",value:function(){this._config={data:{}},this._state={data:{}}}},{key:"_bind",value:function(){var e=this;APP.pubsub.subscribe("exchange.orderDetail.open",this._openOrderDetail.bind(this)),APP.pubsub.subscribe("return.items.loaded",function(){var e;this._$form.length&&(e=this._$form.get(0)),e&&(this.validator=new _e({inputs:e.querySelectorAll("[name]")}))}.bind(this)),this._$el.on("click","[data-bind=quantity-modifier]",this._onModifyProductQuantityButtonClick.bind(this)),this._$el.on("click",'[data-bind="enableForRefundOrExchange"]',this._onEnableForRefundOrExchangeCheckboxChange.bind(this)),this._$el.on("change",'[data-bind="reasonChange"]',this._onReasonSelectChange.bind(this)),this._$form.on("submit",this._onSubmitRequest.bind(this)),APP.pubsub.subscribe("method-return-angular",(function(){e._$form.submit()})),APP.pubsub.subscribe("order-details-angular",this.sendOrderDataToAngular.bind(this))}},{key:"setNewTrayData",value:function(e){this._handleNewTrayData(e)}},{key:"_loadState",value:function(e){return ue("/order/exchange-return-details",{order_id:e.orderNumber},"GET").fail((function(){te()}))}},{key:"_sendRequest",value:function(e){var t=this._assembleRequestPayload(e);return ue("/exchange-return/request",t).fail((function(){return te()}))}},{key:"_initialiseLocalState",value:function(e){var t={};return e.order.items.forEach((function(e){e.min_reached=!1,e.disableCheckbox=!1,e.max_reached=!0,e.qty=parseInt(e.qty_ordered,10),t[e.item_order_id]=jQuery.extend(!0,{},e)})),t}},{key:"_dispatchConfigMutation",value:function(e){var t=this;this._setupDomFromConfig(e),this._handleStateSet(this._state,"data",{}),this._loadState(e).done((function(e){if(J(),e.error)Y({message:{description:e.error.message}});else{var r=jQuery.extend(!0,{},{local:t._initialiseLocalState(e),api:e});t._handleStateSet(t._state,"data",r)}}))}},{key:"_dispatchStateMutation",value:function(e){this._populateOrderItems(e),this._populateSummary(e)}},{key:"_populateOrderItems",value:function(e){var t=this;if(e&&e.data.api&&e.data.api.order&&e.data.api.order.items){var r=e.data.api.order.hscode_proforma_dependency,i=e.data.api.order.items.map((function(i){var n=i.item_order_id,a=Drupal.settings.hermes_checkout.exchange_and_return.return_reasons.map((function(t){return{reason:t,selected:e.data.local[n].reason===t.value}})),s=t._config.data.config.mode,o=s===k.EXCHANGE,c=!o,u=o?k.EXCHANGE:k.RETURN,l=i.is_refundable&&i.is_exchangeable&&!(r&&""===i.hscode),d=Drupal.settings.hermes_translations.exchangeReturn["".concat(u,"Label")],h=Drupal.settings.hermes_translations.exchangeReturn.customerService,p=e.data.local[n];return gr(e.data.api.order,APP.CURRENCY_MAP[e.data.api.order.store_code]),{isExchange:o,isRefund:c,returnType:s,returnOrExchange:u,returnOrExchangeFrontLabel:d,customerService:h,isReturnable:l,locale:_.get("currentStore").replace("_","/"),url:i.url,image:i.image,sku:i.sku,sku_trim:i.sku.replace(/\s/g,""),name:i.name,color:i.color,size:i.size,link_id:i.link_id,metal_titration1:i.metal_titration1,metal_titration2:i.metal_titration2,metal_titration3:i.metal_titration3,model_size:i.model_size,dimensions_watch_strap_int:i.dimensions_watch_strap_int,dimensions_watch_strap_imp:i.dimensions_watch_strap_imp,color_watch_strap:i.color_watch_strap,qty:p.qty,refundable_qty:p.refundable_qty,purchase_price:Pt().formatMoney(i.unit_price*p.qty,APP.CURRENCY_MAP[e.data.api.order.store_code]),refundable_price:Pt().formatMoney(i.unit_price*p.refundable_qty,APP.CURRENCY_MAP[e.data.api.order.store_code]),item_id:n,min_reached:p.min_reached,max_reached:p.max_reached,refundOrExchangeEnabled:p.refundOrExchangeEnabled,display_single_line:i.display_single_line,disableCheckbox:p.disableCheckbox,haveReason:p.haveReason,returnReasons:a,specificMessage:i.specific_message?Drupal.settings.hermes_translations.exchangeReturn[i.specific_message]:"",qty_increments:i.qty_increments}}));this._$itemListHolder.html(C().render(APP.templates.exchangeRequestItems,{items:i})),APP.pubsub.publish("return.items.loaded")}}},{key:"_populateSummary",value:function(e){if(e&&e.data.api&&e.data.api.order&&e.data.api.order.items){var t=e.data.api.order,r=this._config.data.config.mode===k.EXCHANGE,i=this._config.data.config.mode===k.REFUND,n=i&&t.is_display_shipping_refund,a=r&&t.is_display_shipping_exchange,s=n||a?t.shipping_amount:0,o=Object.values(e.data.local).filter((function(e){return e.refundOrExchangeEnabled}));this._totalItems=o.reduce((function(e,t){return e+t.refundable_qty}),0),this._totalItemsInOrder=t.items.reduce((function(e,t){return e+t.qty}),0);var c=o.reduce((function(e,t){return e+t.price_incl_tax*t.refundable_qty}),0),u=o.reduce((function(e,t){return e+(t.price_incl_tax-t.unit_price)*t.refundable_qty}),0),l=0,d=Kr.getReturnTotals(t,c);void 0!==d&&(void 0!==d.totalPrice&&(c=d.totalPrice,s>0&&this._totalItemsInOrder===this._totalItems?(u=t.tax_amount,c=t.grand_total):s=0),void 0!==d.adjustementNegative&&(l=d.adjustementNegative));var h=t.shipping_address.country_id||Drupal.settings.hermes_locale,p=Object.keys(t.show_tax).find((function(e){return e.match(new RegExp("^".concat(h),"i"))})),f=t.show_tax_message&&t.show_tax_message[h.toLowerCase()];gr(t,APP.CURRENCY_MAP[t.store_code]);var m={isExchange:r,isRefund:i,orderDate:Lr(e.data.api.order.created_at),orderId:t.increment_id,totalItems:this._totalItems,totalPrice:Pt().formatMoney(c,APP.CURRENCY_MAP[t.store_code]),totalTax:Pt().formatMoney(u,APP.CURRENCY_MAP[t.store_code]),totalShipping:Pt().formatMoney(s,APP.CURRENCY_MAP[t.store_code]),adjustementNegative:Pt().formatMoney(l,APP.CURRENCY_MAP[t.store_code]),adjustementNegativeDisplay:l,show_tax:t.show_tax[p],taxMessage:Drupal.settings.hermes_translations.ui.checkout[f]};this._$summaryHolder.html(C().render(APP.templates.exchangeRequestSummary,m)),APP.pubsub.publish("request-exchange-return-summary-renderer")}}},{key:"_setupDomFromConfig",value:function(e){var t=jQuery(this._$el);if(t.length){var r=jQuery("#tray-request-exchange-return .button-tray");z();var i=jQuery('[data-mode="'.concat(li[e.mode],'"]')),n=jQuery('[data-mode="'.concat(e.mode,'"]')),a=t.find(i),s=t.find(n);a.each((function(){jQuery(this).addClass("hidden")})),s.each((function(){var e=jQuery(this).attr("id");t.attr("aria-labelledBy",e),e&&r.attr("aria-describedBy",e),jQuery(this).removeClass("hidden")}))}}},{key:"_modifyAmount",value:function(e){var t=jQuery.extend(!0,{},this._state.data),r=parseInt(this._state.data.local[e.item_id].qty_ordered,10),i=e.step?e.step:1,n=this._state.data.local[e.item_id].refundable_qty+e.modifier*i,a=e.link_id,s=t.local[e.item_id],o=1===n,c=n===r;if(!(n<1||n>r)){if(s.refundable_qty=n,s.chosenForProcessing=!1,s.min_reached=o,s.max_reached=c,a){var u=jQuery('select[data-link-id="'.concat(a,'"]'));u.val(e.reason),u.each((function(){var e=jQuery(this).attr("data-item_id"),r=t.local[e];r.refundable_qty=n,r.chosenForProcessing=!1,r.min_reached=o,r.max_reached=c}))}this._handleStateSet(this._state,"data",t)}}},{key:"_enableExchangeOrRefund",value:function(e){var t=jQuery.extend(!0,{},this._state.data),r=t.local[e.item_id];r.refundOrExchangeEnabled=e.enabled,r.refundable_qty=parseInt(r.qty_ordered,10),this._handleStateSet(this._state,"data",t)}},{key:"_checkLinkProduct",value:function(e){var t=this,r=e.link_id,i=e.item_id;r&&jQuery('[data-mode="'.concat(this._config.data.config.mode,'"] [data-link-id="').concat(r,'"]:not([value="').concat(i,'"])')).each((function(r,i){t._state.data.local[jQuery(i).val()].disableCheckbox=e.enabled,t._enableExchangeOrRefund({enabled:e.enabled,item_id:jQuery(i).val()})}))}},{key:"_storeSelectedReason",value:function(e){var t=e.link_id,r=this._state.data.local;if(r[e.item_id].reason=e.reason,r[e.item_id].haveReason=!0,t){var i=jQuery('select[data-link-id="'.concat(t,'"]'));i.val(e.reason),i.each((function(){var t=jQuery(this).attr("data-item_id");r[t].reason=e.reason,r[t].haveReason=!0}))}}},{key:"_prepareSubmitRequest",value:function(e){var t=this;z(),this._sendRequest(e).done((function(e){J(),e.error?Y({message:{description:e.error.message}}):t._handleRequestData(e)}))}},{key:"_assembleRequestPayload",value:function(e){var t=Object.values(e.state.local).filter((function(e){return e.refundOrExchangeEnabled})).map((function(e){return{order_item_id:+e.item_order_id,return_reason:e.reason,qty:e.refundable_qty}}));return t.length?{return_type:this._config.data.config.mode,request_notes:e.additionalRequests,locale:_.get("currentStore"),order_id:this._config.data.config.orderNumber,items:t}:{}}},{key:"_gotoRequestTray",value:function(e){this.trayExchangeReturnMethod||(this.trayExchangeReturnMethod=APP.trayController.getTray({name:"tray-exchange-return-method"}).wrapper),this.trayExchangeReturnMethod.setNewTrayData(e),this._pushNextTray("tray-exchange-return-method")}},{key:"_pushNextTray",value:function(e){APP.trayController.triggerTray({name:e})}},{key:"_handleConfigSet",value:function(e,t,r){return e[t]=r,this._dispatchConfigMutation(e.data.config),!0}},{key:"_handleStateSet",value:function(e,t,r){return e[t]=r,this._dispatchStateMutation(e),!0}},{key:"_handleNewTrayData",value:function(e){this._handleConfigSet(this._config,"data",e)}},{key:"_handleRequestData",value:function(e){var t={requestData:e,orderData:this._state.data.api.order};"angular"===this._config.data.config.type?this.sendRequestDataToAngular(t):this._gotoRequestTray(t)}},{key:"sendRequestDataToAngular",value:function(e){je.hideScrollbar();var t=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-exchange-return-method",trayData:e}});window.parent.dispatchEvent(t)}},{key:"_onModifyProductQuantityButtonClick",value:function(e){var t=+e.currentTarget.getAttribute("data-modifier"),r=e.currentTarget.getAttribute("data-item_id"),i=e.currentTarget.getAttribute("data-link-id"),n=e.currentTarget.getAttribute("data-step");this._modifyAmount({modifier:t,item_id:r,link_id:i,step:n})}},{key:"_onEnableForRefundOrExchangeCheckboxChange",value:function(e){var t=e.currentTarget.value,r=e.currentTarget.checked,i=e.currentTarget.getAttribute("data-link-id");this._enableExchangeOrRefund({item_id:t,enabled:r}),this._checkLinkProduct({link_id:i,enabled:r,item_id:t,current_target:e.currentTarget}),r&&APP.pubsub.publish("analytics-enable-exchange-return",{mode:this._config.data.config.mode}),this._setRequiredSelectForm(this._$form)}},{key:"_setRequiredSelectForm",value:function(e){e.find("select").each((function(){var e=jQuery(this),t=jQuery('[id*="-item-'+e.data("item_id")+'"]');t.is(":checked")&&!t.is(":disabled")&&(e.attr(k.REQUIRED,k.REQUIRED),e.addClass(k.REQUIRED))}))}},{key:"_onReasonSelectChange",value:function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-item_id"),r=e.currentTarget.value,i=e.currentTarget.getAttribute("data-link-id");this._storeSelectedReason({item_id:t,reason:r,link_id:i}),this.validator.changeHandler(e)}},{key:"_onSubmitRequest",value:function(e){var t=jQuery('[data-bind="enableForRefundOrExchange"]');if(e.preventDefault(),e.stopPropagation(),APP.pubsub.publish("analytics-continue-exchange-return",{mode:this._config.data.config.mode}),this.validator.runTests(e),!this._$form.find(".validation-error").length)if(this._totalItems){this._$formSubmitError.addClass("hidden"),this.validator.removeErrorMessageInPageTitle(t);var r=this._$formTextBox.val(),i=jQuery.extend(!0,{},this._state.data);this._prepareSubmitRequest({state:i,additionalRequests:r})}else this._$formSubmitError.removeClass("hidden"),this.validator.showErrorMessageInPageTitle(t)}},{key:"_openOrderDetail",value:function(){var e={mode:this._config.data.config.mode};APP.pubsub.publish("analytics-order-details-exchange-return",e),jQuery(".js-to-order-details").trigger("click",Object.assign(e,this._state.data.api.order))}},{key:"sendOrderDataToAngular",value:function(){var e={mode:this._config.data.config.mode},t=JSON.parse(window.localStorage.getItem("tray-request-exchange-return-data")).order;APP.pubsub.publish("analytics-order-details-exchange-return",e),je.hideScrollbar();var r=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-order",trayData:Object.assign(e,t)}});window.parent.dispatchEvent(r)}}])&&ui(t.prototype,r),e}(),hi=function(){var e,t,r=jQuery("#tray-request-fapiao .tray-close"),i=jQuery("#tray-fapiao-options"),n=jQuery("#request-fapiao-informations"),a=jQuery('#request-fapiao-informations [name="fapiao-method"]'),s=jQuery('#request-fapiao-informations [name="fapiao-method"]#tray-fapiao-personal'),o=jQuery('#request-fapiao-informations [name="fapiao-method"]#tray-fapiao-company'),c=jQuery(".checkout-fapiao-choice"),u=jQuery("#tray-fapiao-generate-form");function l(r){var n,a=jQuery(r.currentTarget).attr("id")||"tray-fapiao-personal";c.find("label").each((function(){var e=jQuery(this);e.attr("id").includes(a)?e.addClass("checked"):e.removeClass("checked")})),"tray-fapiao-personal"===a?e.slickGoTo(0):e.slickGoTo(1),n=a,i.find("input").each((function(){var e=jQuery(this);n===e.data("fapiao-type")&&e.hasClass("required")?(e.attr(k.REQUIRED,k.REQUIRED),"required-chinese"===e.data("required-chinese")&&e.addClass(e.data("required-chinese"))):(e.removeAttr(k.REQUIRED),e.removeClass(e.data("required-chinese")))})),t.resetErrors()}this.init=function(){this.$el=jQuery("#tray-request-fapiao"),this.tray=new B({$el:this.$el,name:"tray-request-fapiao",showOverlay:!0}),n[0]&&(t=new _e({inputs:n[0].querySelectorAll("[name]")})),u.attr("novalidate","novalidate"),this.createFapiaoCarousel(),P.isWechatInApp()&&jQuery(".loader-button-fapiao-confirm").html(Drupal.settings.hermes_translations.ui.confirm),this.bind()},this.bind=function(){APP.pubsub.subscribe("order.details.render",function(e,t){this.fapiao=t.order.fapiao,this.order=t.order,this.fapiao&&this.preFillForm()}.bind(this)),this.tray.addEventListener("open",this._onOpenComplete.bind(this)),a.on("change",l),u.on("submit",this.submitForm.bind(this))},this.createFapiaoCarousel=function(){e=i.slick({arrows:!1,adaptiveHeight:!1,draggable:!1,touchMove:!1,swipe:!1,infinite:!1,accessibility:!0}).slick("getSlick"),i.on("beforeChange",(function(e,t,r,i){var n=jQuery(t.$slides[i]).height();jQuery(t.$slider).animate({height:n},200)}))},this.submitForm=function(e){var i=this;if(t.runTests(e),!u.find(".validation-error").length){this.showLoader();var n={order_id:this.order.increment_id};s.is(":checked")?(n.type=0,n.name=jQuery("#edit-name").val(),n.locale=Drupal.settings.hermes_locale):(n.type=1,n.company_name=jQuery("#edit-companyname").val(),n.tax_id=jQuery("#edit-taxid").val(),n.company_address=jQuery("#edit-companyaddress").val(),n.company_phone_number=jQuery("#edit-companyphonenumber").val(),n.company_bank_account=jQuery("#edit-companybankaccount").val(),n.locale=Drupal.settings.hermes_locale),ue("/fapiao/create",n).done((function(e){if(e.success){window.parent.location=P.isWechatInApp()?e.qr_url:e.pdf_url,i.fapiao||(i.order.fapiao={}),i.order.fapiao.pdf_url=e.pdf_url,i.order.fapiao.qr_url=e.qr_url,i.order.fapiao.fapiaoGenerated=!0,APP.pubsub.publish("order.details.render",{order:i.order});var t=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"update:order.details.render",trayData:{order:i.order}}});window.parent.dispatchEvent(t),r.click()}else i.showNotificationError();i.hideLoader()})).fail((function(){i.hideLoader(),i.showNotificationError()}))}},this.showLoader=function(){H("loader-button-fapiao-confirm")},this.hideLoader=function(){q("loader-button-fapiao-confirm")},this.showNotificationError=function(){var e={message:Drupal.settings.hermes_translations.notification.account.fapiaoErrorMessage,messageVariables:{},type:"critical"};jQuery.extend(e.messageVariables,Drupal.settings.hermes_translations.notification.account.fapiaoErrorMessage.variables),Y(e)},this.preFillForm=function(){u[0].reset(),!0===this.fapiao.type_company?this.preFillFormCompany():this.preFillFormPersonnal()},this.preFillFormPersonnal=function(){s.trigger("change"),s.prop("checked",!0),jQuery("#edit-name").val(this.fapiao.name)},this.preFillFormCompany=function(){o.trigger("change"),o.prop("checked",!0),jQuery("#edit-companyname").val(this.fapiao.company_name),jQuery("#edit-taxid").val(this.fapiao.tax_id),jQuery("#edit-companyaddress").val(this.fapiao.company_address),jQuery("#edit-companyphonenumber").val(this.fapiao.company_phone_number),jQuery("#edit-companybankaccount").val(this.fapiao.company_bank_account)},this._onOpenComplete=function(){jQuery('[data-tray-trigger="tray-request-fapiao"]').on("click",APP.pubsub.publish("analytics.generate.fapiao")),e.refresh()},this.setTrayState=function(t){this.fapiao=t.order.fapiao,this.order=t.order,this.fapiao?this.preFillForm():(s.trigger("change"),s.prop("checked",!0)),e.refresh(),APP.pubsub.publish("analytics.generate.fapiao")},this.init()};function pi(e){fi.call(this,e),J()}function fi(){this.$errorMessage||(this.$orderNumber.addClass("error"),this.$formItemOrderRef.after('<p class="error-order_ref clearfix error-message">'.concat(Drupal.settings.hermes_translations.notification.order[2300001].description,"</p>")),this.$errorMessage=this.$el.find(".error-message, .error-message-copy"))}var mi=function(){function e(e){e.order?(APP.trayController.triggerTray({name:"tray-order",data:e}),this.$emailField.val(""),this.$orderNumber.val(""),this.$errorMessage&&(this.$errorMessage.remove(),this.$errorMessage=void 0,this.$orderNumber.removeClass("error"))):t.call(this,e)}function t(e){if(e&&e.error){var t=e.error.internal_code,r=Drupal.settings.hermes_translations.notification.order[t];if(r){var i={message:r,messageVariables:r.variables,type:"critical"};pi.call(this,i)}else te()}else te()}this.init=function(){this.$el=jQuery("#tray-find-order"),this.$findOrderForm=this.$el.find("#hermes-commerce-find-order-form"),this.$signIn=this.$el.find(".js-sign-in-cta"),this.$emailField=this.$findOrderForm.find("[id^=edit-email]"),this.$orderNumber=this.$findOrderForm.find("#edit-order-ref"),this.$formItemOrderRef=this.$findOrderForm.find(".form-item-order-ref"),this.tray=new B({$el:this.$el,name:"tray-find-order",showOverlay:!0}),this.formHelpers=new oe,this.$findOrderForm.get(0)&&(this.validator=new _e({inputs:this.$findOrderForm.get(0).querySelectorAll("[name]")})),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.findOrder.toggle",this.toggleTray.bind(this)),this.$findOrderForm&&this.$findOrderForm.on("submit",this.getOrderInfo.bind(this)),this.$signIn.on("click",this.$el,this.pushAccountTray.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.openTray()},this.pushAccountTray=function(e){e.preventDefault(),this.tray.back()},this.openTray=function(){this.tray.isOpen||(this.$emailField.val(""),this.$orderNumber.val(""),this.tray.open())},this.getOrderInfo=function(r){var i,n,a;r.preventDefault(),this.$findOrderForm[0].checkValidity()?(z(),n=encodeURIComponent(this.$emailField.val()),i=this.$orderNumber.val(),a="".concat("/order","?order_id=").concat(i,"&email=").concat(n),ue(a,{},"GET").done(e.bind(this)).fail(t.bind(this))):this.validator.runTests(r)},this.init()},gi=function(){var e=jQuery(".container-elements-wts"),t=jQuery("#tray-find-store"),r=jQuery("#geolocate_user"),i=jQuery("#geolocate_address"),n=jQuery("#edit-find-stores-address"),a=jQuery("#find-store-content"),s=null;this.userLocation={latitude:null,longitude:null},this.init=function(){this.geocoder,nt.currentMapEngine()===nt.mapenginetype.GOOGLE?this.geocoder=new google.maps.Geocoder:this.geocoder=new BMap.Geocoder,this.webToShopData=null,this.formHelper=new oe,window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(this.geoLocationSuccess.bind(this),function(){this.handleLocationError(!0)}.bind(this)):r.hide(),this.tray=new B({$el:t,name:"tray-find-store",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.find_store.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.store.favorite-shop",this.onFavoriteShopChange.bind(this)),r.on("click",this.geolocateUser.bind(this)),i.on("click",this.geolocateAddress.bind(this)),a.on("click",'[data-bind="shop-item"]',this.onShopItemClick.bind(this)),a.on("keydown",'[data-bind="shop-item"]',this.adressKeyPressed.bind(this)),n.on("keydown",this.keyPressed.bind(this))},this.setWebToShopData=function(e){this.webToShopData=e},this.onSelectShopClick=function(t){t.preventDefault();var r=t.currentTarget.getAttribute("data-shop-id");APP.pubsub.publish("tray.store.selected-shop",r),e.hide(),this.tray.close()},this.renderShopsList=function(e,r){var i,n,s,o,c,u=[],l=function(e){return e*Math.PI/180};if(void 0!==this.webToShopData)for(var d in this.webToShopData.shops)if(this.webToShopData.shops.hasOwnProperty(d)){if(!r){this.webToShopData.shops[d].calculatedDistance=(i=this.userLocation,void 0,void 0,void 0,s=l((n=this.webToShopData.shops[d]).latitude-i.latitude),o=l(n.longitude-i.longitude),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(l(i.latitude))*Math.cos(l(n.latitude))*Math.sin(o/2)*Math.sin(o/2),2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))*6378137);var h=(this.webToShopData.shops[d].calculatedDistance/1e3).toFixed(2).replace(/\.0+$/,""),p=Drupal.settings.hermes_translations.units.distance.kmValue,f=_.get("currentCountry").toUpperCase();"string"==typeof f&&k.COUNTRY_USING_MILES.includes(f)&&(p=Drupal.settings.hermes_translations.units.distance.milesValue,h=(h*=.621371).toFixed(2).replace(/\.0+$/,""),Number.prototype.toLocaleString&&(h=h.toLocaleString())),this.webToShopData.shops[d].calculatedDistanceHumanReadable=C().render(p,{distance:h})}u.push(this.webToShopData.shops[d])}r||"distance"!==e?u.sort((function(e,t){return e.company<t.company?-1:e.company>t.company?1:0})):u.sort((function(e,t){return e.calculatedDistance<t.calculatedDistance?-1:e.calculatedDistance>t.calculatedDistance?1:0}));for(var m=0;m<u.length;m++)u[m].idx=m+1;var g=C().render(APP.templates.web2shopFindStoreTrayShopEntry,{shops:u,telLabel:Drupal.settings.hermes_translations.ui.cart.telLabel,getDirectionsOnMapText:Drupal.settings.hermes_translations.ui.cart.getDirectionsOnMapText});a.html(g),P.trapFocusInTray(t),jQuery('[data-bind="select-shop"]').on("click",this.onSelectShopClick.bind(this))},this.keyPressed=function(e){e.key===k.ENTER_KEY&&this.geolocateAddress(e)},this.adressKeyPressed=function(e){e.key===k.ENTER_KEY&&this.onShopItemClick(e)},this.geolocateUser=function(e){e.preventDefault(),window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(this.geoLocationSuccess.bind(this),function(){this.handleLocationError(!0)}.bind(this)):this.handleLocationError(!1)},this.geoLocationSuccess=function(e){this.userLocation.latitude=e.coords.latitude,this.userLocation.longitude=e.coords.longitude;var t={location:{lat:e.coords.latitude,lng:e.coords.longitude}};nt.currentMapEngine()===nt.mapenginetype.GOOGLE?this.geocoder.geocode(t,function(e,t){"OK"===t&&e[0]&&e[0].formatted_address?(n.val(e[0].formatted_address),this.renderShopsList("distance")):this.handleLocationError(!0)}.bind(this)):this.geocoder.getLocation(new BMap.Point(e.coords.longitude,e.coords.latitude),function(e){e?(n.val(e.address),this.renderShopsList("distance")):this.handleLocationError(!0)}.bind(this))},this.geolocateAddress=function(e){e.preventDefault();var t=n.val();z();var r={address:t};nt.currentMapEngine()===nt.mapenginetype.GOOGLE?this.geocoder.geocode(r,function(e,t){"OK"===t&&e[0]&&e[0].geometry?(this.userLocation.latitude=e[0].geometry.location.lat(),this.userLocation.longitude=e[0].geometry.location.lng(),this.renderShopsList("distance"),J()):this.handleLocationError(!0)}.bind(this)):(r=t,this.geocoder.getPoint(r,function(e){e?(this.userLocation.latitude=e.lat,this.userLocation.longitude=e.lng,this.renderShopsList("distance"),J()):this.handleLocationError(!0)}.bind(this)))},this.handleLocationError=function(e){var t={message:Drupal.settings.hermes_translations.notification.checkout.unknownError};t.message=e?Drupal.settings.hermes_translations.notification.checkout.unableToLocateUser:Drupal.settings.hermes_translations.notification.checkout.geolocationNotSupported,Y(t);var r=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:r,message:t.message.description})},this.onFavoriteShopChange=function(e,t){this.webToShopData.favorite=t},this.onShopItemClick=function(e){e.preventDefault(),s||(s=APP.trayController.triggerTray({name:"tray-store-details",dontAdd:!0}));var t=jQuery.extend({},this.webToShopData.shops[e.currentTarget.getAttribute("data-id")],{isFavorite:e.currentTarget.getAttribute("data-id")===this.webToShopData.favorite,user:_.get("user")});s.wrapper.setWebToShopData(t),APP.trayController.triggerTray({name:"tray-store-details"})},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close(),e.hide()},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.init()},yi=function(e){function t(e){var t,r={};P.needPhoneLogin()?(r.destination=this.forgottenPasswordPhoneCodeField.value+this.forgottenPasswordLoginPhoneField.value,r.emailOrSms="SMS",r.emailOrPhone="phone number"):(r.destination=this.forgottenPasswordEmailField.value,r.emailOrSms="email",r.emailOrPhone="email address"),t=e.error&&"2330001"===e.error.internal_code?Drupal.settings.hermes_translations.notification.account.loginCodes[2330001]:Drupal.settings.hermes_translations.notification.account.forgotpassword,window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:t.title,messageDescription:t.description},x("tray-forgotpassword","change-password"),q("loader-forgot-password-tray")}function r(){te(),q("loader-forgot-password-tray")}this.init=function(e){this.formID="#tray-forgotpassword",this.$el=jQuery(this.formID),this.wrapper=document.querySelector(".tray-content-wrapper.forgot-password"),this.forgottenPasswordEmailField=this.wrapper.querySelector("#forgotten-password-email"),this.forgottenPasswordLoginPhoneField=this.wrapper.querySelector('input[name="loginphone"]'),this.forgottenPasswordPhoneCodeField=this.wrapper.querySelector('input[name="phonecode"]'),this.form=document.querySelector("#hermes-account-forgot-password-form"),this.honeypot=this.wrapper.querySelector("input[name=confirm_password]"),this.tray=new B({$el:this.$el,name:"tray-forgotpassword",showOverlay:!0}),this.formHelpers=new oe,P.needPhoneLogin()&&(this.smsHelpers=new De,this.smsHelpers.init(this.formID)),this.validator=new _e({inputs:this.form.querySelectorAll("[name]")}),this.bind(),this.setParams(e)},this.setParams=function(e){e&&e.email&&this.setEmail(e.email),e&&e.phoneCode&&this.setPhoneCode(e.phoneCode),e&&e.phoneNumber&&this.setPhoneNumber(e.phoneNumber)},this.bind=function(){APP.pubsub.subscribe("tray.forgotpassword.toggle",this.toggleTray.bind(this)),jQuery(this.forgottenPasswordPhoneCodeField).on("keyup",this.checkPhoneCode),jQuery("#forgotten-password-email").on("blur",this.formHelpers.checkEmailInput.bind(this)).on("keypress",this.formHelpers.reCheckErrorEmailInput.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.form.addEventListener("submit",this.submitForgottenPassword.bind(this))},this.checkPhoneCode=function(){var e=jQuery(this).val();jQuery(this).val(e.split(" ").join("")),-1===e.indexOf("+")&&jQuery(this).val("+".concat(e))},this._onTrayOpen=function(){if(P.needPhoneLogin())this.setPhoneNumber(jQuery('#hermes-account-login-form [name="loginphone"]').val()),this.setPhoneCode(jQuery('#hermes-account-login-form [name="phonecode"]').val());else{var e=jQuery("#login-email").val(),t=jQuery("#account-checkout-email").val();e?this.setEmail(e):t?this.setEmail(t):this.forgottenPasswordEmailField.value=""}this.setHoneyPot(jQuery('#hermes-account-login-form [name="confirm_password"]').val()),q("loader-forgot-password-tray")},this.setEmail=function(e){e&&(this.forgottenPasswordEmailField.value=e)},this.setPhoneCode=function(e){e&&(this.forgottenPasswordPhoneCodeField.value=e)},this.setPhoneNumber=function(e){e&&(this.forgottenPasswordLoginPhoneField.value=e)},this.setHoneyPot=function(e){e&&(this.honeyPot.value=e)},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.submitForgottenPassword=function(e){if(e.preventDefault(),H("loader-forgot-password-tray"),!this.honeypot.value)if(this.form.checkValidity()){var i={};APP.pubsub.publish("tray.overlay.close",e),P.needPhoneLogin()?(i.phonecode=this.forgottenPasswordPhoneCodeField.value,i.phonenumber=this.forgottenPasswordLoginPhoneField.value):i.email=this.forgottenPasswordEmailField.value,i.async=!0,ue("/forgot-password",i).done(t.bind(this)).fail(r)}else this.validator.runTests(e),q("loader-forgot-password-tray")},this.init(e)};function vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(r),!0).forEach((function(t){_i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ki(e,t,r){var i;if(r&&r.match(/^(POST|GET|DELETE)$/)||(r="POST"),t||(t={}),t=bi({from:"drpl"},t),e){t.locale=_.get("currentStore");var n=!!t.async;return n&&delete t.async,i={method:r,url:"".concat(Drupal.settings.hermes_global.url_backjs).concat(e),headers:{"Cache-Control":"max-age=0"}},"POST"===r?(i=bi(bi({},i),{},{data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}}),n&&(i.async=n)):"DELETE"===r?(i.url="".concat(Drupal.settings.hermes_global.url_backjs).concat(e,"?").concat(jQuery.param(t)),i=bi(bi({},i),{},{data:t,xhrFields:{withCredentials:!0}})):i=bi(bi({},i),{},{data:t,xhrFields:{withCredentials:!0}}),jQuery.ajax(i)}}var wi=function(e,t,r,i){var n;return i=i||window.csrfEnabled,r&&r.match(/^(POST|GET|DELETE)$/)||(r="POST"),i?n=ki(e,t,r):(n=jQuery.Deferred(),APP.pubsub.subscribe("csrfToken.headerAdded",(function(){ki(e,t,r).done((function(){var e;(e=n).resolve.apply(e,arguments)})).fail((function(){var e;(e=n).reject.apply(e,arguments)}))}))),n},Pi=function(){var e,t=this,r=jQuery("#tray-gift"),i=jQuery("#tray"),n=jQuery("#giftMessageWrapper"),a=jQuery("#giftMessage"),s=jQuery('[data-bind="gift-lines-info"]'),o=jQuery("#edit-hide-price--2"),c=jQuery("#hermes-checkout-delivery-gift-message-form"),u=c.find("button"),l=jQuery("#edit-gift"),d=!1;function h(){n.addClass("focus")}function p(){n.removeClass("focus")}function f(e){return d=!0,S()?(s.html('<span class="warning">'.concat(C(),"</span>")),u.addClass("disabled")):(s.html(C()),u.removeClass("disabled")),!(C()<=0&&e.key===k.ENTER_KEY)}function m(e){var t=e.originalEvent.clipboardData.getData("text/plain").split("\n").length-1-C();return!(t>0||(s.html(t),u.removeClass("disabled"),0))}function g(e){e.key===k.BACKSPACE_KEY&&C()>=0&&(s.html(C()),u.removeClass("disabled"))}function v(e,t){o[0]&&(o[0].checked=t)}function b(){APP.pubsub.publish("checkout.gift.hidePrice",!!o[0].checked)}function _(){P(),function(e){var t;if(document.createRange){(t=document.createRange()).selectNodeContents(e),t.collapse(!1);var r=window.getSelection();r.removeAllRanges(),r.addRange(t)}else(t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select()}(a[0])}function w(e){e.stopPropagation()}function P(){var e=a[0].getAttribute("placeholder");a.find(".placeholder-text").text()!==e&&a.text()||(a.off("focus",A),a.html(""),window.navigator.userAgent.toLowerCase().includes("firefox")&&a.html("&nbsp;")),y()&&jQuery(".tray-gift").scrollTop(n.offset().top-30)}function A(){a.text().length||(a.html(e),a.on("focus",P),s.html(a.data("giftMaxLines")))}function C(){var e=n[0].clientHeight-a[0].clientHeight;return Math.ceil(e/18)}function S(){return n[0].clientHeight+18<a[0].clientHeight}this.init=function(){this.tray=new B({$el:r,name:"tray-gift",showOverlay:!0,validate:this.trayValidator.bind(this)}),e=jQuery(document.createElement("div")).text(a.attr("placeholder")).addClass("placeholder-text"),a.text(""),A(),this.bind()},this.bind=function(){a.on("input",f.bind(this)),a.on("keyup",g.bind(this)),a.on("paste",m.bind(this)),a.on("focus",h.bind(this)),a.on("blur",A.bind(this),p.bind(this)),a.on("click",w.bind(this)),n.on("click",_.bind(this)),o.on("change",b.bind(this)),c.on("submit",t.onGiftingFormSubmit.bind(this)),APP.pubsub.subscribe("tray.gift.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.gift.setHidePrice",v.bind(this))},this.trayValidator=function(){return new Promise((function(e){d?(Y({message:Drupal.settings.hermes_translations.notification.giftTextConfirmation,messageVariables:Drupal.settings.hermes_translations.notification.giftTextConfirmation.variables,type:"critical"}),jQuery(document).off("click.gifttrayClose").on("click.gifttrayClose",'[data-bind="closeTray"]',(function(){a.html(""),A(),e(!0),J(),jQuery(document).off("click.gifttrayClose",'[data-bind="closeTray"]')})),jQuery(document).off("click.gifttraySave").on("click.gifttraySave",'[data-bind="saveMessage"]',(function(){e(!0),J(),t.onGiftingFormSubmit(),jQuery(document).off("click.gifttraySave",'[data-bind="saveMessage"]')}))):e(!0)}))},t.onGiftingFormSubmit=function(e){var t=a.html().replace(/<\/div>/g,"").replace(/<div>/g,"\n").replace(/<br>/g,"").trim();if(e&&e.preventDefault(),d=!1,APP.pubsub.publish("checkout.gift.setMessage",t),S())return!1;z(),wi("/delivery/gift",{gift:{is_gift:l.is(":checked"),message:t,hide_price:!!o[0].checked,handwritten:!1,gift_card_type:t?"custom":"blank"}}).done(this.closeTray.bind(this)).fail((function(e){console.error(e),J()}))},this.openTray=function(){i.addClass("tray-gift"),this.tray.open()},this.closeTray=function(){J(),this.tray.isOpen&&(this.tray.close(),setTimeout((function(){i.removeClass("tray-gift")}),500))},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.init()},Ai=function(){this.init=function(){if(this.$el=jQuery("#tray-help"),this.tray=new B({$el:this.$el,name:"tray-help",showOverlay:!0}),this.bind(),("cn"===Drupal.settings.hermes_current_country||window.location.host.includes(".cn"))&&(jQuery(".chat-with-us").css({display:"block"}),window.screen.width<k.TABLET_PORTRAIT_WIDTH?(jQuery(".chat-with-us-description-mobile").css({display:"block"}),jQuery(".chat-with-us-description").css({display:"none"}),jQuery(".chat-with-us-qr").css({width:"40%"})):(jQuery(".chat-with-us-description-mobile").css({display:"none"}),jQuery(".chat-with-us-description").css({display:"inline-block"}),jQuery(".chat-with-us-qr").css({width:"30%"})),P.isWechatInApp())){var e=jQuery(".chat-with-us .chat-with-us-qr");e&&e.length>0&&e.css({display:"none"})}("cn_en"===Drupal.settings.hermes_locale||window.location.search.includes("cn_en"))&&jQuery("#chat-with-us-description-hours").css({display:"block",width:"60%"}),jQuery(".call-us a").on("click",(function(e){xt.helpLink(e,"Help","Contact","Call-us")})),jQuery(".help-questions > li > a").on("click",(function(e){xt.helpLink(e,"Help","FAQ")})),jQuery(".tray-help-content-wrapper  > a").on("click",(function(e){xt.helpLink(e,"Help","FAQ","See all")}))},this.bind=function(){APP.pubsub.subscribe("tray.help.toggle",this.toggleTray.bind(this)),APP.pubsub.publish("helpAnalytics.pageview")},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.init()},Ci=function(){this.init=function(){this.$el=jQuery("#tray-locale"),this.$navItems=this.$el.find("[data-action]"),this.$countryNotification=jQuery(".country-notification"),this.$language=jQuery("#tray-locale-1 a.ripple-effect"),this.tray=new B({$el:this.$el,name:"tray-locale",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.locale.toggle",this.toggleTray.bind(this)),this.$navItems.on("click",this.handleSubTray.bind(this)),this.$countryNotification.on("click",this.countryNotification.bind(this)),this.$language.on("click",this.changeCountry.bind(this))},this.handleSubTray=function(e){e.preventDefault();var t=e.currentTarget.dataset.tray.substring(1);this.tray.dispatchEvent(new CustomEvent("genericTrayTrigger",{detail:{name:t}}))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.countryNotification=function(e){e.preventDefault();var t=jQuery(jQuery(e.target).attr("href"))[0].outerHTML;t.length&&Y({type:"semi-critical",inject:!0,message:t})},this.changeCountry=function(e){e.preventDefault(),_.set("changeLanguage",!0),window.location.href=e.currentTarget.href},this.init()};function Si(e){return Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Si(e)}function Ei(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ti=function(){function e(t,r,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===Si(t)){t.tabIndex=-1,this.tree=r,this.groupTreeitem=i,this.domNode=t,this.isExpandable=!1,this.isVisible=!1,this.inGroup=i;for(var n=t.firstElementChild;n;){if("ul"===n.tagName.toLowerCase()){this.isExpandable=!0;break}n=n.nextElementSibling}this.keyCode=Object.freeze({SPACE:k.SPACE_KEYCODE,LEFT:k.LEFT_KEYCODE,UP:k.UP_KEYCODE,RIGHT:k.RIGHT_KEYCODE,DOWN:k.DOWN_KEYCODE,HOME:k.HOME_KEYCODE,END:k.END_KEYCODE})}}var t,r;return t=e,(r=[{key:"init",value:function(){this.domNode.tabIndex=-1,this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("click",this.handleClick.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),jQuery("#tray-nav-shop").on("click",".tray-close",this.hideExpandedMenu.bind(this))}},{key:"isExpanded",value:function(){return!!this.isExpandable&&"true"===this.domNode.getAttribute("aria-expanded")}},{key:"getRightKeyCode",value:function(e){this.isExpandable&&this.isExpanded()?this.tree.setFocusToNextItem(this):this.tree.expandTreeitem(this),e.stopPropagation(),e.preventDefault()}},{key:"getLeftKeyCode",value:function(e){this.isExpandable&&this.isExpanded()&&(this.tree.collapseTreeitem(this),e.stopPropagation(),e.preventDefault()),this.inGroup.isArray&&(this.tree.setFocusToParentItem(this),e.stopPropagation(),e.preventDefault())}},{key:"getSpaceKeyCode",value:function(e){this.isExpandable&&(this.isExpanded()?this.tree.collapseTreeitem(this):this.tree.expandTreeitem(this)),e.stopPropagation(),e.preventDefault()}},{key:"switchKeyCode",value:function(e){switch(e.keyCode){case this.keyCode.SPACE:this.getSpaceKeyCode(e);break;case this.keyCode.UP:this.tree.setFocusToPreviousItem(this),e.stopPropagation(),e.preventDefault();break;case this.keyCode.DOWN:this.tree.setFocusToNextItem(this),e.stopPropagation(),e.preventDefault();break;case this.keyCode.RIGHT:this.getRightKeyCode(e);break;case this.keyCode.LEFT:this.getLeftKeyCode(e);break;case this.keyCode.HOME:this.tree.setFocusToFirstItem(),e.stopPropagation(),e.preventDefault();break;case this.keyCode.END:this.tree.setFocusToLastItem(),e.stopPropagation(),e.preventDefault()}}},{key:"handleKeydown",value:function(e){e.altKey||e.ctrlKey||e.metaKey||(e.shift&&e.keyCode===this.keyCode.SPACE||e.shift&&e.keyCode===this.keyCode.RETURN?(e.stopPropagation(),e.preventDefault()):this.switchKeyCode(e))}},{key:"handleClick",value:function(e){e.target!==this.domNode&&e.target!==this.domNode.firstElementChild||(this.isExpandable&&this.isExpanded()?(this.tree.collapseTreeitem(this),e.stopPropagation()):(this.tree.expandTreeitem(this),e.stopPropagation()),this.domNode.classList.remove("focus"))}},{key:"handleFocus",value:function(){this.domNode.classList.add("focus")}},{key:"handleBlur",value:function(){this.domNode.classList.remove("focus")}},{key:"hideExpandedMenu",value:function(){var e=jQuery("#tray-nav-shop").find(".expanded"),t=jQuery("#tray-nav-shop").find("li").first();e.removeClass("expanded"),e.parent("li").attr("aria-expanded",!1),e.parent("li").attr("tabindex",-1),t.hasClass("has-sub-item")?t.attr("tabindex",0):t.find("a").attr("tabindex",0),this.tree.updateVisibleTreeitems()}}])&&Ei(t.prototype,r),e}();function xi(e){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xi(e)}function Di(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Oi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===xi(t)&&(this.domNode=t,this.treeitems=[],this.firstTreeitem=null,this.lastTreeitem=null)}var t,r;return t=e,(r=[{key:"init",value:function(){this.findTreeitems(this.domNode,this,!1),this.updateVisibleTreeitems(),this.firstTreeitem.domNode.tabIndex=0}},{key:"findTreeitems",value:function(e,t,r){for(var i=e.firstElementChild,n=r;i;)("li"===i.tagName.toLowerCase()&&"span"===i.firstElementChild.tagName.toLowerCase()||"a"===i.tagName.toLowerCase())&&((n=new Ti(i,t,r)).init(),t.treeitems.push(n)),i.firstElementChild&&this.findTreeitems(i,t,n),i=i.nextElementSibling}},{key:"setFocusToFirstItem",value:function(){this.setFocusToItem(this.firstTreeitem)}},{key:"setFocusToLastItem",value:function(){this.setFocusToItem(this.lastTreeitem)}},{key:"setFocusToItem",value:function(e){for(var t=0;t<this.treeitems.length;t++){var r=this.treeitems[t];r===e?(r.domNode.tabIndex=0,r.domNode.focus()):r.domNode.tabIndex=-1}}},{key:"setFocusToNextItem",value:function(e){for(var t=!1,r=this.treeitems.length-1;r>=0;r--){var i=this.treeitems[r];if(i===e)break;i.isVisible&&(t=i)}t&&this.setFocusToItem(t)}},{key:"setFocusToPreviousItem",value:function(e){for(var t=!1,r=0;r<this.treeitems.length;r++){var i=this.treeitems[r];if(i===e)break;i.isVisible&&(t=i)}t&&this.setFocusToItem(t)}},{key:"setFocusToParentItem",value:function(e){e.groupTreeitem&&this.setFocusToItem(e.groupTreeitem)}},{key:"expandTreeitem",value:function(e){if(e.isExpandable){var t=jQuery(e.domNode).parent("ul").find(".expanded"),r=jQuery(e.domNode).children(".sub-nav");t.removeClass("expanded"),t.parent("li").attr("aria-expanded",!1),r.addClass("expanded"),e.domNode.setAttribute("aria-expanded",!0),jQuery(e.domNode).parent(".sub-nav").parent(".has-sub-item").addClass("has-sub-nav"),this.updateVisibleTreeitems()}}},{key:"collapseTreeitem",value:function(e){var t=!1;(t=e.isExpanded()?e:e.groupTreeitem)&&(jQuery(".nav-list-menu").find(".has-sub-nav").removeClass("has-sub-nav"),jQuery(e.domNode).children(".sub-nav").removeClass("expanded"),t.domNode.setAttribute("aria-expanded",!1),this.updateVisibleTreeitems(),this.setFocusToItem(t))}},{key:"updateVisibleTreeitems",value:function(){this.firstTreeitem=this.treeitems[0];for(var e=0;e<this.treeitems.length;e++){var t=this.treeitems[e],r=t.domNode.parentNode;for(t.isVisible=!0;r&&r!==this.domNode;)"false"===r.getAttribute("aria-expanded")&&(t.isVisible=!1),r=r.parentNode;t.isVisible&&(this.lastTreeitem=t)}}}])&&Di(t.prototype,r),e}();function ji(e){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(e)}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Li(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ri=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"init",value:function(){var t=jQuery("#tray-nav-shop");t.find("li:not(.aftersales):not(.editorial) a, li:not(.aftersales):not(.editorial) button").on("click",e.nav),t.find("li.aftersales a").on("click",e.navAftersales),t.find("li.editorial a").on("click",e.navEditorial)}},{key:"navAftersales",value:function(t){e.pushEventNavTrayInstitutional("ShopNavTray","Aftersales",t.srcElement.innerHTML)}},{key:"navEditorial",value:function(t){e.pushEventNavTrayInstitutional("ShopNavTray","Maison_Hermes_footer",t.srcElement.innerHTML)}},{key:"nav",value:function(t){var r=[];if(t&&t.currentTarget&&t.currentTarget.innerText&&t.currentTarget.className){r.push(e.toTitleCase(t.currentTarget.innerText).trim()),jQuery(this).parents("li").each((function(){var t=jQuery(this).find("span:eq(0)").text();""!==t&&r.unshift(e.toTitleCase(t).trim())}));var i=r;"nav-item-institutional"!==t.currentTarget.className&&(i=e.convertCategoryPathListIntoPimCode(r)),e.sendCategoryToAnalytics(i,t),!i||-1!==window.location.pathname.indexOf("search")&&"link-menu"!==t.currentTarget.className||_.set("nav",i.join("/"))}}},{key:"sendCategoryToAnalytics",value:function(t,r){if(t&&t[0]){var i=(u=3,function(e){if(Array.isArray(e))return e}(c=t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(c,u)||function(e,t){if(e){if("string"==typeof e)return Ii(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ii(e,t):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=i[0],a=i[1],s=i[2];if("nav-item-institutional"===r.currentTarget.className){var o=r.currentTarget.getAttribute("data-track");return void e.pushEventNavTrayInstitutional("ShopNavTray","Maison_Hermes_footer",o)}"nav-hero-cta"===r.currentTarget.className?a?e.pushEventNavTray("Lv1_".concat(n),"Lv2_".concat(a),"Lv3_".concat(a,"_EDITO_IMG")):e.pushEventNavTray("Lv1_".concat(n),n?"Lv2_".concat(n,"_EDITO_IMG"):null,null):e.pushEventNavTray("Lv1_".concat(n),a?"Lv2_".concat(a):null,s?"Lv3_".concat(s):null)}var c,u}},{key:"toTitleCase",value:function(e){if(e)return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}},{key:"convertCategoryPathListIntoPimCode",value:function(t){var r=Drupal.settings.hermes_categories?Drupal.settings.hermes_categories:null;null!==r&&"object"===ji(r)&&(r=Object.keys(r).map((function(e){return r[e]})));var i=e.checkCategoryPim(r,t);return i.length?i:t}},{key:"checkCategoryPim",value:function(e,t){if(null!==e&&e.length&&t[0]&&e[0].subcategories){var r=[];return e[0].subcategories.forEach((function(i){i.name.toUpperCase()===t[0].toUpperCase()&&(r.push(i.pim_code),e=i)})),t[1]&&e.subcategories.forEach((function(i){i.name.toUpperCase()===t[1].toUpperCase()&&(r.push(i.pim_code),e=i)})),t[2]&&e.subcategories.forEach((function(e){e.name.toUpperCase()===t[2].toUpperCase()&&r.push(e.pim_code)})),r}}},{key:"pushEventNavTray",value:function(e,t,r){dataLayer.push({event:"uaevent",eventcategory:"ShopNavTray",eventaction:e,eventlabel:t,event_lv3:r})}},{key:"pushEventNavTrayInstitutional",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";dataLayer.push({event:"uaevent",eventcategory:e,eventaction:t||"",eventlabel:r,eventvalue:i})}}],null&&Li(t.prototype,null),r&&Li(t,r),e}(),Mi=function(){this.init=function(){this.$el=jQuery("#tray-nav-shop"),this.tray=new B({$el:this.$el,name:"tray-nav-shop",showOverlay:!0});for(var e=document.querySelectorAll('[role="tree"]'),t=0;t<e.length;t++)new Oi(e[t]).init();Ri.init(),this.bind()},this.bind=function(){var e=this;APP.pubsub.subscribe("tray.navigation.toggle",this.toggleTray.bind(this)),jQuery("[nav-tray-trigger]").on("click",(function(t){return e.toggleOtherSideTray(t)}))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.toggleOtherSideTray=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("nav-tray-trigger"),r=t.replace("-",".")+".toggle";this.tray.animationSpeed=0,this.tray.close(),this.tray.animationSpeed=.35,APP.trayController.triggerTray({name:t,dontAdd:!0}),APP.pubsub.publish(r),jQuery("[data-tray-trigger='".concat(t,"']")).first().addClass("tray-trigger-origin")},this.init()},Fi=function(){var e=this;function t(t){if(t.user||P.isChina()){this.formHelpers.clearForm(this.$el.find("form"));var r={message:Drupal.settings.hermes_translations.notification.account.changedPasswordSuccess,type:"critical",messageVariables:{}};jQuery.extend(r.messageVariables,Drupal.settings.hermes_translations.notification.account.changedPasswordSuccess.variables),window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:r.message.title,messageDescription:r.message.description},x("tray-create-password","change-password"),_.set("sessionNeedsRefresh",!0),APP.pubsub.publish("account.checkSession")}else te(),e.toggleTray();q("loader-forgot-password-tray")}function r(e,t){var r;t&&"critical"===t?(r={message:Drupal.settings.hermes_translations.notification.account.passwordCases[e],messageVariables:{},type:"critical"},jQuery.extend(r.messageVariables,Drupal.settings.hermes_translations.notification.account.passwordCases[e].variables)):r={message:Drupal.settings.hermes_translations.notification.account.passwordCases[e],messageVariables:{}},window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:r.message.title,messageDescription:r.message.description}}function i(){te(),q("loader-forgot-password-tray")}this.init=function(){var e=this;this.$el=jQuery("#tray-create-password"),this.$notification=jQuery(".tray-notification-message"),this.$form=this.$el.find("form"),this.$input=this.$el.find("#create-new-password"),this.formHelpers=new oe,this.tray=new B({$el:this.$el,name:"tray-create-password",showOverlay:!0}),this.validator=new _e({inputs:this.$form[0].querySelectorAll("[name]")}),this.getStateKeyHash().done((function(t){t.error?(e.handleError(t),e.showForgotPasswordTray(),e.$notification.on("click",".js-try-newhash, .js-try-again",e.notificationTryNewReset.bind(e))):t.user?(e.bind(),e.tray.open()):te()})).fail(i);var t=document.getElementById("strength-level");if(t){this.passStrengthMeter();var r=document.getElementById("strength-level-span"),n=document.getElementById("create-new-password");P.pwdStrengthScreenReader(t,r,n).observe(t,{attributes:!0})}else this.$input.pwdCriteria()},this.bind=function(){this.$el.find(".show-password").on("click",this.formHelpers.showPasswordMask.bind(this)),this.$form.on("submit",this.saveNewPassword.bind(this)),APP.pubsub.subscribe("tray.password.toggle",this.toggleTray.bind(this)),this.$notification.on("click",".js-try-newhash, .js-try-again",this.notificationTryNewReset.bind(this)),this.$notification.on("click",".js-signin",this.notificationSignIn.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.passStrengthMeter=function(){this.$input.pwdMeter({minLength:8})},this.saveNewPassword=function(e){if(e.preventDefault(),H("loader-forgot-password-tray"),this.$form[0].checkValidity()){var r={pass:this.$input.val(),hash:Drupal.settings.hermes_account.reset_password_hash};ue("/reset-password",r).done(t.bind(this)).fail(i)}else this.validator.runTests(e),q("loader-forgot-password-tray")},this.getStateKeyHash=function(){var e={hash:Drupal.settings.hermes_account.reset_password_hash};return ue("/check-hash-validity",e,"GET")},this.showForgotPasswordTray=function(){this.toggleTray(),x("tray-create-password","change-password")},this.handleError=function(e){var t=e.error.internal_code;switch(t){case k.ERRORCODE.expiredHash:case k.ERRORCODE.wrongEmailPassword:r(t,"critical");break;case k.ERRORCODE.hashNotFound:r(t);break;default:te()}},this.notificationTryNewReset=function(e){e.preventDefault(),APP.trayController.triggerTray({name:"tray-forgotpassword",dontAdd:!0}),APP.pubsub.publish("tray.forgotpassword.toggle")},this.notificationSignIn=function(e){e.preventDefault(),J(),APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),APP.pubsub.publish("tray.account.toggle")},this.init()},Ni=function(e){var t,r="".concat(Drupal.settings.hermes_global.url_ecp,"/invoice?locale=LOCALE&hash=");Drupal.settings.hermes_locale,this.init=function(){t=new Ir,this.$el=jQuery("#tray-order"),this.$contentWrap=this.$el.find("#order-content"),(e.data||e.order)&&(this.orderData=e.order||e.data.order),(e.data||e.shops)&&(this.orderData.shops=e.shops||e.data.shops),this.tray=new B({$el:this.$el,name:"tray-order",showOverlay:!0}),e.email&&e.ref&&this.getOrderInfo(e.ref,e.email);var r=P.findGetParameter("order_id",window.location.search);r&&(APP.pubsub.subscribe("account.loggedin.CheckDone",this.checkUserAndLoadOrder.bind(this,r)),APP.pubsub.subscribe("account.loggedin.DOM",this.checkUserAndLoadOrder.bind(this,r))),this.bind(),this.orderData&&this.render()},this.checkUserAndLoadOrder=function(e){if(!_.hasSessionStorage()||!_.get("checkUserSessionToken"))return _.set("close-account",!0),APP.trayController.removeLock(this.tray.instanceId),void APP.trayController.triggerTray({name:"tray-account",forceOpen:!0});this.getOrderInfo(e)},this.getOrderInfo=function(e,t){var r={};r.order_id=e,t&&(r.email=t),z(),ue("/order",r,"GET").fail((function(){te()})).then(this.updateDom.bind(this))},this.updateDom=function(e){e.order?(J(),this.orderData=e.order,this.render()):(this.tray.close(),this.errorHandling(e))},this.errorHandling=function(e,t){if(e&&e.error){var r=Drupal.settings.hermes_translations.notification.order[404];if((t=t||{}).message=r,r)return void Y(t)}te()},this.bind=function(){APP.pubsub.subscribe("order.details.render",function(e,t){this.orderData=t.order,this.orderData.shops=t.shops,this.render()}.bind(this)),this.$el.on("click","a.print-invoice",function(){APP.pubsub.publish("analytics-print-invoice",{mode:this.orderData.mode})}.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.render=function(){var e=jQuery.extend({},this.orderData,Drupal.settings.hermes_translations.ui),i=APP.CURRENCY_MAP[this.orderData.store_code];if(e.noTaxLabel=!0,e.shipping_address.name=T(this.orderData.shipping_address),e.billing_address.name=T(this.orderData.billing_address),e.billing_address.isHKorMO="HK"===e.billing_address.country_id||"MO"===e.billing_address.country_id,e.shipping_address.isHKorMO="HK"===e.shipping_address.country_id||"MO"===e.shipping_address.country_id,P.isChina()&&(e.billing_address.isChinaZH="cn_zh"===_.get("currentStore"),e.shipping_address.isChinaZH="cn_zh"===_.get("currentStore")),P.isTaiwan()?(e.shipping_address.address=t.getAddress(this.orderData.shipping_address," "),e.billing_address.address=t.getAddress(this.orderData.billing_address," ")):(e.shipping_address.address=t.getAddress(this.orderData.shipping_address,"<br>"),e.billing_address.address=t.getAddress(this.orderData.billing_address,"<br>")),this.orderData.webtoshop&&this.orderData.shops){var n=this.orderData.shops[this.orderData.webtoshop.shop_id];e.webtoshop.shop_name=n.company}e.is_gift=!!(e.gift&&e.gift.gift_card_type&&e.gift.gift_card_type.match(/^(custom|blank)$/i)),e.is_gift&&e.gift.message&&(e.gift.message=e.gift.message.replace(/\n/g,"<br>")),"adyen_hpp_paypal"===this.orderData.payment.method||"mercury_hpp_adyen_paypal"===this.orderData.payment.method?(e.payment.isPaypal=!0,e.payment.type="paypal"):(e.payment.isPaypal=null,e.payment.type=this.orderData.payment.cc_type),Drupal.settings.hermes_translations.ui.order.card_type_alt_tags[e.payment.type]?e.payment.type_label=Drupal.settings.hermes_translations.ui.order.card_type_alt_tags[e.payment.type]:e.payment.type_label=e.payment.type?e.payment.type.charAt(0).toUpperCase()+e.payment.type.slice(1):"",e.order.collection_by_label=Drupal.settings.hermes_translations.ui.order.collection_by_text,e.payment.cc_last4=this.orderData.payment.cc_last4,e.payment.cc_exp_month=this.orderData.payment.cc_exp_month,e.payment.cc_exp_year=this.orderData.payment.cc_exp_year,e.payment.cc_owner=this.orderData.payment.cc_owner,e.waitingInfo=this.orderData.payment.cc_last4?null:Drupal.settings.hermes_translations.ui.order.waiting_message_payment,e.created_at=Lr(this.orderData.created_at),"cn"===Drupal.settings.hermes_current_country?e.print=Drupal.settings.hermes_translations.ui.print_cn:e.print=Drupal.settings.hermes_translations.ui.print,e.downloadFapiao=Drupal.settings.hermes_translations.ui.downloadFapiao,e.generateFapiao=Drupal.settings.hermes_translations.ui.generateFapiao,e.generateFapiaoExpired=C().render(Drupal.settings.hermes_translations.ui.generateFapiaoExpired.title,{link1:Drupal.settings.hermes_translations.ui.generateFapiaoExpired.link1}),e.cartItems=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&e.items){var n,a;(t=jQuery.extend({},e,Drupal.settings.hermes_translations.ui.cart)).locale=Drupal.settings.hermes_url_locale,e.items&&e.items[0]&&e.items[0].options&&e.items[0].options.perso_info&&(e.items[0].options.perso_info.perso_product_type&&(t.is_perso_leather=fr.includes(e.items[0].options.perso_info.perso_product_type),t.is_perso_smlg=e.items[0].options.perso_info.perso_product_type===hr,t.is_perso_beltkit=e.items[0].options.perso_info.perso_product_type===pr,t.is_perso_beltkit&&(e.items[0].set_items.forEach((function(e){"U003P"===e.product_code?a=e:n=e})),n&&(t.buckle_title=n.name,t.buckle_color=n.color,t.buckle_sku=n.sku),a&&(t.strap_title=a.name,t.strap_sku=a.sku),t.strap_size=e.items[0].options.perso_info.personalization_info_properties.size)),e.items[0].options.perso_info.personalization_info_properties&&e.items[0].options.perso_info.personalization_info_properties.font&&(t.font_class=e.items[0].options.perso_info.personalization_info_properties.font.toLowerCase()));for(var s=function(n){var a=e.items[n];a.qty>1&&(a.several_quantities=!0);var s={metals:a.prop65,url_prop65:'<a href="https://www.p65warnings.ca.gov/" target="_blank">www.P65Warnings.ca.gov</a>'};a.prop65_information=!!a.prop65&&C().render(Drupal.settings.hermes_translations.ui.cart.prop65,s),a.final_price=mr(a.final_price,2,t),a.max_reached=a.qty>=a.max_sale_qty,!i&&a.hasOwnProperty("set_items")&&a.set_items.forEach((function(e){for(var t=1;t<e.qty/a.qty;t++)a.set_items.push(e)})),a.stock&&a.stock.is_less_than_qty&&(a.max_reached=!0,a.stock&&a.stock.is_empty?a.stock_message=Drupal.settings.hermes_translations.ui.cart.error_no_stock:a.stock_message=Drupal.settings.hermes_translations.ui.cart.error_insufficient_stock),!r||r.internal_code!==k.ERRORCODE.notInStock&&r.internal_code!==k.ERRORCODE.outOfStock||a.sku!==r.item||(a.stock_message=Drupal.settings.hermes_translations.ui.cart.error_no_stock,a.qty_increments>1&&(a.stock_message=Drupal.settings.hermes_translations.ui.cart.error_not_enough_stock)),a.sku_trim=a.sku.replace(/\s/g,"")},o=0;o<e.items.length;o++)s(o);return yr(e),C().render(APP.templates.cartItems,t)}}(this.orderData),e.status=null===this.orderData.status?"":this.orderData.status,["au","ch","cn","no"].includes(Drupal.settings.hermes_translations.ui.order.local_country)&&(e.goodcountry=!0),e.noreturn=Drupal.settings.hermes_translations.ui.order.noreturnorder,e.customer_service=Drupal.settings.hermes_translations.ui.order.customer_service,e.returnDate=this.getReturnDate(e),e.returnDate&&(e.status=C().render(e.status,e)),this.isCountryWithNoDecimal(_.get("currentStore").substr(0,2))||(i.precision=2),e.orderSummary=this.getSummary(e,i),e.invoiceDownloadLink=r.replace("LOCALE",_.get("currentStore"))+this.orderData.order_id_hash,P.isChina()&&(e.order.billing_address_subtitle=Drupal.settings.hermes_translations.ui.order.billing_address_subtitle_cn),P.isWechatInApp()&&(e.weChatInApp=!0),e.isKorea="kr_ko"===Drupal.settings.hermes_locale,e.isTaiwan="tw_zh"===Drupal.settings.hermes_locale,e.isChinaEN="cn_en"===Drupal.settings.hermes_locale,e.isChina=e.isChinaEN||"cn_zh"===Drupal.settings.hermes_locale,e.japanOrder=P.isJapan(),e.isKorea=P.isKorea(),e.isTaiwan=P.isTaiwan(),e.desired_date_shipment=Drupal.settings.hermes_translations.ui.order.desired_date_shipment,e.displaySama=k.JAPAN.toUpperCase()===this.orderData.shipping_address.country_id,e.displayPrefix=k.JAPAN.toUpperCase()!==this.orderData.shipping_address.country_id,e.order.shipping_duration=this.orderData.shipping_duration,APP.pubsub.publish("order-details-renderer"),this.$contentWrap.html(C().render(APP.templates.orderDetails,e))},this.getReturnDate=function(e){var t=null;if(e.shipment.delivered_at&&(t=Lr(e.shipment.delivered_at)),e.refund){var r=e.refund[e.refund.length-1];t=Lr(r.return_date)}if(e.exchange){var i=e.exchange[e.exchange.length-1];t=Lr(i.return_date)}return t},this.getSummary=function(e,t){var r=e.shipping_address.country_id||Drupal.settings.hermes_locale,i=Object.keys(e.show_tax).find((function(e){return e.match(new RegExp("^".concat(r),"i"))})),n=e.show_tax_message&&e.show_tax_message[r.toLowerCase()],a=Object.assign({},t),s=e.taxes_covered?"taxes_covered":"";gr(e,a);var o={subtotal_label:Drupal.settings.hermes_translations.ui.cart.subtotal_label,subtotal:Pt().formatMoney(e.subtotal,a),taxes_label:Drupal.settings.hermes_translations.ui.cart.taxes_label,tax_amount:Pt().formatMoney(e.tax_amount,a),shipping_label:Drupal.settings.hermes_translations.ui.cart.shipping_label,shipping_amount:Pt().formatMoney(e.shipping_amount,a),total_label:Drupal.settings.hermes_translations.ui.cart.total_label,total:Pt().formatMoney(e.grand_total,a),show_tax:e.show_tax[i],taxMessage:Drupal.settings.hermes_translations.ui.checkout[n],display_taxe_included:!P.isJapan(),taxes_covered_label:Drupal.settings.hermes_translations.ui.checkout[s]};return C().render(APP.templates.orderDetailsSummary,o)},this.isCountryWithNoDecimal=function(e){return e===k.JAPAN||e===k.HK||e===k.MACAO||e===k.KOREA||e===k.SAUDI||e===k.EMIRATES},this.init()},Qi=function(e){if(void 0===e.status_id&&void 0===e.status)return"";var t,r=void 0===e.status_id?e.status.toLowerCase():e.status_id.toLowerCase();switch(r=r.replace(/\.$/,"")){case"validated":t=e.exchange||e.refund?Drupal.settings.hermes_translations.ui.order.status.return_approved:Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"available_in_shop":t=e.exchange||e.refund||!e.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.available_in_store;break;case"canceled":t=e.exchange||e.refund?Drupal.settings.hermes_translations.ui.order.status.return_cancelled:Drupal.settings.hermes_translations.ui.order.status.cancelled;break;case"cancel_asked":t=e.exchange||e.refund?"":Drupal.settings.hermes_translations.ui.order.status.cancel_asked;break;default:t="";break;case"retrieved_in_shop":t=e.exchange||e.refund||!e.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.collected_in_store;break;case"complete":t=e.exchange||e.refund||e.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.complete;break;case"credit_ko":case"credit_ok":t=e.refund?Drupal.settings.hermes_translations.ui.order.status.return_approved:e.exchange||e.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"credit_refunded":t=e.refund?Drupal.settings.hermes_translations.ui.order.status.refunded:"";break;case"pending":case"pending_payment":case"pending_review":case"payment_review":t=e.exchange||e.refund?"":Drupal.settings.hermes_translations.ui.order.status.pending_payment;break;case"debit_ok":case"paypal_canceled_reversal":case"paypal_reversed":case"pending_customization":case"waiting_capture":case"debit_ko":case"to_prepare":case"waiting_supply":case"preparation_asked":case"prepared":case"being_prepared":case"received_by_warehouse":case"carrier_error":case"supply_cancel_asked":case"supply_cancel_confirmed":t=e.exchange||e.refund?"":Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"total_exchange":case"partial_exchange":t=e.exchange||e.refund?"":Drupal.settings.hermes_translations.ui.order.status.exchanged;break;case"invoiced":case"pending_packing":t=e.exchange||e.refund?"":e.webtoshop?Drupal.settings.hermes_translations.ui.order.status.preparing_order:Drupal.settings.hermes_translations.ui.order.status.shipping_order;break;case"holded":t=e.exchange||e.refund?Drupal.settings.hermes_translations.ui.order.status.return_pending_approval:Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"processing":t=e.exchange||e.refund?"":Drupal.settings.hermes_translations.ui.order.status.approving_order;break;case"received":t=e.exchange||e.refund?Drupal.settings.hermes_translations.ui.order.status.return_pending_approval:Drupal.settings.hermes_translations.ui.order.status.delivered_order;break;case"total_refund":t=e.exchange?"":Drupal.settings.hermes_translations.ui.order.status.refunded;break;case"partial_refund":t=e.exchange||e.refund?"":Drupal.settings.hermes_translations.ui.order.status.refunded;break;case"out_for_delivery":t=e.exchange||e.refund?"":e.webtoshop?Drupal.settings.hermes_translations.ui.order.status.preparing_order:Drupal.settings.hermes_translations.ui.order.status.shipped_order;break;case"fraud":case"waiting_authorization":t=e.exchange||e.refund||e.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.approving_order;break;case"waiting_refund":t=e.exchange||e.refund?Drupal.settings.hermes_translations.ui.order.status.return_pending_approval:e.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"approved":t=Drupal.settings.hermes_translations.ui.order.status.return_approved;break;case"pending approval":t=Drupal.settings.hermes_translations.ui.order.status.return_pending_approval;break;case"pending shipping":t=Drupal.settings.hermes_translations.ui.order.status.return_pending_shipping}return t};function $i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ui=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=jQuery("#tray-order-list"),this.$signIn=this.$el.find(".js-sign-in-cta"),this.$helpCopy=this.$el.find(".orders-help-copy"),this.$ordersTitle=this.$el.find("#title-tray-order-list"),this.tray=new B({$el:this.$el,name:"tray-order-list",showOverlay:!0}),this.GET_ORDERS_URL="/orders",this.GET_EXCHANGE_RETURN_DETAILS="/exchange-return/request",this.ANIMATION_SPEED=.35,this.EASE=window.Power2.easeInOut,this.reloadOrders=!1,this.newData=[],this.trayExchangeReturnRequest=null,this.$orderListContent=jQuery(".order-list-content"),this.$showOrders=jQuery(".js-show-all-orders"),this.orderPagination={page:1,limit:3},this.bind(),this.getOrders()}var t,r;return t=e,(r=[{key:"bind",value:function(){var e=this;this.$el.on("click",".js-to-order-details",this.showOrderDetails.bind(this)),this.$el.on("click",".js-show-all-orders",this.getOrders.bind(this)),this.$el.on("click",".js-lets-shop",this.letsShop.bind(this)),this.$signIn.on("click",this.$el,this.pushAccountTray.bind(this)),this.$el.on("click","[data-bind=exchange-order]",this.onExchangeOrderNodeClick.bind(this)),this.$el.on("click","[data-bind=refund-order]",this.onRefundOrderNodeClick.bind(this)),this.$el.on("click","[data-bind=exchange-return-details]",this.onExchangeReturnShowDetailsClick.bind(this)),this.tray.addEventListener("open",this.checkNewDataRequired.bind(this)),this.tray.addEventListener("animateLastTrayFromStackComplete",this.showFirstOrders.bind(this)),APP.pubsub.subscribe("return.finalisation.completed",this.invalidateOrders.bind(this)),APP.pubsub.subscribe("get.orders.call",this.getOrdersCall.bind(this)),APP.pubsub.subscribe("order-details-angular",(function(t,r){e.sendOrderDataToAngular(r)})),APP.pubsub.subscribe("request-return-angular",(function(t,r){APP.pubsub.publish("analytics-open-exchange-return-request",{mode:r.mode,order_id:e.newData[r.position].increment_id}),e.sendReturnRequestDataToAngular(r)})),APP.pubsub.subscribe("return-details-angular",(function(t,r){APP.pubsub.publish("analytics-open-exchange-return-details",{order_id:r.orderId,return_type:r.returnType}),ue(e.GET_EXCHANGE_RETURN_DETAILS,{order_id:r.orderId,return_id:r.exchangeReturnOrderId},"GET").fail((function(e){te(),console.warn("Return/Exchange details could not be retrieved from the API"),console.warn(e)})).then((function(t){e.sendReturnDetailsDataToAngular(t)}))}))}},{key:"showFirstOrders",value:function(){this.$orderListContent.height("").find(".order-item").each((function(e){e<3&&jQuery(this).outerHeight(!0)})),this.$orderListContent.find(".order-item").length>2&&this.$showOrders.show()}},{key:"checkNewDataRequired",value:function(e){e.preventDefault(),this.reloadOrders&&(this.getOrders(),this.reloadOrders=!1)}},{key:"invalidateOrders",value:function(){this.reloadOrders=!0}},{key:"getOrdersCall",value:function(){var e;this.newData=[],this.orderPagination={page:1,limit:3},e=this.GET_ORDERS_URL,e+="?page="+this.orderPagination.page,e+="&limit="+this.orderPagination.limit,ue(e,{},"GET").done(this.successGet.bind(this)).fail(this.errorHandling.bind(this))}},{key:"pushAccountTray",value:function(e){e.preventDefault(),APP.trayController._trayStack=[APP.trayController._trayStack[0],APP.trayController._trayStack.length-1],this.tray.back()}},{key:"getOrders",value:function(){var e;z(),e=this.GET_ORDERS_URL,e+="?page="+this.orderPagination.page,e+="&limit="+this.orderPagination.limit,ue(e,{},"GET").done(this.successGet.bind(this)).fail(this.errorHandling.bind(this))}},{key:"successGet",value:function(e){J(),e.orders?0===e.orders.items.length?this.noOrders():this.updateDOM("event",e):this.errorHandling(e)}},{key:"updateDOM",value:function(e,t){var r=t.orders.items,i=t.orders.total;_.set("total-orders",i),r&&i<4?(this.newData=[],this.handleOrdersListRender(t.orders,{orders:this.newData})):(this.handleOrdersListRender(t.orders,{orders:this.newData,order_number:Drupal.settings.hermes_translations.ui.order.order_number}),this.showFirstOrders()),this.newData.length<i?this.orderPagination.page++:this.$showOrders.hide(),APP.pubsub.publish("order-list-renderer")}},{key:"handleOrdersListRender",value:function(e,t){var r;this.$el.addClass("orders-list");for(var i=0;i<e.items.length;i++){var n=e.items[i];if(n.created_at=Lr(n.created_at),("out_for_delivery"===n.status_id&&!n.webtoshop||"received"===n.status_id)&&(n.trackOrder=!0),n.returns&&n.returns[0]&&(n.return_label=Qi(n.returns[0])),n.refund)for(r=0;r<n.refund.length;r++)n.refund[r].increment_id=n.increment_id;else if(n.exchange)for(r=0;r<n.exchange.length;r++)n.exchange[r].increment_id=n.increment_id;this.getStatus(n),this.getPrintInvoice(n),n.track_url=n.shipment.tracking_url?C().render(n.shipment.tracking_url,n.shipment):null,this.newData.push(n)}this.$orderListContent.html(C().render(APP.templates.orderList,t)),1===parseInt(e.total,10)?(this.$helpCopy.html(C().render(Drupal.settings.hermes_translations.ui.order.has_orders_list_help_copy_singular,{order_count:e.total})),this.$ordersTitle.html(C().render(Drupal.settings.hermes_translations.ui.order.has_orders_title_singular))):(this.$helpCopy.html(C().render(Drupal.settings.hermes_translations.ui.order.has_orders_list_help_copy_plural,{order_count:e.total.trim()})),this.$ordersTitle.html(C().render(Drupal.settings.hermes_translations.ui.order.has_orders_title_plural)))}},{key:"getPrintInvoice",value:function(e){e.status===Drupal.settings.hermes_translations.ui.order.status.preparing_order?e.is_invoiced=!1:(e.refund||e.exchange)&&(e.is_invoiced=!0),e.is_invoiced&&("cn"===Drupal.settings.hermes_current_country?e.print=Drupal.settings.hermes_translations.ui.print_cn:e.print=Drupal.settings.hermes_translations.ui.print)}},{key:"getStatus",value:function(e){if(e.refund||e.exchange)return e.status=null,e;e.status=Qi(e),e.shipment.delivered_at?e.returnDate=Lr(e.shipment.delivered_at):e.shipment.updated_at&&(e.returnDate=Lr(e.shipment.updated_at)),e.returnDate&&(e.status=C().render(e.status,e))}},{key:"noOrders",value:function(){this.$helpCopy.html(C().render(Drupal.settings.hermes_translations.ui.order.no_orders_list_help_copy,{link:Drupal.settings.hermes_translations.ui.order.letsshop})),this.$helpCopy.show(),this.$ordersTitle.html(C().render(Drupal.settings.hermes_translations.ui.order.no_orders_title)),this.$orderListContent.empty()}},{key:"pushNextTray",value:function(e){APP.trayController.triggerTray(e)}},{key:"errorHandling",value:function(e){e.error.internal_code===k.ERRORCODE.inactivity?APP.pubsub.publish("account.logout","tray-account"):te()}},{key:"sendOrderDataToAngular",value:function(e){je.hideScrollbar();var t=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-order",trayData:this.newData[e]}});window.parent.dispatchEvent(t)}},{key:"sendReturnRequestDataToAngular",value:function(e){je.hideScrollbar();var t=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-request-exchange-return",trayData:{mode:e.mode,order:this.newData[e.position]}}});window.parent.dispatchEvent(t)}},{key:"sendReturnDetailsDataToAngular",value:function(e){je.hideScrollbar();var t=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-exchange-return-details",trayData:e}});window.parent.dispatchEvent(t)}},{key:"showOrderDetails",value:function(e,t){var r,i;e.preventDefault(),t?(i=t,this.newData.forEach((function(e){e.increment_id===i.increment_id&&(i=jQuery.extend({},i,e))}))):(r=jQuery(e.currentTarget).parent().prevAll().length,i=this.newData[r]),i.fromList=!0,this.pushNextTray({name:"tray-order",order:i}),APP.pubsub.publish("order.details.render",{order:i})}},{key:"onExchangeOrderNodeClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.trayExchangeReturnRequest||(this.trayExchangeReturnRequest=APP.trayController.getTray({name:"tray-request-return"}).wrapper),this.trayExchangeReturnRequest.setNewTrayData({config:{mode:"exchange",orderNumber:e.currentTarget.getAttribute("data-order-id")}}),APP.pubsub.publish("analytics-open-exchange-return-request",{mode:"exchange",order_id:e.currentTarget.getAttribute("data-order-id")}),this.pushNextTray({name:"tray-request-return"})}},{key:"onRefundOrderNodeClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.trayExchangeReturnRequest||(this.trayExchangeReturnRequest=APP.trayController.getTray({name:"tray-request-return"}).wrapper),this.trayExchangeReturnRequest.setNewTrayData({config:{mode:"refund",orderNumber:e.currentTarget.getAttribute("data-order-id")}}),APP.pubsub.publish("analytics-open-exchange-return-request",{mode:"refund",order_id:e.currentTarget.getAttribute("data-order-id")}),this.pushNextTray({name:"tray-request-return"})}},{key:"onExchangeReturnShowDetailsClick",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var r=parseInt(e.currentTarget.getAttribute("data-return-exchange-id"),10),i=e.currentTarget.getAttribute("data-order-id"),n=e.currentTarget.getAttribute("data-return-type");APP.pubsub.publish("analytics-open-exchange-return-details",{order_id:i,return_type:n}),ie(!0),ue(this.GET_EXCHANGE_RETURN_DETAILS,{order_id:i,return_id:r},"GET").fail((function(e){te(),console.warn("Return/Exchange details could not be retrieved from the API"),console.warn(e)})).then((function(e){t.pushNextTray({name:"tray-exchange-return-details"}),APP.pubsub.publish("exchangeReturnDetails.newTrayData",e)}))}},{key:"letsShop",value:function(e){e.preventDefault(),window.parent.location.href.split(Drupal.settings.hermes_url_locale)[1].length>0?window.parent.location.href=window.parent.location.origin+"/"+Drupal.settings.hermes_url_locale:this.tray.close()}}])&&$i(t.prototype,r),e}(),Bi=r(2702),Vi=r.n(Bi);function zi(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Hi=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blocDescription=t,this.descriptionSelector=r}var t,r;return t=e,(r=[{key:"splitDescription",value:function(){var e=this.blocDescription;if(e&&e.length){var t={intro:e[0],remaining_copy:e[1]},r=C().render(APP.templates.productDescriptionSplitter,t);this.descriptionSelector.html(r),jQuery(".read-more-toggle-description").on("click",this.toggleReadMore)}}},{key:"toggleReadMore",value:function(){var e=jQuery("#remaining-description-set"),t=jQuery("#read-more-description-set");"none"===e.css("display")?(e.css("display","inline"),t.hide(),e.show()):(e.hide(),t.show())}}])&&zi(t.prototype,r),e}();function qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var Ki=k.EZ_PUBLISH_COUNTRY_MAPPING,Wi=null,Yi=null;function Xi(e,t){an(Wi,t,null,null,!0,!0)}function Zi(e){e.attr("tabindex",0),e.focus(),e.attr("tabindex",-1)}function Ji(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o="?locale=",c=Drupal.settings.hermes_locale,u=Drupal.settings.hermes_global.url_backjs,l="&productsku=",d=ot.productLocatorStockRetailWS(),h="stock-by-store"===d?"&storeid=":"",p="stock-by-store"===d&&t?t.filter(Boolean).join(";"):"",f=e.sku.replace(/ /g,"-"),m=encodeURIComponent(p),g="".concat(u,"/").concat(d).concat(o).concat(c).concat(l).concat(f).concat(h).concat(m),y=qi(i,2),v=y[0],b=y[1];a&&ot.enableDisableFindInStoreLoader(),Yi=jQuery.ajax({url:g,method:"GET",xhrFields:{withCredentials:!0},async:!1,success:function(t){var i=t.inventoryDetailsByStore[0].stores;v(i,e,r,n,s)},error:function(t,i){ot.enableDisableFindInStoreLoader(!1),"abort"!==i&&b(r,e,s)}})}function en(e,t){if(null===Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts){var r=Drupal.settings.hermes_global.url_backjs,i=Drupal.settings.hermes_locale,n={data:{presentabilities:[]}},a={parameters:{skus:e,country_code:i.substr(0,i.indexOf("_")).toUpperCase()}};jQuery.ajax({type:"POST",url:r+"/stock-presentability",headers:{"Content-Type":"application/json"},data:JSON.stringify(a),crossDomain:!0,xhrFields:{withCredentials:!0},async:!1,success:function(r){tn(r,e,t)},error:function(){tn(n,e,t)}})}else ot.refreshAllButtons(t)}function tn(e,t,r){ot.refreshStockRetailPresentability(e,t),ot.refreshAllButtons(r)}function rn(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r)return t.storesStock=[],t.requestFrom="page_product",t.availabilityLimit=Drupal.settings.product_locator_configuration.availabilityLimit,t.proximityMsgMaxKm=Drupal.settings.product_locator_configuration.proximityMsgMaxKm,t.mapActive=Drupal.settings.product_locator_configuration.mapActive,t.technicalErrorForAngular=!0,void APP.pubsub.publish("tray.product.locator.toggle",t);APP.pubsub.publish("tray.product.locator.ws.response.error",!0);var i=jQuery(".product-locator-error-message",e);i&&i.length>0&&(i[0].innerHTML='<p class="product-locator-button-error-text"> '.concat(Drupal.settings.hermes_translations.ui.product_locator.service_unavailable," </p>"),jQuery(".product-locator-button").addClass("product-locator-disabled"),jQuery(".product-locator-disabled").attr("aria-hidden","true"),jQuery(".product-locator-disabled").attr("tabindex",-1),Zi(i))}function nn(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ot.enableDisableFindInStoreLoader(!1),i&&i.hidePanel();var a=!1;t.storesStock=[];for(var s=0;s<e.length;s++)e[s].available&&(a=!0,t.storesStock.push({cegidId:e[s].storeId,available:e[s].available,limited:e[s].limited,ereservationActivated:e[s].ereservationActivated}));t.proximityMsgMaxKm=Drupal.settings.product_locator_configuration.proximityMsgMaxKm,t.mapActive=Drupal.settings.product_locator_configuration.mapActive;var o=jQuery(".product-locator-error-message",r);if(a)o[0].innerHTML="",t.requestFrom=r||n?"page_product":"tray_product_locator",APP.pubsub.publish("tray.product.locator.toggle",t);else{var c=Drupal.settings.hermes_locale.split("_")[0],u="no_stock_"+c;setTimeout((function(){o&&o.length>0&&(o[0].innerHTML='<p class="product-locator-button-error-text">'.concat(Drupal.settings.hermes_translations.ui.product_locator[u],"</p>"))}),50),APP.pubsub.publish("tray.product.locator.without.stock",t),n&&(t.noStockForAngular=!0,APP.pubsub.publish("tray.product.locator.toggle",t)),Zi(o)}}function an(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(a&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("all_products")&&ot.checkIfRetailPresentabilityIsNull()){for(var s={allSkus:[]},o=0;o<Drupal.settings.hermes_products.data.all_products.length;o++)Drupal.settings.hermes_products.data.all_products[o]&&Drupal.settings.hermes_products.data.all_products[o].hasOwnProperty("sku")&&s.allSkus.push(Drupal.settings.hermes_products.data.all_products[o].sku);en(s.allSkus,!0)}var c=null;if(e&&e.length>0){var u=e.map((function(e){return e.getDatas()})),l=u.filter((function(e){return e.country===Ki[Drupal.settings.hermes_current_country]}));c=l.map((function(e){return e.cegid_id}))}var d=[nn,rn];Ji(t,c,r,d,i,n,a)}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function on(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}APP.pubsub.subscribe("open-plv2-tray",(function(e,t){ot.forceActivatingPL(),ot.isConfiguratorIsLoaded()||(ot.initTrayConfigurator(),ot.setConfiguratorIsLoaded()),ot.productLocatorScript(e,Xi,t)})),APP.pubsub.subscribe("hermes-stores-datas-ready-product-page",(function(e,t){Wi=t})),APP.pubsub.subscribe("init-configurator-change",(function(){Yi&&(ot.enableDisableFindInStoreLoader(!1),Yi.abort())}));var cn=function(){function e(t){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ZOOM_SPEED=t.zoomSpeed||.5,this.SCROLL_SPEED=t.scrollSpeed||1,this.variants=t.products,this.allVariants=this.allVariants?this.allVariants:t.products,this.defaultSku=t.sku,this.attributes=t.attributes,this.selectedAttributes,this.forceSizeDisabling=!1,this.firstUpdate=!0,this.availableOptions={},this.GLOBAL=Drupal.settings.hermes_products.data,this.currentAttr,this.firstCall=!0,this.selectedAttribut=null,this.isDouble,this.firstVariant,this.selectedSize=!1,this.noSelected=!1,this.isAppleWatchKit=t.isAppleWatchKit,this.availableColorsNumber=0,this.availableVolumesNumber=0,this.formErrorMessage=Drupal.settings.hermes_translations.validation.errorOnForm,this.$pageTitle=jQuery("head title"),this.titleContent=this.$pageTitle.text(),this.buyable,this.hermesStoresDatas,this.FIELD_REF_SIZE=k.FIELD_REF_SIZE,this.FIELD_COLOR_HERMES=k.FIELD_COLOR_HERMES,this.FIELD_MASS_VOLUME_IMP=k.FIELD_MASS_VOLUME_IMP,this.FIELD_MASS_VOLUME_INT=k.FIELD_MASS_VOLUME_INT,this.$el=jQuery("#panel-configurator"),this.$el.length){if(this.tray=new B({$el:this.$el,name:"tray-configurator",animationSpeed:this.ZOOM_SPEED,scrollSpeed:this.SCROLL_SPEED}),this.isDouble=Drupal.settings.hermes_products_attributes?Drupal.settings.hermes_products_attributes.isDouble:null,APP.currentSetSKU=Drupal.settings.hermes_products.data.default_variant.set_sku,APP.currentSKU=Drupal.settings.hermes_products.data.default_variant.sku,this.isDouble){var i=this.defaultSku.split("-"),n=i[2]?i[2]:null;this.firstVariant=i[1]?i[1]:null,this.defaultSku=n}var a;this.defaultVariant=this.selectedVariant=(a=2===ot.productLocatorVersion()?r.allVariants:r.variants).find((function(e){return e.sku===r.defaultSku}))||a[0],this.cacheDom(),this.bind(),this.initSelectedAttributes(this.defaultVariant.attributes),this.showDefaultValues(),this.resetAvailableOptions(),this.findMatchingVariants(),jQuery(".product-configurator-field_ref_size").find("legend span").text(""),this.$el.find(".product-locator-container-button").hide()}}var t,r;return t=e,r=[{key:"update",value:function(e){this.variants=e,this.resetAvailableOptions(),this.findMatchingVariants()}},{key:"cacheDom",value:function(){this.title=this.$el[0].querySelector(".title-tray-container h2"),this.price=this.$el[0].querySelector(".field-type-commerce-price"),this.eco_tax=this.$el[0].querySelector(".field-type-commerce-eco-tax"),this.descriptionEl=this.$el[0].querySelector(".field-name-field-description-configurator"),this.configMeasurements=this.$el[0].querySelector(".field-name-field-measurements-configurator"),this.detail=document.querySelector(".product-detail-info-content span"),this.productInfo=document.querySelector("#product-info"),this.$productDetail=jQuery("#product-detail"),this.$productBanner=jQuery("#product-banner"),this.productSku=this.productInfo.querySelector(".commerce-product-sku-value"),this.descriptionDom=jQuery(".field-name-field-description-configurator"),this.$form=jQuery("#variant"),this.$formInputs=this.$form.find(".product-configurator-form-input"),this.$elProductLocator=jQuery("#tray-product-locator"),this.$productLocatorFormInputs=this.$elProductLocator.find(".product-configurator-form-input"),this.$title=jQuery("#title-panel-configurator"),this.$productLocatorTitle=jQuery(".tray-product-locator-label")}},{key:"bind",value:function(){APP.pubsub.subscribe("tray.configurator.open",this.showPanel.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.hidePanel.bind(this)),APP.pubsub.subscribe("zoomed.out",this.hidePanel.bind(this)),APP.pubsub.subscribe("update.dom",this.updateDom.bind(this)),this.$elProductLocator.on("change",".product-configurator-form-input",this.productLocatorConfiguration.bind(this)),this.$el.on("change",".product-configurator-form-input",this.changeConfiguration.bind(this)).on("click",".tray-close",this.handlePanel.bind(this)).on("click","[data-bind=product-add-to-cart]",this.onAddToCartClick.bind(this)).on("click","[data-bind=configurator-add-to-cart]",this.onAddToCartClick.bind(this)).on("click","[data-bind=product-find-in-store]",this.findInStoreClickConfigurator.bind(this))}},{key:"showDefaultValues",value:function(){var e=this.defaultVariant.attributes;for(var t in e)if(e.hasOwnProperty(t)&&t!==this.FIELD_REF_SIZE){var r=jQuery('[href="#configurator-'.concat(t,'"] .product-attribute-value span'),this.productInfo);e[t].attr_display?r.text(e[t].attr_display):r.text(e[t].name),this.currentAttr=e[t].id.replace(/\s/g,"")}}},{key:"initSelectedAttributes",value:function(e){this.selectedAttributes=Object.keys(e).reduce((function(t,r){return t[r]=e[r].id.replace(/\s/g,""),t}),{}),this.selectedAttributes.field_ref_size&&(this.selectedAttributes.field_ref_size=null)}},{key:"resetAvailableOptions",value:function(){var e=this;this.availableOptions={},this.variants.forEach((function(t){for(var r in e.attributes)if(e.attributes.hasOwnProperty(r)){var i=t.attributes[r];if(void 0!==i){var n=i.id.replace(/\s/g,"");e.availableOptions[n]=1}}}))}},{key:"findMatchingVariants",value:function(){var e=jQuery.map(this.selectedAttributes,(function(e,t){return{field:t,value:e}})),t=[],r=[],i=[],n=[];this.matchingVarients=this.variants,this.matchingPLVarients=this.allVariants;var a=this.matchingVarients?this.matchingVarients.length:0;if(0===a&&2===ot.productLocatorVersion()&&ot.hasRetailStock()&&(a=-1),0===a)for(var s in jQuery("#variant").find(".product-configurator-form-input").filter('input[id="'.concat(this.currentAttr,'"]')).attr("disabled",!0),this.availableOptions)this.availableOptions.hasOwnProperty(s)&&s.includes(this.FIELD_REF_SIZE)&&(this.$formInputs.filter('input[id="'.concat(s,'"]')).attr("disabled",!0),this.$productLocatorFormInputs.filter('input[id="product-locator-'.concat(s,'"]')).attr("disabled",!0));for(var o in this.attributes)if(this.attributes.hasOwnProperty(o)){for(var c=[],u=[],l=e.shift(),d=0;d<this.matchingVarients.length;d++)void 0!==this.matchingVarients[d].attributes[o]&&(l.value&&this.matchingVarients[d].attributes[o].id.replace(/\s/g,"")!==l.value||c.push(this.matchingVarients[d]),t.push(this.matchingVarients[d].attributes[o].id.replace(/\s/g,"")));for(var h=2===ot.productLocatorVersion()?this.matchingPLVarients:[],p=0;p<h.length;p++){var f=h[p]&&h[p].hasOwnProperty("attributes")&&h[p].attributes.hasOwnProperty(o)?h[p].attributes[o]:null,m=h[p]&&h[p].hasOwnProperty("sku")?h[p].sku:null;if(f&&m&&(ot.isAvailableStockRetail(m)||o!==this.FIELD_REF_SIZE)){var g=f.hasOwnProperty("id")&&f.id?f.id.replace(/\s/g,""):null;l.value&&g!==l.value||u.push(h[p]),o!==this.FIELD_COLOR_HERMES||ot.isAvailableStockRetail(m)||n.includes(g)?(r.includes(g)||r.push(g),o===this.FIELD_COLOR_HERMES&&ot.isAvailableStockRetail(m)&&!i.includes(g)&&i.push(g)):n.push(g)}}if(!(c.length||u.length||n.length))return jQuery(document.getElementById(l.value)).removeAttr("checked"),void(this.selectedAttributes[l.field]=null);this.matchingVarients=c,this.matchingPLVarients=u}this.updateOptionsAvailability(t,r,i),this.matchingVarients.length>0?this.selectedVariant=this.matchingVarients[0]:2===ot.productLocatorVersion()&&this.matchingPLVarients.length>0&&(this.selectedVariant=this.matchingPLVarients[0]),this.updateConfiguratorDom()}},{key:"productSkuFromAttributeId",value:function(e,t){if(Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes")){var r=Drupal.settings.hermes_products.data.products_attributes;for(var i in r)if(r[i]&&r[i].hasOwnProperty(t)&&r[i][t].hasOwnProperty("id")&&r[i][t].id.replace(/\s/g,"")===e)return i}return null}},{key:"isAssociatedToCurrentColor",value:function(e){return!!(this.selectedVariant&&this.selectedVariant.hasOwnProperty("attributes")&&this.selectedVariant.attributes[this.FIELD_COLOR_HERMES])&&this.selectedVariant.attributes[this.FIELD_COLOR_HERMES].hasOwnProperty("id")&&this.selectedVariant.attributes[this.FIELD_COLOR_HERMES].id.replace(/\s/g,"")===e.replace(/\s/g,"")}},{key:"updateOptionsAvailability",value:function(e,t,r){var i=this,n=0,a=0,s=!1,o=jQuery(".product-locator-error-message",this.$el);o&&o.length&&(o[0].innerHTML="");var c=this.$form.find(".product-configurator-form-input"),u=[].map.call(c,(function(e){var t,r,n=(t=e.id.split("-"),r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sn(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return{variationField:n,id:e.id.replace(/\s/g,""),$el:jQuery(e),$productLocatorEl:n===i.FIELD_REF_SIZE?jQuery("#product-locator-"+e.id.replace(/\s/g,"")):null}}));if(this.firstCall){var l=u.find((function(e){return e.id===i.currentAttr}));l&&l.$el.attr("checked","checked"),this.firstCall=!1}u.forEach((function(o){var c=o.variationField,u=o.id,l=o.$el,d=o.$productLocatorEl,h=t.includes(u),p=r.includes(u),f=ot.stockTypeKey;if(l&&l.removeAttr(f),d&&d.removeAttr(f),e.includes(u))switch(c){case i.FIELD_REF_SIZE:if(i.forceSizeDisabling)break;ot.setAccessibilityMessageToVariation([l,d],!0,h),ot.disableSlashedSize(l),ot.disableSlashedSize(d),l.attr("disabled",!1),d.length>0&&d.attr("disabled",!1),ot.setStockTypeAttr(!0,h,l,d);break;case k.FIELD_MASS_VOLUME_IMP:case k.FIELD_MASS_VOLUME_INT:a++,l.attr("disabled",!1);break;case i.FIELD_COLOR_HERMES:ot.setAccessibilityMessageToVariation([l,d],!0,h),n++}else switch(c){case i.FIELD_REF_SIZE:if(i.forceSizeDisabling)break;ot.setAccessibilityMessageToVariation([l,d],!1,h),2===ot.productLocatorVersion()&&h?(ot.enableSlashedSize(l),ot.enableSlashedSize(d)):(l.attr("disabled",!0),d.length>0&&d.attr("disabled",!0)),ot.setStockTypeAttr(!1,h,l,d);break;case i.FIELD_MASS_VOLUME_IMP:case i.FIELD_MASS_VOLUME_INT:l.attr("disabled",!0);break;case i.FIELD_COLOR_HERMES:ot.setAccessibilityMessageToVariation([l,d],!1,p),2===ot.productLocatorVersion()&&p?(n++,l.attr("disabled",!1),l.parent("li").show(),s=!1):u===i.currentAttr?(l.attr("disabled",!0),s=!0):2===ot.productLocatorVersion()?l.parent("li").hide():l.parent("li").remove()}})),this.availableColorsNumber=n,this.availableVolumesNumber=a,!s||this.selectedAttribut&&this.selectedAttribut!==this.currentAttr||u.filter((function(t){var r=t.variationField,n=t.id;return r===i.FIELD_REF_SIZE&&e.includes(n)})).forEach((function(e){var t=e.$el,r=e.$productLocatorEl;t.attr("disabled",!0),r.length>0&&r.attr("disabled",!0)})),jQuery(".product-attributes-field_color_hermes .product-attribute-title").eq(0).find("span").text("("+n+")"),jQuery(".product-configurator-field_color_hermes").find(".product-configurator-option-available").text(n);var d=jQuery(".product-attributes-field_color_hermes button");if(d.attr("aria-label")){var h=d.attr("aria-label").match(/\d+/g);parseInt(h,10)!==n&&d.attr("aria-label",d.attr("aria-label").replace(h,n))}var p=jQuery(".product-attributes-field_mass_volume_imp"),f=jQuery(".product-attributes-field_mass_volume_int");0!==p.length&&p.find(".product-attribute-title").eq(0).find("span").text("("+a+")"),0!==f.length&&f.find(".product-attribute-title").eq(0).find("span").text("("+a+")");var m=p.find("button"),g=f.find("button"),y=m||g;if(y.attr("aria-label")){var v=y.attr("aria-label").match(/\d+/g);parseInt(v,10)!==a&&y.attr("aria-label",y.attr("aria-label").replace(v,a))}}},{key:"changeConfiguration",value:function(e){var t=this;APP.pubsub.publish("init-configurator-change",null);var r=e.currentTarget.getAttribute("data-field");if(this.noSelected=!0,2===ot.productLocatorVersion()){if(this.forceSizeDisabling=!0,r===this.FIELD_COLOR_HERMES){this.selectedAttributes.field_ref_size=null;var i=this.$form.find('.product-configurator-form-input[data-field="'.concat(this.FIELD_REF_SIZE,'"]'));i.attr("disabled",!0).attr("checked",!1),ot.removeSlashInAllSize(i)}ot.disableAllButtons()}this.selectedAttributes[r]=e.currentTarget.value,this.selectedAttribut=this.selectedAttributes[r],this.selectedAttributes[r].includes(this.FIELD_REF_SIZE)&&(this.selectedSize=!0),this.findMatchingVariants(),this.updateConfiguratorDom(),y()&&this.updateDom(),this.updateValidation({updatedField:r,configuratorId:e.currentTarget.name}),ot.setSelectedSku(this.selectedVariant.sku);var n=(2===ot.productLocatorVersion()?this.allVariants:this.GLOBAL.products).find((function(e){return e.sku===t.selectedVariant.sku}));APP.pubsub.publish("configurator.change",n)}},{key:"showPanel",value:function(e,t){var r=jQuery("#panel-configurator .variant-image");if(jQuery.map(r,(function(e){return jQuery(e).attr("src",jQuery(e).data("src"))})),t&&jQuery(t.scrollTo).length){var i=jQuery(t.scrollTo).offset().top+this.tray.$wrapper.scrollTop()-window.pageYOffset;this.tray.scrollTo({top:i})}this.tray.open(),jQuery("#tray-product-locator store-product-locator-display-map #map").children().length>0&&this.tray.$wrapper.removeClass("map-hidden")}},{key:"hidePanel",value:function(){var e=jQuery(".tray-product-locator-visible");this.tray.isOpen&&!e[0]&&this.tray.close()}},{key:"handlePanel",value:function(){var e=jQuery(".tray-trigger-origin").attr("data-field");if(this.updateDom(),e){var t='button[data-field="'.concat(e,'"]');jQuery(t).focus()}APP.pubsub.publish("zoom.out")}},{key:"updateConfiguratorDom",value:function(){var e=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariant),t=Drupal.settings.hermes_products.shipping_information[e.sku],r=this.getDescription(e),i=this.selectedVariant.images[0].uri,n=this.selectedVariant.designer||"",a=this.selectedVariant.metals_titrations||[],s=jQuery('[href="#configurator-field_ref_size"] .product-attribute-value span'),o=jQuery("#tray-product-locator .tray-product-locator-details span.size-value"),c=jQuery(".field-name-field-designer-configurator"),u=jQuery(".field-name-field-metals-titrations-configurator"),l=jQuery(".shipping-info"),d=a.reduce((function(e,t){return e+C().render(APP.templates.productCardMetalTitration,t)}),"");this.$title.text(this.selectedVariant.title),this.$productLocatorTitle.text(this.selectedVariant.title);var h,p=Drupal.settings.hermes_translations.ui.product_page.configurator.title.accessibility;this.$title.prepend("<span class=sr-only></span>"),this.$title.find(".sr-only").text(p),this.selectedVariant.unit_price?(h="".concat(this.selectedVariant.price,'&nbsp;<span class="fragrance-price-per-unit">').concat(this.selectedVariant.unit_price,"</span>"),jQuery("div.field-type-commerce-price, p.tray-product-locator-price").html(h)):(h=this.selectedVariant.price,this.price.textContent=h),this.eco_tax&&this.selectedVariant.eco_tax&&(this.eco_tax.textContent=this.selectedVariant.eco_tax),this.configMeasurements.textContent=e.measurements[0]||"",c.html(n),u.html(d),this.descriptionDom.html(r);var f=this.isAppleWatchKit?e.firstVariantDetails:e.detail;this.showDetail(f),e.attributes.field_ref_size&&this.selectedSize&&(s.html(e.attributes.field_ref_size.attr_display),o.html(e.attributes.field_ref_size.attr_display)),t&&l.text(t),APP.pubsub.publish("dom.update.zoomImg","".concat(i,"-SIZE-SIZE")),new Hi(this.selectedVariant.description,this.descriptionDom).splitDescription()}},{key:"getDescription",value:function(e){var t=this.selectedVariant.description;return"string"==typeof t?e.intro=t:t&&t[0]&&(e.intro=t[0],e.remaining_copy=t.slice(1,t.length).join(" ")),this.descriptionEl.textContent=Array.isArray(t)?t.join(" "):t||"",this.descriptionEl.textContent}},{key:"showDetail",value:function(e){var t=jQuery(".product-detail-info-content"),r=t.parents(".accordion-item");e.trim()&&this.detail?(t.find("span").size()>0&&t.children().text(""),t.find("span").append(jQuery.parseHTML(e)),r.show()):r.hide()}},{key:"updateDom",value:function(){var e,t=[];if(this.noSelected||(this.selectedVariant=this.defaultVariant),this.firstUpdate||this.productSku.textContent!==this.selectedVariant.sku){var r=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariant),i=r.description;for(var n in"string"==typeof i?r.intro=i:void 0!==i[0]&&(r.intro=i[0],r.remaining_copy=i.slice(1,i.length).join(" ")),r.attributes=[],this.attributes)this.attributes.hasOwnProperty(n)&&(e=jQuery.extend({},this.selectedVariant.attributes[n],{count:this.attributes[n]}),this.selectedAttributes[n]?e.attr_display&&(e.name=e.attr_display,e.field.includes(this.FIELD_REF_SIZE)?e.accessibility_select_button="".concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.current_size,":\n          ").concat(e.name,", ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.change_size):e.field.includes(this.FIELD_COLOR_HERMES)?e.accessibility_select_button="".concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.current_color,":\n          ").concat(e.name,", ").concat(e.count," ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available,",\n          ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.change_color):(e.field.includes(this.FIELD_MASS_VOLUME_IMP)||e.field.includes(this.FIELD_MASS_VOLUME_INT))&&(e.accessibility_select_button="".concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.current_volume,":\n          ").concat(e.name,", ").concat(e.count," ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available,"\n          ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.change_volume))):(e.name=Drupal.settings.hermes_translations.ui.select,e.field.includes(this.FIELD_REF_SIZE)?e.accessibility_select_button=Drupal.settings.hermes_translations.ui.product_page.accessibility.size:e.field.includes(this.FIELD_COLOR_HERMES)?e.accessibility_select_button="".concat(e.count,"\n          ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available,"\n          ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.select_color):e.field.includes(this.FIELD_MASS_VOLUME_IMP||this.FIELD_MASS_VOLUME_INT)&&(e.accessibility_select_button="".concat(e.count,"\n          ").concat(Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available))),e.count&&e.field.includes(this.FIELD_COLOR_HERMES)?e.count=this.availableColorsNumber:e.count&&e.field.includes(this.FIELD_REF_SIZE)?e.count="":e.count&&e.field.includes(this.FIELD_MASS_VOLUME_IMP||this.FIELD_MASS_VOLUME_INT)&&(e.count=this.availableVolumesNumber),e.is_disabled=!1,r.attributes.push(e));r.thumb=r.images[0]&&r.images[0].uri,jQuery.extend(this.selectedVariant.images[0],{single:1===this.selectedVariant.images.length});var a=C().render(APP.templates.productImages,this.selectedVariant),s=C().render(APP.templates.productInfo,r),o=C().render(APP.templates.productBanner,r);if(this.$productDetail.find("#variant-info").html(s),this.$productDetail.find(".product-image-list").html(a),this.$productBanner.html(o),this.isDouble){t[0]=this.firstVariant,t[1]=this.selectedVariant.sku;var c=t.join(" | ");jQuery(this.productSku).html(c),APP.updatedProductSKU=c}else jQuery(this.productSku).html(this.selectedVariant.sku),APP.updatedProductSKU=this.selectedVariant.sku;if(!this.selectedSize&&e&&e.field.includes(this.FIELD_REF_SIZE)&&jQuery('[href="#configurator-field_ref_size"] .product-attribute-value span').html(Drupal.settings.hermes_translations.ui.select),y())APP.pubsub.publish("dom.updated");else{var u=this.selectedVariant.thumbs.map((function(e,t){return{uri:e.uri,index:t}}));u[0].active=!0;var l=C().render(APP.templates.productImagesNav,{images:u});this.$productDetail.find(".product-images-navigation ul").html(l)}}else this.firstUpdate=!1}},{key:"isValid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=2===ot.productLocatorVersion()&&e?this.matchingPLVarients:this.matchingVarients,r=Vi()(this.selectedAttributes);return 1===t.length&&!r.includes(null)}},{key:"validate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isValid(e)){var t=!1;for(var r in this.selectedAttributes)if(this.selectedAttributes.hasOwnProperty(r)&&!this.selectedAttributes[r]){this.throwValidationError({field:r.split("-")[0]}),t=!0;break}jQuery(".product-configurator-error-message").attr("aria-hidden",!t);var i=2===ot.productLocatorVersion()&&e?this.matchingPLVarients:this.matchingVarients;if(!i.length)throw new Error("No products match this configuration","product-configurator.js")}}},{key:"throwValidationError",value:function(e){var t="#configurator-"+e.field,r=document.querySelector(t),i=this.tray.$wrapper.scrollTop()+jQuery(r).offset().top-window.pageYOffset;r.classList.add("error"),setTimeout((function(){var e=jQuery(".product-configurator-error-message");e&&e.length>0&&(e.attr("tabindex","0"),e.attr("role","alert"),e.focus(),e.attr("tabindex","-1"))}),50),this.$el.addClass("error-on-form"),this.$pageTitle.html(this.formErrorMessage+this.titleContent),this.tray.scrollTo({top:i})}},{key:"updateValidation",value:function(e){var t=document.querySelector("#configurator-"+e.configuratorId);t&&t.classList.remove("error");var r=this.productInfo.querySelector(".product-attributes-"+e.updatedField);r&&r.classList.remove("error"),this.$el.removeClass("error-on-form"),this.$pageTitle.html(this.titleContent)}},{key:"onAddToCartClick",value:function(e){var t,r=[];if(e.preventDefault(),e.stopPropagation(),this.isValid()){var i=jQuery(".tray-trigger-origin").attr("data-field");if(APP.pubsub.publish("zoom.out"),this.updateDom(),i){var n='a[data-field="'.concat(i,'"]');jQuery(n).focus()}this.tray.close(),this.isDouble?(r[0]=this.matchingVarients[0].set_sku?this.matchingVarients[0].set_sku:null,r[1]=this.firstVariant?this.firstVariant:null,r[2]=this.matchingVarients[0].sku?this.matchingVarients[0].sku:null,t=null!==r[0]&&null!==r[1]&&null!==r[2]?r.join("-"):null):t=this.matchingVarients[0]?this.matchingVarients[0].sku:null;var a={sku:t,container_id:this.matchingVarients[0].set_sku||null,image:this.matchingVarients[0].images[0].uri,category:_.get("nav")?_.get("nav"):"direct"};APP.pubsub.publish("addToCart",a)}else this.validate()}},{key:"setBuyable",value:function(e){this.buyable=e}},{key:"setHermesStoresDatas",value:function(e){this.hermesStoresDatas=e}},{key:"findInStoreClickConfigurator",value:function(e){e.preventDefault(),e.stopPropagation(),this.isValid(!0)?ot.productLocatorScript(null,this.findInStoreLocator.bind(this)):this.validate(!0)}},{key:"findInStoreLocator",value:function(){var e=jQuery(".tray-trigger-origin").attr("data-field");if(this.updateDom(),e){var t='a[data-field="'.concat(e,'"]');jQuery(t).focus()}this.cegidStockCall(this.$el)}},{key:"cegidStockCall",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=2===ot.productLocatorVersion()?this.matchingPLVarients:this.matchingVarients;if(e=r[0]?r[0].sku:null,this.isValid(!0)){var i={sku:e,container_id:r[0].set_sku||null,image:r[0].images[0].uri,category:_.get("nav")?_.get("nav"):"direct"};an(this.hermesStoresDatas,i,t)}else J(),APP.pubsub.publish("tray.product.locator.no.result.error")}},{key:"productLocatorConfiguration",value:function(e){if(z(),e.currentTarget&&e.currentTarget.defaultValue){var t=document.getElementById(e.currentTarget.defaultValue);t&&(t.checked=!0)}APP.pubsub.publish("product.locator.configurator.before.change",e),this.changeConfiguration(e),APP.pubsub.publish("product.locator.configurator.after.change",e),this.cegidStockCall(null),y()||this.updateDom()}}],r&&on(t.prototype,r),e}();function un(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ln=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectedAttributes="",this.matchingVarients="",this.tray="",this.targetSlot=""}var t,r;return t=e,(r=[{key:"validateSelection",value:function(){var e=this;if(!this.isValidSelection()){var t=Object.keys(this.selectedAttributes).find((function(t){return!e.selectedAttributes[t]}));if(t)return this._showMessageAndScroll({field:t.split("-")[0]}),!0}return!1}},{key:"_showMessageAndScroll",value:function(e){var t=document.querySelector("#configurator-"+e.field+this.targetSlot),r=this.tray.$wrapper.scrollTop()+jQuery(t).offset().top-window.pageYOffset;t.classList.add("error"),this.tray.scrollTo({top:r})}},{key:"isValidSelection",value:function(){var e=Vi()(this.selectedAttributes);return 1===this.matchingVarients.length&&!e.includes(null)}},{key:"removeErrorSelection",value:function(){var e=this;Object.keys(this.selectedAttributes).filter((function(t){return e.selectedAttributes[t]})).forEach((function(t){return e._removeError({field:t.split("-")[0]})}))}},{key:"removeErrorWithoutCheck",value:function(){var e=this;Object.keys(this.selectedAttributes).forEach((function(t){return e._removeError({field:t.split("-")[0]})}))}},{key:"_removeError",value:function(e){document.querySelector("#configurator-"+e.field+this.targetSlot).classList.remove("error")}}])&&un(t.prototype,r),e}(),dn=function(e){var t,r=e.zoomSpeed||.5,i=e.scrollSpeed||1,n=e.sku,a=e.attributes,s=e.slotNumber,o={},c={VARIANT_PRODUCT:0,DOUBLE_PRODUCT:0,PERFUME_SET:1,LOOK_SET:2,BIKINI_SET:3},u=!1,l=e.products;this.init=function(e){this.$el=jQuery("#panel-configurator"),this.$el.length&&(this.isProductOptionChanged=!1,this.enabledOptions=[],this.tray=new B({$el:this.$el,name:"tray-configurator-look",instanceId:e.instanceId,animationSpeed:r,scrollSpeed:i}),this.defaultVariant=this.previousVariant=this.selectedVariant=(l.filter((function(e){if(e.sku===n)return!0}))||[])[0],this.cacheDom(),this.bind(),Drupal.settings.hermes_products&&Drupal.settings.hermes_products.data&&Drupal.settings.hermes_products.data.default_variant&&Drupal.settings.hermes_products.data.default_variant.sku&&Array.isArray(Drupal.settings.hermes_products.data.default_variant.sku)&&(this.productSku.textContent=Drupal.settings.hermes_products.data.default_variant.sku.join(", ")),this.setDefaultVariant(),this.calculateVariantOptionsCount(),this.findMatchingVariants(),this.updateDom())},this.cacheDom=function(){this.title=this.$el[0].querySelector(".title-tray-container h2"),this.price=this.$el[0].querySelector(".field-type-commerce-price"),this.description=this.$el[0].querySelector(".field-name-field-description-configurator"),this.$descriptionSelector=jQuery(".field-name-field-description-configurator"),this.sku=this.$el[0].querySelector(".commerce-product-sku-value"),this.$measurements=this.$el.find(".field-name-field-measurements-configurator"),this.productInfo=document.querySelector("#product-info"),this.$productDetail=jQuery("#product-detail"),this.$productBanner=jQuery("#product-banner"),this.productSku=this.productInfo.querySelector(".commerce-product-sku-value"),this.$form=jQuery("#variant"),this.$formInputs=this.$form.find(".product-configurator-form-input"),this.$title=jQuery("#title-panel-configurator")},this.bind=function(){APP.pubsub.subscribe("tray.configurator.look.open",this.showPanel.bind(this)),this.tray.addEventListener("openOne",this.bindTrayEvents.bind(this)),this.tray.addEventListener("closeAll",this.unbindTrayEvents.bind(this)),this.tray.addEventListener("backButtonClick",this.unbindTrayEvents.bind(this)),this.$el.on("change",".slot-".concat(s," .product-configurator-form-input"),this.changeConfiguration.bind(this)).on("click",".validate",this.onValidate.bind(this)),jQuery("#product-look-".concat(s)).parent().on("keypress click",this.clickCheckbox)},this.clickCheckbox=function(){var e=jQuery("#product-look-".concat(s)).prop("checked");jQuery("#product-look-"+s).prop("checked",!e).change()},this.bindTrayEvents=function(){APP.pubsub.subscribe("tray.overlay.close",this.closeTrayWithoutChecking.bind(this)),APP.pubsub.subscribe("zoomed.out",this.hidePanelAndSelectProduct.bind(this)),APP.pubsub.subscribe("update.dom",this.updateDom.bind(this)),this.$el.on("click",".tray-close",this.closeTrayWithoutChecking.bind(this)).on("click","#select-look-slot",this.hidePanelAndSelectProduct.bind(this))},this.unbindTrayEvents=function(){APP.pubsub.unsubscribe("tray.overlay.close",this.closeTrayWithoutChecking.bind(this)),APP.pubsub.unsubscribe("zoomed.out",this.hidePanelAndSelectProduct.bind(this)),this.$el.off("click",".tray-close",this.closeTrayWithoutChecking.bind(this)).off("click","#select-look-slot",this.hidePanelAndSelectProduct.bind(this))},this.setDefaultVariant=function(){(t=this.mapAttributes(this.defaultVariant.attributes)).field_ref_size&&(t.field_ref_size=null)},this.mapAttributes=function(e){var t={};return jQuery.map(e,(function(e,r){t[r]=e.id.replace(/\s/g,"")})),t},this.calculateVariantOptionsCount=function(){for(var e=0;e<l.length;e++)for(var t in a)if(a.hasOwnProperty(t)&&l[e].attributes[t]){var r=l[e].attributes[t].id.replace(/\s/g,"");o[r]=1}},this.setVariants=function(e){l=e},this.findMatchingVariants=function(){var e=[],r=jQuery.map(t,(function(e,t){return{field:t,value:e}}));for(var i in this.matchingVarients=l,this.enabledOptions=[],a)if(a.hasOwnProperty(i)){for(var n=r.shift(),s=0;s<this.matchingVarients.length;s++)void 0!==n&&void 0!==this.matchingVarients[s].attributes[i]&&(n.value&&this.matchingVarients[s].attributes[i].id.replace(/\s/g,"")!==n.value||e.push(this.matchingVarients[s]),this.enabledOptions[this.matchingVarients[s].attributes[i].id.replace(/\s/g,"")]=!0);if(!e.length)return void 0!==n&&(n.value&&(n.value=n.value.replace(/'/g,"")),jQuery(document.getElementById(n.value)).removeAttr("checked"),t[n.field]=null),void(c[Drupal.settings.hermes_products.data.configurator_type]!==c.LOOK_SET&&this.findMatchingVariants());this.matchingVarients=e,e=[]}this.updateOptionsAvailability(),this.previousVariant=this.selectedVariant,this.selectedVariant=this.matchingVarients[0]},this.updateOptionsAvailability=function(){for(var e in this.$form.find(".slot-".concat(s," .product-configurator-form-input")).not(":checked").attr("disabled",!0),this.enabledOptions)this.enabledOptions.hasOwnProperty(e)&&this.$form.find(".slot-".concat(s,' input[value="').concat(e,'"]')).attr("disabled",!1)},this.getProd=function(e){var t;return Drupal.settings.hermes_products.data.products.some((function(r){return r.find((function(r){r.sku===e&&(t=r)})),t})),t},this.changeConfiguration=function(e){var r=e.currentTarget.getAttribute("data-field"),i=jQuery("#details-slot-"+s);t[r]=e.currentTarget.value,this.isProductOptionChanged=!0,this.findMatchingVariants(),this.updateConfiguratorDom(),this.removeErrorMessageIfExist(),i.attr("sku",this.selectedVariant.sku),this.updateConfiguratorSetSkus();var n=this.getProd(this.selectedVariant.sku);if(APP.pubsub.publish("configurator.change",n),this.selectedVariant.attributes.field_ref_size){var a=i.find(".product-attribute-size"),o=jQuery("#product-look-"+s),c=Drupal.settings.hermes_translations.ui.product_page.accessibility,u=i.find(".size-accessibility");a.text(this.selectedVariant.attributes.field_ref_size.attr_display+" "),u.text(", ".concat(c.current_size," : ").concat(this.selectedVariant.attributes.field_ref_size.attr_display,", ").concat(c.change_size)),o.removeAttr("disabled"),i.addClass("product-size-selected")}},this.showPanel=function(e,t){if(t.targetSlot===s){var r=jQuery("#panel-configurator .variant-image");if(jQuery.map(r,(function(e){return jQuery(e).attr("src",jQuery(e).data("src"))})),t&&jQuery(t.scrollTo).length){var i=jQuery(t.scrollTo).offset().top+this.tray.$wrapper.scrollTop()-window.pageYOffset;this.tray.scrollTo({top:i})}t&&t.zoomData&&(this.zoomData=t.zoomData);var n=this.tray.$wrapper.find(".product-configurator-form fieldset"),a=this.tray.$wrapper.find(".product-configurator-form .slot-"+s);n.hide(),a.show(),APP.pubsub.publish("zoom.in",this.zoomData),this.updateConfiguratorDom(),this.tray.open(),this.isActive=!0,t.showErrorMessage&&this.checkSelectionAndShowErrorMessage()}},this.hidePanelAndSelectProduct=function(e){e&&e.preventDefault&&e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tray.isOpen&&!this.checkSelectionAndShowErrorMessage()&&(this.isActive&&this.updateDom(!0),this.tray.isOpen&&this.tray.close(),this.isActive=!1,u&&(this.isProductOptionChanged=!0,this.updateDom(!0)),APP.pubsub.publish("zoom.out"))},this.hidePanel=function(e){e&&e.preventDefault&&e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tray.isOpen&&(this.isActive&&this.updateDom(!1),this.tray.isOpen&&this.tray.close(),this.isActive=!1,APP.pubsub.publish("zoom.out"))},this.closeTrayWithoutChecking=function(e){e&&e.preventDefault&&e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tray.isOpen&&(this.cleanTrayFromErrorMessage(),this.tray.close(),APP.pubsub.publish("zoom.out"))},this.handlePanel=function(){this.updateDom(!0),APP.pubsub.publish("variant.changed",this.selectedVariant),APP.pubsub.publish("zoom.out")},this.updateConfiguratorDom=function(){this.$title.text(this.selectedVariant.title);var e=Drupal.settings.hermes_translations.ui.product_page.configurator.title.accessibility;this.$title.prepend("<span class=sr-only></span>"),this.$title.find(".sr-only").text(e),this.price.textContent=this.selectedVariant.price;var t=this.selectedVariant.measurements[0]||"";this.$measurements.text(t),APP.pubsub.publish("dom.update.zoomImg",this.selectedVariant.images[0].uri+"-SIZE-SIZE"),new Hi(this.selectedVariant.description,this.$descriptionSelector).splitDescription()},this.updateDom=function(e){var t=jQuery("#details-slot-"+s),r=t.find(".product-attribute-title"),i=t.find(".product-attribute-color"),n=t.find(".product-attribute-price"),a=t.find(".product-attribute-thumbnail"),o=jQuery("#product-look-"+s);u=!1,this.selectedVariant.attributes.field_color_hermes||this.selectedVariant.attributes.field_ref_size||(u=!0),t.attr("sku",this.selectedVariant.sku),this.updateConfiguratorSetSkus(),r.text(this.selectedVariant.display_name+" "),n.text(this.selectedVariant.price+" "),this.selectedVariant.attributes&&this.selectedVariant.attributes.field_color_hermes&&this.selectedVariant.attributes.field_color_hermes.name&&(""!==this.selectedVariant.attributes.field_color_hermes.attr_display.trim()?i.text(this.selectedVariant.attributes.field_color_hermes.attr_display+" "):i.text(this.selectedVariant.attributes.field_color_hermes.name+" ")),this.isProductOptionChanged||jQuery(".product-configurator-form fieldset").each((function(){var r=jQuery(this).find("input");jQuery(r).is(":checked")&&e&&(o.prop("checked",!0),t.addClass("product-selected")),APP.pubsub.publish("product.size.selected")})),this.isProductOptionChanged&&this.selectedVariant.attributes&&this.selectedVariant.attributes.field_color_hermes&&this.selectedVariant.attributes.field_color_hermes.name&&(e&&(o.prop("checked",!0),t.addClass("product-color-selected")),APP.pubsub.publish("product.color.selected")),(this.isProductOptionChanged&&this.selectedVariant.attributes&&this.selectedVariant.attributes.field_ref_size&&this.selectedVariant.attributes.field_ref_size.name||this.isProductOptionChanged&&u)&&(e&&(o.prop("checked",!0),t.addClass("product-size-selected")),APP.pubsub.publish("product.size.selected")),this.isProductOptionChanged=!1,a.length>0&&this.selectedVariant.thumbs&&this.selectedVariant.thumbs.length>0&&(a[0].src=this.selectedVariant.thumbs[0].uri+"-60-60.jpg")},this.updateConfiguratorSetSkus=function(){var e=jQuery(".product-attribute-item").toArray().map((function(e){return jQuery(e).attr("sku")})).reduce((function(e,t){return"".concat(e," | ").concat(t)}),"").replace(/^( \| )/,"");jQuery(".commerce-product-sku-value").html(e),APP.updatedProductSKU=e},this.isValid=function(){return this.configureErrorMessage().isValidSelection()},this.validate=function(){return this.configureErrorMessage().validateSelection()},this.onAddToCartClick=function(e){this.hidePanel(),e.preventDefault(),e.stopPropagation()},this.onValidate=function(e){e.preventDefault(),e.stopPropagation(),this.tray.isOpen&&this.tray.close()},this.checkSelectionAndShowErrorMessage=function(){return this.configureErrorMessage().validateSelection()},this.removeErrorMessageIfExist=function(){this.configureErrorMessage().removeErrorSelection()},this.cleanTrayFromErrorMessage=function(){this.configureErrorMessage().removeErrorWithoutCheck()},this.configureErrorMessage=function(){var r=new ln;return r.selectedAttributes=t,r.matchingVarients=this.matchingVarients,r.tray=this.tray,r.targetSlot=e.slotNumber?e.slotNumber:"",r},this.init(e)},hn=function(){var e=Drupal.settings.hermes_products.data,t=new Hi;this.init=function(){this.$el=jQuery("#panel-configurator"),this.$configProdTitle=this.$el.find("#title-tray-content-wrapper"),this.$configDescription=this.$el.find(".field-name-field-description-configurator"),this.$configMeasurements=this.$el.find(".field-name-field-measurements-configurator"),t.descriptionSelector=this.$configDescription,this.$el.length&&(this.tray=new B({$el:this.$el,name:"tray-configurator-multi",animationSpeed:.5,scrollSpeed:1}),this.bind())},this.bind=function(){var e=this;APP.pubsub.subscribe("parfume.configurator",this.showPanel.bind(this)),APP.pubsub.subscribe("parfume.outofstock",this.disableOutOfStock.bind(this)),APP.pubsub.subscribe("tray.configurator.openTray",this.openTray.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.closeTray.bind(this)),APP.pubsub.subscribe("zoomed.out",this.updateDom.bind(this)),this.$el.on("click",".tray-close",this.handlePanel.bind(this)).on("click",".tray-trigger",this.showPanel.bind(this)),this.$el.find(".product-configurator-parfume label").click((function(r){var i=jQuery(r.currentTarget).attr("for").replace("parfume",""),n=e.getProd(i),a=n.images[0].uri.replace("50-0","0-0-0"),s=n.description;t.blocDescription=s,t.splitDescription();var o=n.measurements;APP.pubsub.publish("dom.update.zoomImg",a+"-SIZE");var c=e.getProd(i).display_name;e.$configProdTitle.text(c),e.$configMeasurements.html(o.join("\n"))})),this.$el.find(".product-actions button, .tray-close").removeClass("add-to-cart").click((function(t){t.preventDefault(),e.updateDom()}))},this.updateDom=function(e){if(this.tray.isOpen){var t=this.$el.find("input.product-configurator-form-input:checked").val(),r=this.getProd(t),i={pos:this.configuratorReplacePos,prod:r};APP.pubsub.publish("configurator.changed",i),APP.pubsub.publish("tray.overlay.close",e)}this.closeTray()},this.getProd=function(t){var r;return e.products.some((function(e){return e.sku===t&&(r=e),r})),r},this.showPanel=function(e,r){var i=r.split("-")[0],n=this.getProd(i);if(this.configuratorReplacePos=r.split("-")[1],n){var a=n.display_name||"",s=n.description;t.blocDescription=s,t.splitDescription();var o=n.measurements;this.$el.find("#parfume"+i).prop("checked",!0),this.$configProdTitle.text(a),this.$configMeasurements.html(o.join("\n"))}this.openTray()},this.openTray=function(){var e=jQuery(".tray-trigger-origin").parent("li").index()+1;0!==e&&jQuery("#variant-info").attr("tray-trigger-origin-position",e),this.tray.open()},this.closeTray=function(){if(this.tray.isOpen){this.tray.close();var e=jQuery("#variant-info").attr("tray-trigger-origin-position");e&&jQuery(".product-attributes li:nth-child(".concat(e,") button")).focus()}},this.handlePanel=function(e){APP.pubsub.publish("tray.overlay.close",e)},this.disableOutOfStock=function(e,t){t.forEach((function(e){var t=jQuery('.product-attributes a[sku="'.concat(e,'"]')),r=jQuery(".product-configurator-parfume #parfume"+e);t.addClass("disabled"),r.addClass("disabled")}))},this.isValid=function(){return!0},this.init()};function pn(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var fn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"trayPageview",value:function(){var e=_.get("currentLanguage"),t=_.get("currentCountry");dataLayer.push({event:"pageview",virtualPageUri:"".concat(t,"/").concat(e,"/footer/our-partner-brands")})}},{key:"sisterBrandsLink",value:function(){jQuery("[data-track-sister-brand]").on("click",(function(e){var t=jQuery(e.currentTarget).attr("name");dataLayer.push({event:"uaevent",eventcategory:"Footer",eventaction:"AccessPartnerBrands",eventlabel:t})}))}}],null&&pn(t.prototype,null),r&&pn(t,r),e}(),mn=function(){this.init=function(){this.$el=jQuery("#tray-sister-brands"),this.loadImage(),this.tray=new B({$el:this.$el,name:"tray-sister-brands",showOverlay:!0}),this.bind(),this.$el.on("visibleChange",(function(){fn.trayPageview()})),fn.sisterBrandsLink()},this.bind=function(){APP.pubsub.subscribe("tray.sister-brands.toggle",this.toggleTray.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.loadImage=function(){var e=jQuery(".sister-brand-image img");jQuery.map(e,(function(e){jQuery(e).attr("src",jQuery(e).data("src")).removeAttr("data-src")}))},this.init()};function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var yn=function(){this.init=function(){this.$el=jQuery("#tray-size-guide"),this.$radio=this.$el.find("[name=units]"),this.$sizeTable=this.$el.find(".size-guide-tables table"),this.tray=new B({$el:this.$el,name:"tray-size-guide",showOverlay:!0}),this.bind()},this.bind=function(){var e=this;this.tray.addEventListener("openOne",this.openTray.bind(this)),this.tray.addEventListener("open",this.openTray.bind(this)),APP.pubsub.publish("analytics.size_guide.open"),jQuery("#zoom-wrapper").add("#tray-overlay").on("click",(function(){APP.pubsub.publish("zoom.out"),e.closeTray()}))},this.setParams=function(e){e.sizeGuideType&&(this.guideType=e.sizeGuideType)},this.toggleTray=function(){this.tray.isOpen?this.closeTray():(this.tray.open(),this.openTray())},this.openTray=function(){this.$el.find(".size-guide-item").removeClass("active"),this.$currentGuide=this.$el.find("[data-size-guide-type=".concat(this.guideType,"]")),this.$currentGuide.addClass("active"),this.$radio=this.$currentGuide.find("[type=radio]"),this.$sizeTable=this.$currentGuide.find(".size-guide-tables table"),this.$radio.off("change.sizeTable").on("change.sizeTable",this.toggleSizeTables.bind(this)),this.toggleSizeTables()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.toggleSizeTables=function(){var e=this.$radio.filter(":checked").val();this.$sizeTable.removeClass("active");var t=this.$sizeTable.filter("#"+e);t.addClass("active");var r,i=t.find("th"),n=i.toArray().map((function(e){return jQuery(e)})).map((function(e){return e.outerHeight()})),a=Math.max.apply(Math,function(e){if(Array.isArray(e))return gn(e)}(r=n)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gn(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());i.css({height:a})},this.init()},vn=function(){var e,t,r,i,n,a="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6IzQ0NDQ0NDt9LnN0MXtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuMiwwQzUsMCwwLDUsMCwxMS4yYzAsMi42LDAuOCw1LDIuNCw3bDcuMiw5bDEuNiwybDEuNi0ybDUuOC03LjRsMS4yLTEuNmMxLjYtMiwyLjQtNC40LDIuNC03QzIyLjIsNSwxNy4yLDAsMTEuMiwweiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4NCjwvc3ZnPg0KDQo=",s=jQuery("#tray-store-details"),o=jQuery("#title-tray-store-details"),c=jQuery("#store-content"),u=this;function l(e){var t=e.currentTarget.getAttribute("data-shop-id");e.currentTarget.checked||(t=null),APP.pubsub.publish("tray.store.favorite-shop",t),ue("/customer",{favorite_shop_code:t||0,action:"edit"}).fail()}function d(){this.tray.isOpen?u.closeTray():u.openTray()}this.init=function(){r=null,this.tray=new B({$el:s,name:"tray-store-details",showOverlay:!0}),c.html(C().render(APP.templates.web2shopShopTrayContainer)),e=jQuery('[data-bind="shop-details-data-wrapper"]'),t=jQuery('[data-bind="shop-details-map-wrapper"]')[0],this.bind()},this.setWebToShopData=function(s){var c;r=s,this.unbind(),c=C().render(APP.templates.web2shopShopTrayData,{shop:r}),e.html(c),o.html(r.company),function(){if(nt.currentMapEngine()===nt.mapenginetype.GOOGLE){var e={lat:parseFloat(r.latitude),lng:parseFloat(r.longitude)};i?i.setCenter(e):i=new google.maps.Map(t,{zoom:12,center:e}),n?n.setPosition(e):n=new google.maps.Marker({position:e,map:i,icon:{url:a}})}else{var s=new BMap.Point(parseFloat(r.longitude),parseFloat(r.latitude));if(i?i.setCenter(s):((i=new BMap.Map(t)).centerAndZoom(s,12),i.enableScrollWheelZoom(!0),i.addControl(new BMap.NavigationControl({type:BMAP_NAVIGATION_CONTROL_ZOOM}))),n)n.setPosition(s);else{var o=nt.mapengine.map.pins.store.size,c=nt.mapengine.map.pins.store.anchor,u=new BMap.Icon("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6IzQ0NDQ0NDt9LnN0MXtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuMiwwQzUsMCwwLDUsMCwxMS4yYzAsMi42LDAuOCw1LDIuNCw3bDcuMiw5bDEuNiwybDEuNi0ybDUuOC03LjRsMS4yLTEuNmMxLjYtMiwyLjQtNC40LDIuNC03QzIyLjIsNSwxNy4yLDAsMTEuMiwweiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4NCjwvc3ZnPg0KDQo=",new BMap.Size(o.x,o.y),{anchor:new BMap.Size(c.x,c.y)});n=new BMap.Marker(s,{icon:u}),i.addOverlay(n)}}}(),this.rebind()},this.bind=function(){APP.pubsub.subscribe("tray.store.toggle",d.bind(this))},this.unbind=function(){jQuery('[data-bind="make-favorite-shop"]').off("click",l.bind(this)),jQuery('[data-bind="select-shop"]').off("click",this.onSelectShopClick.bind(this))},this.rebind=function(){jQuery('[data-bind="make-favorite-shop"]').on("click",l.bind(this)),jQuery('[data-bind="select-shop"]').on("click",this.onSelectShopClick.bind(this))},this.onSelectShopClick=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-shop-id");APP.pubsub.publish("tray.store.selected-shop",t),this.tray.close()},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.init()};function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function _n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ZOOM_SPEED=t.zoomSpeed||.5,this.SCROLL_SPEED=t.scrollSpeed||1,this.variants=t.products,this.defaultSetSku=t.sku,this.attributes=t.attributes,this.selectedAttributes,this.firstUpdate=!0,this.availableOptions={},this.GLOBAL=Drupal.settings.hermes_products.data,this.currentAttr,this.firstCall=!0,this.selectedAttribut=null,this.firstVariant,this.selectedSizeTop=!1,this.selectedSizeBot=!1,this.noSelected=!1,this.isAppleWatchKit=t.isAppleWatchKit,this.availableColorsNumber=0,this.formErrorMessage=Drupal.settings.hermes_translations.validation.errorOnForm,this.$pageTitle=jQuery("head title"),this.titleContent=this.$pageTitle.text(),this.buyable,this.REF_SIZE_TOP="field_ref_size_top",this.REF_SIZE_BOT="field_ref_size_bot",this.REF_SIZE="field_ref_size",this.COLOR_ATTR="field_color_hermes",this.$el=jQuery("#panel-configurator"),this.$el.length&&(this.tray=new B({$el:this.$el,name:"tray-configurator-bikini",animationSpeed:this.ZOOM_SPEED,scrollSpeed:this.SCROLL_SPEED}),APP.currentSetSKU=Drupal.settings.hermes_products.data.set.sku,APP.currentSKU=Drupal.settings.hermes_products.data.default_variant.sku.join("-"),this.defaultSkus=Drupal.settings.hermes_products.data.default_variant.sku,this.defaultVariants=this.selectedVariants=this.findDefaultVariants(Drupal.settings.hermes_products.data.products),this.firstVariant=this.defaultSkus[0],this.secondVariant=this.defaultSkus[1],this.cacheDom(),this.bind(),this.initSelectedAttributes(),this.showDefaultValues(),this.findMatchingVariants(),jQuery(".product-configurator-field_ref_size_top").find("legend span").text(""),jQuery(".product-configurator-field_ref_size_bot").find("legend span").text(""),this.$el.find(".product-locator-container-button").hide())}var t,r;return t=e,r=[{key:"findDefaultVariants",value:function(e){var t=this,r=[];return e.forEach((function(e,i){return r.push(e.find((function(e){return e.sku===t.defaultSkus[i]})))})),r}},{key:"update",value:function(e){this.variants=e,this.findMatchingVariants()}},{key:"cacheDom",value:function(){this.title=this.$el[0].querySelector(".title-tray-container h2"),this.price=this.$el[0].querySelector(".field-type-commerce-price"),this.eco_tax=this.$el[0].querySelector(".field-type-commerce-eco-tax"),this.productInfo=document.querySelector("#product-info"),this.$productDetail=jQuery("#product-detail"),this.productSku=this.productInfo.querySelector(".commerce-product-sku-value"),this.$form=jQuery("#variant"),this.$formInputs=this.$form.find(".product-configurator-form-input")}},{key:"bind",value:function(){APP.pubsub.subscribe("tray.configurator.bikini.open",this.showPanel.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.hidePanel.bind(this)),APP.pubsub.subscribe("zoomed.out",this.hidePanel.bind(this)),APP.pubsub.subscribe("update.dom",this.updateDom.bind(this)),this.$el.on("change",".product-configurator-form-input",this.changeConfiguration.bind(this)).on("click",".tray-close",this.handlePanel.bind(this)).on("click","[data-bind=product-add-to-cart]",this.onAddToCartClick.bind(this)).on("click","[data-bind=configurator-add-to-cart]",this.onAddToCartClick.bind(this))}},{key:"showDefaultValues",value:function(){var e=jQuery('[href="#configurator-'.concat(this.COLOR_ATTR,'"] .product-attribute-value span'),this.productInfo),t=Drupal.settings.hermes_products.data.products[0][0].attributes;e.text(t.field_color_hermes.attr_display||t.field_color_hermes.name),this.currentAttr=t.field_color_hermes.id.replace(/\s/g,"")}},{key:"initSelectedAttributes",value:function(){this.selectedAttributes={field_color_hermes:this.defaultVariants[0].attributes.field_color_hermes},this.selectedAttributes.field_ref_size_top=null,this.selectedAttributes.field_ref_size_bot=null}},{key:"findMatchingVariants",value:function(){var e=this;this.matchingVarients=this.variants;var t=[],r=[];this.matchingVarients.forEach((function(i,n){return i.forEach((function(i){void 0!==i.attributes[e.REF_SIZE]&&(t.push(i),0===n?r.push("".concat(i.attributes[e.REF_SIZE].field,"_top-").concat(i.attributes[e.REF_SIZE].name)):r.push("".concat(i.attributes[e.REF_SIZE].field,"_bot-").concat(i.attributes[e.REF_SIZE].name,"1")))}))})),this.matchingVarients=t,this.updateOptionsAvailability(r),this.updateConfiguratorDom()}},{key:"updateOptionsAvailability",value:function(e){var t=this,r=this.$form.find(".product-configurator-form-input");[].map.call(r,(function(e){return{variationField:(t=e.id.split("-"),r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return bn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bn(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],id:e.id.replace(/\s/g,""),$el:jQuery(e)};var t,r})).forEach((function(r){var i=r.variationField,n=r.id,a=r.$el;i!==t.REF_SIZE_TOP&&i!==t.REF_SIZE_BOT||(e.includes(n)?a.attr("disabled",!1):a.attr("disabled",!0))}))}},{key:"changeConfiguration",value:function(e){var t=this;this.selectedSizeTop=!1,this.selectedSizeBot=!1;var r=e.currentTarget.getAttribute("data-field");this.noSelected=!0,this.selectedAttributes[r]=e.currentTarget.value,this.selectedAttribut=this.selectedAttributes[r],this.selectedAttributes[r].includes(this.REF_SIZE_TOP)&&(this.selectedSizeTop=!0),this.selectedAttributes[r].includes(this.REF_SIZE_BOT)&&(this.selectedSizeBot=!0),this.findMatchingVariants(),this.selectedSizeTop&&(this.selectedVariants[0]=this.firstVariant=this.GLOBAL.products[0].find((function(e){return"".concat(e.attributes.field_ref_size.field,"_top-").concat(e.attributes.field_ref_size.name)===t.selectedAttribut}))),this.selectedSizeBot&&(this.selectedVariants[1]=this.secondVariant=this.GLOBAL.products[1].find((function(e){return"".concat(e.attributes.field_ref_size.field,"_bot-").concat(e.attributes.field_ref_size.name)===t.selectedAttribut}))),this.updateConfiguratorDom(),y()&&this.updateDom(),this.updateValidation({updatedField:r,configuratorId:e.currentTarget.name}),this.selectedSizeTop&&APP.pubsub.publish("configurator.change",this.firstVariant),this.selectedSizeBot&&APP.pubsub.publish("configurator.change",this.secondVariant)}},{key:"showPanel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scrollTo:this.REF_SIZE_TOP},r=jQuery("#panel-configurator .variant-image");jQuery.map(r,(function(e){return jQuery(e).attr("src",jQuery(e).data("src"))}));var i=t.scrollTo;if(t.scrollTo===this.REF_SIZE_BOT&&(i=t.scrollTo+"1"),t&&jQuery("#configurator-".concat(i)).length){var n=jQuery("#configurator-".concat(i)).offset().top+this.tray.$wrapper.scrollTop()-window.pageYOffset;this.tray.scrollTo({top:n})}this.tray.open(),this.firstCall&&(this.$form.find(" .product-configurator-form-input").removeAttr("checked"),jQuery('[name="field_color_hermes"]').attr("checked","checked"),this.firstCall=!1)}},{key:"hidePanel",value:function(){this.tray.isOpen&&(this.tray.close(),APP.pubsub.publish("zoom.out"))}},{key:"handlePanel",value:function(){var e=jQuery(".tray-trigger-origin").attr("data-field");if(this.updateDom(),e){var t='button[data-field="'.concat(e,'"]');jQuery(t).focus()}this.tray.close(),APP.pubsub.publish("zoom.out")}},{key:"updateConfiguratorDom",value:function(){var e=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariants[0]),t=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariants[1]),r=jQuery('[data-field="'.concat(this.REF_SIZE_TOP,'"] .product-attribute-value span')),i=jQuery('[data-field="'.concat(this.REF_SIZE_BOT,'"] .product-attribute-value span'));this.selectedSizeTop&&r.html(e.attributes.field_ref_size.attr_display),this.selectedSizeBot&&i.html(t.attributes.field_ref_size.attr_display)}},{key:"updateDom",value:function(){var e=[];if(this.noSelected||(this.selectedVariants=this.defaultVariants),this.firstUpdate||this.productSku.textContent!=="".concat(this.selectedVariants[0].sku," | ").concat(this.selectedVariants[1].sku)){this.updatedDataRender(),e[0]=this.selectedVariants[0]?this.selectedVariants[0].sku:null,e[1]=this.selectedVariants[1]?this.selectedVariants[1].sku:null;var t=e.join(" | ");jQuery(this.productSku).html(t),APP.updatedProductSKU=t,this.selectedAttributes[this.REF_SIZE_TOP]||jQuery('[data-field="field_ref_size_top"] .product-attribute-value span').html(Drupal.settings.hermes_translations.ui.select),this.selectedAttributes[this.REF_SIZE_BOT]||jQuery('[data-field="field_ref_size_bot"] .product-attribute-value span').html(Drupal.settings.hermes_translations.ui.select)}else this.firstUpdate=!1}},{key:"updatedDataRender",value:function(){var e=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariants[0]),t=Drupal.settings.hermes_products.data.set.description;e.color=this.variants[0][0].attributes.field_color_hermes,e.bottom_bikini_selected=this.selectedVariants[1],e.top_bikini_selected=this.selectedVariants[0],e.thumb=this.variants[0][0].thumbs[0].uri,e.intro=t?t[0]:null,e.remaining_copy=t[1]?t[1]:null;var r=C().render(APP.templates.productInfoBikini,e);this.$productDetail.find("#variant-info").html(r)}},{key:"isValid",value:function(){return!Vi()(this.selectedAttributes).includes(null)}},{key:"validate",value:function(){if(!this.isValid()){for(var e in this.selectedAttributes)this.selectedAttributes.hasOwnProperty(e)&&(this.selectedAttributes[e]||this.throwValidationError({field:e.split("-")[0]}));if(!this.matchingVarients.length)throw new Error("No products match this configuration","product-bikini-configurator.js")}}},{key:"throwValidationError",value:function(e){var t=e.field;e.field===this.REF_SIZE_BOT&&(t="".concat(e.field,"1"));var r=document.querySelector("#configurator-".concat(t)),i=this.tray.$wrapper.scrollTop()+jQuery(r).offset().top-window.pageYOffset;r.classList.add("error"),this.$el.addClass("error-on-form"),this.$pageTitle.html(this.formErrorMessage+this.titleContent),this.tray.scrollTo({top:i})}},{key:"updateValidation",value:function(e){document.querySelector("#configurator-".concat(e.configuratorId)).classList.remove("error"),this.productInfo.querySelector(".product-attributes-".concat(e.updatedField)).classList.remove("error"),this.$el.removeClass("error-on-form"),this.$pageTitle.html(this.titleContent)}},{key:"onAddToCartClick",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.isValid()){var t=[this.defaultSetSku||null,this.firstVariant.sku||null,this.secondVariant.sku||null],r=t.includes(null)?null:t.join("-"),i=jQuery(".tray-trigger-origin").attr("data-field");if(APP.pubsub.publish("zoom.out"),this.updateDom(),i){var n='a[data-field="'.concat(i,'"]');jQuery(n).focus()}this.tray.close();var a={sku:r,container_id:this.defaultSetSku||null,image:this.defaultVariants[0].thumbs[0].uri,category:_.get("nav")?_.get("nav"):"direct"};APP.pubsub.publish("addToCart",a)}else this.validate()}},{key:"setBuyable",value:function(e){this.buyable=e}}],r&&_n(t.prototype,r),e}(),wn=function(){var e,t=jQuery("#request-wechat-binding-informations");this.init=function(){this.formID="#hermes-account-wechat-binding-form",this.$el=jQuery("#tray-wechat-binding"),this.form=this.$el.find("form"),this.tray=new B({$el:this.$el,name:"tray-wechat-binding",showOverlay:!0}),t[0]&&(e=new _e({inputs:t[0].querySelectorAll("[name]")})),this.form.attr("novalidate","novalidate"),this.smsHelpers=new De,this.smsHelpers.init(this.formID),this.bind()},this.bind=function(){this.form.find(".edit-send-sms-button").on("click",this.smsHelpers.sendSmsCode).bind(this),APP.pubsub.subscribe("tray.wechat-binding.toggle",this.toggleTray.bind(this)),this.form.on("submit",this.submitForm.bind(this))},this.submitForm=function(t){var r=this;if(t.preventDefault(),t.stopPropagation(),e.runTests(t),!this.form.find(".validation-error").length){this.showLoader();var i={};i.phonecode=this.form.find('input[name="phonecode"]').val(),i.loginphone=this.form.find('input[name="loginphone"]').val(),i.verificationcode=this.form.find('input[name="verificationcode"]').val(),i.confirm_verificationcode=this.form.find('input[name="confirm_verificationcode"]').val(),ue("/wechat/binding/loginbyphone",i).done(this.loginWechatBindingDone.bind(this)).fail((function(){r.hideLoader(),r.showNotificationError()}))}},this.loginWechatBindingDone=function(e){_.deleteItem("social_login"),J(),e.need_create_account?(_.set("user_sms_bp",!0),window.location="".concat(window.location.origin,"/").concat(Drupal.settings.hermes_url_locale,"/").concat(Drupal.settings.hermes_translations.url.account_create)):e.error?(this.hideLoader(),this.handleErrorResponse(e)):(delete e.user.social,e.user.wechatlinked=!0,APP.pubsub.publish("account.login.done",{jqXHR:e,source:"wechat"}))},this.showNotificationError=function(){var e={message:Drupal.settings.hermes_translations.notification.account.errorMessage,messageVariables:{},type:"critical"};jQuery.extend(e.messageVariables,Drupal.settings.hermes_translations.notification.account.errorMessage.variables),Y(e)},this.showLoader=function(){H("loader-button-wechat-binding")},this.hideLoader=function(){q("loader-button-wechat-binding")},this.handleErrorResponse=function(e){var t=e.error?e.error.internal_code:void 0,r=e.error?e.error.message:void 0,i=Drupal.settings.hermes_translations.notification.account.wechatBindingCodes,n={};if(e.error&&e.error.smsErrorNumber)return Y({message:window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[e.error.smsErrorNumber]}),void(e.error.smsErrorNumber.toString()===k.ERRORCODE.smsBanned&&APP.pubsub.publish("account.sms.banned"));switch(t){case k.ERRORCODE.wechatbindingUserNotFound:case k.ERRORCODE.wechatbindingUserAlreadyBind:case k.ERRORCODE.wechatbindingUnionIdAlreadyUsed:case k.ERRORCODE.wechatbindingNeededParams:n={message:i[t],messageVariables:{message:r},type:"critical"},jQuery.extend(n.messageVariables,i[t].variables),Y(n);break;case k.ERRORCODE.inactivity:APP.pubsub.publish("account.httpsession.expired");break;default:te()}},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.init()};function Pn(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var An="hermes-ereservation-signup-form",Cn="loader-sign-up-tray",Sn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=jQuery("#tray-ereservation-signup-signin"),this.$loginForms=this.$el.find("#".concat("hermes-ereservation-signin-form")),this.$signUpForms=this.$el.find("#".concat(An)),this.$signUpCaptcha=this.$el.find("#".concat("hermes-ereservation-signup-form-captcha")),this.$emailField=this.$el.find("#signin-email"),this.$passwordField=this.$el.find("#signin-password"),this.$createAccountButton=this.$signUpForms.find(".button.button-block.form-submit"),this.$errorCallCreateAccount=this.$signUpForms.find("#tray-ereservation-signup-error-call"),this.formHelpers=new oe,this.$loginForms.length>0&&(this.validatorSignIn=new _e({inputs:this.$loginForms[0].querySelectorAll("[name]")})),this.$signUpForms.length>0&&(this.validatorSignUp=new _e({inputs:this.$signUpForms[0].querySelectorAll("[name]")})),this.tray=new B({$el:this.$el,name:"tray-ereservation-signup-signin",showOverlay:!0}),this.bind()}var t,r;return t=e,(r=[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation.signupsignin.open",this.initTray.bind(this)),APP.pubsub.subscribe("imNotARobotProfileTray",this.removeCaptchaError.bind(this)),APP.pubsub.subscribe("imNotARobotProfileTrayExpired",this.addCaptchaError.bind(this)),this.$el.on("click",".show-password",this.formHelpers.showPasswordMask.bind(this)),this.$loginForms.on("submit",this.submitSignInForm.bind(this)),this.$signUpForms.on("submit",this.submitSignUpForm.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this))}},{key:"initTray",value:function(){this.isCaptchaInitialized?APP.trayController.triggerTray({name:"tray-ereservation-signup-signin"}):(this.initCaptcha(),this.isCaptchaInitialized=!0)}},{key:"initCaptcha",value:function(){var e="#".concat(An),t={formId:e};ue(k.ACTIVATE_CAPTCHA_URL,t,"GET").done((function(t){t.error?te():(P.generateReCaptcha(t,e),APP.trayController.triggerTray({name:"tray-ereservation-signup-signin"}))})).fail((function(){return te()}))}},{key:"removeCaptchaError",value:function(){this.$signUpCaptcha.removeClass("validation-error"),this.$signUpForms.find("p.captcha-error-message.error-message").remove()}},{key:"addCaptchaError",value:function(){this.$signUpCaptcha.addClass("validation-error")}},{key:"_onTrayOpen",value:function(){Ye.ereservationAccountOverlay()}},{key:"submitSignInForm",value:function(e){if(e.preventDefault(),!(this.$loginForms.length<1))if(this.$loginForms[0].checkValidity()){var t="ereservation";H("loader-sign-in-tray");var r={locale:_.get("currentStore"),email:this.$emailField.val(),pass:this.$passwordField.val(),source:t};APP.pubsub.publish("account.login.call",{serverReqData:r,$loginForm:this.$loginForms,$emailField:this.$emailField,$passwordField:this.$passwordField,source:t})}else this.validatorSignIn.runTests(e)}},{key:"getFieldValueFromSignUpForm",value:function(e){if(e){var t=this.$signUpForms.find(e);return t.length?t.val():""}return""}},{key:"submitSignUpForm",value:function(e){if(e.preventDefault(),this.hideErrorCallCreateAccount(),!(this.$signUpForms.length<1)&&this.$signUpForms[0]){var t=P.validateRecaptcha(An);if(t?this.removeCaptchaError():this.addCaptchaError(),this.$signUpForms[0].checkValidity()&&t){H(Cn);var r={email:this.getFieldValueFromSignUpForm("#edit-email"),prefix:this.getFieldValueFromSignUpForm("#edit-prefix"),firstname:this.getFieldValueFromSignUpForm("#edit-firstname"),lastname:this.getFieldValueFromSignUpForm("#edit-lastname"),light_account_telephone:this.getFieldValueFromSignUpForm("#edit-telephone"),country_id:Drupal.settings.hermes_current_country.toUpperCase(),locale:Drupal.settings.hermes_locale,action:"create",formId:"#".concat(An),"g-recaptcha-response":this.getFieldValueFromSignUpForm("textarea[name=g-recaptcha-response]")};ue(k.CREATE_LIGHT_ACCOUNT_URL,r,"POST").done(this.handleCreateAccountSuccess.bind(this)).fail(this.handleCreateAccountError.bind(this))}else this.validatorSignUp.runTests(e)}}},{key:"handleCreateAccountSuccess",value:function(e){if(e&&!e.error){var t=e.user;t.basket=e.basket,t.cart=null,t["mini-wishlist"]=null,_.set("user",t),_.set("isConnected",!0),_.set("returningUser",!0),_.set("checkUserSessionToken",!0),window.APP.NOTIFICATIONS.messages={prefix:t.prefix,firstname:t.firstname,lastname:t.lastname},Ye.ereservationSignup(),q(Cn),Er.openTrayRequestConfirm(),this.resetCaptcha(An)}else this.handleCreateAccountError(e)}},{key:"handleCreateAccountError",value:function(e){var t=e&&e.error?e.error.internal_code:null,r=Drupal.settings.hermes_translations.ereservation.error.technical;t===k.ERRORCODE.emailExist&&(r=Drupal.settings.hermes_translations.ereservation.error.emailExist),this.showErrorCallCreateAccount(r),Ye.ereservationSignup(r),q(Cn),this.resetCaptcha(An)}},{key:"showErrorCallCreateAccount",value:function(e){this.$errorCallCreateAccount.removeClass("invisible"),this.$errorCallCreateAccount.attr("aria-hidden","false"),this.$errorCallCreateAccount.find(".sr-only").text(e),this.$errorCallCreateAccount.find(".text").text(e),this.$createAccountButton.attr("aria-describedby","tray-ereservation-signup-error-call")}},{key:"hideErrorCallCreateAccount",value:function(){this.$errorCallCreateAccount.addClass("invisible"),this.$errorCallCreateAccount.attr("aria-hidden","true"),this.$createAccountButton.removeAttr("aria-describedby")}},{key:"resetCaptcha",value:function(e){APP.recaptcha&&APP.recaptcha.hasOwnProperty(e)&&window.grecaptcha.reset()}}])&&Pn(t.prototype,r),e}();function En(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Tn="loader-forgot-password-tray",xn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=jQuery("#tray-ereservation-forgot-password"),this.$forgotForms=this.$el.find("#hermes-ereservation-forgot-password-form"),this.$emailField=this.$el.find("#ereservation-forgotten-password-email"),this.$forgotForms.length>0&&(this.validator=new _e({inputs:this.$forgotForms[0].querySelectorAll("[name]")})),this.tray=new B({$el:this.$el,name:"tray-ereservation-forgot-password",showOverlay:!0}),this.bind()}var t,r;return t=e,(r=[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation.forgotpassword.toggle",this.toggleTray.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.$forgotForms.on("submit",this.submitForm.bind(this))}},{key:"_onTrayOpen",value:function(){var e=jQuery("#signin-email").val();e&&this.$emailField.val(e)}},{key:"toggleTray",value:function(){this.tray.isOpen?this.tray.close():this.tray.open()}},{key:"submitForm",value:function(e){if(e.preventDefault(),!(this.$forgotForms.length<1))if(H(Tn),this.$forgotForms[0].checkValidity()){var t={email:this.$emailField.val(),async:!0};ue(k.FORGOT_PASSWORD_URL,t).done((function(e){var t=Drupal.settings.hermes_translations.notification.account.forgotpassword;e.error&&"2330001"===e.error.internal_code&&(t=Drupal.settings.hermes_translations.notification.account.loginCodes[2330001]),window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:t.title,messageDescription:t.description},x("tray-ereservation-forgot-password","change-password"),q(Tn)})).fail((function(){te(),q(Tn)}))}else this.validator.runTests(e),q(Tn)}}])&&En(t.prototype,r),e}();function Dn(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var On=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=jQuery("#tray-e-reservation-request-validation"),this.tray=new B({$el:this.$el,name:"tray-ereservation-request-validation",showOverlay:!0}),this.bind()}var t,r;return t=e,(r=[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation.request.validation.open",this.toggleTray.bind(this)),this.$el.on("click",".e-reservation-continue-experience-button, .e-reservation-close-button",this.closeTray.bind(this))}},{key:"toggleTray",value:function(){this.tray.isOpen?this.closeTray():APP.trayController.triggerTray({name:"tray-ereservation-request-validation"})}},{key:"closeTray",value:function(){var e=Er.getEreservationStore();e&&e.hasOwnProperty("name")&&Ct.trackContinueExperienceClick(e.name),APP.pubsub.publish("zoom.out"),this.tray.close()}}])&&Dn(t.prototype,r),e}();function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function In(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ln(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Rn="visible",Mn=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._moduleHash={"tray-account":Ie,"tray-cart":Le,"tray-create-profile":sr,"tray-edit-address":vr,"tray-edit-password":br,"tray-edit-profile":_r,"tray-email":Pr,"tray-exchange-return-details":Qr,"tray-exchange-return-instructions":qr,"tray-exchange-return-method":ci,"tray-request-return":di,"tray-request-fapiao":hi,"tray-find-order":mi,"tray-find-store":gi,"tray-forgotpassword":yi,"tray-gift":Pi,"tray-help":Ai,"tray-locale":Ci,"tray-nav-shop":Mi,"tray-create-password":Fi,"tray-subscribe":Ee,"tray-order":Ni,"tray-order-list":Ui,"tray-configurator":cn,"tray-configurator-look":dn,"tray-configurator-multi":hn,"tray-sister-brands":mn,"tray-size-guide":yn,"tray-store-details":vn,"tray-configurator-bikini":kn,"tray-wechat-binding":wn},t&&"single product page"==t&&(this._moduleHash["tray-product-locator"]=Cr,this._moduleHash["tray-ereservation-request-confirm"]=Or,this._moduleHash["tray-ereservation-signup-signin"]=Sn,this._moduleHash["tray-ereservation-forgot-password"]=xn,this._moduleHash["tray-ereservation-request-validation"]=On),this._instanceHash={},this._eventHandlerHash={},this._lockList=[],this._trayStack=[],this._currentVisibleInstanceId=null,this.suggestionsListState=!1,this._init(t),this._bind(),window.initTray){V();var r=new CustomEvent("drupalTrayInit-".concat(window.initTray));window.parent.dispatchEvent(r)}}var t,r;return t=e,r=[{key:"_init",value:function(e){var t=this;Drupal.settings.instantiateTrays&&(APP.newsletter=this._getTrayInstance({name:"tray-subscribe"}),this._getTrayInstance({name:"tray-nav-shop"}),this._getTrayInstance({name:"tray-cart"}),this._getTrayInstance({name:"tray-help"}),this._getTrayInstance({name:"tray-find-order"}),this._getTrayInstance({name:"tray-request-fapiao"}),this._getTrayInstance({name:"tray-wechat-binding"}),this._getTrayInstance({name:"tray-request-fapiao"}),this._getTrayInstance({name:"tray-wechat-binding"}),this._getTrayInstance({name:"tray-account"}),this._getTrayInstance({name:"tray-subscribe"}),e&&"single product page"==e&&(this._getTrayInstance({name:"tray-product-locator"}),this._getTrayInstance({name:"tray-ereservation-request-confirm"}))),window.location.hash&&this._handleFragment(window.location.hash.slice(1)),APP.pubsub.subscribe("trap-focus",(function(e,t){P.trapFocusInTray(jQuery("#".concat(t)))})),APP.pubsub.subscribe("help-tray-angular",(function(){t._getTrayInstance({name:"tray-help"})})),APP.pubsub.subscribe("email-tray-angular",(function(){var e=t._getTrayInstance({name:"tray-email"});e&&e.wrapper&&(e.wrapper._onTrayOpen(),t.fixCaptchaClass())})),APP.pubsub.subscribe("account-tray-angular",(function(){var e=t._getTrayInstance({name:"tray-account"});e&&e.wrapper&&e.wrapper.toggleTrayState()})),APP.pubsub.subscribe("forgot-password-tray-angular",(function(){var e=t._getTrayInstance({name:"tray-forgotpassword"});e&&e.wrapper&&e.wrapper._onTrayOpen()})),APP.pubsub.subscribe("subscribe-tray-angular",(function(){var e=t._getTrayInstance({name:"tray-subscribe"});e&&e.wrapper&&e.wrapper._onTrayOpen()})),APP.pubsub.subscribe("order-list-tray-angular",(function(){var e=t._getTrayInstance({name:"tray-order-list"});e&&e.wrapper&&e.wrapper.showFirstOrders()})),APP.pubsub.subscribe("order-tray-angular",(function(e,r){t._getTrayInstance({name:"tray-order",order:r})})),APP.pubsub.subscribe("exchange-return-request-tray-angular",(function(e,r){var i=t._getTrayInstance({name:"tray-request-return"});i&&i.wrapper&&i.wrapper.setNewTrayData({config:{mode:r.mode,orderNumber:r.order.increment_id,type:"angular"}})})),APP.pubsub.subscribe("exchange-return-method-tray-angular",(function(e,r){var i=t._getTrayInstance({name:"tray-exchange-return-method"});i&&i.wrapper&&(i.wrapper.setNewTrayData(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(r),!0).forEach((function(t){In(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"angular"},r)),i.dispatchEvent(new CustomEvent("lockRelease",{detail:{isOpen:!0}})))})),APP.pubsub.subscribe("exchange-return-instructions-tray-angular",(function(e,r){var i=t._getTrayInstance({name:"tray-exchange-return-instructions"});i&&i.wrapper&&(i.wrapper._handleNewTrayData(void 0,r),APP.pubsub.subscribe("analytics-refund-details-exchange-return-angular",(function(e,t){APP.pubsub.publish("analytics-refund-details-exchange-return",t)})))})),APP.pubsub.subscribe("exchange-return-details-tray-angular",(function(e,r){var i=t._getTrayInstance({name:"tray-exchange-return-details"});i&&i.wrapper&&i.wrapper._handleNewTrayData(void 0,r)})),APP.pubsub.subscribe("edit-address-angular",(function(e,r){var i=t._getTrayInstance({name:"tray-edit-address"});i&&i.wrapper&&i.wrapper.setTrayState(e,r)})),APP.pubsub.subscribe("request-fapiao-angular",(function(e,r){t._getTrayInstance({name:"tray-request-fapiao"}).wrapper.setTrayState(r)})),APP.pubsub.subscribe("sister-brands-tray-angular",(function(){t._getTrayInstance({name:"tray-sister-brands"}),fn.trayPageview()}))}},{key:"_bind",value:function(){var e=this;jQuery(".continue-experience").on("click",this.closeAll.bind(this)),jQuery(document.body).on("click","[data-tray-trigger]",this._onTrayTriggerClick.bind(this)),jQuery(document.body).on("keypress","[data-tray-trigger]",(function(t){t.key===(k.ENTER_KEY||k.SPACE_KEY)&&e._onTrayTriggerClick(t)})),jQuery('[data-tray-trigger], a[href^="#tray-"]').on("keypress click",(function(t){return e._addTrayTriggerOriginClass(t)})),jQuery(document).on("keypress click",".tray-trigger",(function(t){return e._addTrayTriggerOriginClass(t)})),[jQuery("#tray-overlay"),jQuery("#tray-scroll-wrap")].forEach((function(t){t.on("click",e._onTrayOverlayClick.bind(e))})),jQuery("button .button-icon").bind("keypress click",(function(){$(".title-tray").focus()})),jQuery('a[href*="#tray-find-order"]').on("click",(function(){return APP.pubsub.publish("tray.findOrder.toggle")})),APP.pubsub.subscribe("search.suggestions_list.state",this._setSuggestionsListState.bind(this))}},{key:"_getTrayInstance",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.instanceId||e.name,i=_.get("user");if(e.name&&"tray-order-list"===e.name&&void 0!==this._userInfoOld&&JSON.stringify(i)!==JSON.stringify(this._userInfoOld)&&(this._instanceHash[r]=void 0),APP.pubsub.publish("reset-password"),!this._instanceHash[r]){if(!this._moduleHash[e.name])return console.error("Requested to instantiate an instance of ".concat(e.name," but this module could not be found. Check the name?")),{};var n=new this._moduleHash[e.name](e);e.name&&"tray-order-list"===e.name&&(this._userInfoOld=_.get("user")),this._instanceHash[r]=n.tray,this._instanceHash[r].wrapper=n,this._bindTrayEvents(this._instanceHash[r],t)}return this._instanceHash[r].wrapper&&this._instanceHash[r].wrapper.setParams&&this._instanceHash[r].wrapper.setParams(e),this._instanceHash[r]}},{key:"_getGenericTrayInstance",value:function(e){var t=e.instanceId||e.name;if(!this._instanceHash[t]){if(!document.getElementById(e.name))return console.error("The tray has no content to be populated with. Check application logic?"),{};this._instanceHash[t]=new B({$el:jQuery("#"+e.name),name:e.name,instanceId:t,showOverlay:!0}),this._bindTrayEvents(this._instanceHash[t],"tray-configurator-look"!==e.name)}return this._instanceHash[t]}},{key:"_bindTrayEvents",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._eventHandlerHash[e.instanceId]=t?{backButtonClickHandler:e.addEventListener("backButtonClick",this._onTrayBackNodeClick.bind(this)),stackClosedHandler:e.addEventListener("animateLastTrayFromStackComplete",this._onStackClosedComplete.bind(this)),lockReleaseHandler:e.addEventListener("lockRelease",this._onTrayLockRelease.bind(this)),genericTrayTriggerHandler:e.addEventListener("genericTrayTrigger",this._onGenericTrayTrigger.bind(this)),openOneHandler:e.addEventListener("openOne",this.openOne.bind(this)),closeAllHandler:e.addEventListener("closeAll",this.closeAll.bind(this))}:{stackClosedHandler:e.addEventListener("animateLastTrayFromStackComplete",this._onStackClosedComplete.bind(this)),lockReleaseHandler:e.addEventListener("lockRelease",this._onTrayLockRelease.bind(this)),genericTrayTriggerHandler:e.addEventListener("genericTrayTrigger",this._onGenericTrayTrigger.bind(this)),openOneHandler:e.addEventListener("openOne",this.openOne.bind(this)),closeAllHandler:e.addEventListener("closeAll",this.closeAll.bind(this))}}},{key:"getDepth",value:function(){return this._trayStack.length}},{key:"getStack",value:function(){return this._trayStack}},{key:"addLock",value:function(e){return this._lockList.push(e),this._lockList}},{key:"removeLock",value:function(e){return this._lockList=this._lockList.filter((function(t){return t!==e})),this._lockList}},{key:"isLocked",value:function(){return!!this._lockList.length}},{key:"getTray",value:function(e){return this._getTrayInstance(e)}},{key:"triggerTray",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.isLocked()){"1"===jQuery(".notification").css("opacity")&&"update"!==e.source&&"create"!==e.source&&void 0===_.get("social_login")&&J();var r=this._getTrayInstance(e,t);return e.dontAdd||this.handleTray(r,e.forceOpen),r}}},{key:"handleTray",value:function(e,t){var r=this._trayStack.length,i=e.instanceId||e.name;if(!this.isLocked()){if(this.addLock(i),this._trayStack[r-1]===e.instanceId)return t||this.popStack(),void this.removeLock(i);r||jQuery("html").addClass("tray-open"),"tray-email"===i&&this.fixCaptchaClass(),this.pushStack(e);var n=document.querySelector("body");n.param=this,n.addEventListener("keyup",this.checkEscPress.bind(null,this))}}},{key:"fixCaptchaClass",value:function(){var e=jQuery('iframe[title*="recaptcha"]:not([title*="widget"])').parent();e.addClass("captchaHandlePos"),e.parent().addClass("deleteTopLeftIframe"),jQuery("#page-header").removeClass("affixed"),jQuery("#page-header").addClass("header-uptop")}},{key:"checkEscPress",value:function(e,t){void 0!==(t=t||event).currentTarget.param&&(27!==t.keyCode||"tray-product-locator"===e._trayStack[0]&&e.suggestionsListState||t.currentTarget.param.closeAll())}},{key:"pushStack",value:function(e){var t=e.instanceId||e.name,r=this._getTrayInstance({name:this._trayStack[this._trayStack.push(t)-1]});this._trayStack.length>1?(this._getTrayInstance({name:this._trayStack[this._trayStack.length-2]}).animateOutOfStack({from:-1}),r.animateIntoStack({to:1}),jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+Rn)):r.doOpen(),this._currentVisibleInstanceId=r.instanceId,"tray-nav"===this._currentVisibleInstanceId.substring(0,8)&&jQuery("body").addClass("tray-nav-open"),jQuery("#tray").addClass(this._currentVisibleInstanceId+"-"+Rn)}},{key:"popStack",value:function(){if(this._trayStack.length){var e=this._getTrayInstance({name:this._trayStack.pop()});if(jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+Rn),jQuery("body").removeClass("tray-nav-open"),this._trayStack.length){var t=this._getTrayInstance({name:this._trayStack[this._trayStack.length-1]});this._currentVisibleInstanceId=t.instanceId,"tray-nav"===this._currentVisibleInstanceId.substring(0,8)&&jQuery("body").addClass("tray-nav-open"),jQuery("#tray").addClass(this._currentVisibleInstanceId+"-"+Rn),t.animateIntoStack({to:-1}),e.animateOutOfStack({from:1})}else this._focusOnTrayTriggerOrigin(),this._currentVisibleInstanceId=null,e.doClose()}}},{key:"popFromStack",value:function(e){var t=this._trayStack.length;if(t)if(this._currentVisibleInstanceId!==e&&this._trayStack[t-1]!==e){for(var r=0;r<t-1;r++)if(this._trayStack[r]===e)return void this._trayStack.splice(r,1)}else this.popStack()}},{key:"closeAll",value:function(){this._trayStack.length&&(this._focusOnTrayTriggerOrigin(),jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+Rn),jQuery("body").removeClass("tray-nav-open"),this._currentVisibleInstanceId=null,this.addLock(this._trayStack[this._trayStack.length-1]),this._instanceHash[this._trayStack[this._trayStack.length-1]].doClose(),this._trayStack=[])}},{key:"quickCloseAll",value:function(){this._trayStack.length&&(this._focusOnTrayTriggerOrigin(),jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+Rn),jQuery("body").removeClass("tray-nav-open"),this._currentVisibleInstanceId=null,this._instanceHash[this._trayStack[this._trayStack.length-1]].hide(),this._trayStack=[])}},{key:"openOne",value:function(e){this.quickCloseAll();var t=this._getTrayInstance(e.detail);this.handleTray(t)}},{key:"_onTrayLockRelease",value:function(e){this.removeLock(e.detail.instanceId)}},{key:"_onTrayOverlayClick",value:function(e){var t=this;if(e.target===e.currentTarget){var r=this._getTrayInstance({name:this._trayStack[this._trayStack.length-1]});r.validate?r.validate().then((function(e){e&&t.closeAll()})):this.closeAll()}}},{key:"_onTrayBackNodeClick",value:function(e){this.isLocked()||(this.addLock(e.detail.instanceId||e.detail.name),this.popStack())}},{key:"_onStackClosedComplete",value:function(){if(!this._trayStack.length){var e=parseInt(jQuery("body").css("margin-top"),10);jQuery("html").removeClass("tray-open"),jQuery("body").attr("style",null),jQuery("body").scrollTop(-e)}}},{key:"_onTrayTriggerClick",value:function(e){if(!this.isLocked()){J(),e.preventDefault(),e.stopPropagation();var t=null,r={name:e.currentTarget.getAttribute("data-tray-trigger")},i=JSON.parse(e.currentTarget.getAttribute("data-tray-trigger-params")),n=jQuery.extend({},i,r),a=this._getTrayInstance(n);i&&(t=i.forceOpen),APP.pubsub.publish("tray.trigger.click"),APP.pubsub.publish("exchange.orderDetail.open"),this.handleTray(a,t)}}},{key:"_handleFragment",value:function(e){var t=e.split("&"),r={};-1!==t[0].indexOf("tray")&&(t.forEach((function(e,t){0!==t?r[e.split("=")[0]]=e.split("=")[1]:r.name=e})),this.triggerTray(r),window.location.hash="")}},{key:"_onGenericTrayTrigger",value:function(e){if(!this.isLocked()){var t=this._getGenericTrayInstance({name:e.detail.name});this.handleTray(t)}}},{key:"_addTrayTriggerOriginClass",value:function(e){var t=jQuery(e.currentTarget);t.parents("#tray").length||t.addClass("tray-trigger-origin"),t.blur()}},{key:"_focusOnTrayTriggerOrigin",value:function(){var e=jQuery(".tray-trigger-origin");e.length&&e[0].focus(),e.removeClass("tray-trigger-origin")}},{key:"_setSuggestionsListState",value:function(e,t){this.suggestionsListState=t}}],r&&Ln(t.prototype,r),e}();function Fn(){var e=jQuery(".info-banner");_.set("accountCreated",!1),e.removeClass("info-banner-show").empty(),e.removeAttr("role","alert")}_.get("show-info-banner")&&jQuery(document).ready(void(_.get("accountCreated")&&Drupal.settings.show_account_creation_notification_banner?(setTimeout(function(){var e=jQuery(".info-banner"),t=_.get("user");if(t){var r={name:T(t),createbywechat:_.get("accountCreatedByWechat")};_.deleteItem("accountCreatedByWechat"),e.attr("role","alert"),e.html(C().render(APP.templates.accountCreated,r));var i=jQuery(".info-banner-container"),n=jQuery("#close-info-banner");e.addClass("info-banner-show"),i.attr("tabindex",0).focus(),i.removeAttr("tabindex"),n.on("click",Fn)}}(),300),_.deleteItem("accountCreated")):_.get("cardDeleted")&&(function(){var e=jQuery(".info-banner");_.deleteItem("cardDeleted"),e.attr("role","alert"),e.html(C().render(APP.templates.cardDeleted));var t=jQuery(".info-banner-container"),r=jQuery("#close-info-banner");e.addClass("info-banner-show"),t.attr("tabindex",0).focus(),t.removeAttr("tabindex"),r.on("click",Fn)}(),_.deleteItem("cardDeleted"))));var Nn=function(){var e,t,r,i,n,a,s,o,c,u,l,d,h=jQuery("#skip-link-nav-shop"),p=Drupal.settings.hermes_global.pageType,f=Drupal.settings.hermes_global.pageProductAngular,m={},g=!0,v=!1,b=!1,k={};function w(){m.tl={},m.tl.header=TweenLite.fromTo(t,.2,{y:-APP.header.data.height},{y:0,paused:!0,force3D:!0,ease:window.Power2.easeInOut}),m.tl.header.progress(1),"product"===p?(m.tl.productBanner=TweenLite.fromTo(n,.2,{y:0},{y:APP.header.data.height,paused:!0,ease:window.Power2.easeInOut}),m.tl.productBanner.progress(0)):"grid"===p&&y()&&(m.tl.filterBanner=TweenLite.fromTo(c,.2,{y:-m.filterHeight},{y:0,force3D:!0,ease:window.Power2.easeInOut}),m.tl.filterBanner.progress(1)),"faq"===p||"grid"===p&&P.isAngularMode()||window.scrollTo(0,document.body.scrollTop-1)}function A(e,t){(function(e){var t=!1;return!(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.screen.height/window.screen.width>2)&&(!e||((!e.height||e.height-k.height>100)&&(t=!0),k=e,t))})(t)&&E()}function C(){c.hasClass("affixed")&&c.removeClass("affixed").removeAttr("style")}function S(){jQuery("#collection-button").focus()}function E(){var r,i;APP.header.data=(i=e[0].getBoundingClientRect(),r=void 0!==r?r:document.documentElement.scrollTop||document.body.scrollTop,{x:i.x,y:i.y,width:i.width,height:i.height,top:i.top+r,right:i.right,bottom:i.bottom+r,left:i.left}),m.headerMetaHeight=o.height(),m.headerHeight=t.height(),g=!1,v=!1,b=!1,"grid"===p?(m.filterBannerOffset=function(){if(u.length){var e=u.offset();return e&&e.top}}(),m.filterHeight=c.outerHeight(),m.filterTop=m.filterBannerOffset-m.filterHeight):"product"!==p||f||(m.productBottom=a.position().top-n.height()),clearTimeout(l),l=setTimeout(w,250)}function T(e,r){t.toggleClass("header-uptop",r.pos<=m.headerMetaHeight),d.toggleClass("header-fixed",r.pos>m.headerMetaHeight),m.headerMetaHeight=o.height(),m.headerHeight=t.height(),s.hasClass("slick-initialized")&&(r.pos>s.height()?s.slick("slickPause"):s.slick("slickPlay")),!v&&r.pos>m.headerMetaHeight&&"down"===r.direction?(v=!0,t.addClass("affixed"),i.prop("position","static"),n.removeClass("hidden")):(0===r.pos||v&&r.pos<=m.headerMetaHeight&&"up"===r.direction)&&(v=!1,t.removeClass("affixed"),n.addClass("hidden")),"product"===p?function(e){e.pos>=m.productBottom&&"down"===e.direction&&!b?(i.prop("position","static"),b=!0,g=!1,m.tl.productBanner.play(),m.tl.header.timeScale(.75),m.tl.header.reverse()):g&&b&&e.pos>=m.productBottom&&"down"===e.direction?(g=!1,m.tl.header.reverse()):!g&&b&&e.pos>=m.productBottom&&"up"===e.direction?(g=!0,m.tl.header.play()):e.pos<m.productBottom&&b&&(b=!1,m.tl.productBanner.reverse())}(r):"grid"===p&&y()&&function(e){e.pos>=m.filterTop&&"down"===e.direction&&!b?(b=!0,c.addClass("affixed"),t.removeClass("affixed")):v&&b&&e.pos>=m.filterBannerOffset&&"down"===e.direction?(v=!1,t.removeClass("affixed"),m.tl.header.reverse(),m.tl.filterBanner.reverse()):!v&&b&&e.pos>=m.filterTop&&"up"===e.direction?(v=!0,m.tl.header.play(),m.tl.filterBanner.play()):e.pos<m.filterTop&&b&&(b=!1,c.removeClass("affixed"))}(r)}function x(e){e.preventDefault(),window.location.href=Drupal.settings.basePath+Drupal.settings.hermes_url_locale}(function(){APP.header={},e=jQuery("#page-header-wrap"),t=jQuery("#page-header"),r=jQuery("#header-actions"),n=jQuery("#product-banner"),a=jQuery("#product-detail"),i=jQuery(".header .block-wrapper"),s=jQuery("#header-notifications"),o=jQuery("#header-meta"),c=jQuery(".filter-results-header-banner"),u=jQuery("#filter-spacer"),d=jQuery("html"),r.isExpanded=!0,n.isExpanded=!1,E(),w(),APP.pubsub.subscribe("resize",A),APP.pubsub.subscribe("scroll",T),APP.pubsub.subscribe("mediaQuery.small",C),APP.pubsub.subscribe("mediaQuery.medium",C),APP.pubsub.subscribe("mediaQuery.large",C),window.addEventListener("orientationchange",A),h.on("click",S),jQuery('[data-action="go-frontpage"]').off("click.go-frontpage").on("click.go-frontpage",x),window.pageYOffset&&window.scrollTo(0,window.pageYOffset-1),jQuery("#open-cart").click((function(){window.location="".concat(window.location.origin,"/").concat(Drupal.settings.hermes_url_locale,"/cart/")}));var l=jQuery('[data-login-v4="true"]');l.length>0&&!_.get("checkUserSessionToken")&&(l.unbind("click"),l.click((function(e){e.preventDefault(),e.stopPropagation(),window.location="".concat(window.location.origin,"/").concat(Drupal.settings.hermes_url_locale,"/login/v4/")})))}).bind(this)()};function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function $n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y()?this._srcAttributeName="data-src-mobile":this._srcAttributeName="data-src-desktop",this._scrollListener=this._displayBackgrounds.bind(this)}var t,r;return t=e,(r=[{key:"run",value:function(){window.addEventListener("load",this._load.bind(this))}},{key:"_load",value:function(){var e;this._$decorativeBackgrounds=function(e){if(Array.isArray(e))return Qn(e)}(e=document.getElementsByClassName("decorative-bg"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._displayBackgrounds(),window.addEventListener("scroll",this._scrollListener)}},{key:"_displayBackgrounds",value:function(){var e=this;window.requestAnimationFrame((function(){for(var t=Math.max(document.documentElement.clientHeight,window.innerHeight),r=0;r<e._$decorativeBackgrounds.length;){var i=e._$decorativeBackgrounds[r],n=i.getBoundingClientRect().top,a=i.clientWidth;if(n<=t){var s=i.getAttribute(e._srcAttributeName);i.setAttribute("style",'background-image: url("'.concat(s,"&wid=").concat(a,'")')),e._$decorativeBackgrounds.splice(r,1)}else r++}0===e._$decorativeBackgrounds.length&&window.removeEventListener("scroll",e._scrollListener)}))}}])&&$n(t.prototype,r),e}();function Bn(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showDrupalGeoBanner=Drupal.settings.show_geo_filtering_banner,this._cookieName="GeoFilteringBanner",this._$geoFilteringBanner=e._getElementByClassName(document,"geo-filtering-banner",!1),this._$geoFilteringBanner&&(this._$continueButton=e._getElementByClassName(this._$geoFilteringBanner,"continue",!0),this._$continueButton?(this._$selectCountryButton=e._getElementByClassName(this._$geoFilteringBanner,"js-locale-tray",!0),this._$selectCountryButton?(this._$closeButton=e._getElementByClassName(this._$geoFilteringBanner,"geo-close-notifications",!0),this._$closeButton||this.destroy()):this.destroy()):this.destroy())}var t,r,i;return t=e,i=[{key:"_getElementByClassName",value:function(e,t,r){var i=e.getElementsByClassName(t);return 1===i.length?i[0]:(r&&console.error('GeoFilteringBanner: There is not only one tag with class "'.concat(t,"\" in banner, don't know what to do.")),null)}}],(r=[{key:"run",value:function(){this._$geoFilteringBanner&&(this.showDrupalGeoBanner&&1===Drupal.settings.geo_filtering_banner&&!this._isCookie()?(this._setCookie(),this._showBannerByUserCountry()):this.destroy())}},{key:"destroy",value:function(){this._$geoFilteringBanner&&this._$geoFilteringBanner.parentElement.removeChild(this._$geoFilteringBanner),document.removeEventListener("click",this._destroyListener,!0),document.removeEventListener("keyup",this._keyupListener,!0),APP.pubsub.publish("geoFilteringBanner.destroy")}},{key:"_isCookie",value:function(){if(!document.cookie)return!1;for(var e=document.cookie.split(";"),t=0;t<e.length;t++)if(e[t].split("=")[0].trim()===this._cookieName)return!0;return!1}},{key:"_setCookie",value:function(){if(document.cookie){var e=new Date;e.setTime(e.getTime()+2592e6);var t=window.location.host.split(".");if(t.length>1){var r=".".concat(t[t.length-2],".").concat(t[t.length-1]);document.cookie="".concat(this._cookieName,"=1;expires=").concat(e.toUTCString(),";domain=").concat(r,";path=/")}else document.cookie="".concat(this._cookieName,"=1;expires=").concat(e.toUTCString(),";path=/")}}},{key:"_showBannerByUserCountry",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var t=this.getResponseHeader("x-geo-country");"string"!=typeof t&&(t="AA"),t===Drupal.settings.hermes_current_country.toUpperCase()?e.destroy():(e._showBanner(),APP.pubsub.publish("geoFilteringBanner.view",t))}},t.open("GET","".concat(document.location.origin,"/us/en/geo/")),t.send(null)}},{key:"_showBanner",value:function(){this._$geoFilteringBanner.style.display="block",this._destroyListener=this.destroy.bind(this),this._keyupListener=this._keyup.bind(this),this._$continueButton.addEventListener("click",(function(){var e=Drupal.settings.hermes_country.english_name.replace(/\s/g,"");APP.pubsub.publish("geoFilteringBanner.stayCountry",e)})),this._$closeButton.addEventListener("click",(function(){APP.pubsub.publish("geoFilteringBanner.close")})),document.addEventListener("click",this._destroyListener,!0),document.addEventListener("keyup",this._keyupListener,!0),this._$selectCountryButton.addEventListener("click",(function(){var e=document.getElementsByClassName("js-locale-tray");e.length>0&&e[0].click(),APP.pubsub.publish("geoFilteringBanner.switchCountry")}))}},{key:"_keyup",value:function(){event.key!==k.ENTER_KEY&&0!==event.offsetX&&0!==event.clientX||this.destroy()}}])&&Bn(t.prototype,r),i&&Bn(t,i),e}(),zn=0,Hn=function(e){zn++;var t=jQuery("#block-hermes-commerce-nav-search"),r=e.$target,i=e.$source,n=i.parents("form"),a=jQuery("#combobox-search"),s=jQuery(".header-search"),o=e.cb,c=!1;function u(){s.removeClass("show-suggestion"),a.attr("aria-expanded",!1),t.removeAttr("aria-activedescendant")}n.off("submit.suggest-".concat(zn," keyup.suggest-").concat(zn)).on("submit.suggest-".concat(zn," keyup.suggest-").concat(zn),(function(e){if(function(e){var i=r.find("li"),n=i.length-1,a=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e.eq(r).is(".active"))return r;return-1}(i),s=!1,o=!1;if(function(e){e.key===k.DOWN_KEY&&(o=!0),e.key===k.UP_KEY&&(s=!0),c=!0}(e),i.attr("aria-selected",!1),(e.key===k.ESCAPE_KEY||e.altKey)&&(t.val(""),u()),-1===a)o&&i.eq(0).addClass("active").attr("aria-selected",!0),s&&i.last().addClass("active").attr("aria-selected",!0);else{var l=a===n?o?0:s?a-1:a:o?a+1:s?a-1:a;i.removeClass("active").eq(l).addClass("active").attr("aria-selected",!0)}var d=r.find(".active");if(d.length){t.attr("aria-activedescendant",d[0].id);var h=r.parent().scrollTop(),p=d.position().top+h;r.parent().animate({scrollTop:p-void 0},"fast")}}(e),function(e){return(e.key===k.ENTER_KEY||"submit"===e.type)&&c}(e)&&r.find("li.active").length){var n=r.find("li.active span:first-child")[0].textContent;r.find("li.active")[0].click(),e.preventDefault(),e.stopPropagation(),t.val(n),i.blur()}!c&&o&&o(e),e.key!==k.UP_KEY&&e.key!==k.DOWN_KEY&&setTimeout((function(){c=!1}),100)})),e.suppressEvents||i.on("blur.suggest-".concat(zn),u)};function qn(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Gn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kn(e,t){if(e){if("string"==typeof e)return Wn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wn(e,t):void 0}}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Yn(e){if(Array.isArray(e))return e}function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}function Zn(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Jn=function(){function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseurl="",this.path="",this.queryParams="",this.fragment={params:[],pipedValues:[],keyword:""},Xn(t)){case"string":this._parse(t);break;case"undefined":break;default:throw"Invalid 'url' parameter, string expected, got: "+JSON.stringify(t)}}var t,r;return t=e,r=[{key:"build",value:function(){var e=this.baseurl;this.path&&(this.path.startsWith("/")||(e+="/"),e+=this.path),this.queryParams&&(e+=this.queryParams);var t=this._buildFragment(this.fragment);return t&&(e+="#"+t),e}},{key:"getFragmentParam",value:function(e){if("string"!=typeof e)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(e);return this.fragment.params.find((function(t){return t.key===e}))}},{key:"addFragmentParam",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("string"!=typeof e)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(e);if("string"!=typeof t)throw"Invalid 'value' parameter, string expected, got: "+JSON.stringify(t);if("boolean"!=typeof r)throw"Invalid 'updateIfExists' parameter, boolean expected, got: "+JSON.stringify(r);if(r){var i=this.getFragmentParam(e);if(i)return i.value=t,!0}return this.fragment.params.push({key:e,value:t}),!1}},{key:"removeFragmentParam",value:function(e){if("string"!=typeof e)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(e);for(var t=!1,r=this.fragment.params,i=r.length-1;i>=0;i--)r[i].key===e&&(r.splice(i,1),t=!0);return t}},{key:"_parse",value:function(e){var t=document.createElement("a");t.href=e;var r=t.protocol,i=t.hostname;this.path=t.pathname,this.path.startsWith("/")||(this.path="/"+this.path),"string"==typeof t.origin?this.baseurl=t.origin:this.baseurl=r+"//"+i,this.queryParams=t.search;var n=t.hash;n.startsWith("#")&&(n=n.substring(1)),this.fragment=this._parseFragment(n)}},{key:"_parseFragment",value:function(e){var t,r=function(e,t){return Yn(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||Kn(e,t)||Gn()}(e.split("||"),2),i=r[0],n=r[1],a=Yn(t=i.split("|"))||qn(t)||Kn(t)||Gn(),s=a[0],o=a.slice(1),c=[];s.split("&").forEach((function(e){if(""!==e){var t=e.split("=").map(decodeURIComponent);c.push({key:t[0],value:t[1]})}}));var u=o.map(decodeURIComponent);return{params:c,pipedValues:u,keyword:n}}},{key:"_buildFragment",value:function(e){var t,r=e.params.map((function(e){if(!e.key||!e.value)throw"Invalid fragment parameter, expected a object with key and value property, got: "+JSON.stringify(e);if("string"!=typeof e.key)throw"Invalid 'key' property of fragment parameter, expected a string, got: "+JSON.stringify(e.key);if("string"!=typeof e.value)throw"Invalid 'value' property of fragment parameter, expected a string, got: "+JSON.stringify(e.value);var t=encodeURIComponent(e.key),r=encodeURIComponent(e.value);return"".concat(t,"=").concat(r)})).join("&"),i=e.pipedValues.map(encodeURIComponent),n=[r].concat((t=i,function(e){if(Array.isArray(e))return Wn(e)}(t)||qn(t)||Kn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).join("|");if(e.keyword){if("string"!=typeof e.keyword)throw"Invalid 'keyword' of fragment, expected a string, got: "+JSON.stringify(e.keyword);n+="||"+e.keyword}return n}}],r&&Zn(t.prototype,r),e}(),ea={},ta=function(){var e,t,r={got4groups:1,got3groups:2,got1groups:4},i=_.get("currentStore"),n=jQuery(document),a=jQuery(".header-search"),s=jQuery(".header-logo"),o=a.find("form"),c=jQuery("#block-hermes-commerce-nav-search"),u=jQuery("#combobox-search"),l=o.find(".icon-search"),d=o.find(".btn.search-shrink"),h=a.find(".search-suggestion"),p={search:o.attr("action"),suggestion:"".concat(Drupal.settings.hermes_global.url_cde,"/search/suggest?term={term}&locale={locale}"),product:"".concat(Drupal.settings.hermes_global.url_cde,"/search/product/{product}")},f={suggestion:[]},m=APP.templates.suggestions,g=!1,v="",b=!1;function k(){var e;return function(t,r){window.clearTimeout(e),e=setTimeout(t,r)}}var w=new k,P=new k;function A(e){e&&e.preventDefault&&!b&&(e.preventDefault(),e.stopPropagation(),b=!0,a.addClass("expand-in"),s.addClass("search-expanded"),jQuery(e.target).is(c)||c.focus())}function S(){b&&(b=!1,c.trigger("blur"),s.removeClass("search-expanded"),P((function(){a.removeClass("expand-in"),a.removeClass("show-suggestion"),u.attr("aria-expanded",!1),c.removeAttr("aria-activedescendant")}),500))}function E(){return _.get("pastsearches")}function T(e,t,r){var i=new RegExp("("+v+")","gi");return t&&(e=e.splice(0,t)),jQuery.each(e,(function(t){var n,a,s=e[t],o=(n=s).searchterm||n.title||n.display_name||n.mlValue||n.indexTitle||n.short_title,c={hilite:o.replace(/Herm\u00c3\u00a8s/gi,"Hermès").replace(i,'<strong role="presentation">$1</strong>'),searchterm:o};if(0===jQuery("#block-hermes-commerce-nav-search").val().length&&(c.hilite=o.replace(/Herm\u00c3\u00a8s/gi,"Hermès").replace(i,"")),s.leafid&&(c.url=(a=s.leafid,(ea[(a||"").toUpperCase()]||{}).url)),"stores"===r&&(c.url="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.store+"/"+e[t].slug),"products"===r){c.action="find-product",c.product_link="#"+s.slug+"/"+s.sku||0;var u=(s.sku||s.secondary_id).replace(" ","v"),l="".concat(window.location.origin,"/").concat(Drupal.settings.hermes_url_locale);if("beltkits"!==s.perso_product_type&&"smallleathergoods"!==s.perso_product_type||"1"!==s.personalize){var d="".concat(l,"/product/").concat(s.slug,"-").concat(u),h=new Jn(d);c.product=h.build()}else c.product="".concat(l,"/product/").concat(s.perso_product_type,"/config/").concat(s.slug?s.slug+"-":"").concat(u,"/")}var p=e[t].secondid,f=e[t].nrResults;c.secondid=p,c.total=f,e[t]=c})),e}function x(){g=!0,D()}function D(){a.addClass("hide-past")}function O(i){!function(i,n){var s,o,c=[],u=0,l={recent:Drupal.settings.hermes_translations.search.recent,suggested:Drupal.settings.hermes_translations.search.suggested,suggestions:Drupal.settings.hermes_translations.search.suggestions,noSuggestions:Drupal.settings.hermes_translations.search.noSuggestions,items:Drupal.settings.hermes_translations.search.products,link:Drupal.settings.hermes_translations.search.link,urllocale:Drupal.settings.hermes_url_locale,searchurlkey:Drupal.settings.hermes_translations.url.search,pastsearches:{keywords:[]}};if(n.pastsearches||n.common){var d=(o=E()||[],((n.pastsearches||{}).keywords||[]).concat(o).filter((function(e,t,r){return r.indexOf(e)===t})));l.pastsearches.keywords=d.map((function(e){return{searchterm:e,hilite:e}}))}if(n.suggestionGroups&&n.suggestionGroups.length)n.suggestionGroups.forEach((function(e){u=e.suggestions.length?u+1:u})),n.suggestionGroups.forEach((function(e){var t=r["got ".concat(u," groups")],i={indexTitle:e.suggestions.length?e.indexTitle:null};"1keywords"===e.indexName?i.suggestions={keywords:T(e.suggestions)}:"2categories"===e.indexName?i.suggestions={categories:T(e.suggestions,t,null)}:"3products"===e.indexName?i.suggestions={products:T(e.suggestions,t,"products")}:"4content"===e.indexName?i.suggestions={content:T(e.suggestions,t,null)}:"5stores"===e.indexName&&(i.suggestions={stores:T(e.suggestions,t,"stores")}),c.push(i)})),c.push(c.shift());else{g||a.removeClass("hide-past");var h=l.pastsearches.keywords.length?3:5;if(n&&n.common&&n.common.length){var f={indexTitle:"Presuggest",categories:T(n.common[0],h,null)};c.push(f)}}l.suggestionGroups=c,function(e){t=0,e.suggestionGroups.forEach((function(r,i){var n=Object.keys(e.suggestionGroups[i].suggestions)[0];e.suggestionGroups[i].suggestions[n].forEach((function(r,a){e.suggestionGroups[i].suggestions[n][a].suggestId="suggest-item-"+t,t++}))}))}(l),e||(e=[]),e.length||l.pastsearches.keywords.length?i.removeClass("no-prev"):i.addClass("no-prev"),s=e.length;for(var y=0;y<s;y++)l.pastsearches.keywords.push({searchterm:e[y]});!function(e,r){t>0&&jQuery("#search-suggest-label span").html("".concat(r.suggestions,'<span class="sr-only">, ').concat(t," ").concat(r.items,"</span>")),0===t&&jQuery("#search-suggest-label span").text(r.noSuggestions),e.find("dd").remove(),e.append(C().render(m,r)).on("click","li",(function(e){var t,r=jQuery(e.currentTarget),i=r[0].dataset.link;r.is("[data-action]")&&"#/"!==i.substring(0,2)?(e.preventDefault(),jQuery.when((t=r.data("link").replace("#",""),jQuery.ajax({url:p.product.replace("{product}",t),type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}}).fail((function(e){console.error("error fetching product suggestion: ",e)})))).then(I)):(e.preventDefault(),window.location.href=r.data("href"))}))}(i,l)}(h,i)}function j(){a.addClass("show-suggestion"),u.attr("aria-expanded",!0),jQuery.when(function(){var e,t;if(e=c.val(),v=e?e.replace(/https?:\/\//gi,"").replace(/\//g,""):"",D(),void 0!==i){var r=i.split("_"),n=r[0],a=r[1];if(n&&a)return t=p.suggestion.replace("{term}",v).replace("{locale}",i),(v?f.suggestion[v]:null)||jQuery.ajax({url:t,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}}).fail((function(e){console.error("error fetching suggestion: ",e)}));console.error("the country or language are incorrect => Country : "+n+" language : "+a)}else console.error("the lang variable is in the wrong format "+i)}()).then(O)}function I(e){e.url&&(window.location.href="/"+Drupal.settings.hermes_url_locale+e.url)}!function(){if(a.length){l.off("click.search-bar").on("click.search-bar",(function(e){A(e),c.blur((function(){this.value&&o.submit()}))})),jQuery('[data-action="open-search"]').off("click.open-search").on("click.open-search",A),a.off("focusin.search-bar").on("focusin.search-bar",A),c.on("blur",S),d.on("mousedown",(function(){c.val("")})),y()||APP.pubsub.subscribe("scroll",S),o.off("submit.search-bar").on("submit.search-bar",(function(){if(!c.val().length)return!1})),a.off("click.search-bar").on("focus.search-bar",".search-past-search .close",x),E(),n.off("mouseup.search-bar").on("mouseup.search-bar",(function(e){a.has(e.target).length||(n.off("mouseup.search-bar"),S())})),c.off("keyup.search-bar focus.search-bar").on("keyup.search-bar focus.search-bar",(function(e){e.keyCode&&-1!==[27,13,40,38].indexOf(e.keyCode)||(e.preventDefault(),e.stopPropagation(),w(j,50))})),new Hn({$target:h,$source:c,suppressEvents:!0});var e={};for(var t in Drupal.settings.hermes_categories)e[t]=Drupal.settings.hermes_categories[t];for(var r in Drupal.settings.hermes_editorial_menus)e[r]=Drupal.settings.hermes_editorial_menus[r];APP.pubsub.publish("tray-nav-init",e),i=Drupal.settings.hermes_categories,function e(t){for(var r=0,i=t.length;r<i;r++){var n=t[r];if(n.subcategories&&e(n.subcategories),ea[n.pim_code]&&n.path&&ea[n.pim_code].rank<n.path.split("/").length)return;n.path?ea[n.pim_code]={url:n.path,rank:n.path.split("/").length}:console.error("searchBar.procCats: no category path information for current category. Information from /ajax/product-category is likely incorrect")}}(jQuery.map(i,(function(e){return[e]})))}var i}()};function ra(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ia=function(){function e(t,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageWrapper=jQuery(".page-wrapper"),this.isMobile=y(),this.device=this.isMobile?"mobile":"desktop",this.template=t,this.targetSelector="".concat(r),this.data=i,this.targetElement=jQuery(this.targetSelector),this.notification=jQuery("<div>").addClass("globale-notification").addClass("globale-notification-"+this.device).append(C().render(APP.templates[this.template])),this.overlay=jQuery(".global-notification-overlay"),this.subMessage=this.notification.find(".sub-message"),this.addAccessibilityOnModal(),this.addNotificationToDom()}var t,r;return t=e,r=[{key:"addAccessibilityOnModal",value:function(){this.notification.attr("role","dialog"),this.notification.attr("aria-labelledby","notification-message")}},{key:"addNotificationToDom",value:function(){this.pageWrapper.append(this.notification),this.toggleSubMessage(),this.bindEvents()}},{key:"bindEvents",value:function(){jQuery(".notification-cta").click(this.openCartTray.bind(this)),jQuery(".notification-close").click(this.clickToCloseNotification.bind(this)),jQuery(document).on("click touchstart",".global-notification-overlay",this.hideNotification.bind(this)),jQuery(document).on("keydown",this.checkEscPress.bind(this)),jQuery(document).on("click.hideNotification",this.checkOutsideNotificationClick.bind(this)),APP.pubsub.subscribe("tray.trigger.click",this.hideNotification.bind(this))}},{key:"showNotification",value:function(){this.isMobile?this.showMobileNotification():this.scrollUpAndShowNotification(),P.trapFocusInTray(this.notification)}},{key:"showMobileNotification",value:function(){this.showOverlay(),this.notification.addClass("open"),P.setFocusOnElement(".notification-close")}},{key:"showDesktopNotification",value:function(){this.attachNotificationToTarget(),this.notification.addClass("open"),P.setFocusOnElement(".notification-close")}},{key:"scrollUpAndShowNotification",value:function(){TweenLite.to(window,.5,{scrollTo:{y:0,x:0},ease:window.Power2.ease,onComplete:this.showDesktopNotification.bind(this)})}},{key:"showOverlay",value:function(){this.overlay.addClass("visible")}},{key:"hideNotification",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.notification.html().length>0&&(this.hideOverlay(),this.notification.addClass("close").removeClass("open"),setTimeout((function(){e.notification.remove(),jQuery(document).unbind("click.hideNotification")}),500),t&&P.setFocusOnElement(".page-cart-button"))}},{key:"hideOverlay",value:function(){this.overlay.removeClass("visible")}},{key:"attachNotificationToTarget",value:function(){var e=this.getTargetOffset();this.notification.css({top:e.top,right:e.right})}},{key:"getTargetOffset",value:function(){var e=parseInt(window.getComputedStyle(document.querySelector(".globale-notification"),":before").getPropertyValue("right"),10),t=[];return t.top=jQuery(this.targetElement).offset().top+jQuery(this.targetElement).outerHeight(!0),t.right=document.body.offsetWidth-(jQuery(this.targetElement).offset().left+jQuery(this.targetElement).outerWidth(!0)+e/2),t}},{key:"openCartTray",value:function(){this.hideNotification(!1),APP.pubsub.publish("analytics.viewCartFromNotification"),APP.pubsub.publish("gtm.openCart",this.data),window.location="".concat(window.location.origin,"/").concat(Drupal.settings.hermes_url_locale,"/cart/")}},{key:"clickToCloseNotification",value:function(){this.hideNotification(),APP.pubsub.publish("analytics.closeAddtoCartNotification")}},{key:"checkEscPress",value:function(e){e&&e.keyCode===k.ESCAPE_KEYCODE&&this.hideNotification()}},{key:"checkOutsideNotificationClick",value:function(e){this.notification.is(e.target)||0!==this.notification.has(e.target).length||this.hideNotification()}},{key:"toggleSubMessage",value:function(){this.hasComplimentaryDelivery()||this.subMessage.hide()}},{key:"hasComplimentaryDelivery",value:function(){return this.data.basket.has_complimentary_delivery}}],r&&ra(t.prototype,r),e}(),na=ia;function aa(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var sa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"init",value:function(){APP.pubsub.subscribe("analyticsCart.add",this.addOrRemoveProduct),APP.pubsub.subscribe("analyticsCart.remove",this.addOrRemoveProduct)}},{key:"addOrRemoveProduct",value:function(e,t){var r,i,n,a=t.items,s="analyticsCart.add"===e?"addToCart":"removeFromCart",o="analyticsCart.add"===e?"add":"remove",c=Et.mapProducts(a);dataLayer.push({event:s,ecommerce:(r={currencyCode:APP.CURRENCY_MAP[_.get("currentStore")].code},i=o,n={products:c},i in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n,r)})}}])&&aa(t.prototype,r),e}(),oa=function(){var e,t;function r(e){if((e.basket&&e.basket.items.length)<1&&_.get("user")&&_.get("user").basket.items.length>1){var t=_.get("user");return t.basket=e.basket,_.set("user",t),APP.pubsub.publish("cart.update",{basket:_.get("user").basket}),APP.pubsub.publish("gtm.basket",{basket:_.get("user").basket}),Y({message:Drupal.settings.hermes_translations.notification.checkout.emptyCart,type:"critical"}),!0}return!1}function i(e){if(e.error)n(e);else{if(q("loader-button-add-to-cart"),jQuery(".cart-tray").hasClass("invisible")&&new na("addToCart","#open-cart",e).showNotification(),r(e))return!0;s(e,_.get("total_items")>e.basket.total_items),o(e)}}function n(e){var t=e.error&&e.error.internal_code,r=Drupal.settings.hermes_translations.notification.cart[t],i=void 0!==e.error.name?e.error.name:"",n={message:r,messageVariables:{locale:"/"+Drupal.settings.pathPrefix,title:i}};n.message?(Y(n),APP.pubsub.publish("analytics.oops.error",{path:window.location.pathname,message:Drupal.settings.hermes_translations.notification.cart[t].description})):(te(),APP.pubsub.publish("analytics.oops.error",{path:window.location.pathname,message:Drupal.settings.hermes_translations.notification.account.errorMessage.description})),e.basket&&APP.pubsub.publish("cart.update",e),q("loader-button-add-to-cart")}function a(e){if(e.error)n(e);else{if(r(e))return!0;if(e.deleted_items&&e.deleted_items[0]&&e.deleted_items[0]["ecom.item_type"]){var t=e.deleted_items[0];"double"!==t["ecom.item_type"]&&"set"!==t["ecom.item_type"]||jQuery.each(t.set_items,(function(e,t){t.in_stock}))}s(e,!0),o(e)}}function s(r,i){_.set("total_items",r.basket&&r.basket.total_items||0),e.innerHTML=_.get("total_items")||"";var n=i?"analyticsCart.remove":"analyticsCart.add",a=r.deleted_items||function(e){return e.filter((function(e){return t.filter((function(t){return t.sku===e.sku})).length}))}(r.basket.items);r.cartChange=!0,APP.pubsub.publish(n,{items:a}),APP.pubsub.publish("cart.update",r)}function o(e){var t=_.get("user")||{};t.basket=e.basket,_.set("shipping_method",t.basket.default_shipping_method),_.set("user",t)}(new sa).init(),document.querySelector("#page-header")&&(e=document.querySelector("#open-cart .header-count"),APP.pubsub.subscribe("addToCart",(function(e,r){var a=Array.isArray(r);if(APP.pubsub.publish("tray.cart.reset.variable"),!a&&!r.sku)throw new Error("Cant undefined SKU to cart");H("loader-button-add-to-cart");var s=a?r:[r];t=s,ue("/basket/add",{items:s}).done(i).fail(n)})),APP.pubsub.subscribe("updateCart",(function(e,r){ue("/basket/set",{items:t=[r]}).done(i).fail(n)})),APP.pubsub.subscribe("removeProduct",(function(e,r){ue("/basket/delete",{items:t=[r]}).done(a).fail(n)})),jQuery(document).on("click",".notif-open-cart",(function(){APP.pubsub.publish("tray.cart.open")})))};function ca(e){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(e)}var ua=function(){var e,t,r="/is-logged-in",i="ereservation",n=document.querySelector(".tray-content-wrapper"),a=jQuery("#tray-account"),s=this,o="account.loggedin.DOM",c="account.loggedout.DOM",u="loader-sign-in-tray",l="cart.update",d="gtm.basket",h="tray-account",p="account-signed-out",f="disabled-button";function m(){var e=Drupal.settings.hermes_restricted_urls,t="";if(e){e.forEach((function(e){t+="("+e+")|"})),t=t.slice(0,-1);var r=new RegExp("/(".concat(t,")"));window.location.pathname.match(r)&&(window.location.href="/"+Drupal.settings.hermes_url_locale)}}function g(){_.deleteItem("checkUserSessionToken"),_.deleteItem("newsletterStatus"),_.deleteItem("user"),_.deleteItem("isConnected"),_.deleteItem("sessionNeedsRefresh"),APP.pubsub.publish("account.loggedout.state"),m()}function y(){q(u),te(),g()}function v(e){if("object"===ca(e)){if(_.get("cookieEndOfTime")||_.set("cookieEndOfTime",Date.now()+1e3*parseInt(e.lifetime,10)),e.basket&&(APP.basketCount=e.basket.total_items,_.set("changeLanguage",!1),_.set("sessionNeedsRefresh",!1)),e.user){var t=e.user;APP.pubsub.publish(o),t.basket=e.basket,t["mini-wishlist"]=null,_.set("checkUserSessionToken",!0),_.set("user",t),_.set("isConnected",!0)}else g();if(e.basket&&e.basket.items.length){var r=_.get("user")||{};r.basket=e.basket,_.set("user",r),APP.pubsub.publish(l,e),APP.pubsub.publish(d,e)}APP.pubsub.publish("account.loggedin.CheckDone")}else g()}function b(){throw _.deleteItem("checkUserSessionToken"),_.deleteItem("user"),_.set("sessionNeedsRefresh",!0),q(u),new Error("Error with service call loggedInCheckFail")}function k(e){401===e.responseJSON.code?s.httpSessionEnded():(q(u),te())}this.init=function(){this.resetPasswordUrlHash(),this.bind()},this.bind=function(){APP.pubsub.subscribe("account.login.call",this.userLogin.bind(this)),APP.pubsub.subscribe("pipl.checkbox.trayAccount",this.toggleLoginButton.bind(this)),APP.pubsub.subscribe("pipl.checkbox.checked",this.toggleCreateAccountButton.bind(this)),APP.pubsub.subscribe("account.login.done",this.preloginDone.bind(this)),APP.pubsub.subscribe("account.logout",this.userLogout.bind(this)),APP.pubsub.subscribe("account.notification.signInReload",this.reloadAfterClick.bind(this)),APP.pubsub.subscribe("account.checkSession",this.checkUserSession.bind(this)),APP.pubsub.subscribe("account.loggedout.state",this.accountLoggedOut.bind(this)),APP.pubsub.subscribe(o,this.handleLoggedIn.bind(this)),APP.pubsub.subscribe(o,this.profileEditHandleNewsletter.bind(this)),APP.pubsub.subscribe(c,this.handleLoggedOut.bind(this)),APP.pubsub.subscribe(c,this.initLoginV4Buttons),APP.pubsub.subscribe("account.httpsession.expired",this.httpSessionEnded),APP.pubsub.subscribe("account.httpsession.logged-out",this.httpSessionLoggedOut)},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.toggleButton=function(e,t){jQuery(t).is(":checked")?jQuery(e).prop("disabled",!1).removeClass(f):jQuery(e).prop("disabled",!0).addClass(f)},this.toggleLoginButton=function(){this.toggleButton("#loginButton","#tray-account-pipl-checkbox"),jQuery("#tray-account-pipl-checkbox").is(":checked")?jQuery('[data-social="login"]').removeClass("pipl-not-checked"):jQuery('[data-social="login"]').addClass("pipl-not-checked")},this.toggleCreateAccountButton=function(){this.toggleButton("#edit-submit-button","#create-account-pipl-checkbox")},this.initLoginV4Buttons=function(){var e=jQuery('[data-login-v4="true"]');e.length>0&&!_.get("checkUserSessionToken")&&(e.unbind("click"),e.click((function(e){e.preventDefault(),e.stopPropagation(),window.location="".concat(window.location.origin,"/").concat(Drupal.settings.hermes_url_locale,"/login/v4/")})))},this.userLogin=function(t,r){var i=r.serverReqData;this.loginSource=r.source?r.source:"",e=r.$loginForm,r.$emailField?this.$loginEmailField=r.$emailField:(this.$phoneCodeField=r.$phoneCodeField,i.phonecode=i.phonecode.replace(/ /g,""),this.$phoneNumberField=r.$phoneNumberField,i.phonenumber=i.phonenumber.replace(/ /g,"")),this.$passwordField=r.$passwordField,jQuery.extend(r,{locale:_.get("currentStore")}),this.validator=new _e({inputs:e.find("input")}),ue("/login",i).done(this.loginDone.bind(this)).fail(y.bind(this))},this.preloginDone=function(e,t){this.loginDone(t.jqXHR,t.source)},this.loginFail=function(e){_.deleteItem("newsletterStatus"),_.set("isConnected",!1),P.needPhoneLogin()?(this.validator.throwError({input:this.$phoneNumberField[0],error:"".concat(Drupal.settings.hermes_translations.inline_notification.login.genericError.text,", ")}),jQuery("#hermes-account-login-form-error-loginphone").addClass("hidden"),this.$phoneNumberField.focus()):(this.validator.throwError({input:this.$loginEmailField[0],error:"".concat(Drupal.settings.hermes_translations.inline_notification.login.genericError.text,", ")}),jQuery("#hermes-account-login-form-error-email").addClass("hidden"),this.$loginEmailField.focus()),this.validator.throwError({input:this.$passwordField[0],error:Drupal.settings.hermes_translations.inline_notification.login.genericError.text}),this.validator.scrollToError(),APP.pubsub.publish(c,{reason:"loginFail"}),"checkout"===this.loginSource?Ye.loginFormSuccess("Checkout_login","PasswordKO",e):this.loginSource===i?Ye.ereservationLogin(e):Ye.loginFormSuccess("Account","SigninKO",e),q(u),J()},this.loginDone=function(n,a){var c,p="wechat",f="#loginButton";"object"!==ca(n)&&(te(),g());var m,y=Drupal.settings.hermes_translations.inline_notification.login.genericError.text;if(this.clearAngularCheckout(),n.error)if(n.error.internal_code){var k=n.error.internal_code;switch(k){case"2300001":c=P.needSmsProvider()?"Wrong phone number - ".concat(y):"Wrong email - ".concat(y),this.loginFail(c);break;case"2310001":c="Wrong password - ".concat(y),this.loginFail(c);break;case"3100001":c="User is blocked",this.loginFail(c),APP.pubsub.publish("analytics.oops.error",{path:window.location.pathname,message:Drupal.settings.hermes_translations.notification.account.loginCodes[3100001].description}),jQuery(".alert").show(),jQuery(".alert-message").empty().append(Drupal.settings.hermes_translations.notification.account.loginCodes[k].title+" "+Drupal.settings.hermes_translations.notification.account.loginCodes[k].description),jQuery(".alert-link").empty().append(Drupal.settings.hermes_translations.notification.account.loginCodes[k].variables.link1),jQuery(".alert").attr("role","alert"),jQuery(".alert").attr("aria-live","assertive"),jQuery("#link-tray-help").focus(),jQuery(f).addClass("disabled"),document.getElementById("loginButton").disabled=!0,setTimeout((function(){jQuery(".alert").hide(),document.getElementById("loginButton").disabled=!1,jQuery(f).removeClass("disabled")}),18e5);break;default:this.inlineMessageGenericError()}}else q(u),te(),g();if(n.user)if(this.$passwordField&&this.$passwordField.val().length<8)m=y,t||(s.$passwordField.parent("div").after('<p class="error-message-copy">\n          <svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n            <use xlink:href="#exclamation-mark"></use>\n          </svg>\n          <span class="sr-only">'.concat(Drupal.settings.hermes_translations.validation.error_on_input_icon,"</span> ").concat(m,"\n         </p>")),t=e.find(".error-message, .error-message-copy")),c="Wrong password - ".concat(y),this.loginFail(c);else{var w,A=n.user;if(_.set("isConnected",!0),window.APP.NOTIFICATIONS.messages={prefix:A.prefix,firstname:A.firstname,lastname:A.lastname},q(u),x(h,"login"),Object.prototype.hasOwnProperty.call(n.user,"new_account")||(n.user.new_account=0),"create"!==a&&!n.user.new_account&&n.user.wechatlinked&&x("tray-wechat-binding","wechat-binding"),A.cart=null,A["mini-wishlist"]=null,A.basket=n.basket,_.set("user",A),_.set("checkUserSessionToken",!0),_.set("returningUser",!0),a===p&&_.get("user")&&(APP.pubsub.publish(l,{basket:_.get("user").basket}),APP.pubsub.publish(d,{basket:_.get("user").basket})),a===i&&APP.pubsub.publish(o),a!==p&&a!==i&&APP.pubsub.publish(o),A.newsletter_subscription&&null!==A.newsletter_subscription&&_.set("newsletterStatus","subscribed"),APP.pubsub.publish(l,n),"WeChat"===n.user.device.device&&n.user.social.authorize_url)return _.set("social_login_from_checkout","checkout"===this.loginSource),_.set("registerSocialContextUrl",window.location.href),void(window.location.href=n.user.social.authorize_url);a!==p?"checkout"===this.loginSource?(window.location.href="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/",Ye.loginFormSuccess("Checkout_login","PasswordOK")):this.loginSource===i?(Ye.ereservationLogin(),Er.openTrayRequestConfirm()):(ue(r,{},"GET").done(v).fail(b),Ye.loginFormSuccess("Account","SigninOK"),P.isChina()&&!0===Drupal.settings.hermes_account.pipl_checkbox_activated&&Ye.pushEvent("account","signin","optin pipl",null,null),_.get("close-account")&&(_.deleteItem("close-account"),APP.trayController.popStack())):(!0===_.get("social_login_from_checkout")?(w="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/",Ye.loginFormSuccess("Checkout_login","PasswordOK")):w=_.get("registerSocialContextUrl"),setTimeout((function(){window.location.href=w}),4e3))}},this.inlineMessageGenericError=function(){_.deleteItem("user"),_.deleteItem("newsletterStatus"),_.deleteItem("checkUserSessionToken"),_.set("isConnected",!1);var e=Drupal.settings.hermes_translations.inline_notification.login.genericError.text;P.needSmsProvider()?(this.validator.throwError({input:this.$phoneNumberField[0],error:"".concat(e,", ")}),this.$phoneNumberField.closest("div").find(".error-loginphone").addClass("hidden"),this.$phoneNumberField.focus()):(this.validator.throwError({input:this.$loginEmailField[0],error:"".concat(e,", ")}),this.$loginEmailField.closest("div").find(".error-email").addClass("hidden"),this.$loginEmailField.focus()),this.validator.throwError({input:this.$passwordField[0],error:e}),this.validator.scrollToError(),APP.pubsub.publish(c),J(),APP.trayController.triggerTray({name:h,dontAdd:!0}),"checkout"===this.loginSource?(APP.pubsub.publish("tray.create-account.toggle",{source:"checkout",errorMessage:e}),Ye.loginFormSuccess("Checkout_login","PasswordKO",e)):this.loginSource===i?Ye.ereservationLogin(e):Ye.loginFormSuccess("Account","SigninKO",e)},this.userLogout=function(e,t){ue("/logout").done(this.logoutDone.bind(this,t)).fail(k.bind(this))},this.clearAngularCheckout=function(){localStorage.removeItem("checkout")},this.logoutDone=function(e,t){var r=t.user;this.clearAngularCheckout(),r?(window.APP.NOTIFICATIONS.messages={prefix:r.prefix,firstname:r.firstname,lastname:r.lastname},x(e,"logout"),a.attr("aria-atomic",!0),_.deleteItem("user"),_.deleteItem("newsletterStatus"),_.deleteItem("checkUserSessionToken"),_.set("isConnected",!1),APP.pubsub.publish(c,{reason:"userLogout"}),m()):this.httpSessionEnded()},this.accountLoggedOut=function(){window.csrfEnabled=!0,APP.pubsub.publish("csrfToken.headerAdded"),n.classList.add(p)},this.httpSessionLoggedOut=function(){m()},this.httpSessionEnded=function(){var e=_.get("currentCountry"),t={message:Drupal.settings.hermes_translations.notification.sessionEnd,messageVariables:{country:Drupal.settings.hermes_translations.countries[e]},type:"critical"};jQuery.extend(t.messageVariables,Drupal.settings.hermes_translations.notification.sessionEnd.variables),Y(t),_.deleteItem("isConnected"),_.deleteItem("user"),_.deleteItem("newsletterStatus"),_.deleteItem("checkUserSessionToken"),_.deleteItem("productHistory"),APP.pubsub.publish(c,{reason:"sessionEnd"})},this.checkUserSession=function(){_.get("cookieEndOfTime")<Date.now()&&(_.set("sessionNeedsRefresh",!0),_.deleteItem("cookieEndOfTime")),P.findGetParameter("code")&&this.handleWechatSocialId(),_.get("sessionNeedsRefresh")||_.get("changeLanguage")&&_.get("isConnected")||_.get("changeLanguage")&&!_.get("sessionNeedsRefresh")?ue(r,{},"GET",!0).done(v).fail(b):APP.pubsub.publish(o)},this.handleWechatSocialId=function(){var e={code:P.findGetParameter("code")};1===_.get("social_login")?(V(),z(),ue("/unionid",e).done(this.unionIdDone.bind(this)).fail(this.openidError.bind(this))):ue("/openid",e).done(this.openidDone.bind(this)).fail(this.openidError.bind(this))},this.openidDone=function(e){if(e.openid){if(_.set("openid",e.openid),!0===_.get("social_login_from_checkout"))return void(window.location.href="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/");if(_.get("registerSocialContextUrl")&&!_.get("registerSocialContextUrl").includes("/".concat(Drupal.settings.hermes_translations.url.account_create)))return void(window.location.href=_.get("registerSocialContextUrl"))}},this.unionIdDone=function(e){var t=_.get("user");if(e.is_binded_wechat)return t.is_binded_wechat=e.is_binded_wechat,_.set("user",t),jQuery("#profile-content").html(C().render(APP.templates.userProfileAsia,t)),Y({message:window.Drupal.settings.hermes_translations.notification.account.linkWechat,messageVariables:window.Drupal.settings.hermes_translations.notification.account.linkWechat.variables}),void APP.trayController.getTray({name:"tray-edit-profile"}).open();e.openid&&_.set("openid",e.openid),_.deleteItem("social_login"),1===e.success?(_.set("wechat_social_login",!0),APP.trayController._getTrayInstance({name:"tray-wechat-binding"}).open(),J()):e.error&&"3000011"===e.error.internal_code?Y({message:window.Drupal.settings.hermes_translations.notification.account.linkWechatError,messageVariables:window.Drupal.settings.hermes_translations.notification.account.linkWechatError.variables}):(J(),0===e.success?this.openidError(e):(APP.trayController.triggerTray({name:h}),delete e.user.social,APP.pubsub.publish("account.login.done",{jqXHR:e,source:"wechat"})))},this.openidError=function(){te()},this.handleLoggedIn=function(){window.csrfEnabled=!0,APP.pubsub.publish("csrfToken.headerAdded"),n&&(n.classList.remove(p),n.classList.add("account-signed-in"),_.get("user")&&(APP.pubsub.publish(l,{basket:_.get("user").basket}),APP.pubsub.publish(d,{basket:_.get("user").basket})))},this.handleLoggedOut=function(){n.classList.remove("account-signed-in"),n.classList.add(p)},this.profileEditHandleNewsletter=function(){if(jQuery(".page-profile").length){var e=_.get("user"),t=jQuery(".newsletter-block").parent();e.newsletter_subscription?(document.querySelector(".block-profile").classList.remove("not-subscribed"),t.removeClass("colored-background")):(document.querySelector(".block-profile").classList.add("not-subscribed"),t.addClass("colored-background"))}},this.reloadAfterClick=function(){window.location.reload()},this.resetPasswordUrlHash=function(){Drupal.settings.hermes_account&&Drupal.settings.hermes_account.reset_password_hash&&APP.pubsub.subscribe("app.start",(function(){APP.trayController.triggerTray({name:"tray-create-password",dontAdd:!0}),APP.pubsub.publish("tray.password.toggle")}))},this.init(),APP.pubsub.subscribe("app.start",(function(){new ze}))};function la(e){jQuery(".ink").remove();var t,r,i,n,a,s=e.currentTarget.querySelector(".ink");if(!s){var o=e.currentTarget,c=document.createElement("span");c.classList.add("ink"),o.appendChild(c),s=o.insertBefore(c,o.firstChild)}s.classList.remove("animate"),(a=e&&e.currentTarget?e.currentTarget.getBoundingClientRect():null)&&(t=Math.max(a.width,a.height),s.style.height=t+"px",s.style.width=t+"px",n=jQuery(e.currentTarget).offset(),r=e.pageX-n.left-t/2,i=e.pageY-n.top-t/2,s.classList.add("animate"),s.style.top=i+"px",s.style.left=r+"px")}var da=r(833),ha=r.n(da),pa=r(358),fa=r.n(pa),ma=function(){jQuery(document).ajaxSend((function(e,t,r){r.runTime=(new Date).getTime();var i=fa()&&fa().name?fa().name:"drupal";t.setRequestHeader("X-Hermes-Request-ID",i+"_"+ha()(JSON.stringify(r)))}))};function ga(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ya=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._init(),this._bind()}var t,r;return t=e,(r=[{key:"_init",value:function(){this.$wechatGrey=jQuery("#zone-click-wechat"),this.$closeButton=jQuery(".icon-close-wechat");var e=jQuery("#tooltip-wechat");P.isWechatInApp()&&e&&e.length>0&&e.addClass("wetchat-footer-without-qr")}},{key:"_bind",value:function(){this.$wechatGrey.on("click",this._showTooltipWeChat.bind(this)),this.$closeButton.on("click",this._hideTooltipWeChat.bind(this))}},{key:"_showTooltipWeChat",value:function(){jQuery("#tooltip-wechat").removeClass("hidden")}},{key:"_hideTooltipWeChat",value:function(){jQuery("#tooltip-wechat").addClass("hidden")}}])&&ga(t.prototype,r),e}();function va(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ba=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messageIndex=0,this.hideShowMore=!1,this.touchStartX=0,null!==(this.notificationBanner=document.getElementById("notification-banner"))&&(this.notifications=document.getElementById("carousel-notification"),this.messages=this.notifications.querySelectorAll("li"),this.close=this.notificationBanner.querySelector(".close"),this.previous=this.notificationBanner.querySelector(".previous"),this.next=this.notificationBanner.querySelector(".next"),this.showMore=this.notificationBanner.querySelector(".show-more"),this.bullets=this.notificationBanner.querySelectorAll(".bullets li"),this.setInvisibleLinksNavigation(0))}var t,r;return t=e,(r=[{key:"bind",value:function(){var e=this;this.notificationBanner&&(this.close.addEventListener("click",this.onCloseClick.bind(this)),this.previous&&this.previous.addEventListener("click",this.onPreviousClick.bind(this)),this.next&&this.next.addEventListener("click",this.onNextClick.bind(this)),this.messages.length>1&&(this.notificationBanner.addEventListener("touchstart",this.onTouchStart.bind(this)),this.notificationBanner.addEventListener("touchend",this.onTouchEnd.bind(this)),this.notificationBanner.addEventListener("touchmove",(function(e){e.preventDefault()}))),this.showMore.addEventListener("click",this.onShowMoreClick.bind(this)),this.bullets.forEach((function(t){t.children[0].addEventListener("click",e.onBulletClick.bind(e))})))}},{key:"onCloseClick",value:function(){this.notificationBanner.style.display="none",sessionStorage.setItem("hideNotifications","true")}},{key:"onPreviousClick",value:function(){this.scrollMessage(-1)}},{key:"onNextClick",value:function(){this.scrollMessage(1)}},{key:"onTouchStart",value:function(e){this.touchStartX=e.changedTouches[0].pageX}},{key:"onTouchEnd",value:function(e){var t=e.changedTouches[0].pageX;Math.abs(this.touchStartX-t)<30||(t<this.touchStartX&&this.scrollMessage(1),t>this.touchStartX&&this.scrollMessage(-1),e.preventDefault())}},{key:"onShowMoreClick",value:function(){this.messages.forEach((function(e){e.classList.remove("folded")})),this.setInvisibleLinksNavigation(this.messageIndex),this.showMore.style.display="none",this.hideShowMore=!0}},{key:"onBulletClick",value:function(e){var t=e.target.parentNode.parentNode.children,r=e.target.parentNode,i=Array.from(t).indexOf(r);this.scrollMessage(i-this.messageIndex)}},{key:"scrollMessage",value:function(e){var t=this,r=this.messageIndex+e;r<0?r=this.messages.length-1:r>=this.messages.length&&(r=0),this.notifications.style.transition="none",this.notifications.style.opacity="0",this.messages[this.messageIndex].classList.remove("current"),this.messages[r].classList.add("current"),setTimeout((function(){t.notifications.style.transition="",t.notifications.style.opacity="1"}),0),this.bullets[this.messageIndex].classList.remove("current"),this.bullets[r].classList.add("current"),this.setShowMoreVisibility(r),this.setInvisibleLinksNavigation(r),this.messageIndex=r}},{key:"setInvisibleLinksNavigation",value:function(e){var t=this;this.messages[e].querySelectorAll("a").forEach((function(r){r.offsetTop+r.offsetHeight>=t.messages[e].offsetTop+t.messages[e].offsetHeight?r.setAttribute("tabindex","-1"):r.removeAttribute("tabindex")}))}},{key:"setShowMoreVisibility",value:function(e){this.messages[e].clientHeight===this.messages[e].scrollHeight||this.hideShowMore?this.showMore.style.display="none":this.showMore.style.display="initial"}}])&&va(t.prototype,r),e}();r(3785),n(),s(),window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||c(),window.lazySizesConfig={},window.lazySizesConfig.init=!1,window.APP.CURRENCY_MAP={fr_fr:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},be_fr:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},lu_fr:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},pt_en:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},pl_en:{symbol:"zł",format:"%s %v",thousand:",",code:"PLN",decimal:"."},de_de:{symbol:"€",format:"%v %s",thousand:".",code:"EUR",decimal:","},es_es:{symbol:"€",format:"%v %s",thousand:".",code:"EUR",decimal:","},at_de:{symbol:"€",format:"%v %s",thousand:".",code:"EUR",decimal:","},uk_en:{symbol:"£",format:"%s%v",thousand:",",code:"GBP",decimal:"."},it_en:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},it_it:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},nl_en:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},be_en:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},ie_en:{symbol:"€",format:"%s%v",thousand:",",code:"EUR",decimal:"."},fi_en:{symbol:"€",format:"%s%v",thousand:",",code:"EUR",decimal:"."},ch_fr:{symbol:"CHF",format:"%v %s",thousand:" ",code:"CHF",decimal:","},ch_de:{symbol:"Fr.",format:"%v %s",thousand:".",code:"CHF",decimal:","},dk_en:{symbol:"DKK",format:"%s%v",thousand:",",code:"DKK",decimal:"."},se_en:{symbol:"SEK",format:"%s%v",thousand:",",code:"SEK",decimal:"."},no_en:{symbol:"NOK",format:"%s%v",thousand:",",code:"NOK",decimal:"."},cz_en:{symbol:"Kc",format:"%s%v",thousand:",",code:"CZK",decimal:"."},us_en:{symbol:"$",format:"%s%v",thousand:",",code:"USD",decimal:"."},ca_en:{symbol:"CA$",format:"%s%v",thousand:",",code:"CAD",decimal:"."},ca_fr:{symbol:"$CA",format:"%v %s",thousand:" ",code:"CAD",decimal:","},au_en:{symbol:"AU$",format:"%s%v",thousand:",",code:"AUD",decimal:"."},jp_ja:{symbol:"¥",format:"%s%v",thousand:",",code:"JPY",decimal:"",precision:"0"},jp_jp:{symbol:"¥",format:"%s%v",thousand:",",code:"JPY",decimal:"",precision:"0"},cn_en:{symbol:"¥",format:"%s%v",thousand:",",code:"CNY",decimal:"."},cn_zh:{symbol:"¥",format:"%s%v",thousand:",",code:"CNY",decimal:"."},sg_en:{symbol:"S$",format:"%s %v",thousand:",",code:"SGD",decimal:"."},my_en:{symbol:"RM",format:"%s %v",thousand:",",code:"MYR",decimal:"."},hk_en:{symbol:"HKD",format:"%s %v",thousand:",",code:"HKD",decimal:",",precision:"0"},mo_en:{symbol:"MOP",format:"%s %v",thousand:",",code:"MOP",decimal:",",precision:"0"},tw_en:{symbol:"NT$",format:"%s%v",thousand:",",code:"TWD",decimal:"."},kr_ko:{symbol:"₩",format:"%s %v",thousand:",",code:"KRW",decimal:".",precision:"0"},ri_en:{symbol:"SAR",format:"%s %v",thousand:",",code:"SAR",decimal:",",precision:"0"},dh_en:{symbol:"AED",format:"%s %v",thousand:",",code:"AED",decimal:",",precision:"0"},th_en:{symbol:"฿",format:"%s %v",thousand:",",code:"THB",decimal:",",precision:"0"},tw_zh:{symbol:"NT$",format:"%s %v",thousand:",",code:"TWD",decimal:",",precision:"0"},br_pt:{symbol:"R$",format:"%s %v",thousand:".",code:"BRL",decimal:",",precision:"0"}},window.APP.NOTIFICATIONS={},jQuery(document).ready((function(){(new t).init();var e=new ua,r=Drupal.settings.hermes_locale;Drupal.settings.instantiateHeader=void 0===Drupal.settings.instantiateHeader||Drupal.settings.instantiateHeader,Drupal.settings.instantiateTrays=void 0===Drupal.settings.instantiateTrays||Drupal.settings.instantiateTrays,_.get("currentStore")!==r&&(_.set("changeLanguage",!0),_.set("currentStore",r),_.set("currentCountry",Drupal.settings.hermes_current_country),_.set("currentLanguage",r.split("_")[1]));var i=Drupal.settings.currency_parameters.currency_code;window.APP.CURRENCY_MAP.pl_en.symbol="EUR"===i?"€":"zł",window.APP.CURRENCY_MAP.pl_en.code=i,e.checkUserSession(),-1!==window.location.pathname.indexOf("/"+Drupal.settings.hermes_translations.url.account_create)||window.location.pathname.includes("/tray")||_.set("registerContextUrl",window.location.href),APP.listener=new d(window,"window"),APP.scrollbarWidth=APP.listener.data.width-jQuery("body").innerWidth(),APP.trayController=new Mn(It.getPageType()),function(){var e="";for(var t in m)m[t]&&((e=window.matchMedia(m[t])).point=t,g(e),e.addListener(g))}(),window.lazySizesConfig.hFac=.4,y()?(window.lazySizesConfig.expand=1,window.lazySizesConfig.minSize=150,window.lazySizesConfig.loadHidden=!1,window.lazySizesConfig.loadMode=1):(window.lazySizesConfig.expand=300,window.lazySizesConfig.loadMode=2,document.getElementsByClassName("has-animation").length&&(window.lazySizesConfig.expFactor=3,window.lazySizesConfig.loadMode=3)),lazySizes.init(),Drupal.settings.instantiateHeader&&new Nn;var n=new Vn;APP.pubsub.subscribe("geoFilteringBanner.destroy",(function(){n=null})),(new ba).bind(),(new Un).run(),new ta,new oa,new It,n.run(),new Ye,new ma,new ya,jQuery("select").each((function(e,t){var r=jQuery(t),i=jQuery(r.find("option")[0]);""===i.val()&&"month"!==r.attr("name")&&(i.prop("disabled","disabled"),r.prop("selectedIndex")||i.attr("selected","selected"))})),jQuery(document).on("change","select",(function(e){var t,r,i=e.currentTarget;-1!==i.selectedIndex&&(t=i.options[i.selectedIndex].innerHTML,(r=i.parentNode.querySelector(".label"))&&(r.innerHTML=t))})),jQuery(document).on("change","#edit-subject-list",(function(){jQuery("#contact-us-form-content").addClass("hidden"),"-1"!==jQuery("#edit-subject-list").val()&&(jQuery("#contact-us-form-content").removeClass("hidden"),"JP"===_.get("currentCountry").toUpperCase()&&(jQuery("#edit-subject-list").val()===Drupal.settings.hermes_translations.emailReasonFurniture?jQuery("#contact-us-form-content .region-tray-email").removeClass("hidden"):jQuery("#contact-us-form-content .region-tray-email").addClass("hidden")),P.trapFocusInTray(jQuery("#tray-email")))})),jQuery(document).on("mousedown",".ripple-effect",la),jQuery(document).on("submit","form",(function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur()}));var a="x-xsrf-token";void 0===_.getCookie(a)&&wi("/sync-form",{},"GET",!0),jQuery.ajaxSetup({beforeSend:function(e,t){if(t.url.startsWith(Drupal.settings.hermes_global.url_backjs)){var r=_.getCookie(a);void 0!==t.header&&void 0!==t.header[a]||void 0===r||e.setRequestHeader(a,r)}return!0}}),APP.started=!0,APP.pubsub.publish("app.start"),jQuery("html").removeClass("hidden"),jQuery(document.body).prepend("<style>.body-noscroll, .tray-open, .tray-open .product-sidebar.is-stuck, .body-noscroll .product-sidebar.is-stuck {margin-right:"+APP.scrollbarWidth+"px;} .body-noscroll .affixed{width:calc(100% - "+APP.scrollbarWidth+"px);}</style>")}))}()}();
//# sourceMappingURL=app.js.map
;/*})'"*/
;/*})'"*/
